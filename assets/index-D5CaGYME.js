function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/AboutView-D7FFkskU.js","assets/AboutView-C6Dx7pxG.css"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();/**
* @vue/shared v3.4.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Uf(t,e){const n=new Set(t.split(","));return e?r=>n.has(r.toLowerCase()):r=>n.has(r)}const st={},Hi=[],On=()=>{},fS=()=>!1,sc=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),$f=t=>t.startsWith("onUpdate:"),At=Object.assign,Bf=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},mS=Object.prototype.hasOwnProperty,Ue=(t,e)=>mS.call(t,e),ye=Array.isArray,Wi=t=>Ya(t)==="[object Map]",ic=t=>Ya(t)==="[object Set]",o_=t=>Ya(t)==="[object Date]",Re=t=>typeof t=="function",vt=t=>typeof t=="string",us=t=>typeof t=="symbol",Je=t=>t!==null&&typeof t=="object",_E=t=>(Je(t)||Re(t))&&Re(t.then)&&Re(t.catch),gE=Object.prototype.toString,Ya=t=>gE.call(t),pS=t=>Ya(t).slice(8,-1),yE=t=>Ya(t)==="[object Object]",jf=t=>vt(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,ra=Uf(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),oc=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},_S=/-(\w)/g,or=oc(t=>t.replace(_S,(e,n)=>n?n.toUpperCase():"")),gS=/\B([A-Z])/g,bo=oc(t=>t.replace(gS,"-$1").toLowerCase()),ac=oc(t=>t.charAt(0).toUpperCase()+t.slice(1)),wh=oc(t=>t?`on${ac(t)}`:""),cs=(t,e)=>!Object.is(t,e),Yl=(t,e)=>{for(let n=0;n<t.length;n++)t[n](e)},mu=(t,e,n)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value:n})},qf=t=>{const e=parseFloat(t);return isNaN(e)?t:e},yS=t=>{const e=vt(t)?Number(t):NaN;return isNaN(e)?t:e};let a_;const vE=()=>a_||(a_=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function ya(t){if(ye(t)){const e={};for(let n=0;n<t.length;n++){const r=t[n],s=vt(r)?TS(r):ya(r);if(s)for(const i in s)e[i]=s[i]}return e}else if(vt(t)||Je(t))return t}const vS=/;(?![^(]*\))/g,ES=/:([^]+)/,IS=/\/\*[^]*?\*\//g;function TS(t){const e={};return t.replace(IS,"").split(vS).forEach(n=>{if(n){const r=n.split(ES);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e}function Tr(t){let e="";if(vt(t))e=t;else if(ye(t))for(let n=0;n<t.length;n++){const r=Tr(t[n]);r&&(e+=r+" ")}else if(Je(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const bS="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",wS=Uf(bS);function EE(t){return!!t||t===""}function AS(t,e){if(t.length!==e.length)return!1;let n=!0;for(let r=0;n&&r<t.length;r++)n=lc(t[r],e[r]);return n}function lc(t,e){if(t===e)return!0;let n=o_(t),r=o_(e);if(n||r)return n&&r?t.getTime()===e.getTime():!1;if(n=us(t),r=us(e),n||r)return t===e;if(n=ye(t),r=ye(e),n||r)return n&&r?AS(t,e):!1;if(n=Je(t),r=Je(e),n||r){if(!n||!r)return!1;const s=Object.keys(t).length,i=Object.keys(e).length;if(s!==i)return!1;for(const o in t){const a=t.hasOwnProperty(o),l=e.hasOwnProperty(o);if(a&&!l||!a&&l||!lc(t[o],e[o]))return!1}}return String(t)===String(e)}function SS(t,e){return t.findIndex(n=>lc(n,e))}const _r=t=>vt(t)?t:t==null?"":ye(t)||Je(t)&&(t.toString===gE||!Re(t.toString))?JSON.stringify(t,IE,2):String(t),IE=(t,e)=>e&&e.__v_isRef?IE(t,e.value):Wi(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[r,s],i)=>(n[Ah(r,i)+" =>"]=s,n),{})}:ic(e)?{[`Set(${e.size})`]:[...e.values()].map(n=>Ah(n))}:us(e)?Ah(e):Je(e)&&!ye(e)&&!yE(e)?String(e):e,Ah=(t,e="")=>{var n;return us(t)?`Symbol(${(n=t.description)!=null?n:e})`:t};/**
* @vue/reactivity v3.4.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let vn;class TE{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this.parent=vn,!e&&vn&&(this.index=(vn.scopes||(vn.scopes=[])).push(this)-1)}get active(){return this._active}run(e){if(this._active){const n=vn;try{return vn=this,e()}finally{vn=n}}}on(){vn=this}off(){vn=this.parent}stop(e){if(this._active){let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.scopes)for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);if(!this.detached&&this.parent&&!e){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0,this._active=!1}}}function Gf(t){return new TE(t)}function RS(t,e=vn){e&&e.active&&e.effects.push(t)}function bE(){return vn}function PS(t){vn&&vn.cleanups.push(t)}let Ys;class Hf{constructor(e,n,r,s){this.fn=e,this.trigger=n,this.scheduler=r,this.active=!0,this.deps=[],this._dirtyLevel=4,this._trackId=0,this._runnings=0,this._shouldSchedule=!1,this._depsLength=0,RS(this,s)}get dirty(){if(this._dirtyLevel===2||this._dirtyLevel===3){this._dirtyLevel=1,_i();for(let e=0;e<this._depsLength;e++){const n=this.deps[e];if(n.computed&&(CS(n.computed),this._dirtyLevel>=4))break}this._dirtyLevel===1&&(this._dirtyLevel=0),gi()}return this._dirtyLevel>=4}set dirty(e){this._dirtyLevel=e?4:0}run(){if(this._dirtyLevel=0,!this.active)return this.fn();let e=rs,n=Ys;try{return rs=!0,Ys=this,this._runnings++,l_(this),this.fn()}finally{u_(this),this._runnings--,Ys=n,rs=e}}stop(){var e;this.active&&(l_(this),u_(this),(e=this.onStop)==null||e.call(this),this.active=!1)}}function CS(t){return t.value}function l_(t){t._trackId++,t._depsLength=0}function u_(t){if(t.deps.length>t._depsLength){for(let e=t._depsLength;e<t.deps.length;e++)wE(t.deps[e],t);t.deps.length=t._depsLength}}function wE(t,e){const n=t.get(e);n!==void 0&&e._trackId!==n&&(t.delete(e),t.size===0&&t.cleanup())}let rs=!0,dd=0;const AE=[];function _i(){AE.push(rs),rs=!1}function gi(){const t=AE.pop();rs=t===void 0?!0:t}function Wf(){dd++}function Kf(){for(dd--;!dd&&fd.length;)fd.shift()()}function SE(t,e,n){if(e.get(t)!==t._trackId){e.set(t,t._trackId);const r=t.deps[t._depsLength];r!==e?(r&&wE(r,t),t.deps[t._depsLength++]=e):t._depsLength++}}const fd=[];function RE(t,e,n){Wf();for(const r of t.keys()){let s;r._dirtyLevel<e&&(s??(s=t.get(r)===r._trackId))&&(r._shouldSchedule||(r._shouldSchedule=r._dirtyLevel===0),r._dirtyLevel=e),r._shouldSchedule&&(s??(s=t.get(r)===r._trackId))&&(r.trigger(),(!r._runnings||r.allowRecurse)&&r._dirtyLevel!==2&&(r._shouldSchedule=!1,r.scheduler&&fd.push(r.scheduler)))}Kf()}const PE=(t,e)=>{const n=new Map;return n.cleanup=t,n.computed=e,n},pu=new WeakMap,Xs=Symbol(""),md=Symbol("");function yn(t,e,n){if(rs&&Ys){let r=pu.get(t);r||pu.set(t,r=new Map);let s=r.get(n);s||r.set(n,s=PE(()=>r.delete(n))),SE(Ys,s)}}function br(t,e,n,r,s,i){const o=pu.get(t);if(!o)return;let a=[];if(e==="clear")a=[...o.values()];else if(n==="length"&&ye(t)){const l=Number(r);o.forEach((c,d)=>{(d==="length"||!us(d)&&d>=l)&&a.push(c)})}else switch(n!==void 0&&a.push(o.get(n)),e){case"add":ye(t)?jf(n)&&a.push(o.get("length")):(a.push(o.get(Xs)),Wi(t)&&a.push(o.get(md)));break;case"delete":ye(t)||(a.push(o.get(Xs)),Wi(t)&&a.push(o.get(md)));break;case"set":Wi(t)&&a.push(o.get(Xs));break}Wf();for(const l of a)l&&RE(l,4);Kf()}function OS(t,e){var n;return(n=pu.get(t))==null?void 0:n.get(e)}const kS=Uf("__proto__,__v_isRef,__isVue"),CE=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(us)),c_=NS();function NS(){const t={};return["includes","indexOf","lastIndexOf"].forEach(e=>{t[e]=function(...n){const r=Fe(this);for(let i=0,o=this.length;i<o;i++)yn(r,"get",i+"");const s=r[e](...n);return s===-1||s===!1?r[e](...n.map(Fe)):s}}),["push","pop","shift","unshift","splice"].forEach(e=>{t[e]=function(...n){_i(),Wf();const r=Fe(this)[e].apply(this,n);return Kf(),gi(),r}}),t}function xS(t){const e=Fe(this);return yn(e,"has",t),e.hasOwnProperty(t)}class OE{constructor(e=!1,n=!1){this._isReadonly=e,this._isShallow=n}get(e,n,r){const s=this._isReadonly,i=this._isShallow;if(n==="__v_isReactive")return!s;if(n==="__v_isReadonly")return s;if(n==="__v_isShallow")return i;if(n==="__v_raw")return r===(s?i?WS:DE:i?xE:NE).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(r)?e:void 0;const o=ye(e);if(!s){if(o&&Ue(c_,n))return Reflect.get(c_,n,r);if(n==="hasOwnProperty")return xS}const a=Reflect.get(e,n,r);return(us(n)?CE.has(n):kS(n))||(s||yn(e,"get",n),i)?a:at(a)?o&&jf(n)?a:a.value:Je(a)?s?Yf(a):Sr(a):a}}class kE extends OE{constructor(e=!1){super(!1,e)}set(e,n,r,s){let i=e[n];if(!this._isShallow){const l=ro(i);if(!_u(r)&&!ro(r)&&(i=Fe(i),r=Fe(r)),!ye(e)&&at(i)&&!at(r))return l?!1:(i.value=r,!0)}const o=ye(e)&&jf(n)?Number(n)<e.length:Ue(e,n),a=Reflect.set(e,n,r,s);return e===Fe(s)&&(o?cs(r,i)&&br(e,"set",n,r):br(e,"add",n,r)),a}deleteProperty(e,n){const r=Ue(e,n);e[n];const s=Reflect.deleteProperty(e,n);return s&&r&&br(e,"delete",n,void 0),s}has(e,n){const r=Reflect.has(e,n);return(!us(n)||!CE.has(n))&&yn(e,"has",n),r}ownKeys(e){return yn(e,"iterate",ye(e)?"length":Xs),Reflect.ownKeys(e)}}class DS extends OE{constructor(e=!1){super(!0,e)}set(e,n){return!0}deleteProperty(e,n){return!0}}const VS=new kE,LS=new DS,MS=new kE(!0),zf=t=>t,uc=t=>Reflect.getPrototypeOf(t);function Sl(t,e,n=!1,r=!1){t=t.__v_raw;const s=Fe(t),i=Fe(e);n||(cs(e,i)&&yn(s,"get",e),yn(s,"get",i));const{has:o}=uc(s),a=r?zf:n?Jf:va;if(o.call(s,e))return a(t.get(e));if(o.call(s,i))return a(t.get(i));t!==s&&t.get(e)}function Rl(t,e=!1){const n=this.__v_raw,r=Fe(n),s=Fe(t);return e||(cs(t,s)&&yn(r,"has",t),yn(r,"has",s)),t===s?n.has(t):n.has(t)||n.has(s)}function Pl(t,e=!1){return t=t.__v_raw,!e&&yn(Fe(t),"iterate",Xs),Reflect.get(t,"size",t)}function h_(t){t=Fe(t);const e=Fe(this);return uc(e).has.call(e,t)||(e.add(t),br(e,"add",t,t)),this}function d_(t,e){e=Fe(e);const n=Fe(this),{has:r,get:s}=uc(n);let i=r.call(n,t);i||(t=Fe(t),i=r.call(n,t));const o=s.call(n,t);return n.set(t,e),i?cs(e,o)&&br(n,"set",t,e):br(n,"add",t,e),this}function f_(t){const e=Fe(this),{has:n,get:r}=uc(e);let s=n.call(e,t);s||(t=Fe(t),s=n.call(e,t)),r&&r.call(e,t);const i=e.delete(t);return s&&br(e,"delete",t,void 0),i}function m_(){const t=Fe(this),e=t.size!==0,n=t.clear();return e&&br(t,"clear",void 0,void 0),n}function Cl(t,e){return function(r,s){const i=this,o=i.__v_raw,a=Fe(o),l=e?zf:t?Jf:va;return!t&&yn(a,"iterate",Xs),o.forEach((c,d)=>r.call(s,l(c),l(d),i))}}function Ol(t,e,n){return function(...r){const s=this.__v_raw,i=Fe(s),o=Wi(i),a=t==="entries"||t===Symbol.iterator&&o,l=t==="keys"&&o,c=s[t](...r),d=n?zf:e?Jf:va;return!e&&yn(i,"iterate",l?md:Xs),{next(){const{value:u,done:h}=c.next();return h?{value:u,done:h}:{value:a?[d(u[0]),d(u[1])]:d(u),done:h}},[Symbol.iterator](){return this}}}}function Vr(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function FS(){const t={get(i){return Sl(this,i)},get size(){return Pl(this)},has:Rl,add:h_,set:d_,delete:f_,clear:m_,forEach:Cl(!1,!1)},e={get(i){return Sl(this,i,!1,!0)},get size(){return Pl(this)},has:Rl,add:h_,set:d_,delete:f_,clear:m_,forEach:Cl(!1,!0)},n={get(i){return Sl(this,i,!0)},get size(){return Pl(this,!0)},has(i){return Rl.call(this,i,!0)},add:Vr("add"),set:Vr("set"),delete:Vr("delete"),clear:Vr("clear"),forEach:Cl(!0,!1)},r={get(i){return Sl(this,i,!0,!0)},get size(){return Pl(this,!0)},has(i){return Rl.call(this,i,!0)},add:Vr("add"),set:Vr("set"),delete:Vr("delete"),clear:Vr("clear"),forEach:Cl(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(i=>{t[i]=Ol(i,!1,!1),n[i]=Ol(i,!0,!1),e[i]=Ol(i,!1,!0),r[i]=Ol(i,!0,!0)}),[t,n,e,r]}const[US,$S,BS,jS]=FS();function Qf(t,e){const n=e?t?jS:BS:t?$S:US;return(r,s,i)=>s==="__v_isReactive"?!t:s==="__v_isReadonly"?t:s==="__v_raw"?r:Reflect.get(Ue(n,s)&&s in r?n:r,s,i)}const qS={get:Qf(!1,!1)},GS={get:Qf(!1,!0)},HS={get:Qf(!0,!1)},NE=new WeakMap,xE=new WeakMap,DE=new WeakMap,WS=new WeakMap;function KS(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function zS(t){return t.__v_skip||!Object.isExtensible(t)?0:KS(pS(t))}function Sr(t){return ro(t)?t:Xf(t,!1,VS,qS,NE)}function VE(t){return Xf(t,!1,MS,GS,xE)}function Yf(t){return Xf(t,!0,LS,HS,DE)}function Xf(t,e,n,r,s){if(!Je(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const i=s.get(t);if(i)return i;const o=zS(t);if(o===0)return t;const a=new Proxy(t,o===2?r:n);return s.set(t,a),a}function ss(t){return ro(t)?ss(t.__v_raw):!!(t&&t.__v_isReactive)}function ro(t){return!!(t&&t.__v_isReadonly)}function _u(t){return!!(t&&t.__v_isShallow)}function LE(t){return ss(t)||ro(t)}function Fe(t){const e=t&&t.__v_raw;return e?Fe(e):t}function cc(t){return Object.isExtensible(t)&&mu(t,"__v_skip",!0),t}const va=t=>Je(t)?Sr(t):t,Jf=t=>Je(t)?Yf(t):t;class ME{constructor(e,n,r,s){this.getter=e,this._setter=n,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this.effect=new Hf(()=>e(this._value),()=>Xl(this,this.effect._dirtyLevel===2?2:3)),this.effect.computed=this,this.effect.active=this._cacheable=!s,this.__v_isReadonly=r}get value(){const e=Fe(this);return(!e._cacheable||e.effect.dirty)&&cs(e._value,e._value=e.effect.run())&&Xl(e,4),FE(e),e.effect._dirtyLevel>=2&&Xl(e,2),e._value}set value(e){this._setter(e)}get _dirty(){return this.effect.dirty}set _dirty(e){this.effect.dirty=e}}function QS(t,e,n=!1){let r,s;const i=Re(t);return i?(r=t,s=On):(r=t.get,s=t.set),new ME(r,s,i||!s,n)}function FE(t){var e;rs&&Ys&&(t=Fe(t),SE(Ys,(e=t.dep)!=null?e:t.dep=PE(()=>t.dep=void 0,t instanceof ME?t:void 0)))}function Xl(t,e=4,n){t=Fe(t);const r=t.dep;r&&RE(r,e)}function at(t){return!!(t&&t.__v_isRef===!0)}function gt(t){return UE(t,!1)}function hc(t){return UE(t,!0)}function UE(t,e){return at(t)?t:new YS(t,e)}class YS{constructor(e,n){this.__v_isShallow=n,this.dep=void 0,this.__v_isRef=!0,this._rawValue=n?e:Fe(e),this._value=n?e:va(e)}get value(){return FE(this),this._value}set value(e){const n=this.__v_isShallow||_u(e)||ro(e);e=n?e:Fe(e),cs(e,this._rawValue)&&(this._rawValue=e,this._value=n?e:va(e),Xl(this,4))}}function $e(t){return at(t)?t.value:t}function qe(t){return Re(t)?t():$e(t)}const XS={get:(t,e,n)=>$e(Reflect.get(t,e,n)),set:(t,e,n,r)=>{const s=t[e];return at(s)&&!at(n)?(s.value=n,!0):Reflect.set(t,e,n,r)}};function $E(t){return ss(t)?t:new Proxy(t,XS)}function JS(t){const e=ye(t)?new Array(t.length):{};for(const n in t)e[n]=BE(t,n);return e}class ZS{constructor(e,n,r){this._object=e,this._key=n,this._defaultValue=r,this.__v_isRef=!0}get value(){const e=this._object[this._key];return e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return OS(Fe(this._object),this._key)}}class eR{constructor(e){this._getter=e,this.__v_isRef=!0,this.__v_isReadonly=!0}get value(){return this._getter()}}function Fs(t,e,n){return at(t)?t:Re(t)?new eR(t):Je(t)&&arguments.length>1?BE(t,e,n):gt(t)}function BE(t,e,n){const r=t[e];return at(r)?r:new ZS(t,e,n)}/**
* @vue/runtime-core v3.4.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function is(t,e,n,r){try{return r?t(...r):t()}catch(s){dc(s,e,n)}}function kn(t,e,n,r){if(Re(t)){const i=is(t,e,n,r);return i&&_E(i)&&i.catch(o=>{dc(o,e,n)}),i}const s=[];for(let i=0;i<t.length;i++)s.push(kn(t[i],e,n,r));return s}function dc(t,e,n,r=!0){const s=e?e.vnode:null;if(e){let i=e.parent;const o=e.proxy,a=`https://vuejs.org/error-reference/#runtime-${n}`;for(;i;){const c=i.ec;if(c){for(let d=0;d<c.length;d++)if(c[d](t,o,a)===!1)return}i=i.parent}const l=e.appContext.config.errorHandler;if(l){is(l,null,10,[t,o,a]);return}}tR(t,n,s,r)}function tR(t,e,n,r=!0){console.error(t)}let Ea=!1,pd=!1;const Ht=[];let Hn=0;const Ki=[];let Hr=null,Us=0;const jE=Promise.resolve();let Zf=null;function cn(t){const e=Zf||jE;return t?e.then(this?t.bind(this):t):e}function nR(t){let e=Hn+1,n=Ht.length;for(;e<n;){const r=e+n>>>1,s=Ht[r],i=Ia(s);i<t||i===t&&s.pre?e=r+1:n=r}return e}function em(t){(!Ht.length||!Ht.includes(t,Ea&&t.allowRecurse?Hn+1:Hn))&&(t.id==null?Ht.push(t):Ht.splice(nR(t.id),0,t),qE())}function qE(){!Ea&&!pd&&(pd=!0,Zf=jE.then(HE))}function rR(t){const e=Ht.indexOf(t);e>Hn&&Ht.splice(e,1)}function sR(t){ye(t)?Ki.push(...t):(!Hr||!Hr.includes(t,t.allowRecurse?Us+1:Us))&&Ki.push(t),qE()}function p_(t,e,n=Ea?Hn+1:0){for(;n<Ht.length;n++){const r=Ht[n];if(r&&r.pre){if(t&&r.id!==t.uid)continue;Ht.splice(n,1),n--,r()}}}function GE(t){if(Ki.length){const e=[...new Set(Ki)].sort((n,r)=>Ia(n)-Ia(r));if(Ki.length=0,Hr){Hr.push(...e);return}for(Hr=e,Us=0;Us<Hr.length;Us++)Hr[Us]();Hr=null,Us=0}}const Ia=t=>t.id==null?1/0:t.id,iR=(t,e)=>{const n=Ia(t)-Ia(e);if(n===0){if(t.pre&&!e.pre)return-1;if(e.pre&&!t.pre)return 1}return n};function HE(t){pd=!1,Ea=!0,Ht.sort(iR);try{for(Hn=0;Hn<Ht.length;Hn++){const e=Ht[Hn];e&&e.active!==!1&&is(e,null,14)}}finally{Hn=0,Ht.length=0,GE(),Ea=!1,Zf=null,(Ht.length||Ki.length)&&HE()}}function oR(t,e,...n){if(t.isUnmounted)return;const r=t.vnode.props||st;let s=n;const i=e.startsWith("update:"),o=i&&e.slice(7);if(o&&o in r){const d=`${o==="modelValue"?"model":o}Modifiers`,{number:u,trim:h}=r[d]||st;h&&(s=n.map(f=>vt(f)?f.trim():f)),u&&(s=n.map(qf))}let a,l=r[a=wh(e)]||r[a=wh(or(e))];!l&&i&&(l=r[a=wh(bo(e))]),l&&kn(l,t,6,s);const c=r[a+"Once"];if(c){if(!t.emitted)t.emitted={};else if(t.emitted[a])return;t.emitted[a]=!0,kn(c,t,6,s)}}function WE(t,e,n=!1){const r=e.emitsCache,s=r.get(t);if(s!==void 0)return s;const i=t.emits;let o={},a=!1;if(!Re(t)){const l=c=>{const d=WE(c,e,!0);d&&(a=!0,At(o,d))};!n&&e.mixins.length&&e.mixins.forEach(l),t.extends&&l(t.extends),t.mixins&&t.mixins.forEach(l)}return!i&&!a?(Je(t)&&r.set(t,null),null):(ye(i)?i.forEach(l=>o[l]=null):At(o,i),Je(t)&&r.set(t,o),o)}function fc(t,e){return!t||!sc(e)?!1:(e=e.slice(2).replace(/Once$/,""),Ue(t,e[0].toLowerCase()+e.slice(1))||Ue(t,bo(e))||Ue(t,e))}let Kt=null,KE=null;function gu(t){const e=Kt;return Kt=t,KE=t&&t.type.__scopeId||null,e}function Vn(t,e=Kt,n){if(!e||t._n)return t;const r=(...s)=>{r._d&&R_(-1);const i=gu(e);let o;try{o=t(...s)}finally{gu(i),r._d&&R_(1)}return o};return r._n=!0,r._c=!0,r._d=!0,r}function Sh(t){const{type:e,vnode:n,proxy:r,withProxy:s,props:i,propsOptions:[o],slots:a,attrs:l,emit:c,render:d,renderCache:u,data:h,setupState:f,ctx:m,inheritAttrs:y}=t;let g,v;const b=gu(t);try{if(n.shapeFlag&4){const T=s||r,S=T;g=Gn(d.call(S,T,u,i,f,h,m)),v=l}else{const T=e;g=Gn(T.length>1?T(i,{attrs:l,slots:a,emit:c}):T(i,null)),v=e.props?l:aR(l)}}catch(T){ia.length=0,dc(T,t,1),g=Ce(Un)}let E=g;if(v&&y!==!1){const T=Object.keys(v),{shapeFlag:S}=E;T.length&&S&7&&(o&&T.some($f)&&(v=lR(v,o)),E=hs(E,v))}return n.dirs&&(E=hs(E),E.dirs=E.dirs?E.dirs.concat(n.dirs):n.dirs),n.transition&&(E.transition=n.transition),g=E,gu(b),g}const aR=t=>{let e;for(const n in t)(n==="class"||n==="style"||sc(n))&&((e||(e={}))[n]=t[n]);return e},lR=(t,e)=>{const n={};for(const r in t)(!$f(r)||!(r.slice(9)in e))&&(n[r]=t[r]);return n};function uR(t,e,n){const{props:r,children:s,component:i}=t,{props:o,children:a,patchFlag:l}=e,c=i.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&l>=0){if(l&1024)return!0;if(l&16)return r?__(r,o,c):!!o;if(l&8){const d=e.dynamicProps;for(let u=0;u<d.length;u++){const h=d[u];if(o[h]!==r[h]&&!fc(c,h))return!0}}}else return(s||a)&&(!a||!a.$stable)?!0:r===o?!1:r?o?__(r,o,c):!0:!!o;return!1}function __(t,e,n){const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!0;for(let s=0;s<r.length;s++){const i=r[s];if(e[i]!==t[i]&&!fc(n,i))return!0}return!1}function cR({vnode:t,parent:e},n){for(;e;){const r=e.subTree;if(r.suspense&&r.suspense.activeBranch===t&&(r.el=t.el),r===t)(t=e.vnode).el=n,e=e.parent;else break}}const tm="components",hR="directives";function mn(t,e){return nm(tm,t,!0,e)||t}const zE=Symbol.for("v-ndc");function mc(t){return vt(t)?nm(tm,t,!1)||t:t||zE}function h9(t){return nm(hR,t)}function nm(t,e,n=!0,r=!1){const s=Kt||Pt;if(s){const i=s.type;if(t===tm){const a=oP(i,!1);if(a&&(a===e||a===or(e)||a===ac(or(e))))return i}const o=g_(s[t]||i[t],e)||g_(s.appContext[t],e);return!o&&r?i:o}}function g_(t,e){return t&&(t[e]||t[or(e)]||t[ac(or(e))])}const dR=t=>t.__isSuspense;function fR(t,e){e&&e.pendingBranch?ye(t)?e.effects.push(...t):e.effects.push(t):sR(t)}const mR=Symbol.for("v-scx"),pR=()=>bn(mR);function _R(t,e){return rm(t,null,e)}const kl={};function tn(t,e,n){return rm(t,e,n)}function rm(t,e,{immediate:n,deep:r,flush:s,once:i,onTrack:o,onTrigger:a}=st){if(e&&i){const w=e;e=(...D)=>{w(...D),S()}}const l=Pt,c=w=>r===!0?w:Ws(w,r===!1?1:void 0);let d,u=!1,h=!1;if(at(t)?(d=()=>t.value,u=_u(t)):ss(t)?(d=()=>c(t),u=!0):ye(t)?(h=!0,u=t.some(w=>ss(w)||_u(w)),d=()=>t.map(w=>{if(at(w))return w.value;if(ss(w))return c(w);if(Re(w))return is(w,l,2)})):Re(t)?e?d=()=>is(t,l,2):d=()=>(f&&f(),kn(t,l,3,[m])):d=On,e&&r){const w=d;d=()=>Ws(w())}let f,m=w=>{f=E.onStop=()=>{is(w,l,4),f=E.onStop=void 0}},y;if(yc)if(m=On,e?n&&kn(e,l,3,[d(),h?[]:void 0,m]):d(),s==="sync"){const w=pR();y=w.__watcherHandles||(w.__watcherHandles=[])}else return On;let g=h?new Array(t.length).fill(kl):kl;const v=()=>{if(!(!E.active||!E.dirty))if(e){const w=E.run();(r||u||(h?w.some((D,O)=>cs(D,g[O])):cs(w,g)))&&(f&&f(),kn(e,l,3,[w,g===kl?void 0:h&&g[0]===kl?[]:g,m]),g=w)}else E.run()};v.allowRecurse=!!e;let b;s==="sync"?b=v:s==="post"?b=()=>un(v,l&&l.suspense):(v.pre=!0,l&&(v.id=l.uid),b=()=>em(v));const E=new Hf(d,On,b),T=bE(),S=()=>{E.stop(),T&&Bf(T.effects,E)};return e?n?v():g=E.run():s==="post"?un(E.run.bind(E),l&&l.suspense):E.run(),y&&y.push(S),S}function gR(t,e,n){const r=this.proxy,s=vt(t)?t.includes(".")?QE(r,t):()=>r[t]:t.bind(r,r);let i;Re(e)?i=e:(i=e.handler,n=e);const o=Za(this),a=rm(s,i.bind(r),n);return o(),a}function QE(t,e){const n=e.split(".");return()=>{let r=t;for(let s=0;s<n.length&&r;s++)r=r[n[s]];return r}}function Ws(t,e,n=0,r){if(!Je(t)||t.__v_skip)return t;if(e&&e>0){if(n>=e)return t;n++}if(r=r||new Set,r.has(t))return t;if(r.add(t),at(t))Ws(t.value,e,n,r);else if(ye(t))for(let s=0;s<t.length;s++)Ws(t[s],e,n,r);else if(ic(t)||Wi(t))t.forEach(s=>{Ws(s,e,n,r)});else if(yE(t))for(const s in t)Ws(t[s],e,n,r);return t}function d9(t,e){if(Kt===null)return t;const n=vc(Kt)||Kt.proxy,r=t.dirs||(t.dirs=[]);for(let s=0;s<e.length;s++){let[i,o,a,l=st]=e[s];i&&(Re(i)&&(i={mounted:i,updated:i}),i.deep&&Ws(o),r.push({dir:i,instance:n,value:o,oldValue:void 0,arg:a,modifiers:l}))}return t}function Cs(t,e,n,r){const s=t.dirs,i=e&&e.dirs;for(let o=0;o<s.length;o++){const a=s[o];i&&(a.oldValue=i[o].value);let l=a.dir[r];l&&(_i(),kn(l,n,8,[t.el,a,t,e]),gi())}}const Wr=Symbol("_leaveCb"),Nl=Symbol("_enterCb");function yR(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Xa(()=>{t.isMounted=!0}),sm(()=>{t.isUnmounting=!0}),t}const Rn=[Function,Array],YE={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Rn,onEnter:Rn,onAfterEnter:Rn,onEnterCancelled:Rn,onBeforeLeave:Rn,onLeave:Rn,onAfterLeave:Rn,onLeaveCancelled:Rn,onBeforeAppear:Rn,onAppear:Rn,onAfterAppear:Rn,onAppearCancelled:Rn},vR={name:"BaseTransition",props:YE,setup(t,{slots:e}){const n=ar(),r=yR();return()=>{const s=e.default&&JE(e.default(),!0);if(!s||!s.length)return;let i=s[0];if(s.length>1){for(const h of s)if(h.type!==Un){i=h;break}}const o=Fe(t),{mode:a}=o;if(r.isLeaving)return Rh(i);const l=y_(i);if(!l)return Rh(i);const c=_d(l,o,r,n);gd(l,c);const d=n.subTree,u=d&&y_(d);if(u&&u.type!==Un&&!$s(l,u)){const h=_d(u,o,r,n);if(gd(u,h),a==="out-in")return r.isLeaving=!0,h.afterLeave=()=>{r.isLeaving=!1,n.update.active!==!1&&(n.effect.dirty=!0,n.update())},Rh(i);a==="in-out"&&l.type!==Un&&(h.delayLeave=(f,m,y)=>{const g=XE(r,u);g[String(u.key)]=u,f[Wr]=()=>{m(),f[Wr]=void 0,delete c.delayedLeave},c.delayedLeave=y})}return i}}},ER=vR;function XE(t,e){const{leavingVNodes:n}=t;let r=n.get(e.type);return r||(r=Object.create(null),n.set(e.type,r)),r}function _d(t,e,n,r){const{appear:s,mode:i,persisted:o=!1,onBeforeEnter:a,onEnter:l,onAfterEnter:c,onEnterCancelled:d,onBeforeLeave:u,onLeave:h,onAfterLeave:f,onLeaveCancelled:m,onBeforeAppear:y,onAppear:g,onAfterAppear:v,onAppearCancelled:b}=e,E=String(t.key),T=XE(n,t),S=(O,C)=>{O&&kn(O,r,9,C)},w=(O,C)=>{const z=C[1];S(O,C),ye(O)?O.every(de=>de.length<=1)&&z():O.length<=1&&z()},D={mode:i,persisted:o,beforeEnter(O){let C=a;if(!n.isMounted)if(s)C=y||a;else return;O[Wr]&&O[Wr](!0);const z=T[E];z&&$s(t,z)&&z.el[Wr]&&z.el[Wr](),S(C,[O])},enter(O){let C=l,z=c,de=d;if(!n.isMounted)if(s)C=g||l,z=v||c,de=b||d;else return;let $=!1;const ie=O[Nl]=we=>{$||($=!0,we?S(de,[O]):S(z,[O]),D.delayedLeave&&D.delayedLeave(),O[Nl]=void 0)};C?w(C,[O,ie]):ie()},leave(O,C){const z=String(t.key);if(O[Nl]&&O[Nl](!0),n.isUnmounting)return C();S(u,[O]);let de=!1;const $=O[Wr]=ie=>{de||(de=!0,C(),ie?S(m,[O]):S(f,[O]),O[Wr]=void 0,T[z]===t&&delete T[z])};T[z]=t,h?w(h,[O,$]):$()},clone(O){return _d(O,e,n,r)}};return D}function Rh(t){if(pc(t))return t=hs(t),t.children=null,t}function y_(t){return pc(t)?t.children?t.children[0]:void 0:t}function gd(t,e){t.shapeFlag&6&&t.component?gd(t.component.subTree,e):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function JE(t,e=!1,n){let r=[],s=0;for(let i=0;i<t.length;i++){let o=t[i];const a=n==null?o.key:String(n)+String(o.key!=null?o.key:i);o.type===Mt?(o.patchFlag&128&&s++,r=r.concat(JE(o.children,e,a))):(e||o.type!==Un)&&r.push(a!=null?hs(o,{key:a}):o)}if(s>1)for(let i=0;i<r.length;i++)r[i].patchFlag=-2;return r}/*! #__NO_SIDE_EFFECTS__ */function ys(t,e){return Re(t)?At({name:t.name},e,{setup:t}):t}const Jl=t=>!!t.type.__asyncLoader,pc=t=>t.type.__isKeepAlive;function IR(t,e){ZE(t,"a",e)}function TR(t,e){ZE(t,"da",e)}function ZE(t,e,n=Pt){const r=t.__wdc||(t.__wdc=()=>{let s=n;for(;s;){if(s.isDeactivated)return;s=s.parent}return t()});if(_c(e,r,n),n){let s=n.parent;for(;s&&s.parent;)pc(s.parent.vnode)&&bR(r,e,n,s),s=s.parent}}function bR(t,e,n,r){const s=_c(e,t,r,!0);im(()=>{Bf(r[e],s)},n)}function _c(t,e,n=Pt,r=!1){if(n){const s=n[t]||(n[t]=[]),i=e.__weh||(e.__weh=(...o)=>{if(n.isUnmounted)return;_i();const a=Za(n),l=kn(e,n,t,o);return a(),gi(),l});return r?s.unshift(i):s.push(i),i}}const kr=t=>(e,n=Pt)=>(!yc||t==="sp")&&_c(t,(...r)=>e(...r),n),eI=kr("bm"),Xa=kr("m"),wR=kr("bu"),AR=kr("u"),sm=kr("bum"),im=kr("um"),SR=kr("sp"),RR=kr("rtg"),PR=kr("rtc");function CR(t,e=Pt){_c("ec",t,e)}function OR(t,e,n,r){let s;const i=n&&n[r];if(ye(t)||vt(t)){s=new Array(t.length);for(let o=0,a=t.length;o<a;o++)s[o]=e(t[o],o,void 0,i&&i[o])}else if(typeof t=="number"){s=new Array(t);for(let o=0;o<t;o++)s[o]=e(o+1,o,void 0,i&&i[o])}else if(Je(t))if(t[Symbol.iterator])s=Array.from(t,(o,a)=>e(o,a,void 0,i&&i[a]));else{const o=Object.keys(t);s=new Array(o.length);for(let a=0,l=o.length;a<l;a++){const c=o[a];s[a]=e(t[c],c,a,i&&i[a])}}else s=[];return n&&(n[r]=s),s}const yd=t=>t?fI(t)?vc(t)||t.proxy:yd(t.parent):null,sa=At(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>yd(t.parent),$root:t=>yd(t.root),$emit:t=>t.emit,$options:t=>om(t),$forceUpdate:t=>t.f||(t.f=()=>{t.effect.dirty=!0,em(t.update)}),$nextTick:t=>t.n||(t.n=cn.bind(t.proxy)),$watch:t=>gR.bind(t)}),Ph=(t,e)=>t!==st&&!t.__isScriptSetup&&Ue(t,e),kR={get({_:t},e){const{ctx:n,setupState:r,data:s,props:i,accessCache:o,type:a,appContext:l}=t;let c;if(e[0]!=="$"){const f=o[e];if(f!==void 0)switch(f){case 1:return r[e];case 2:return s[e];case 4:return n[e];case 3:return i[e]}else{if(Ph(r,e))return o[e]=1,r[e];if(s!==st&&Ue(s,e))return o[e]=2,s[e];if((c=t.propsOptions[0])&&Ue(c,e))return o[e]=3,i[e];if(n!==st&&Ue(n,e))return o[e]=4,n[e];vd&&(o[e]=0)}}const d=sa[e];let u,h;if(d)return e==="$attrs"&&yn(t,"get",e),d(t);if((u=a.__cssModules)&&(u=u[e]))return u;if(n!==st&&Ue(n,e))return o[e]=4,n[e];if(h=l.config.globalProperties,Ue(h,e))return h[e]},set({_:t},e,n){const{data:r,setupState:s,ctx:i}=t;return Ph(s,e)?(s[e]=n,!0):r!==st&&Ue(r,e)?(r[e]=n,!0):Ue(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(i[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:r,appContext:s,propsOptions:i}},o){let a;return!!n[o]||t!==st&&Ue(t,o)||Ph(e,o)||(a=i[0])&&Ue(a,o)||Ue(r,o)||Ue(sa,o)||Ue(s.config.globalProperties,o)},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:Ue(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};function v_(t){return ye(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}let vd=!0;function NR(t){const e=om(t),n=t.proxy,r=t.ctx;vd=!1,e.beforeCreate&&E_(e.beforeCreate,t,"bc");const{data:s,computed:i,methods:o,watch:a,provide:l,inject:c,created:d,beforeMount:u,mounted:h,beforeUpdate:f,updated:m,activated:y,deactivated:g,beforeDestroy:v,beforeUnmount:b,destroyed:E,unmounted:T,render:S,renderTracked:w,renderTriggered:D,errorCaptured:O,serverPrefetch:C,expose:z,inheritAttrs:de,components:$,directives:ie,filters:we}=e;if(c&&xR(c,r,null),o)for(const Ee in o){const Ie=o[Ee];Re(Ie)&&(r[Ee]=Ie.bind(n))}if(s){const Ee=s.call(n,n);Je(Ee)&&(t.data=Sr(Ee))}if(vd=!0,i)for(const Ee in i){const Ie=i[Ee],nt=Re(Ie)?Ie.bind(n,n):Re(Ie.get)?Ie.get.bind(n,n):On,Et=!Re(Ie)&&Re(Ie.set)?Ie.set.bind(n):On,Ze=ge({get:nt,set:Et});Object.defineProperty(r,Ee,{enumerable:!0,configurable:!0,get:()=>Ze.value,set:ut=>Ze.value=ut})}if(a)for(const Ee in a)tI(a[Ee],r,n,Ee);if(l){const Ee=Re(l)?l.call(n):l;Reflect.ownKeys(Ee).forEach(Ie=>{Qi(Ie,Ee[Ie])})}d&&E_(d,t,"c");function Q(Ee,Ie){ye(Ie)?Ie.forEach(nt=>Ee(nt.bind(n))):Ie&&Ee(Ie.bind(n))}if(Q(eI,u),Q(Xa,h),Q(wR,f),Q(AR,m),Q(IR,y),Q(TR,g),Q(CR,O),Q(PR,w),Q(RR,D),Q(sm,b),Q(im,T),Q(SR,C),ye(z))if(z.length){const Ee=t.exposed||(t.exposed={});z.forEach(Ie=>{Object.defineProperty(Ee,Ie,{get:()=>n[Ie],set:nt=>n[Ie]=nt})})}else t.exposed||(t.exposed={});S&&t.render===On&&(t.render=S),de!=null&&(t.inheritAttrs=de),$&&(t.components=$),ie&&(t.directives=ie)}function xR(t,e,n=On){ye(t)&&(t=Ed(t));for(const r in t){const s=t[r];let i;Je(s)?"default"in s?i=bn(s.from||r,s.default,!0):i=bn(s.from||r):i=bn(s),at(i)?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>i.value,set:o=>i.value=o}):e[r]=i}}function E_(t,e,n){kn(ye(t)?t.map(r=>r.bind(e.proxy)):t.bind(e.proxy),e,n)}function tI(t,e,n,r){const s=r.includes(".")?QE(n,r):()=>n[r];if(vt(t)){const i=e[t];Re(i)&&tn(s,i)}else if(Re(t))tn(s,t.bind(n));else if(Je(t))if(ye(t))t.forEach(i=>tI(i,e,n,r));else{const i=Re(t.handler)?t.handler.bind(n):e[t.handler];Re(i)&&tn(s,i,t)}}function om(t){const e=t.type,{mixins:n,extends:r}=e,{mixins:s,optionsCache:i,config:{optionMergeStrategies:o}}=t.appContext,a=i.get(e);let l;return a?l=a:!s.length&&!n&&!r?l=e:(l={},s.length&&s.forEach(c=>yu(l,c,o,!0)),yu(l,e,o)),Je(e)&&i.set(e,l),l}function yu(t,e,n,r=!1){const{mixins:s,extends:i}=e;i&&yu(t,i,n,!0),s&&s.forEach(o=>yu(t,o,n,!0));for(const o in e)if(!(r&&o==="expose")){const a=DR[o]||n&&n[o];t[o]=a?a(t[o],e[o]):e[o]}return t}const DR={data:I_,props:T_,emits:T_,methods:Ko,computed:Ko,beforeCreate:Jt,created:Jt,beforeMount:Jt,mounted:Jt,beforeUpdate:Jt,updated:Jt,beforeDestroy:Jt,beforeUnmount:Jt,destroyed:Jt,unmounted:Jt,activated:Jt,deactivated:Jt,errorCaptured:Jt,serverPrefetch:Jt,components:Ko,directives:Ko,watch:LR,provide:I_,inject:VR};function I_(t,e){return e?t?function(){return At(Re(t)?t.call(this,this):t,Re(e)?e.call(this,this):e)}:e:t}function VR(t,e){return Ko(Ed(t),Ed(e))}function Ed(t){if(ye(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function Jt(t,e){return t?[...new Set([].concat(t,e))]:e}function Ko(t,e){return t?At(Object.create(null),t,e):e}function T_(t,e){return t?ye(t)&&ye(e)?[...new Set([...t,...e])]:At(Object.create(null),v_(t),v_(e??{})):e}function LR(t,e){if(!t)return e;if(!e)return t;const n=At(Object.create(null),t);for(const r in e)n[r]=Jt(t[r],e[r]);return n}function nI(){return{app:null,config:{isNativeTag:fS,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let MR=0;function FR(t,e){return function(r,s=null){Re(r)||(r=At({},r)),s!=null&&!Je(s)&&(s=null);const i=nI(),o=new WeakSet;let a=!1;const l=i.app={_uid:MR++,_component:r,_props:s,_container:null,_context:i,_instance:null,version:lP,get config(){return i.config},set config(c){},use(c,...d){return o.has(c)||(c&&Re(c.install)?(o.add(c),c.install(l,...d)):Re(c)&&(o.add(c),c(l,...d))),l},mixin(c){return i.mixins.includes(c)||i.mixins.push(c),l},component(c,d){return d?(i.components[c]=d,l):i.components[c]},directive(c,d){return d?(i.directives[c]=d,l):i.directives[c]},mount(c,d,u){if(!a){const h=Ce(r,s);return h.appContext=i,u===!0?u="svg":u===!1&&(u=void 0),d&&e?e(h,c):t(h,c,u),a=!0,l._container=c,c.__vue_app__=l,vc(h.component)||h.component.proxy}},unmount(){a&&(t(null,l._container),delete l._container.__vue_app__)},provide(c,d){return i.provides[c]=d,l},runWithContext(c){const d=zi;zi=l;try{return c()}finally{zi=d}}};return l}}let zi=null;function Qi(t,e){if(Pt){let n=Pt.provides;const r=Pt.parent&&Pt.parent.provides;r===n&&(n=Pt.provides=Object.create(r)),n[t]=e}}function bn(t,e,n=!1){const r=Pt||Kt;if(r||zi){const s=r?r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:zi._context.provides;if(s&&t in s)return s[t];if(arguments.length>1)return n&&Re(e)?e.call(r&&r.proxy):e}}function UR(){return!!(Pt||Kt||zi)}function $R(t,e,n,r=!1){const s={},i={};mu(i,gc,1),t.propsDefaults=Object.create(null),rI(t,e,s,i);for(const o in t.propsOptions[0])o in s||(s[o]=void 0);n?t.props=r?s:VE(s):t.type.props?t.props=s:t.props=i,t.attrs=i}function BR(t,e,n,r){const{props:s,attrs:i,vnode:{patchFlag:o}}=t,a=Fe(s),[l]=t.propsOptions;let c=!1;if((r||o>0)&&!(o&16)){if(o&8){const d=t.vnode.dynamicProps;for(let u=0;u<d.length;u++){let h=d[u];if(fc(t.emitsOptions,h))continue;const f=e[h];if(l)if(Ue(i,h))f!==i[h]&&(i[h]=f,c=!0);else{const m=or(h);s[m]=Id(l,a,m,f,t,!1)}else f!==i[h]&&(i[h]=f,c=!0)}}}else{rI(t,e,s,i)&&(c=!0);let d;for(const u in a)(!e||!Ue(e,u)&&((d=bo(u))===u||!Ue(e,d)))&&(l?n&&(n[u]!==void 0||n[d]!==void 0)&&(s[u]=Id(l,a,u,void 0,t,!0)):delete s[u]);if(i!==a)for(const u in i)(!e||!Ue(e,u))&&(delete i[u],c=!0)}c&&br(t,"set","$attrs")}function rI(t,e,n,r){const[s,i]=t.propsOptions;let o=!1,a;if(e)for(let l in e){if(ra(l))continue;const c=e[l];let d;s&&Ue(s,d=or(l))?!i||!i.includes(d)?n[d]=c:(a||(a={}))[d]=c:fc(t.emitsOptions,l)||(!(l in r)||c!==r[l])&&(r[l]=c,o=!0)}if(i){const l=Fe(n),c=a||st;for(let d=0;d<i.length;d++){const u=i[d];n[u]=Id(s,l,u,c[u],t,!Ue(c,u))}}return o}function Id(t,e,n,r,s,i){const o=t[n];if(o!=null){const a=Ue(o,"default");if(a&&r===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&Re(l)){const{propsDefaults:c}=s;if(n in c)r=c[n];else{const d=Za(s);r=c[n]=l.call(null,e),d()}}else r=l}o[0]&&(i&&!a?r=!1:o[1]&&(r===""||r===bo(n))&&(r=!0))}return r}function sI(t,e,n=!1){const r=e.propsCache,s=r.get(t);if(s)return s;const i=t.props,o={},a=[];let l=!1;if(!Re(t)){const d=u=>{l=!0;const[h,f]=sI(u,e,!0);At(o,h),f&&a.push(...f)};!n&&e.mixins.length&&e.mixins.forEach(d),t.extends&&d(t.extends),t.mixins&&t.mixins.forEach(d)}if(!i&&!l)return Je(t)&&r.set(t,Hi),Hi;if(ye(i))for(let d=0;d<i.length;d++){const u=or(i[d]);b_(u)&&(o[u]=st)}else if(i)for(const d in i){const u=or(d);if(b_(u)){const h=i[d],f=o[u]=ye(h)||Re(h)?{type:h}:At({},h);if(f){const m=S_(Boolean,f.type),y=S_(String,f.type);f[0]=m>-1,f[1]=y<0||m<y,(m>-1||Ue(f,"default"))&&a.push(u)}}}const c=[o,a];return Je(t)&&r.set(t,c),c}function b_(t){return t[0]!=="$"&&!ra(t)}function w_(t){return t===null?"null":typeof t=="function"?t.name||"":typeof t=="object"&&t.constructor&&t.constructor.name||""}function A_(t,e){return w_(t)===w_(e)}function S_(t,e){return ye(e)?e.findIndex(n=>A_(n,t)):Re(e)&&A_(e,t)?0:-1}const iI=t=>t[0]==="_"||t==="$stable",am=t=>ye(t)?t.map(Gn):[Gn(t)],jR=(t,e,n)=>{if(e._n)return e;const r=Vn((...s)=>am(e(...s)),n);return r._c=!1,r},oI=(t,e,n)=>{const r=t._ctx;for(const s in t){if(iI(s))continue;const i=t[s];if(Re(i))e[s]=jR(s,i,r);else if(i!=null){const o=am(i);e[s]=()=>o}}},aI=(t,e)=>{const n=am(e);t.slots.default=()=>n},qR=(t,e)=>{if(t.vnode.shapeFlag&32){const n=e._;n?(t.slots=Fe(e),mu(e,"_",n)):oI(e,t.slots={})}else t.slots={},e&&aI(t,e);mu(t.slots,gc,1)},GR=(t,e,n)=>{const{vnode:r,slots:s}=t;let i=!0,o=st;if(r.shapeFlag&32){const a=e._;a?n&&a===1?i=!1:(At(s,e),!n&&a===1&&delete s._):(i=!e.$stable,oI(e,s)),o=e}else e&&(aI(t,e),o={default:1});if(i)for(const a in s)!iI(a)&&o[a]==null&&delete s[a]};function Td(t,e,n,r,s=!1){if(ye(t)){t.forEach((h,f)=>Td(h,e&&(ye(e)?e[f]:e),n,r,s));return}if(Jl(r)&&!s)return;const i=r.shapeFlag&4?vc(r.component)||r.component.proxy:r.el,o=s?null:i,{i:a,r:l}=t,c=e&&e.r,d=a.refs===st?a.refs={}:a.refs,u=a.setupState;if(c!=null&&c!==l&&(vt(c)?(d[c]=null,Ue(u,c)&&(u[c]=null)):at(c)&&(c.value=null)),Re(l))is(l,a,12,[o,d]);else{const h=vt(l),f=at(l);if(h||f){const m=()=>{if(t.f){const y=h?Ue(u,l)?u[l]:d[l]:l.value;s?ye(y)&&Bf(y,i):ye(y)?y.includes(i)||y.push(i):h?(d[l]=[i],Ue(u,l)&&(u[l]=d[l])):(l.value=[i],t.k&&(d[t.k]=l.value))}else h?(d[l]=o,Ue(u,l)&&(u[l]=o)):f&&(l.value=o,t.k&&(d[t.k]=o))};o?(m.id=-1,un(m,n)):m()}}}const un=fR;function HR(t){return WR(t)}function WR(t,e){const n=vE();n.__VUE__=!0;const{insert:r,remove:s,patchProp:i,createElement:o,createText:a,createComment:l,setText:c,setElementText:d,parentNode:u,nextSibling:h,setScopeId:f=On,insertStaticContent:m}=t,y=(_,p,I,P=null,k=null,F=null,H=void 0,G=null,Y=!!p.dynamicChildren)=>{if(_===p)return;_&&!$s(_,p)&&(P=V(_),ut(_,k,F,!0),_=null),p.patchFlag===-2&&(Y=!1,p.dynamicChildren=null);const{type:q,ref:re,shapeFlag:fe}=p;switch(q){case Ja:g(_,p,I,P);break;case Un:v(_,p,I,P);break;case Oh:_==null&&b(p,I,P,H);break;case Mt:$(_,p,I,P,k,F,H,G,Y);break;default:fe&1?S(_,p,I,P,k,F,H,G,Y):fe&6?ie(_,p,I,P,k,F,H,G,Y):(fe&64||fe&128)&&q.process(_,p,I,P,k,F,H,G,Y,J)}re!=null&&k&&Td(re,_&&_.ref,F,p||_,!p)},g=(_,p,I,P)=>{if(_==null)r(p.el=a(p.children),I,P);else{const k=p.el=_.el;p.children!==_.children&&c(k,p.children)}},v=(_,p,I,P)=>{_==null?r(p.el=l(p.children||""),I,P):p.el=_.el},b=(_,p,I,P)=>{[_.el,_.anchor]=m(_.children,p,I,P,_.el,_.anchor)},E=({el:_,anchor:p},I,P)=>{let k;for(;_&&_!==p;)k=h(_),r(_,I,P),_=k;r(p,I,P)},T=({el:_,anchor:p})=>{let I;for(;_&&_!==p;)I=h(_),s(_),_=I;s(p)},S=(_,p,I,P,k,F,H,G,Y)=>{p.type==="svg"?H="svg":p.type==="math"&&(H="mathml"),_==null?w(p,I,P,k,F,H,G,Y):C(_,p,k,F,H,G,Y)},w=(_,p,I,P,k,F,H,G)=>{let Y,q;const{props:re,shapeFlag:fe,transition:Z,dirs:N}=_;if(Y=_.el=o(_.type,F,re&&re.is,re),fe&8?d(Y,_.children):fe&16&&O(_.children,Y,null,P,k,Ch(_,F),H,G),N&&Cs(_,null,P,"created"),D(Y,_,_.scopeId,H,P),re){for(const he in re)he!=="value"&&!ra(he)&&i(Y,he,null,re[he],F,_.children,P,k,le);"value"in re&&i(Y,"value",null,re.value,F),(q=re.onVnodeBeforeMount)&&qn(q,P,_)}N&&Cs(_,null,P,"beforeMount");const M=KR(k,Z);M&&Z.beforeEnter(Y),r(Y,p,I),((q=re&&re.onVnodeMounted)||M||N)&&un(()=>{q&&qn(q,P,_),M&&Z.enter(Y),N&&Cs(_,null,P,"mounted")},k)},D=(_,p,I,P,k)=>{if(I&&f(_,I),P)for(let F=0;F<P.length;F++)f(_,P[F]);if(k){let F=k.subTree;if(p===F){const H=k.vnode;D(_,H,H.scopeId,H.slotScopeIds,k.parent)}}},O=(_,p,I,P,k,F,H,G,Y=0)=>{for(let q=Y;q<_.length;q++){const re=_[q]=G?Kr(_[q]):Gn(_[q]);y(null,re,p,I,P,k,F,H,G)}},C=(_,p,I,P,k,F,H)=>{const G=p.el=_.el;let{patchFlag:Y,dynamicChildren:q,dirs:re}=p;Y|=_.patchFlag&16;const fe=_.props||st,Z=p.props||st;let N;if(I&&Os(I,!1),(N=Z.onVnodeBeforeUpdate)&&qn(N,I,p,_),re&&Cs(p,_,I,"beforeUpdate"),I&&Os(I,!0),q?z(_.dynamicChildren,q,G,I,P,Ch(p,k),F):H||Ie(_,p,G,null,I,P,Ch(p,k),F,!1),Y>0){if(Y&16)de(G,p,fe,Z,I,P,k);else if(Y&2&&fe.class!==Z.class&&i(G,"class",null,Z.class,k),Y&4&&i(G,"style",fe.style,Z.style,k),Y&8){const M=p.dynamicProps;for(let he=0;he<M.length;he++){const A=M[he],R=fe[A],U=Z[A];(U!==R||A==="value")&&i(G,A,R,U,k,_.children,I,P,le)}}Y&1&&_.children!==p.children&&d(G,p.children)}else!H&&q==null&&de(G,p,fe,Z,I,P,k);((N=Z.onVnodeUpdated)||re)&&un(()=>{N&&qn(N,I,p,_),re&&Cs(p,_,I,"updated")},P)},z=(_,p,I,P,k,F,H)=>{for(let G=0;G<p.length;G++){const Y=_[G],q=p[G],re=Y.el&&(Y.type===Mt||!$s(Y,q)||Y.shapeFlag&70)?u(Y.el):I;y(Y,q,re,null,P,k,F,H,!0)}},de=(_,p,I,P,k,F,H)=>{if(I!==P){if(I!==st)for(const G in I)!ra(G)&&!(G in P)&&i(_,G,I[G],null,H,p.children,k,F,le);for(const G in P){if(ra(G))continue;const Y=P[G],q=I[G];Y!==q&&G!=="value"&&i(_,G,q,Y,H,p.children,k,F,le)}"value"in P&&i(_,"value",I.value,P.value,H)}},$=(_,p,I,P,k,F,H,G,Y)=>{const q=p.el=_?_.el:a(""),re=p.anchor=_?_.anchor:a("");let{patchFlag:fe,dynamicChildren:Z,slotScopeIds:N}=p;N&&(G=G?G.concat(N):N),_==null?(r(q,I,P),r(re,I,P),O(p.children||[],I,re,k,F,H,G,Y)):fe>0&&fe&64&&Z&&_.dynamicChildren?(z(_.dynamicChildren,Z,I,k,F,H,G),(p.key!=null||k&&p===k.subTree)&&lI(_,p,!0)):Ie(_,p,I,re,k,F,H,G,Y)},ie=(_,p,I,P,k,F,H,G,Y)=>{p.slotScopeIds=G,_==null?p.shapeFlag&512?k.ctx.activate(p,I,P,H,Y):we(p,I,P,k,F,H,Y):Ne(_,p,Y)},we=(_,p,I,P,k,F,H)=>{const G=_.component=tP(_,P,k);if(pc(_)&&(G.ctx.renderer=J),nP(G),G.asyncDep){if(k&&k.registerDep(G,Q),!_.el){const Y=G.subTree=Ce(Un);v(null,Y,p,I)}}else Q(G,_,p,I,k,F,H)},Ne=(_,p,I)=>{const P=p.component=_.component;if(uR(_,p,I))if(P.asyncDep&&!P.asyncResolved){Ee(P,p,I);return}else P.next=p,rR(P.update),P.effect.dirty=!0,P.update();else p.el=_.el,P.vnode=p},Q=(_,p,I,P,k,F,H)=>{const G=()=>{if(_.isMounted){let{next:re,bu:fe,u:Z,parent:N,vnode:M}=_;{const X=uI(_);if(X){re&&(re.el=M.el,Ee(_,re,H)),X.asyncDep.then(()=>{_.isUnmounted||G()});return}}let he=re,A;Os(_,!1),re?(re.el=M.el,Ee(_,re,H)):re=M,fe&&Yl(fe),(A=re.props&&re.props.onVnodeBeforeUpdate)&&qn(A,N,re,M),Os(_,!0);const R=Sh(_),U=_.subTree;_.subTree=R,y(U,R,u(U.el),V(U),_,k,F),re.el=R.el,he===null&&cR(_,R.el),Z&&un(Z,k),(A=re.props&&re.props.onVnodeUpdated)&&un(()=>qn(A,N,re,M),k)}else{let re;const{el:fe,props:Z}=p,{bm:N,m:M,parent:he}=_,A=Jl(p);if(Os(_,!1),N&&Yl(N),!A&&(re=Z&&Z.onVnodeBeforeMount)&&qn(re,he,p),Os(_,!0),fe&&Be){const R=()=>{_.subTree=Sh(_),Be(fe,_.subTree,_,k,null)};A?p.type.__asyncLoader().then(()=>!_.isUnmounted&&R()):R()}else{const R=_.subTree=Sh(_);y(null,R,I,P,_,k,F),p.el=R.el}if(M&&un(M,k),!A&&(re=Z&&Z.onVnodeMounted)){const R=p;un(()=>qn(re,he,R),k)}(p.shapeFlag&256||he&&Jl(he.vnode)&&he.vnode.shapeFlag&256)&&_.a&&un(_.a,k),_.isMounted=!0,p=I=P=null}},Y=_.effect=new Hf(G,On,()=>em(q),_.scope),q=_.update=()=>{Y.dirty&&Y.run()};q.id=_.uid,Os(_,!0),q()},Ee=(_,p,I)=>{p.component=_;const P=_.vnode.props;_.vnode=p,_.next=null,BR(_,p.props,P,I),GR(_,p.children,I),_i(),p_(_),gi()},Ie=(_,p,I,P,k,F,H,G,Y=!1)=>{const q=_&&_.children,re=_?_.shapeFlag:0,fe=p.children,{patchFlag:Z,shapeFlag:N}=p;if(Z>0){if(Z&128){Et(q,fe,I,P,k,F,H,G,Y);return}else if(Z&256){nt(q,fe,I,P,k,F,H,G,Y);return}}N&8?(re&16&&le(q,k,F),fe!==q&&d(I,fe)):re&16?N&16?Et(q,fe,I,P,k,F,H,G,Y):le(q,k,F,!0):(re&8&&d(I,""),N&16&&O(fe,I,P,k,F,H,G,Y))},nt=(_,p,I,P,k,F,H,G,Y)=>{_=_||Hi,p=p||Hi;const q=_.length,re=p.length,fe=Math.min(q,re);let Z;for(Z=0;Z<fe;Z++){const N=p[Z]=Y?Kr(p[Z]):Gn(p[Z]);y(_[Z],N,I,null,k,F,H,G,Y)}q>re?le(_,k,F,!0,!1,fe):O(p,I,P,k,F,H,G,Y,fe)},Et=(_,p,I,P,k,F,H,G,Y)=>{let q=0;const re=p.length;let fe=_.length-1,Z=re-1;for(;q<=fe&&q<=Z;){const N=_[q],M=p[q]=Y?Kr(p[q]):Gn(p[q]);if($s(N,M))y(N,M,I,null,k,F,H,G,Y);else break;q++}for(;q<=fe&&q<=Z;){const N=_[fe],M=p[Z]=Y?Kr(p[Z]):Gn(p[Z]);if($s(N,M))y(N,M,I,null,k,F,H,G,Y);else break;fe--,Z--}if(q>fe){if(q<=Z){const N=Z+1,M=N<re?p[N].el:P;for(;q<=Z;)y(null,p[q]=Y?Kr(p[q]):Gn(p[q]),I,M,k,F,H,G,Y),q++}}else if(q>Z)for(;q<=fe;)ut(_[q],k,F,!0),q++;else{const N=q,M=q,he=new Map;for(q=M;q<=Z;q++){const Le=p[q]=Y?Kr(p[q]):Gn(p[q]);Le.key!=null&&he.set(Le.key,q)}let A,R=0;const U=Z-M+1;let X=!1,_e=0;const ce=new Array(U);for(q=0;q<U;q++)ce[q]=0;for(q=N;q<=fe;q++){const Le=_[q];if(R>=U){ut(Le,k,F,!0);continue}let je;if(Le.key!=null)je=he.get(Le.key);else for(A=M;A<=Z;A++)if(ce[A-M]===0&&$s(Le,p[A])){je=A;break}je===void 0?ut(Le,k,F,!0):(ce[je-M]=q+1,je>=_e?_e=je:X=!0,y(Le,p[je],I,null,k,F,H,G,Y),R++)}const Ve=X?zR(ce):Hi;for(A=Ve.length-1,q=U-1;q>=0;q--){const Le=M+q,je=p[Le],St=Le+1<re?p[Le+1].el:P;ce[q]===0?y(null,je,I,St,k,F,H,G,Y):X&&(A<0||q!==Ve[A]?Ze(je,I,St,2):A--)}}},Ze=(_,p,I,P,k=null)=>{const{el:F,type:H,transition:G,children:Y,shapeFlag:q}=_;if(q&6){Ze(_.component.subTree,p,I,P);return}if(q&128){_.suspense.move(p,I,P);return}if(q&64){H.move(_,p,I,J);return}if(H===Mt){r(F,p,I);for(let fe=0;fe<Y.length;fe++)Ze(Y[fe],p,I,P);r(_.anchor,p,I);return}if(H===Oh){E(_,p,I);return}if(P!==2&&q&1&&G)if(P===0)G.beforeEnter(F),r(F,p,I),un(()=>G.enter(F),k);else{const{leave:fe,delayLeave:Z,afterLeave:N}=G,M=()=>r(F,p,I),he=()=>{fe(F,()=>{M(),N&&N()})};Z?Z(F,M,he):he()}else r(F,p,I)},ut=(_,p,I,P=!1,k=!1)=>{const{type:F,props:H,ref:G,children:Y,dynamicChildren:q,shapeFlag:re,patchFlag:fe,dirs:Z}=_;if(G!=null&&Td(G,null,I,_,!0),re&256){p.ctx.deactivate(_);return}const N=re&1&&Z,M=!Jl(_);let he;if(M&&(he=H&&H.onVnodeBeforeUnmount)&&qn(he,p,_),re&6)se(_.component,I,P);else{if(re&128){_.suspense.unmount(I,P);return}N&&Cs(_,null,p,"beforeUnmount"),re&64?_.type.remove(_,p,I,k,J,P):q&&(F!==Mt||fe>0&&fe&64)?le(q,p,I,!1,!0):(F===Mt&&fe&384||!k&&re&16)&&le(Y,p,I),P&&Qe(_)}(M&&(he=H&&H.onVnodeUnmounted)||N)&&un(()=>{he&&qn(he,p,_),N&&Cs(_,null,p,"unmounted")},I)},Qe=_=>{const{type:p,el:I,anchor:P,transition:k}=_;if(p===Mt){Vt(I,P);return}if(p===Oh){T(_);return}const F=()=>{s(I),k&&!k.persisted&&k.afterLeave&&k.afterLeave()};if(_.shapeFlag&1&&k&&!k.persisted){const{leave:H,delayLeave:G}=k,Y=()=>H(I,F);G?G(_.el,F,Y):Y()}else F()},Vt=(_,p)=>{let I;for(;_!==p;)I=h(_),s(_),_=I;s(p)},se=(_,p,I)=>{const{bum:P,scope:k,update:F,subTree:H,um:G}=_;P&&Yl(P),k.stop(),F&&(F.active=!1,ut(H,_,p,I)),G&&un(G,p),un(()=>{_.isUnmounted=!0},p),p&&p.pendingBranch&&!p.isUnmounted&&_.asyncDep&&!_.asyncResolved&&_.suspenseId===p.pendingId&&(p.deps--,p.deps===0&&p.resolve())},le=(_,p,I,P=!1,k=!1,F=0)=>{for(let H=F;H<_.length;H++)ut(_[H],p,I,P,k)},V=_=>_.shapeFlag&6?V(_.component.subTree):_.shapeFlag&128?_.suspense.next():h(_.anchor||_.el);let B=!1;const W=(_,p,I)=>{_==null?p._vnode&&ut(p._vnode,null,null,!0):y(p._vnode||null,_,p,null,null,null,I),B||(B=!0,p_(),GE(),B=!1),p._vnode=_},J={p:y,um:ut,m:Ze,r:Qe,mt:we,mc:O,pc:Ie,pbc:z,n:V,o:t};let ve,Be;return e&&([ve,Be]=e(J)),{render:W,hydrate:ve,createApp:FR(W,ve)}}function Ch({type:t,props:e},n){return n==="svg"&&t==="foreignObject"||n==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:n}function Os({effect:t,update:e},n){t.allowRecurse=e.allowRecurse=n}function KR(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function lI(t,e,n=!1){const r=t.children,s=e.children;if(ye(r)&&ye(s))for(let i=0;i<r.length;i++){const o=r[i];let a=s[i];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=s[i]=Kr(s[i]),a.el=o.el),n||lI(o,a)),a.type===Ja&&(a.el=o.el)}}function zR(t){const e=t.slice(),n=[0];let r,s,i,o,a;const l=t.length;for(r=0;r<l;r++){const c=t[r];if(c!==0){if(s=n[n.length-1],t[s]<c){e[r]=s,n.push(r);continue}for(i=0,o=n.length-1;i<o;)a=i+o>>1,t[n[a]]<c?i=a+1:o=a;c<t[n[i]]&&(i>0&&(e[r]=n[i-1]),n[i]=r)}}for(i=n.length,o=n[i-1];i-- >0;)n[i]=o,o=e[o];return n}function uI(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:uI(e)}const QR=t=>t.__isTeleport,Mt=Symbol.for("v-fgt"),Ja=Symbol.for("v-txt"),Un=Symbol.for("v-cmt"),Oh=Symbol.for("v-stc"),ia=[];let Ln=null;function Ct(t=!1){ia.push(Ln=t?null:[])}function YR(){ia.pop(),Ln=ia[ia.length-1]||null}let Ta=1;function R_(t){Ta+=t}function cI(t){return t.dynamicChildren=Ta>0?Ln||Hi:null,YR(),Ta>0&&Ln&&Ln.push(t),t}function pn(t,e,n,r,s,i){return cI(oe(t,e,n,r,s,i,!0))}function vu(t,e,n,r,s){return cI(Ce(t,e,n,r,s,!0))}function bd(t){return t?t.__v_isVNode===!0:!1}function $s(t,e){return t.type===e.type&&t.key===e.key}const gc="__vInternal",hI=({key:t})=>t??null,Zl=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?vt(t)||at(t)||Re(t)?{i:Kt,r:t,k:e,f:!!n}:t:null);function oe(t,e=null,n=null,r=0,s=null,i=t===Mt?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&hI(e),ref:e&&Zl(e),scopeId:KE,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:r,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:Kt};return a?(um(l,n),i&128&&t.normalize(l)):n&&(l.shapeFlag|=vt(n)?8:16),Ta>0&&!o&&Ln&&(l.patchFlag>0||i&6)&&l.patchFlag!==32&&Ln.push(l),l}const Ce=XR;function XR(t,e=null,n=null,r=0,s=null,i=!1){if((!t||t===zE)&&(t=Un),bd(t)){const a=hs(t,e,!0);return n&&um(a,n),Ta>0&&!i&&Ln&&(a.shapeFlag&6?Ln[Ln.indexOf(t)]=a:Ln.push(a)),a.patchFlag|=-2,a}if(aP(t)&&(t=t.__vccOpts),e){e=JR(e);let{class:a,style:l}=e;a&&!vt(a)&&(e.class=Tr(a)),Je(l)&&(LE(l)&&!ye(l)&&(l=At({},l)),e.style=ya(l))}const o=vt(t)?1:dR(t)?128:QR(t)?64:Je(t)?4:Re(t)?2:0;return oe(t,e,n,r,s,o,i,!0)}function JR(t){return t?LE(t)||gc in t?At({},t):t:null}function hs(t,e,n=!1){const{props:r,ref:s,patchFlag:i,children:o}=t,a=e?dI(r||{},e):r;return{__v_isVNode:!0,__v_skip:!0,type:t.type,props:a,key:a&&hI(a),ref:e&&e.ref?n&&s?ye(s)?s.concat(Zl(e)):[s,Zl(e)]:Zl(e):s,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:o,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==Mt?i===-1?16:i|16:i,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:t.transition,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&hs(t.ssContent),ssFallback:t.ssFallback&&hs(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce}}function oa(t=" ",e=0){return Ce(Ja,null,t,e)}function lm(t="",e=!1){return e?(Ct(),vu(Un,null,t)):Ce(Un,null,t)}function Gn(t){return t==null||typeof t=="boolean"?Ce(Un):ye(t)?Ce(Mt,null,t.slice()):typeof t=="object"?Kr(t):Ce(Ja,null,String(t))}function Kr(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:hs(t)}function um(t,e){let n=0;const{shapeFlag:r}=t;if(e==null)e=null;else if(ye(e))n=16;else if(typeof e=="object")if(r&65){const s=e.default;s&&(s._c&&(s._d=!1),um(t,s()),s._c&&(s._d=!0));return}else{n=32;const s=e._;!s&&!(gc in e)?e._ctx=Kt:s===3&&Kt&&(Kt.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else Re(e)?(e={default:e,_ctx:Kt},n=32):(e=String(e),r&64?(n=16,e=[oa(e)]):n=8);t.children=e,t.shapeFlag|=n}function dI(...t){const e={};for(let n=0;n<t.length;n++){const r=t[n];for(const s in r)if(s==="class")e.class!==r.class&&(e.class=Tr([e.class,r.class]));else if(s==="style")e.style=ya([e.style,r.style]);else if(sc(s)){const i=e[s],o=r[s];o&&i!==o&&!(ye(i)&&i.includes(o))&&(e[s]=i?[].concat(i,o):o)}else s!==""&&(e[s]=r[s])}return e}function qn(t,e,n,r=null){kn(t,e,7,[n,r])}const ZR=nI();let eP=0;function tP(t,e,n){const r=t.type,s=(e?e.appContext:t.appContext)||ZR,i={uid:eP++,vnode:t,type:r,parent:e,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,scope:new TE(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(s.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:sI(r,s),emitsOptions:WE(r,s),emit:null,emitted:null,propsDefaults:st,inheritAttrs:r.inheritAttrs,ctx:st,data:st,props:st,attrs:st,slots:st,refs:st,setupState:st,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=e?e.root:i,i.emit=oR.bind(null,i),t.ce&&t.ce(i),i}let Pt=null;const ar=()=>Pt||Kt;let Eu,wd;{const t=vE(),e=(n,r)=>{let s;return(s=t[n])||(s=t[n]=[]),s.push(r),i=>{s.length>1?s.forEach(o=>o(i)):s[0](i)}};Eu=e("__VUE_INSTANCE_SETTERS__",n=>Pt=n),wd=e("__VUE_SSR_SETTERS__",n=>yc=n)}const Za=t=>{const e=Pt;return Eu(t),t.scope.on(),()=>{t.scope.off(),Eu(e)}},P_=()=>{Pt&&Pt.scope.off(),Eu(null)};function fI(t){return t.vnode.shapeFlag&4}let yc=!1;function nP(t,e=!1){e&&wd(e);const{props:n,children:r}=t.vnode,s=fI(t);$R(t,n,s,e),qR(t,r);const i=s?rP(t,e):void 0;return e&&wd(!1),i}function rP(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=cc(new Proxy(t.ctx,kR));const{setup:r}=n;if(r){const s=t.setupContext=r.length>1?iP(t):null,i=Za(t);_i();const o=is(r,t,0,[t.props,s]);if(gi(),i(),_E(o)){if(o.then(P_,P_),e)return o.then(a=>{C_(t,a,e)}).catch(a=>{dc(a,t,0)});t.asyncDep=o}else C_(t,o,e)}else mI(t,e)}function C_(t,e,n){Re(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:Je(e)&&(t.setupState=$E(e)),mI(t,n)}let O_;function mI(t,e,n){const r=t.type;if(!t.render){if(!e&&O_&&!r.render){const s=r.template||om(t).template;if(s){const{isCustomElement:i,compilerOptions:o}=t.appContext.config,{delimiters:a,compilerOptions:l}=r,c=At(At({isCustomElement:i,delimiters:a},o),l);r.render=O_(s,c)}}t.render=r.render||On}{const s=Za(t);_i();try{NR(t)}finally{gi(),s()}}}function sP(t){return t.attrsProxy||(t.attrsProxy=new Proxy(t.attrs,{get(e,n){return yn(t,"get","$attrs"),e[n]}}))}function iP(t){const e=n=>{t.exposed=n||{}};return{get attrs(){return sP(t)},slots:t.slots,emit:t.emit,expose:e}}function vc(t){if(t.exposed)return t.exposeProxy||(t.exposeProxy=new Proxy($E(cc(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in sa)return sa[n](t)},has(e,n){return n in e||n in sa}}))}function oP(t,e=!0){return Re(t)?t.displayName||t.name:t.name||e&&t.__name}function aP(t){return Re(t)&&"__vccOpts"in t}const ge=(t,e)=>QS(t,e,yc);function Rr(t,e,n){const r=arguments.length;return r===2?Je(e)&&!ye(e)?bd(e)?Ce(t,null,[e]):Ce(t,e):Ce(t,null,e):(r>3?n=Array.prototype.slice.call(arguments,2):r===3&&bd(n)&&(n=[n]),Ce(t,e,n))}const lP="3.4.21";/**
* @vue/runtime-dom v3.4.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const uP="http://www.w3.org/2000/svg",cP="http://www.w3.org/1998/Math/MathML",zr=typeof document<"u"?document:null,k_=zr&&zr.createElement("template"),hP={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,r)=>{const s=e==="svg"?zr.createElementNS(uP,t):e==="mathml"?zr.createElementNS(cP,t):zr.createElement(t,n?{is:n}:void 0);return t==="select"&&r&&r.multiple!=null&&s.setAttribute("multiple",r.multiple),s},createText:t=>zr.createTextNode(t),createComment:t=>zr.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>zr.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,r,s,i){const o=n?n.previousSibling:e.lastChild;if(s&&(s===i||s.nextSibling))for(;e.insertBefore(s.cloneNode(!0),n),!(s===i||!(s=s.nextSibling)););else{k_.innerHTML=r==="svg"?`<svg>${t}</svg>`:r==="mathml"?`<math>${t}</math>`:t;const a=k_.content;if(r==="svg"||r==="mathml"){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}e.insertBefore(a,n)}return[o?o.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},Lr="transition",Do="animation",ba=Symbol("_vtc"),cm=(t,{slots:e})=>Rr(ER,dP(t),e);cm.displayName="Transition";const pI={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String};cm.props=At({},YE,pI);const ks=(t,e=[])=>{ye(t)?t.forEach(n=>n(...e)):t&&t(...e)},N_=t=>t?ye(t)?t.some(e=>e.length>1):t.length>1:!1;function dP(t){const e={};for(const $ in t)$ in pI||(e[$]=t[$]);if(t.css===!1)return e;const{name:n="v",type:r,duration:s,enterFromClass:i=`${n}-enter-from`,enterActiveClass:o=`${n}-enter-active`,enterToClass:a=`${n}-enter-to`,appearFromClass:l=i,appearActiveClass:c=o,appearToClass:d=a,leaveFromClass:u=`${n}-leave-from`,leaveActiveClass:h=`${n}-leave-active`,leaveToClass:f=`${n}-leave-to`}=t,m=fP(s),y=m&&m[0],g=m&&m[1],{onBeforeEnter:v,onEnter:b,onEnterCancelled:E,onLeave:T,onLeaveCancelled:S,onBeforeAppear:w=v,onAppear:D=b,onAppearCancelled:O=E}=e,C=($,ie,we)=>{Ns($,ie?d:a),Ns($,ie?c:o),we&&we()},z=($,ie)=>{$._isLeaving=!1,Ns($,u),Ns($,f),Ns($,h),ie&&ie()},de=$=>(ie,we)=>{const Ne=$?D:b,Q=()=>C(ie,$,we);ks(Ne,[ie,Q]),x_(()=>{Ns(ie,$?l:i),Mr(ie,$?d:a),N_(Ne)||D_(ie,r,y,Q)})};return At(e,{onBeforeEnter($){ks(v,[$]),Mr($,i),Mr($,o)},onBeforeAppear($){ks(w,[$]),Mr($,l),Mr($,c)},onEnter:de(!1),onAppear:de(!0),onLeave($,ie){$._isLeaving=!0;const we=()=>z($,ie);Mr($,u),_P(),Mr($,h),x_(()=>{$._isLeaving&&(Ns($,u),Mr($,f),N_(T)||D_($,r,g,we))}),ks(T,[$,we])},onEnterCancelled($){C($,!1),ks(E,[$])},onAppearCancelled($){C($,!0),ks(O,[$])},onLeaveCancelled($){z($),ks(S,[$])}})}function fP(t){if(t==null)return null;if(Je(t))return[kh(t.enter),kh(t.leave)];{const e=kh(t);return[e,e]}}function kh(t){return yS(t)}function Mr(t,e){e.split(/\s+/).forEach(n=>n&&t.classList.add(n)),(t[ba]||(t[ba]=new Set)).add(e)}function Ns(t,e){e.split(/\s+/).forEach(r=>r&&t.classList.remove(r));const n=t[ba];n&&(n.delete(e),n.size||(t[ba]=void 0))}function x_(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let mP=0;function D_(t,e,n,r){const s=t._endId=++mP,i=()=>{s===t._endId&&r()};if(n)return setTimeout(i,n);const{type:o,timeout:a,propCount:l}=pP(t,e);if(!o)return r();const c=o+"end";let d=0;const u=()=>{t.removeEventListener(c,h),i()},h=f=>{f.target===t&&++d>=l&&u()};setTimeout(()=>{d<l&&u()},a+1),t.addEventListener(c,h)}function pP(t,e){const n=window.getComputedStyle(t),r=m=>(n[m]||"").split(", "),s=r(`${Lr}Delay`),i=r(`${Lr}Duration`),o=V_(s,i),a=r(`${Do}Delay`),l=r(`${Do}Duration`),c=V_(a,l);let d=null,u=0,h=0;e===Lr?o>0&&(d=Lr,u=o,h=i.length):e===Do?c>0&&(d=Do,u=c,h=l.length):(u=Math.max(o,c),d=u>0?o>c?Lr:Do:null,h=d?d===Lr?i.length:l.length:0);const f=d===Lr&&/\b(transform|all)(,|$)/.test(r(`${Lr}Property`).toString());return{type:d,timeout:u,propCount:h,hasTransform:f}}function V_(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((n,r)=>L_(n)+L_(t[r])))}function L_(t){return t==="auto"?0:Number(t.slice(0,-1).replace(",","."))*1e3}function _P(){return document.body.offsetHeight}function gP(t,e,n){const r=t[ba];r&&(e=(e?[e,...r]:[...r]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}const Iu=Symbol("_vod"),_I=Symbol("_vsh"),f9={beforeMount(t,{value:e},{transition:n}){t[Iu]=t.style.display==="none"?"":t.style.display,n&&e?n.beforeEnter(t):Vo(t,e)},mounted(t,{value:e},{transition:n}){n&&e&&n.enter(t)},updated(t,{value:e,oldValue:n},{transition:r}){!e!=!n&&(r?e?(r.beforeEnter(t),Vo(t,!0),r.enter(t)):r.leave(t,()=>{Vo(t,!1)}):Vo(t,e))},beforeUnmount(t,{value:e}){Vo(t,e)}};function Vo(t,e){t.style.display=e?t[Iu]:"none",t[_I]=!e}const yP=Symbol(""),vP=/(^|;)\s*display\s*:/;function EP(t,e,n){const r=t.style,s=vt(n);let i=!1;if(n&&!s){if(e)if(vt(e))for(const o of e.split(";")){const a=o.slice(0,o.indexOf(":")).trim();n[a]==null&&eu(r,a,"")}else for(const o in e)n[o]==null&&eu(r,o,"");for(const o in n)o==="display"&&(i=!0),eu(r,o,n[o])}else if(s){if(e!==n){const o=r[yP];o&&(n+=";"+o),r.cssText=n,i=vP.test(n)}}else e&&t.removeAttribute("style");Iu in t&&(t[Iu]=i?r.display:"",t[_I]&&(r.display="none"))}const M_=/\s*!important$/;function eu(t,e,n){if(ye(n))n.forEach(r=>eu(t,e,r));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const r=IP(t,e);M_.test(n)?t.setProperty(bo(r),n.replace(M_,""),"important"):t[r]=n}}const F_=["Webkit","Moz","ms"],Nh={};function IP(t,e){const n=Nh[e];if(n)return n;let r=or(e);if(r!=="filter"&&r in t)return Nh[e]=r;r=ac(r);for(let s=0;s<F_.length;s++){const i=F_[s]+r;if(i in t)return Nh[e]=i}return e}const U_="http://www.w3.org/1999/xlink";function TP(t,e,n,r,s){if(r&&e.startsWith("xlink:"))n==null?t.removeAttributeNS(U_,e.slice(6,e.length)):t.setAttributeNS(U_,e,n);else{const i=wS(e);n==null||i&&!EE(n)?t.removeAttribute(e):t.setAttribute(e,i?"":n)}}function bP(t,e,n,r,s,i,o){if(e==="innerHTML"||e==="textContent"){r&&o(r,s,i),t[e]=n??"";return}const a=t.tagName;if(e==="value"&&a!=="PROGRESS"&&!a.includes("-")){const c=a==="OPTION"?t.getAttribute("value")||"":t.value,d=n??"";(c!==d||!("_value"in t))&&(t.value=d),n==null&&t.removeAttribute(e),t._value=n;return}let l=!1;if(n===""||n==null){const c=typeof t[e];c==="boolean"?n=EE(n):n==null&&c==="string"?(n="",l=!0):c==="number"&&(n=0,l=!0)}try{t[e]=n}catch{}l&&t.removeAttribute(e)}function gI(t,e,n,r){t.addEventListener(e,n,r)}function wP(t,e,n,r){t.removeEventListener(e,n,r)}const $_=Symbol("_vei");function AP(t,e,n,r,s=null){const i=t[$_]||(t[$_]={}),o=i[e];if(r&&o)o.value=r;else{const[a,l]=SP(e);if(r){const c=i[e]=CP(r,s);gI(t,a,c,l)}else o&&(wP(t,a,o,l),i[e]=void 0)}}const B_=/(?:Once|Passive|Capture)$/;function SP(t){let e;if(B_.test(t)){e={};let r;for(;r=t.match(B_);)t=t.slice(0,t.length-r[0].length),e[r[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):bo(t.slice(2)),e]}let xh=0;const RP=Promise.resolve(),PP=()=>xh||(RP.then(()=>xh=0),xh=Date.now());function CP(t,e){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;kn(OP(r,n.value),e,5,[r])};return n.value=t,n.attached=PP(),n}function OP(t,e){if(ye(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(r=>s=>!s._stopped&&r&&r(s))}else return e}const j_=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,kP=(t,e,n,r,s,i,o,a,l)=>{const c=s==="svg";e==="class"?gP(t,r,c):e==="style"?EP(t,n,r):sc(e)?$f(e)||AP(t,e,n,r,o):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):NP(t,e,r,c))?bP(t,e,r,i,o,a,l):(e==="true-value"?t._trueValue=r:e==="false-value"&&(t._falseValue=r),TP(t,e,r,c))};function NP(t,e,n,r){if(r)return!!(e==="innerHTML"||e==="textContent"||e in t&&j_(e)&&Re(n));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const s=t.tagName;if(s==="IMG"||s==="VIDEO"||s==="CANVAS"||s==="SOURCE")return!1}return j_(e)&&vt(n)?!1:e in t}const q_=t=>{const e=t.props["onUpdate:modelValue"]||!1;return ye(e)?n=>Yl(e,n):e},Dh=Symbol("_assign"),m9={deep:!0,created(t,{value:e,modifiers:{number:n}},r){const s=ic(e);gI(t,"change",()=>{const i=Array.prototype.filter.call(t.options,o=>o.selected).map(o=>n?qf(Tu(o)):Tu(o));t[Dh](t.multiple?s?new Set(i):i:i[0]),t._assigning=!0,cn(()=>{t._assigning=!1})}),t[Dh]=q_(r)},mounted(t,{value:e,modifiers:{number:n}}){G_(t,e,n)},beforeUpdate(t,e,n){t[Dh]=q_(n)},updated(t,{value:e,modifiers:{number:n}}){t._assigning||G_(t,e,n)}};function G_(t,e,n){const r=t.multiple,s=ye(e);if(!(r&&!s&&!ic(e))){for(let i=0,o=t.options.length;i<o;i++){const a=t.options[i],l=Tu(a);if(r)if(s){const c=typeof l;c==="string"||c==="number"?a.selected=e.includes(n?qf(l):l):a.selected=SS(e,l)>-1}else a.selected=e.has(l);else if(lc(Tu(a),e)){t.selectedIndex!==i&&(t.selectedIndex=i);return}}!r&&t.selectedIndex!==-1&&(t.selectedIndex=-1)}}function Tu(t){return"_value"in t?t._value:t.value}const xP=["ctrl","shift","alt","meta"],DP={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>xP.some(n=>t[`${n}Key`]&&!e.includes(n))},Js=(t,e)=>{const n=t._withMods||(t._withMods={}),r=e.join(".");return n[r]||(n[r]=(s,...i)=>{for(let o=0;o<e.length;o++){const a=DP[e[o]];if(a&&a(s,e))return}return t(s,...i)})},VP=At({patchProp:kP},hP);let H_;function LP(){return H_||(H_=HR(VP))}const MP=(...t)=>{const e=LP().createApp(...t),{mount:n}=e;return e.mount=r=>{const s=UP(r);if(!s)return;const i=e._component;!Re(i)&&!i.render&&!i.template&&(i.template=s.innerHTML),s.innerHTML="";const o=n(s,!1,FP(s));return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),o},e};function FP(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function UP(t){return vt(t)?document.querySelector(t):t}var $P=!1;/*!
 * pinia v2.1.7
 * (c) 2023 Eduardo San Martin Morote
 * @license MIT
 */let yI;const Ec=t=>yI=t,vI=Symbol();function Ad(t){return t&&typeof t=="object"&&Object.prototype.toString.call(t)==="[object Object]"&&typeof t.toJSON!="function"}var aa;(function(t){t.direct="direct",t.patchObject="patch object",t.patchFunction="patch function"})(aa||(aa={}));function BP(){const t=Gf(!0),e=t.run(()=>gt({}));let n=[],r=[];const s=cc({install(i){Ec(s),s._a=i,i.provide(vI,s),i.config.globalProperties.$pinia=s,r.forEach(o=>n.push(o)),r=[]},use(i){return!this._a&&!$P?r.push(i):n.push(i),this},_p:n,_a:null,_e:t,_s:new Map,state:e});return s}const EI=()=>{};function W_(t,e,n,r=EI){t.push(e);const s=()=>{const i=t.indexOf(e);i>-1&&(t.splice(i,1),r())};return!n&&bE()&&PS(s),s}function Ri(t,...e){t.slice().forEach(n=>{n(...e)})}const jP=t=>t();function Sd(t,e){t instanceof Map&&e instanceof Map&&e.forEach((n,r)=>t.set(r,n)),t instanceof Set&&e instanceof Set&&e.forEach(t.add,t);for(const n in e){if(!e.hasOwnProperty(n))continue;const r=e[n],s=t[n];Ad(s)&&Ad(r)&&t.hasOwnProperty(n)&&!at(r)&&!ss(r)?t[n]=Sd(s,r):t[n]=r}return t}const qP=Symbol();function GP(t){return!Ad(t)||!t.hasOwnProperty(qP)}const{assign:qr}=Object;function HP(t){return!!(at(t)&&t.effect)}function WP(t,e,n,r){const{state:s,actions:i,getters:o}=e,a=n.state.value[t];let l;function c(){a||(n.state.value[t]=s?s():{});const d=JS(n.state.value[t]);return qr(d,i,Object.keys(o||{}).reduce((u,h)=>(u[h]=cc(ge(()=>{Ec(n);const f=n._s.get(t);return o[h].call(f,f)})),u),{}))}return l=II(t,c,e,n,r,!0),l}function II(t,e,n={},r,s,i){let o;const a=qr({actions:{}},n),l={deep:!0};let c,d,u=[],h=[],f;const m=r.state.value[t];!i&&!m&&(r.state.value[t]={}),gt({});let y;function g(O){let C;c=d=!1,typeof O=="function"?(O(r.state.value[t]),C={type:aa.patchFunction,storeId:t,events:f}):(Sd(r.state.value[t],O),C={type:aa.patchObject,payload:O,storeId:t,events:f});const z=y=Symbol();cn().then(()=>{y===z&&(c=!0)}),d=!0,Ri(u,C,r.state.value[t])}const v=i?function(){const{state:C}=n,z=C?C():{};this.$patch(de=>{qr(de,z)})}:EI;function b(){o.stop(),u=[],h=[],r._s.delete(t)}function E(O,C){return function(){Ec(r);const z=Array.from(arguments),de=[],$=[];function ie(Q){de.push(Q)}function we(Q){$.push(Q)}Ri(h,{args:z,name:O,store:S,after:ie,onError:we});let Ne;try{Ne=C.apply(this&&this.$id===t?this:S,z)}catch(Q){throw Ri($,Q),Q}return Ne instanceof Promise?Ne.then(Q=>(Ri(de,Q),Q)).catch(Q=>(Ri($,Q),Promise.reject(Q))):(Ri(de,Ne),Ne)}}const T={_p:r,$id:t,$onAction:W_.bind(null,h),$patch:g,$reset:v,$subscribe(O,C={}){const z=W_(u,O,C.detached,()=>de()),de=o.run(()=>tn(()=>r.state.value[t],$=>{(C.flush==="sync"?d:c)&&O({storeId:t,type:aa.direct,events:f},$)},qr({},l,C)));return z},$dispose:b},S=Sr(T);r._s.set(t,S);const D=(r._a&&r._a.runWithContext||jP)(()=>r._e.run(()=>(o=Gf()).run(e)));for(const O in D){const C=D[O];if(at(C)&&!HP(C)||ss(C))i||(m&&GP(C)&&(at(C)?C.value=m[O]:Sd(C,m[O])),r.state.value[t][O]=C);else if(typeof C=="function"){const z=E(O,C);D[O]=z,a.actions[O]=C}}return qr(S,D),qr(Fe(S),D),Object.defineProperty(S,"$state",{get:()=>r.state.value[t],set:O=>{g(C=>{qr(C,O)})}}),r._p.forEach(O=>{qr(S,o.run(()=>O({store:S,app:r._a,pinia:r,options:a})))}),m&&i&&n.hydrate&&n.hydrate(S.$state,m),c=!0,d=!0,S}function hm(t,e,n){let r,s;const i=typeof e=="function";typeof t=="string"?(r=t,s=i?n:e):(s=t,r=t.id);function o(a,l){const c=UR();return a=a||(c?bn(vI,null):null),a&&Ec(a),a=yI,a._s.has(r)||(i?II(r,e,s,a):WP(r,s,a)),a._s.get(r)}return o.$id=r,o}let KP="Store";function zP(...t){return t.reduce((e,n)=>(e[n.$id+KP]=function(){return n(this.$pinia)},e),{})}function TI(t,e){return Array.isArray(e)?e.reduce((n,r)=>(n[r]=function(){return t(this.$pinia)[r]},n),{}):Object.keys(e).reduce((n,r)=>(n[r]=function(){const s=t(this.$pinia),i=e[r];return typeof i=="function"?i.call(this,s):s[i]},n),{})}function dm(t,e){return Array.isArray(e)?e.reduce((n,r)=>(n[r]=function(...s){return t(this.$pinia)[r](...s)},n),{}):Object.keys(e).reduce((n,r)=>(n[r]=function(...s){return t(this.$pinia)[e[r]](...s)},n),{})}function bI(t,e){return Array.isArray(e)?e.reduce((n,r)=>(n[r]={get(){return t(this.$pinia)[r]},set(s){return t(this.$pinia)[r]=s}},n),{}):Object.keys(e).reduce((n,r)=>(n[r]={get(){return t(this.$pinia)[e[r]]},set(s){return t(this.$pinia)[e[r]]=s}},n),{})}var K_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wI=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},QP=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],a=t[n++],l=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},AI={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,a=o?t[s+1]:0,l=s+2<t.length,c=l?t[s+2]:0,d=i>>2,u=(i&3)<<4|a>>4;let h=(a&15)<<2|c>>6,f=c&63;l||(f=64,o||(h=64)),r.push(n[d],n[u],n[h],n[f])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(wI(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):QP(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const c=s<t.length?n[t.charAt(s)]:64;++s;const u=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||a==null||c==null||u==null)throw new YP;const h=i<<2|a>>4;if(r.push(h),c!==64){const f=a<<4&240|c>>2;if(r.push(f),u!==64){const m=c<<6&192|u;r.push(m)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class YP extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const XP=function(t){const e=wI(t);return AI.encodeByteArray(e,!0)},bu=function(t){return XP(t).replace(/\./g,"")},SI=function(t){try{return AI.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JP(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZP=()=>JP().__FIREBASE_DEFAULTS__,eC=()=>{if(typeof process>"u"||typeof K_>"u")return;const t=K_.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},tC=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&SI(t[1]);return e&&JSON.parse(e)},Ic=()=>{try{return ZP()||eC()||tC()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},RI=t=>{var e,n;return(n=(e=Ic())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},nC=t=>{const e=RI(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},PI=()=>{var t;return(t=Ic())===null||t===void 0?void 0:t.config},CI=t=>{var e;return(e=Ic())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rC{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sC(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[bu(JSON.stringify(n)),bu(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function iC(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Tt())}function oC(){var t;const e=(t=Ic())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function aC(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function lC(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function uC(){const t=Tt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function OI(){return!oC()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function kI(){try{return typeof indexedDB=="object"}catch{return!1}}function cC(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hC="FirebaseError";class cr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=hC,Object.setPrototypeOf(this,cr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,el.prototype.create)}}class el{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?dC(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new cr(s,a,r)}}function dC(t,e){return t.replace(fC,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const fC=/\{\$([^}]+)}/g;function mC(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function wa(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(z_(i)&&z_(o)){if(!wa(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function z_(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tl(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function zo(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function Qo(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function pC(t,e){const n=new _C(t,e);return n.subscribe.bind(n)}class _C{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");gC(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=Vh),s.error===void 0&&(s.error=Vh),s.complete===void 0&&(s.complete=Vh);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function gC(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Vh(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ct(t){return t&&t._delegate?t._delegate:t}class ds{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ls="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yC{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new rC;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(EC(e))try{this.getOrInitializeService({instanceIdentifier:Ls})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Ls){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ls){return this.instances.has(e)}getOptions(e=Ls){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:vC(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Ls){return this.component?this.component.multipleInstances?e:Ls:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function vC(t){return t===Ls?void 0:t}function EC(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IC{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new yC(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xe;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(xe||(xe={}));const TC={debug:xe.DEBUG,verbose:xe.VERBOSE,info:xe.INFO,warn:xe.WARN,error:xe.ERROR,silent:xe.SILENT},bC=xe.INFO,wC={[xe.DEBUG]:"log",[xe.VERBOSE]:"log",[xe.INFO]:"info",[xe.WARN]:"warn",[xe.ERROR]:"error"},AC=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=wC[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class fm{constructor(e){this.name=e,this._logLevel=bC,this._logHandler=AC,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in xe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?TC[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,xe.DEBUG,...e),this._logHandler(this,xe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,xe.VERBOSE,...e),this._logHandler(this,xe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,xe.INFO,...e),this._logHandler(this,xe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,xe.WARN,...e),this._logHandler(this,xe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,xe.ERROR,...e),this._logHandler(this,xe.ERROR,...e)}}const SC=(t,e)=>e.some(n=>t instanceof n);let Q_,Y_;function RC(){return Q_||(Q_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function PC(){return Y_||(Y_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const NI=new WeakMap,Rd=new WeakMap,xI=new WeakMap,Lh=new WeakMap,mm=new WeakMap;function CC(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(os(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&NI.set(n,t)}).catch(()=>{}),mm.set(e,t),e}function OC(t){if(Rd.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});Rd.set(t,e)}let Pd={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Rd.get(t);if(e==="objectStoreNames")return t.objectStoreNames||xI.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return os(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function kC(t){Pd=t(Pd)}function NC(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Mh(this),e,...n);return xI.set(r,e.sort?e.sort():[e]),os(r)}:PC().includes(t)?function(...e){return t.apply(Mh(this),e),os(NI.get(this))}:function(...e){return os(t.apply(Mh(this),e))}}function xC(t){return typeof t=="function"?NC(t):(t instanceof IDBTransaction&&OC(t),SC(t,RC())?new Proxy(t,Pd):t)}function os(t){if(t instanceof IDBRequest)return CC(t);if(Lh.has(t))return Lh.get(t);const e=xC(t);return e!==t&&(Lh.set(t,e),mm.set(e,t)),e}const Mh=t=>mm.get(t);function DC(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),a=os(o);return r&&o.addEventListener("upgradeneeded",l=>{r(os(o.result),l.oldVersion,l.newVersion,os(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{i&&l.addEventListener("close",()=>i()),s&&l.addEventListener("versionchange",c=>s(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const VC=["get","getKey","getAll","getAllKeys","count"],LC=["put","add","delete","clear"],Fh=new Map;function X_(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Fh.get(e))return Fh.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=LC.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||VC.includes(n)))return;const i=async function(o,...a){const l=this.transaction(o,s?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),s&&l.done]))[0]};return Fh.set(e,i),i}kC(t=>({...t,get:(e,n,r)=>X_(e,n)||t.get(e,n,r),has:(e,n)=>!!X_(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MC{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(FC(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function FC(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Cd="@firebase/app",J_="0.10.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ni=new fm("@firebase/app"),UC="@firebase/app-compat",$C="@firebase/analytics-compat",BC="@firebase/analytics",jC="@firebase/app-check-compat",qC="@firebase/app-check",GC="@firebase/auth",HC="@firebase/auth-compat",WC="@firebase/database",KC="@firebase/database-compat",zC="@firebase/functions",QC="@firebase/functions-compat",YC="@firebase/installations",XC="@firebase/installations-compat",JC="@firebase/messaging",ZC="@firebase/messaging-compat",e1="@firebase/performance",t1="@firebase/performance-compat",n1="@firebase/remote-config",r1="@firebase/remote-config-compat",s1="@firebase/storage",i1="@firebase/storage-compat",o1="@firebase/firestore",a1="@firebase/firestore-compat",l1="firebase",u1="10.11.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Od="[DEFAULT]",c1={[Cd]:"fire-core",[UC]:"fire-core-compat",[BC]:"fire-analytics",[$C]:"fire-analytics-compat",[qC]:"fire-app-check",[jC]:"fire-app-check-compat",[GC]:"fire-auth",[HC]:"fire-auth-compat",[WC]:"fire-rtdb",[KC]:"fire-rtdb-compat",[zC]:"fire-fn",[QC]:"fire-fn-compat",[YC]:"fire-iid",[XC]:"fire-iid-compat",[JC]:"fire-fcm",[ZC]:"fire-fcm-compat",[e1]:"fire-perf",[t1]:"fire-perf-compat",[n1]:"fire-rc",[r1]:"fire-rc-compat",[s1]:"fire-gcs",[i1]:"fire-gcs-compat",[o1]:"fire-fst",[a1]:"fire-fst-compat","fire-js":"fire-js",[l1]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wu=new Map,h1=new Map,kd=new Map;function Z_(t,e){try{t.container.addComponent(e)}catch(n){ni.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function ri(t){const e=t.name;if(kd.has(e))return ni.debug(`There were multiple attempts to register component ${e}.`),!1;kd.set(e,t);for(const n of wu.values())Z_(n,t);for(const n of h1.values())Z_(n,t);return!0}function Tc(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function zn(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d1={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},as=new el("app","Firebase",d1);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f1{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ds("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw as.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yi=u1;function DI(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Od,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw as.create("bad-app-name",{appName:String(s)});if(n||(n=PI()),!n)throw as.create("no-options");const i=wu.get(s);if(i){if(wa(n,i.options)&&wa(r,i.config))return i;throw as.create("duplicate-app",{appName:s})}const o=new IC(s);for(const l of kd.values())o.addComponent(l);const a=new f1(n,r,o);return wu.set(s,a),a}function VI(t=Od){const e=wu.get(t);if(!e&&t===Od&&PI())return DI();if(!e)throw as.create("no-app",{appName:t});return e}function nr(t,e,n){var r;let s=(r=c1[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const a=[`Unable to register library "${s}" with version "${e}":`];i&&a.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ni.warn(a.join(" "));return}ri(new ds(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m1="firebase-heartbeat-database",p1=1,Aa="firebase-heartbeat-store";let Uh=null;function LI(){return Uh||(Uh=DC(m1,p1,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Aa)}catch(n){console.warn(n)}}}}).catch(t=>{throw as.create("idb-open",{originalErrorMessage:t.message})})),Uh}async function _1(t){try{const n=(await LI()).transaction(Aa),r=await n.objectStore(Aa).get(MI(t));return await n.done,r}catch(e){if(e instanceof cr)ni.warn(e.message);else{const n=as.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ni.warn(n.message)}}}async function eg(t,e){try{const r=(await LI()).transaction(Aa,"readwrite");await r.objectStore(Aa).put(e,MI(t)),await r.done}catch(n){if(n instanceof cr)ni.warn(n.message);else{const r=as.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});ni.warn(r.message)}}}function MI(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g1=1024,y1=30*24*60*60*1e3;class v1{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new I1(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=tg();if(!(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i)))return this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=y1}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var e;if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=tg(),{heartbeatsToSend:r,unsentEntries:s}=E1(this._heartbeatsCache.heartbeats),i=bu(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}}function tg(){return new Date().toISOString().substring(0,10)}function E1(t,e=g1){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),ng(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),ng(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class I1{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return kI()?cC().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await _1(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return eg(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return eg(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function ng(t){return bu(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T1(t){ri(new ds("platform-logger",e=>new MC(e),"PRIVATE")),ri(new ds("heartbeat",e=>new v1(e),"PRIVATE")),nr(Cd,J_,t),nr(Cd,J_,"esm2017"),nr("fire-js","")}T1("");var b1="firebase",w1="10.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */nr(b1,w1,"app");function pm(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function FI(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const A1=FI,UI=new el("auth","Firebase",FI());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Au=new fm("@firebase/auth");function S1(t,...e){Au.logLevel<=xe.WARN&&Au.warn(`Auth (${yi}): ${t}`,...e)}function tu(t,...e){Au.logLevel<=xe.ERROR&&Au.error(`Auth (${yi}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $n(t,...e){throw _m(t,...e)}function rr(t,...e){return _m(t,...e)}function $I(t,e,n){const r=Object.assign(Object.assign({},A1()),{[e]:n});return new el("auth","Firebase",r).create(e,{appName:t.name})}function wr(t){return $I(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function _m(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return UI.create(t,...e)}function be(t,e,...n){if(!t)throw _m(e,...n)}function gr(t){const e="INTERNAL ASSERTION FAILED: "+t;throw tu(e),new Error(e)}function Pr(t,e){t||gr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nd(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function R1(){return rg()==="http:"||rg()==="https:"}function rg(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P1(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(R1()||aC()||"connection"in navigator)?navigator.onLine:!0}function C1(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nl{constructor(e,n){this.shortDelay=e,this.longDelay=n,Pr(n>e,"Short delay should be less than long delay!"),this.isMobile=iC()||lC()}get(){return P1()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gm(t,e){Pr(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BI{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;gr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;gr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;gr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O1={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k1=new nl(3e4,6e4);function vs(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Nr(t,e,n,r,s={}){return jI(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const a=tl(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode),BI.fetch()(qI(t,t.config.apiHost,n,a),Object.assign({method:e,headers:l,referrerPolicy:"no-referrer"},i))})}async function jI(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},O1),e);try{const s=new x1(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw xl(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const a=i.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw xl(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw xl(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw xl(t,"user-disabled",o);const d=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw $I(t,d,c);$n(t,d)}}catch(s){if(s instanceof cr)throw s;$n(t,"network-request-failed",{message:String(s)})}}async function rl(t,e,n,r,s={}){const i=await Nr(t,e,n,r,s);return"mfaPendingCredential"in i&&$n(t,"multi-factor-auth-required",{_serverResponse:i}),i}function qI(t,e,n,r){const s=`${e}${n}?${r}`;return t.config.emulator?gm(t.config,s):`${t.config.apiScheme}://${s}`}function N1(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class x1{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(rr(this.auth,"network-request-failed")),k1.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function xl(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=rr(t,e,r);return s.customData._tokenResponse=n,s}function sg(t){return t!==void 0&&t.enterprise!==void 0}class D1{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return N1(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function V1(t,e){return Nr(t,"GET","/v2/recaptchaConfig",vs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function L1(t,e){return Nr(t,"POST","/v1/accounts:delete",e)}async function GI(t,e){return Nr(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function la(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function M1(t,e=!1){const n=ct(t),r=await n.getIdToken(e),s=ym(r);be(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:la($h(s.auth_time)),issuedAtTime:la($h(s.iat)),expirationTime:la($h(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function $h(t){return Number(t)*1e3}function ym(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return tu("JWT malformed, contained fewer than 3 sections"),null;try{const s=SI(n);return s?JSON.parse(s):(tu("Failed to decode base64 JWT payload"),null)}catch(s){return tu("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function ig(t){const e=ym(t);return be(e,"internal-error"),be(typeof e.exp<"u","internal-error"),be(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function so(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof cr&&F1(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function F1({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U1{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xd{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=la(this.lastLoginAt),this.creationTime=la(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Su(t){var e;const n=t.auth,r=await t.getIdToken(),s=await so(t,GI(n,{idToken:r}));be(s==null?void 0:s.users.length,n,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?HI(i.providerUserInfo):[],a=B1(t.providerData,o),l=t.isAnonymous,c=!(t.email&&i.passwordHash)&&!(a!=null&&a.length),d=l?c:!1,u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new xd(i.createdAt,i.lastLoginAt),isAnonymous:d};Object.assign(t,u)}async function $1(t){const e=ct(t);await Su(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function B1(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function HI(t){return t.map(e=>{var{providerId:n}=e,r=pm(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function j1(t,e){const n=await jI(t,{},async()=>{const r=tl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=qI(t,s,"/v1/token",`key=${i}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",BI.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function q1(t,e){return Nr(t,"POST","/v2/accounts:revokeToken",vs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yi{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){be(e.idToken,"internal-error"),be(typeof e.idToken<"u","internal-error"),be(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):ig(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){be(e.length!==0,"internal-error");const n=ig(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(be(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await j1(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new Yi;return r&&(be(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(be(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(be(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Yi,this.toJSON())}_performRefresh(){return gr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fr(t,e){be(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class yr{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,i=pm(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new U1(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new xd(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await so(this,this.stsTokenManager.getToken(this.auth,e));return be(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return M1(this,e)}reload(){return $1(this)}_assign(e){this!==e&&(be(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new yr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){be(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Su(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(zn(this.auth.app))return Promise.reject(wr(this.auth));const e=await this.getIdToken();return await so(this,L1(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,i,o,a,l,c,d;const u=(r=n.displayName)!==null&&r!==void 0?r:void 0,h=(s=n.email)!==null&&s!==void 0?s:void 0,f=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,m=(o=n.photoURL)!==null&&o!==void 0?o:void 0,y=(a=n.tenantId)!==null&&a!==void 0?a:void 0,g=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,v=(c=n.createdAt)!==null&&c!==void 0?c:void 0,b=(d=n.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:E,emailVerified:T,isAnonymous:S,providerData:w,stsTokenManager:D}=n;be(E&&D,e,"internal-error");const O=Yi.fromJSON(this.name,D);be(typeof E=="string",e,"internal-error"),Fr(u,e.name),Fr(h,e.name),be(typeof T=="boolean",e,"internal-error"),be(typeof S=="boolean",e,"internal-error"),Fr(f,e.name),Fr(m,e.name),Fr(y,e.name),Fr(g,e.name),Fr(v,e.name),Fr(b,e.name);const C=new yr({uid:E,auth:e,email:h,emailVerified:T,displayName:u,isAnonymous:S,photoURL:m,phoneNumber:f,tenantId:y,stsTokenManager:O,createdAt:v,lastLoginAt:b});return w&&Array.isArray(w)&&(C.providerData=w.map(z=>Object.assign({},z))),g&&(C._redirectEventId=g),C}static async _fromIdTokenResponse(e,n,r=!1){const s=new Yi;s.updateFromServerResponse(n);const i=new yr({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Su(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];be(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?HI(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),a=new Yi;a.updateFromIdToken(r);const l=new yr({uid:s.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new xd(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const og=new Map;function vr(t){Pr(t instanceof Function,"Expected a class definition");let e=og.get(t);return e?(Pr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,og.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WI{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}WI.type="NONE";const ag=WI;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nu(t,e,n){return`firebase:${t}:${e}:${n}`}class Xi{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=nu(this.userKey,s.apiKey,i),this.fullPersistenceKey=nu("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?yr._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Xi(vr(ag),e,r);const s=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let i=s[0]||vr(ag);const o=nu(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const d=await c._get(o);if(d){const u=yr._fromJSON(e,d);c!==i&&(a=u),i=c;break}}catch{}const l=s.filter(c=>c._shouldAllowMigration);return!i._shouldAllowMigration||!l.length?new Xi(i,e,r):(i=l[0],a&&await i._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==i)try{await c._remove(o)}catch{}})),new Xi(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lg(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(QI(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(KI(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(XI(e))return"Blackberry";if(JI(e))return"Webos";if(vm(e))return"Safari";if((e.includes("chrome/")||zI(e))&&!e.includes("edge/"))return"Chrome";if(YI(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function KI(t=Tt()){return/firefox\//i.test(t)}function vm(t=Tt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function zI(t=Tt()){return/crios\//i.test(t)}function QI(t=Tt()){return/iemobile/i.test(t)}function YI(t=Tt()){return/android/i.test(t)}function XI(t=Tt()){return/blackberry/i.test(t)}function JI(t=Tt()){return/webos/i.test(t)}function bc(t=Tt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function G1(t=Tt()){var e;return bc(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function H1(){return uC()&&document.documentMode===10}function ZI(t=Tt()){return bc(t)||YI(t)||JI(t)||XI(t)||/windows phone/i.test(t)||QI(t)}function W1(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eT(t,e=[]){let n;switch(t){case"Browser":n=lg(Tt());break;case"Worker":n=`${lg(Tt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${yi}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K1{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,a)=>{try{const l=e(i);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function z1(t,e={}){return Nr(t,"GET","/v2/passwordPolicy",vs(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q1=6;class Y1{constructor(e){var n,r,s,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:Q1,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,i,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(s=l.containsLowercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(i=l.containsUppercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X1{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ug(this),this.idTokenSubscription=new ug(this),this.beforeStateQueue=new K1(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=UI,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=vr(n)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await Xi.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await GI(this,{idToken:e}),r=await yr._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(zn(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=s==null?void 0:s._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(s=l.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return be(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Su(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=C1()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(zn(this.app))return Promise.reject(wr(this));const n=e?ct(e):null;return n&&be(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&be(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return zn(this.app)?Promise.reject(wr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return zn(this.app)?Promise.reject(wr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(vr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await z1(this),n=new Y1(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new el("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await q1(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&vr(e)||this._popupRedirectResolver;be(n,this,"argument-error"),this.redirectPersistenceManager=await Xi.create(this,[vr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(be(a,this,"internal-error"),a.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,s);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return be(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=eT(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&S1(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function vi(t){return ct(t)}class ug{constructor(e){this.auth=e,this.observer=null,this.addObserver=pC(n=>this.observer=n)}get next(){return be(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let wc={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function J1(t){wc=t}function tT(t){return wc.loadJS(t)}function Z1(){return wc.recaptchaEnterpriseScript}function eO(){return wc.gapiScript}function tO(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const nO="recaptcha-enterprise",rO="NO_RECAPTCHA";class sO{constructor(e){this.type=nO,this.auth=vi(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,a)=>{V1(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const c=new D1(l);return i.tenantId==null?i._agentRecaptchaConfig=c:i._tenantRecaptchaConfigs[i.tenantId]=c,o(c.siteKey)}}).catch(l=>{a(l)})})}function s(i,o,a){const l=window.grecaptcha;sg(l)?l.enterprise.ready(()=>{l.enterprise.execute(i,{action:e}).then(c=>{o(c)}).catch(()=>{o(rO)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((i,o)=>{r(this.auth).then(a=>{if(!n&&sg(window.grecaptcha))s(a,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=Z1();l.length!==0&&(l+=a),tT(l).then(()=>{s(a,i,o)}).catch(c=>{o(c)})}}).catch(a=>{o(a)})})}}async function cg(t,e,n,r=!1){const s=new sO(t);let i;try{i=await s.verify(n)}catch{i=await s.verify(n,!0)}const o=Object.assign({},e);return r?Object.assign(o,{captchaResp:i}):Object.assign(o,{captchaResponse:i}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function Dd(t,e,n,r){var s;if(!((s=t._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await cg(t,e,n,n==="getOobCode");return r(t,i)}else return r(t,e).catch(async i=>{if(i.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await cg(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(i)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iO(t,e){const n=Tc(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(wa(i,e??{}))return s;$n(s,"already-initialized")}return n.initialize({options:e})}function oO(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(vr);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function aO(t,e,n){const r=vi(t);be(r._canInitEmulator,r,"emulator-config-failed"),be(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!!(n!=null&&n.disableWarnings),i=nT(e),{host:o,port:a}=lO(e),l=a===null?"":`:${a}`;r.config.emulator={url:`${i}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})}),s||uO()}function nT(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function lO(t){const e=nT(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:hg(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:hg(o)}}}function hg(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function uO(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Em{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return gr("not implemented")}_getIdTokenResponse(e){return gr("not implemented")}_linkToIdToken(e,n){return gr("not implemented")}_getReauthenticationResolver(e){return gr("not implemented")}}async function cO(t,e){return Nr(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hO(t,e){return rl(t,"POST","/v1/accounts:signInWithPassword",vs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dO(t,e){return rl(t,"POST","/v1/accounts:signInWithEmailLink",vs(t,e))}async function fO(t,e){return rl(t,"POST","/v1/accounts:signInWithEmailLink",vs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sa extends Em{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new Sa(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Sa(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Dd(e,n,"signInWithPassword",hO);case"emailLink":return dO(e,{email:this._email,oobCode:this._password});default:$n(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Dd(e,r,"signUpPassword",cO);case"emailLink":return fO(e,{idToken:n,email:this._email,oobCode:this._password});default:$n(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ji(t,e){return rl(t,"POST","/v1/accounts:signInWithIdp",vs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mO="http://localhost";class si extends Em{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new si(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):$n("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,i=pm(n,["providerId","signInMethod"]);if(!r||!s)return null;const o=new si(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Ji(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Ji(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Ji(e,n)}buildRequest(){const e={requestUri:mO,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=tl(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pO(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function _O(t){const e=zo(Qo(t)).link,n=e?zo(Qo(e)).deep_link_id:null,r=zo(Qo(t)).deep_link_id;return(r?zo(Qo(r)).link:null)||r||n||e||t}class Im{constructor(e){var n,r,s,i,o,a;const l=zo(Qo(e)),c=(n=l.apiKey)!==null&&n!==void 0?n:null,d=(r=l.oobCode)!==null&&r!==void 0?r:null,u=pO((s=l.mode)!==null&&s!==void 0?s:null);be(c&&d&&u,"argument-error"),this.apiKey=c,this.operation=u,this.code=d,this.continueUrl=(i=l.continueUrl)!==null&&i!==void 0?i:null,this.languageCode=(o=l.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=_O(e);try{return new Im(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wo{constructor(){this.providerId=wo.PROVIDER_ID}static credential(e,n){return Sa._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Im.parseLink(n);return be(r,"argument-error"),Sa._fromEmailAndCode(e,r.code,r.tenantId)}}wo.PROVIDER_ID="password";wo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";wo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rT{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sl extends rT{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yr extends sl{constructor(){super("facebook.com")}static credential(e){return si._fromParams({providerId:Yr.PROVIDER_ID,signInMethod:Yr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Yr.credentialFromTaggedObject(e)}static credentialFromError(e){return Yr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Yr.credential(e.oauthAccessToken)}catch{return null}}}Yr.FACEBOOK_SIGN_IN_METHOD="facebook.com";Yr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xr extends sl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return si._fromParams({providerId:Xr.PROVIDER_ID,signInMethod:Xr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Xr.credentialFromTaggedObject(e)}static credentialFromError(e){return Xr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Xr.credential(n,r)}catch{return null}}}Xr.GOOGLE_SIGN_IN_METHOD="google.com";Xr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jr extends sl{constructor(){super("github.com")}static credential(e){return si._fromParams({providerId:Jr.PROVIDER_ID,signInMethod:Jr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Jr.credentialFromTaggedObject(e)}static credentialFromError(e){return Jr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Jr.credential(e.oauthAccessToken)}catch{return null}}}Jr.GITHUB_SIGN_IN_METHOD="github.com";Jr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zr extends sl{constructor(){super("twitter.com")}static credential(e,n){return si._fromParams({providerId:Zr.PROVIDER_ID,signInMethod:Zr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Zr.credentialFromTaggedObject(e)}static credentialFromError(e){return Zr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Zr.credential(n,r)}catch{return null}}}Zr.TWITTER_SIGN_IN_METHOD="twitter.com";Zr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gO(t,e){return rl(t,"POST","/v1/accounts:signUp",vs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ii{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await yr._fromIdTokenResponse(e,r,s),o=dg(r);return new ii({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=dg(r);return new ii({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function dg(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ru extends cr{constructor(e,n,r,s){var i;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Ru.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Ru(e,n,r,s)}}function sT(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Ru._fromErrorAndOperation(t,i,e,r):i})}async function yO(t,e,n=!1){const r=await so(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return ii._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vO(t,e,n=!1){const{auth:r}=t;if(zn(r.app))return Promise.reject(wr(r));const s="reauthenticate";try{const i=await so(t,sT(r,s,e,t),n);be(i.idToken,r,"internal-error");const o=ym(i.idToken);be(o,r,"internal-error");const{sub:a}=o;return be(t.uid===a,r,"user-mismatch"),ii._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&$n(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iT(t,e,n=!1){if(zn(t.app))return Promise.reject(wr(t));const r="signIn",s=await sT(t,r,e),i=await ii._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function EO(t,e){return iT(vi(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oT(t){const e=vi(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function IO(t,e,n){if(zn(t.app))return Promise.reject(wr(t));const r=vi(t),o=await Dd(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",gO).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&oT(t),l}),a=await ii._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function TO(t,e,n){return zn(t.app)?Promise.reject(wr(t)):EO(ct(t),wo.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&oT(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bO(t,e){return Nr(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wO(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=ct(t),i={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await so(r,bO(r.auth,i));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const a=r.providerData.find(({providerId:l})=>l==="password");a&&(a.displayName=r.displayName,a.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function AO(t,e,n,r){return ct(t).onIdTokenChanged(e,n,r)}function SO(t,e,n){return ct(t).beforeAuthStateChanged(e,n)}function RO(t){return ct(t).signOut()}const Pu="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aT{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Pu,"1"),this.storage.removeItem(Pu),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PO(){const t=Tt();return vm(t)||bc(t)}const CO=1e3,OO=10;class lT extends aT{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=PO()&&W1(),this.fallbackToPolling=ZI(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const o=this.storage.getItem(r);if(e.newValue!==o)e.newValue!==null?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);H1()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,OO):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},CO)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}lT.type="LOCAL";const kO=lT;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uT extends aT{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}uT.type="SESSION";const cT=uT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NO(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ac{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new Ac(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const a=Array.from(o).map(async c=>c(n.origin,i)),l=await NO(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Ac.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tm(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xO{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((a,l)=>{const c=Tm("",20);s.port1.start();const d=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(u){const h=u;if(h.data.eventId===c)switch(h.data.status){case"ack":clearTimeout(d),i=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(h.data.response);break;default:clearTimeout(d),clearTimeout(i),l(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sr(){return window}function DO(t){sr().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hT(){return typeof sr().WorkerGlobalScope<"u"&&typeof sr().importScripts=="function"}async function VO(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function LO(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function MO(){return hT()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dT="firebaseLocalStorageDb",FO=1,Cu="firebaseLocalStorage",fT="fbase_key";class il{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Sc(t,e){return t.transaction([Cu],e?"readwrite":"readonly").objectStore(Cu)}function UO(){const t=indexedDB.deleteDatabase(dT);return new il(t).toPromise()}function Vd(){const t=indexedDB.open(dT,FO);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Cu,{keyPath:fT})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Cu)?e(r):(r.close(),await UO(),e(await Vd()))})})}async function fg(t,e,n){const r=Sc(t,!0).put({[fT]:e,value:n});return new il(r).toPromise()}async function $O(t,e){const n=Sc(t,!1).get(e),r=await new il(n).toPromise();return r===void 0?null:r.value}function mg(t,e){const n=Sc(t,!0).delete(e);return new il(n).toPromise()}const BO=800,jO=3;class mT{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Vd(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>jO)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return hT()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Ac._getInstance(MO()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await VO(),!this.activeServiceWorker)return;this.sender=new xO(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||LO()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Vd();return await fg(e,Pu,"1"),await mg(e,Pu),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>fg(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>$O(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>mg(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=Sc(s,!1).getAll();return new il(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),BO)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}mT.type="LOCAL";const qO=mT;new nl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GO(t,e){return e?vr(e):(be(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bm extends Em{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ji(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Ji(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Ji(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function HO(t){return iT(t.auth,new bm(t),t.bypassAuthState)}function WO(t){const{auth:e,user:n}=t;return be(n,e,"internal-error"),vO(n,new bm(t),t.bypassAuthState)}async function KO(t){const{auth:e,user:n}=t;return be(n,e,"internal-error"),yO(n,new bm(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pT{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return HO;case"linkViaPopup":case"linkViaRedirect":return KO;case"reauthViaPopup":case"reauthViaRedirect":return WO;default:$n(this.auth,"internal-error")}}resolve(e){Pr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Pr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zO=new nl(2e3,1e4);class ji extends pT{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,ji.currentPopupAction&&ji.currentPopupAction.cancel(),ji.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return be(e,this.auth,"internal-error"),e}async onExecution(){Pr(this.filter.length===1,"Popup operations only handle one event");const e=Tm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(rr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(rr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ji.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(rr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,zO.get())};e()}}ji.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QO="pendingRedirect",ru=new Map;class YO extends pT{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=ru.get(this.auth._key());if(!e){try{const r=await XO(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}ru.set(this.auth._key(),e)}return this.bypassAuthState||ru.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function XO(t,e){const n=ek(e),r=ZO(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function JO(t,e){ru.set(t._key(),e)}function ZO(t){return vr(t._redirectPersistence)}function ek(t){return nu(QO,t.config.apiKey,t.name)}async function tk(t,e,n=!1){if(zn(t.app))return Promise.reject(wr(t));const r=vi(t),s=GO(r,e),o=await new YO(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nk=10*60*1e3;class rk{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!sk(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!_T(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(rr(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=nk&&this.cachedEventUids.clear(),this.cachedEventUids.has(pg(e))}saveEventToCache(e){this.cachedEventUids.add(pg(e)),this.lastProcessedEventTime=Date.now()}}function pg(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function _T({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function sk(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return _T(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ik(t,e={}){return Nr(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ok=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ak=/^https?/;async function lk(t){if(t.config.emulator)return;const{authorizedDomains:e}=await ik(t);for(const n of e)try{if(uk(n))return}catch{}$n(t,"unauthorized-domain")}function uk(t){const e=Nd(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!ak.test(n))return!1;if(ok.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ck=new nl(3e4,6e4);function _g(){const t=sr().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function hk(t){return new Promise((e,n)=>{var r,s,i;function o(){_g(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{_g(),n(rr(t,"network-request-failed"))},timeout:ck.get()})}if(!((s=(r=sr().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=sr().gapi)===null||i===void 0)&&i.load)o();else{const a=tO("iframefcb");return sr()[a]=()=>{gapi.load?o():n(rr(t,"network-request-failed"))},tT(`${eO()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw su=null,e})}let su=null;function dk(t){return su=su||hk(t),su}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fk=new nl(5e3,15e3),mk="__/auth/iframe",pk="emulator/auth/iframe",_k={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},gk=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function yk(t){const e=t.config;be(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?gm(e,pk):`https://${t.config.authDomain}/${mk}`,r={apiKey:e.apiKey,appName:t.name,v:yi},s=gk.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${tl(r).slice(1)}`}async function vk(t){const e=await dk(t),n=sr().gapi;return be(n,t,"internal-error"),e.open({where:document.body,url:yk(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:_k,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=rr(t,"network-request-failed"),a=sr().setTimeout(()=>{i(o)},fk.get());function l(){sr().clearTimeout(a),s(r)}r.ping(l).then(l,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ek={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Ik=500,Tk=600,bk="_blank",wk="http://localhost";class gg{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Ak(t,e,n,r=Ik,s=Tk){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},Ek),{width:r.toString(),height:s.toString(),top:i,left:o}),c=Tt().toLowerCase();n&&(a=zI(c)?bk:n),KI(c)&&(e=e||wk,l.scrollbars="yes");const d=Object.entries(l).reduce((h,[f,m])=>`${h}${f}=${m},`,"");if(G1(c)&&a!=="_self")return Sk(e||"",a),new gg(null);const u=window.open(e||"",a,d);be(u,t,"popup-blocked");try{u.focus()}catch{}return new gg(u)}function Sk(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rk="__/auth/handler",Pk="emulator/auth/handler",Ck=encodeURIComponent("fac");async function yg(t,e,n,r,s,i){be(t.config.authDomain,t,"auth-domain-config-required"),be(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:yi,eventId:s};if(e instanceof rT){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",mC(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,u]of Object.entries(i||{}))o[d]=u}if(e instanceof sl){const d=e.getScopes().filter(u=>u!=="");d.length>0&&(o.scopes=d.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const d of Object.keys(a))a[d]===void 0&&delete a[d];const l=await t._getAppCheckToken(),c=l?`#${Ck}=${encodeURIComponent(l)}`:"";return`${Ok(t)}?${tl(a).slice(1)}${c}`}function Ok({config:t}){return t.emulator?gm(t,Pk):`https://${t.authDomain}/${Rk}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bh="webStorageSupport";class kk{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=cT,this._completeRedirectFn=tk,this._overrideRedirectResult=JO}async _openPopup(e,n,r,s){var i;Pr((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await yg(e,n,r,Nd(),s);return Ak(e,o,Tm())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await yg(e,n,r,Nd(),s);return DO(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(Pr(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await vk(e),r=new rk(e);return n.register("authEvent",s=>(be(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Bh,{type:Bh},s=>{var i;const o=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[Bh];o!==void 0&&n(!!o),$n(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=lk(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return ZI()||vm()||bc()}}const Nk=kk;var vg="@firebase/auth",Eg="1.7.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xk{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){be(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dk(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Vk(t){ri(new ds("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;be(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:eT(t)},c=new X1(r,s,i,l);return oO(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),ri(new ds("auth-internal",e=>{const n=vi(e.getProvider("auth").getImmediate());return(r=>new xk(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),nr(vg,Eg,Dk(t)),nr(vg,Eg,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lk=5*60,Mk=CI("authIdTokenMaxAge")||Lk;let Ig=null;const Fk=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>Mk)return;const s=n==null?void 0:n.token;Ig!==s&&(Ig=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function Uk(t=VI()){const e=Tc(t,"auth");if(e.isInitialized())return e.getImmediate();const n=iO(t,{popupRedirectResolver:Nk,persistence:[qO,kO,cT]}),r=CI("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=Fk(i.toString());SO(n,o,()=>o(n.currentUser)),AO(n,a=>o(a))}}const s=RI("auth");return s&&aO(n,`http://${s}`),n}function $k(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}J1({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=rr("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",$k().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Vk("Browser");var Bk=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},te,wm=wm||{},Ae=Bk||self;function Rc(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function ol(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function jk(t){return Object.prototype.hasOwnProperty.call(t,jh)&&t[jh]||(t[jh]=++qk)}var jh="closure_uid_"+(1e9*Math.random()>>>0),qk=0;function Gk(t,e,n){return t.call.apply(t.bind,arguments)}function Hk(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var s=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(s,r),t.apply(e,s)}}return function(){return t.apply(e,arguments)}}function Qt(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?Qt=Gk:Qt=Hk,Qt.apply(null,arguments)}function Dl(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function xt(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(r,s,i){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[s].apply(r,o)}}function Es(){this.s=this.s,this.o=this.o}var Wk=0;Es.prototype.s=!1;Es.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),Wk!=0)&&jk(this)};Es.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const gT=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function Am(t){const e=t.length;if(0<e){const n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function Tg(t,e){for(let n=1;n<arguments.length;n++){const r=arguments[n];if(Rc(r)){const s=t.length||0,i=r.length||0;t.length=s+i;for(let o=0;o<i;o++)t[s+o]=r[o]}else t.push(r)}}function Yt(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}Yt.prototype.h=function(){this.defaultPrevented=!0};var Kk=function(){if(!Ae.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{const n=()=>{};Ae.addEventListener("test",n,e),Ae.removeEventListener("test",n,e)}catch{}return t}();function Ra(t){return/^[\s\xa0]*$/.test(t)}function Pc(){var t=Ae.navigator;return t&&(t=t.userAgent)?t:""}function Wn(t){return Pc().indexOf(t)!=-1}function Sm(t){return Sm[" "](t),t}Sm[" "]=function(){};function zk(t,e){var n=$N;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}var Qk=Wn("Opera"),io=Wn("Trident")||Wn("MSIE"),yT=Wn("Edge"),Ld=yT||io,vT=Wn("Gecko")&&!(Pc().toLowerCase().indexOf("webkit")!=-1&&!Wn("Edge"))&&!(Wn("Trident")||Wn("MSIE"))&&!Wn("Edge"),Yk=Pc().toLowerCase().indexOf("webkit")!=-1&&!Wn("Edge");function ET(){var t=Ae.document;return t?t.documentMode:void 0}var Md;e:{var qh="",Gh=function(){var t=Pc();if(vT)return/rv:([^\);]+)(\)|;)/.exec(t);if(yT)return/Edge\/([\d\.]+)/.exec(t);if(io)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(Yk)return/WebKit\/(\S+)/.exec(t);if(Qk)return/(?:Version)[ \/]?(\S+)/.exec(t)}();if(Gh&&(qh=Gh?Gh[1]:""),io){var Hh=ET();if(Hh!=null&&Hh>parseFloat(qh)){Md=String(Hh);break e}}Md=qh}var Fd;if(Ae.document&&io){var bg=ET();Fd=bg||parseInt(Md,10)||void 0}else Fd=void 0;var Xk=Fd;function Pa(t,e){if(Yt.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(vT){e:{try{Sm(e.nodeName);var s=!0;break e}catch{}s=!1}s||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:Jk[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&Pa.$.h.call(this)}}xt(Pa,Yt);var Jk={2:"touch",3:"pen",4:"mouse"};Pa.prototype.h=function(){Pa.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var al="closure_listenable_"+(1e6*Math.random()|0),Zk=0;function eN(t,e,n,r,s){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.la=s,this.key=++Zk,this.fa=this.ia=!1}function Cc(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function Rm(t,e,n){for(const r in t)e.call(n,t[r],r,t)}function tN(t,e){for(const n in t)e.call(void 0,t[n],n,t)}function IT(t){const e={};for(const n in t)e[n]=t[n];return e}const wg="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function TT(t,e){let n,r;for(let s=1;s<arguments.length;s++){r=arguments[s];for(n in r)t[n]=r[n];for(let i=0;i<wg.length;i++)n=wg[i],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function Oc(t){this.src=t,this.g={},this.h=0}Oc.prototype.add=function(t,e,n,r,s){var i=t.toString();t=this.g[i],t||(t=this.g[i]=[],this.h++);var o=$d(t,e,r,s);return-1<o?(e=t[o],n||(e.ia=!1)):(e=new eN(e,this.src,i,!!r,s),e.ia=n,t.push(e)),e};function Ud(t,e){var n=e.type;if(n in t.g){var r=t.g[n],s=gT(r,e),i;(i=0<=s)&&Array.prototype.splice.call(r,s,1),i&&(Cc(e),t.g[n].length==0&&(delete t.g[n],t.h--))}}function $d(t,e,n,r){for(var s=0;s<t.length;++s){var i=t[s];if(!i.fa&&i.listener==e&&i.capture==!!n&&i.la==r)return s}return-1}var Pm="closure_lm_"+(1e6*Math.random()|0),Wh={};function bT(t,e,n,r,s){if(r&&r.once)return AT(t,e,n,r,s);if(Array.isArray(e)){for(var i=0;i<e.length;i++)bT(t,e[i],n,r,s);return null}return n=km(n),t&&t[al]?t.O(e,n,ol(r)?!!r.capture:!!r,s):wT(t,e,n,!1,r,s)}function wT(t,e,n,r,s,i){if(!e)throw Error("Invalid event type");var o=ol(s)?!!s.capture:!!s,a=Om(t);if(a||(t[Pm]=a=new Oc(t)),n=a.add(e,n,r,o,i),n.proxy)return n;if(r=nN(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)Kk||(s=o),s===void 0&&(s=!1),t.addEventListener(e.toString(),r,s);else if(t.attachEvent)t.attachEvent(RT(e.toString()),r);else if(t.addListener&&t.removeListener)t.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return n}function nN(){function t(n){return e.call(t.src,t.listener,n)}const e=rN;return t}function AT(t,e,n,r,s){if(Array.isArray(e)){for(var i=0;i<e.length;i++)AT(t,e[i],n,r,s);return null}return n=km(n),t&&t[al]?t.P(e,n,ol(r)?!!r.capture:!!r,s):wT(t,e,n,!0,r,s)}function ST(t,e,n,r,s){if(Array.isArray(e))for(var i=0;i<e.length;i++)ST(t,e[i],n,r,s);else r=ol(r)?!!r.capture:!!r,n=km(n),t&&t[al]?(t=t.i,e=String(e).toString(),e in t.g&&(i=t.g[e],n=$d(i,n,r,s),-1<n&&(Cc(i[n]),Array.prototype.splice.call(i,n,1),i.length==0&&(delete t.g[e],t.h--)))):t&&(t=Om(t))&&(e=t.g[e.toString()],t=-1,e&&(t=$d(e,n,r,s)),(n=-1<t?e[t]:null)&&Cm(n))}function Cm(t){if(typeof t!="number"&&t&&!t.fa){var e=t.src;if(e&&e[al])Ud(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(RT(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=Om(e))?(Ud(n,t),n.h==0&&(n.src=null,e[Pm]=null)):Cc(t)}}}function RT(t){return t in Wh?Wh[t]:Wh[t]="on"+t}function rN(t,e){if(t.fa)t=!0;else{e=new Pa(e,this);var n=t.listener,r=t.la||t.src;t.ia&&Cm(t),t=n.call(r,e)}return t}function Om(t){return t=t[Pm],t instanceof Oc?t:null}var Kh="__closure_events_fn_"+(1e9*Math.random()>>>0);function km(t){return typeof t=="function"?t:(t[Kh]||(t[Kh]=function(e){return t.handleEvent(e)}),t[Kh])}function kt(){Es.call(this),this.i=new Oc(this),this.S=this,this.J=null}xt(kt,Es);kt.prototype[al]=!0;kt.prototype.removeEventListener=function(t,e,n,r){ST(this,t,e,n,r)};function $t(t,e){var n,r=t.J;if(r)for(n=[];r;r=r.J)n.push(r);if(t=t.S,r=e.type||e,typeof e=="string")e=new Yt(e,t);else if(e instanceof Yt)e.target=e.target||t;else{var s=e;e=new Yt(r,t),TT(e,s)}if(s=!0,n)for(var i=n.length-1;0<=i;i--){var o=e.g=n[i];s=Vl(o,r,!0,e)&&s}if(o=e.g=t,s=Vl(o,r,!0,e)&&s,s=Vl(o,r,!1,e)&&s,n)for(i=0;i<n.length;i++)o=e.g=n[i],s=Vl(o,r,!1,e)&&s}kt.prototype.N=function(){if(kt.$.N.call(this),this.i){var t=this.i,e;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Cc(n[r]);delete t.g[e],t.h--}}this.J=null};kt.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)};kt.prototype.P=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};function Vl(t,e,n,r){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var s=!0,i=0;i<e.length;++i){var o=e[i];if(o&&!o.fa&&o.capture==n){var a=o.listener,l=o.la||o.src;o.ia&&Ud(t.i,o),s=a.call(l,r)!==!1&&s}}return s&&!r.defaultPrevented}var Nm=Ae.JSON.stringify;class sN{constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}function iN(){var t=xm;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}class oN{constructor(){this.h=this.g=null}add(e,n){const r=PT.get();r.set(e,n),this.h?this.h.next=r:this.g=r,this.h=r}}var PT=new sN(()=>new aN,t=>t.reset());class aN{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function lN(t){var e=1;t=t.split(":");const n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function uN(t){Ae.setTimeout(()=>{throw t},0)}let Ca,Oa=!1,xm=new oN,CT=()=>{const t=Ae.Promise.resolve(void 0);Ca=()=>{t.then(cN)}};var cN=()=>{for(var t;t=iN();){try{t.h.call(t.g)}catch(n){uN(n)}var e=PT;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}Oa=!1};function kc(t,e){kt.call(this),this.h=t||1,this.g=e||Ae,this.j=Qt(this.qb,this),this.l=Date.now()}xt(kc,kt);te=kc.prototype;te.ga=!1;te.T=null;te.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),$t(this,"tick"),this.ga&&(Dm(this),this.start()))}};te.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function Dm(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}te.N=function(){kc.$.N.call(this),Dm(this),delete this.g};function Vm(t,e,n){if(typeof t=="function")n&&(t=Qt(t,n));else if(t&&typeof t.handleEvent=="function")t=Qt(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:Ae.setTimeout(t,e||0)}function OT(t){t.g=Vm(()=>{t.g=null,t.i&&(t.i=!1,OT(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}class hN extends Es{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:OT(this)}N(){super.N(),this.g&&(Ae.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ka(t){Es.call(this),this.h=t,this.g={}}xt(ka,Es);var Ag=[];function kT(t,e,n,r){Array.isArray(n)||(n&&(Ag[0]=n.toString()),n=Ag);for(var s=0;s<n.length;s++){var i=bT(e,n[s],r||t.handleEvent,!1,t.h||t);if(!i)break;t.g[i.key]=i}}function NT(t){Rm(t.g,function(e,n){this.g.hasOwnProperty(n)&&Cm(e)},t),t.g={}}ka.prototype.N=function(){ka.$.N.call(this),NT(this)};ka.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function Nc(){this.g=!0}Nc.prototype.Ea=function(){this.g=!1};function dN(t,e,n,r,s,i){t.info(function(){if(t.g)if(i)for(var o="",a=i.split("&"),l=0;l<a.length;l++){var c=a[l].split("=");if(1<c.length){var d=c[0];c=c[1];var u=d.split("_");o=2<=u.length&&u[1]=="type"?o+(d+"="+c+"&"):o+(d+"=redacted&")}}else o=null;else o=i;return"XMLHTTP REQ ("+r+") [attempt "+s+"]: "+e+`
`+n+`
`+o})}function fN(t,e,n,r,s,i,o){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+s+"]: "+e+`
`+n+`
`+i+" "+o})}function qi(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+pN(t,n)+(r?" "+r:"")})}function mN(t,e){t.info(function(){return"TIMEOUT: "+e})}Nc.prototype.info=function(){};function pN(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var s=r[1];if(Array.isArray(s)&&!(1>s.length)){var i=s[0];if(i!="noop"&&i!="stop"&&i!="close")for(var o=1;o<s.length;o++)s[o]=""}}}}return Nm(n)}catch{return e}}var Ei={},Sg=null;function xc(){return Sg=Sg||new kt}Ei.Ta="serverreachability";function xT(t){Yt.call(this,Ei.Ta,t)}xt(xT,Yt);function Na(t){const e=xc();$t(e,new xT(e))}Ei.STAT_EVENT="statevent";function DT(t,e){Yt.call(this,Ei.STAT_EVENT,t),this.stat=e}xt(DT,Yt);function en(t){const e=xc();$t(e,new DT(e,t))}Ei.Ua="timingevent";function VT(t,e){Yt.call(this,Ei.Ua,t),this.size=e}xt(VT,Yt);function ll(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return Ae.setTimeout(function(){t()},e)}var Dc={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},LT={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Lm(){}Lm.prototype.h=null;function Rg(t){return t.h||(t.h=t.i())}function MT(){}var ul={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Mm(){Yt.call(this,"d")}xt(Mm,Yt);function Fm(){Yt.call(this,"c")}xt(Fm,Yt);var Bd;function Vc(){}xt(Vc,Lm);Vc.prototype.g=function(){return new XMLHttpRequest};Vc.prototype.i=function(){return{}};Bd=new Vc;function cl(t,e,n,r){this.l=t,this.j=e,this.m=n,this.W=r||1,this.U=new ka(this),this.P=_N,t=Ld?125:void 0,this.V=new kc(t),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new FT}function FT(){this.i=null,this.g="",this.h=!1}var _N=45e3,UT={},jd={};te=cl.prototype;te.setTimeout=function(t){this.P=t};function qd(t,e,n){t.L=1,t.A=Mc(Cr(e)),t.u=n,t.S=!0,$T(t,null)}function $T(t,e){t.G=Date.now(),hl(t),t.B=Cr(t.A);var n=t.B,r=t.W;Array.isArray(r)||(r=[String(r)]),zT(n.i,"t",r),t.o=0,n=t.l.J,t.h=new FT,t.g=p0(t.l,n?e:null,!t.u),0<t.O&&(t.M=new hN(Qt(t.Pa,t,t.g),t.O)),kT(t.U,t.g,"readystatechange",t.nb),e=t.I?IT(t.I):{},t.u?(t.v||(t.v="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.B,t.v,t.u,e)):(t.v="GET",t.g.ha(t.B,t.v,null,e)),Na(),dN(t.j,t.v,t.B,t.m,t.W,t.u)}te.nb=function(t){t=t.target;const e=this.M;e&&Qn(t)==3?e.l():this.Pa(t)};te.Pa=function(t){try{if(t==this.g)e:{const d=Qn(this.g);var e=this.g.Ia();const u=this.g.da();if(!(3>d)&&(d!=3||Ld||this.g&&(this.h.h||this.g.ja()||kg(this.g)))){this.J||d!=4||e==7||(e==8||0>=u?Na(3):Na(2)),Lc(this);var n=this.g.da();this.ca=n;t:if(BT(this)){var r=kg(this.g);t="";var s=r.length,i=Qn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ks(this),ua(this);var o="";break t}this.h.i=new Ae.TextDecoder}for(e=0;e<s;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:i&&e==s-1});r.length=0,this.h.g+=t,this.o=0,o=this.h.g}else o=this.g.ja();if(this.i=n==200,fN(this.j,this.v,this.B,this.m,this.W,d,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Ra(a)){var c=a;break t}}c=null}if(n=c)qi(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Gd(this,n);else{this.i=!1,this.s=3,en(12),Ks(this),ua(this);break e}}this.S?(jT(this,d,o),Ld&&this.i&&d==3&&(kT(this.U,this.V,"tick",this.mb),this.V.start())):(qi(this.j,this.m,o,null),Gd(this,o)),d==4&&Ks(this),this.i&&!this.J&&(d==4?h0(this.l,this):(this.i=!1,hl(this)))}else MN(this.g),n==400&&0<o.indexOf("Unknown SID")?(this.s=3,en(12)):(this.s=0,en(13)),Ks(this),ua(this)}}}catch{}finally{}};function BT(t){return t.g?t.v=="GET"&&t.L!=2&&t.l.Ha:!1}function jT(t,e,n){let r=!0,s;for(;!t.J&&t.o<n.length;)if(s=gN(t,n),s==jd){e==4&&(t.s=4,en(14),r=!1),qi(t.j,t.m,null,"[Incomplete Response]");break}else if(s==UT){t.s=4,en(15),qi(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}else qi(t.j,t.m,s,null),Gd(t,s);BT(t)&&t.o!=0&&(t.h.g=t.h.g.slice(t.o),t.o=0),e!=4||n.length!=0||t.h.h||(t.s=1,en(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.ba&&(t.ba=!0,e=t.l,e.g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),Gm(e),e.M=!0,en(11))):(qi(t.j,t.m,n,"[Invalid Chunked Response]"),Ks(t),ua(t))}te.mb=function(){if(this.g){var t=Qn(this.g),e=this.g.ja();this.o<e.length&&(Lc(this),jT(this,t,e),this.i&&t!=4&&hl(this))}};function gN(t,e){var n=t.o,r=e.indexOf(`
`,n);return r==-1?jd:(n=Number(e.substring(n,r)),isNaN(n)?UT:(r+=1,r+n>e.length?jd:(e=e.slice(r,r+n),t.o=r+n,e)))}te.cancel=function(){this.J=!0,Ks(this)};function hl(t){t.Y=Date.now()+t.P,qT(t,t.P)}function qT(t,e){if(t.C!=null)throw Error("WatchDog timer not null");t.C=ll(Qt(t.lb,t),e)}function Lc(t){t.C&&(Ae.clearTimeout(t.C),t.C=null)}te.lb=function(){this.C=null;const t=Date.now();0<=t-this.Y?(mN(this.j,this.B),this.L!=2&&(Na(),en(17)),Ks(this),this.s=2,ua(this)):qT(this,this.Y-t)};function ua(t){t.l.H==0||t.J||h0(t.l,t)}function Ks(t){Lc(t);var e=t.M;e&&typeof e.sa=="function"&&e.sa(),t.M=null,Dm(t.V),NT(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function Gd(t,e){try{var n=t.l;if(n.H!=0&&(n.g==t||Hd(n.i,t))){if(!t.K&&Hd(n.i,t)&&n.H==3){try{var r=n.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&r.length==3){var s=r;if(s[0]==0){e:if(!n.u){if(n.g)if(n.g.G+3e3<t.G)Nu(n),Bc(n);else break e;qm(n),en(18)}}else n.Fa=s[1],0<n.Fa-n.V&&37500>s[2]&&n.G&&n.A==0&&!n.v&&(n.v=ll(Qt(n.ib,n),6e3));if(1>=XT(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else zs(n,11)}else if((t.K||n.g==t)&&Nu(n),!Ra(e))for(s=n.Ja.g.parse(e),e=0;e<s.length;e++){let c=s[e];if(n.V=c[0],c=c[1],n.H==2)if(c[0]=="c"){n.K=c[1],n.pa=c[2];const d=c[3];d!=null&&(n.ra=d,n.l.info("VER="+n.ra));const u=c[4];u!=null&&(n.Ga=u,n.l.info("SVER="+n.Ga));const h=c[5];h!=null&&typeof h=="number"&&0<h&&(r=1.5*h,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const f=t.g;if(f){const m=f.g?f.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(m){var i=r.i;i.g||m.indexOf("spdy")==-1&&m.indexOf("quic")==-1&&m.indexOf("h2")==-1||(i.j=i.l,i.g=new Set,i.h&&(Um(i,i.h),i.h=null))}if(r.F){const y=f.g?f.g.getResponseHeader("X-HTTP-Session-Id"):null;y&&(r.Da=y,it(r.I,r.F,y))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms")),r=n;var o=t;if(r.wa=m0(r,r.J?r.pa:null,r.Y),o.K){JT(r.i,o);var a=o,l=r.L;l&&a.setTimeout(l),a.C&&(Lc(a),hl(a)),r.g=o}else u0(r);0<n.j.length&&jc(n)}else c[0]!="stop"&&c[0]!="close"||zs(n,7);else n.H==3&&(c[0]=="stop"||c[0]=="close"?c[0]=="stop"?zs(n,7):jm(n):c[0]!="noop"&&n.h&&n.h.Aa(c),n.A=0)}}Na(4)}catch{}}function yN(t){if(t.Z&&typeof t.Z=="function")return t.Z();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if(typeof t=="string")return t.split("");if(Rc(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}e=[],n=0;for(r in t)e[n++]=t[r];return e}function vN(t){if(t.ta&&typeof t.ta=="function")return t.ta();if(!t.Z||typeof t.Z!="function"){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(Rc(t)||typeof t=="string"){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(const r in t)e[n++]=r;return e}}}function GT(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(Rc(t)||typeof t=="string")Array.prototype.forEach.call(t,e,void 0);else for(var n=vN(t),r=yN(t),s=r.length,i=0;i<s;i++)e.call(void 0,r[i],n&&n[i],t)}var HT=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function EN(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),s=null;if(0<=r){var i=t[n].substring(0,r);s=t[n].substring(r+1)}else i=t[n];e(i,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}function Zs(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof Zs){this.h=t.h,Ou(this,t.j),this.s=t.s,this.g=t.g,ku(this,t.m),this.l=t.l;var e=t.i,n=new xa;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),Pg(this,n),this.o=t.o}else t&&(e=String(t).match(HT))?(this.h=!1,Ou(this,e[1]||"",!0),this.s=Yo(e[2]||""),this.g=Yo(e[3]||"",!0),ku(this,e[4]),this.l=Yo(e[5]||"",!0),Pg(this,e[6]||"",!0),this.o=Yo(e[7]||"")):(this.h=!1,this.i=new xa(null,this.h))}Zs.prototype.toString=function(){var t=[],e=this.j;e&&t.push(Xo(e,Cg,!0),":");var n=this.g;return(n||e=="file")&&(t.push("//"),(e=this.s)&&t.push(Xo(e,Cg,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&t.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&t.push("/"),t.push(Xo(n,n.charAt(0)=="/"?bN:TN,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",Xo(n,AN)),t.join("")};function Cr(t){return new Zs(t)}function Ou(t,e,n){t.j=n?Yo(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function ku(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function Pg(t,e,n){e instanceof xa?(t.i=e,SN(t.i,t.h)):(n||(e=Xo(e,wN)),t.i=new xa(e,t.h))}function it(t,e,n){t.i.set(e,n)}function Mc(t){return it(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function Yo(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Xo(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,IN),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function IN(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var Cg=/[#\/\?@]/g,TN=/[#\?:]/g,bN=/[#\?]/g,wN=/[#\?@]/g,AN=/#/g;function xa(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function Is(t){t.g||(t.g=new Map,t.h=0,t.i&&EN(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}te=xa.prototype;te.add=function(t,e){Is(this),this.i=null,t=Ao(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this};function WT(t,e){Is(t),e=Ao(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function KT(t,e){return Is(t),e=Ao(t,e),t.g.has(e)}te.forEach=function(t,e){Is(this),this.g.forEach(function(n,r){n.forEach(function(s){t.call(e,s,r,this)},this)},this)};te.ta=function(){Is(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let r=0;r<e.length;r++){const s=t[r];for(let i=0;i<s.length;i++)n.push(e[r])}return n};te.Z=function(t){Is(this);let e=[];if(typeof t=="string")KT(this,t)&&(e=e.concat(this.g.get(Ao(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e};te.set=function(t,e){return Is(this),this.i=null,t=Ao(this,t),KT(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};te.get=function(t,e){return t?(t=this.Z(t),0<t.length?String(t[0]):e):e};function zT(t,e,n){WT(t,e),0<n.length&&(t.i=null,t.g.set(Ao(t,e),Am(n)),t.h+=n.length)}te.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var r=e[n];const i=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var s=i;o[r]!==""&&(s+="="+encodeURIComponent(String(o[r]))),t.push(s)}}return this.i=t.join("&")};function Ao(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function SN(t,e){e&&!t.j&&(Is(t),t.i=null,t.g.forEach(function(n,r){var s=r.toLowerCase();r!=s&&(WT(this,r),zT(this,s,n))},t)),t.j=e}var RN=class{constructor(t,e){this.g=t,this.map=e}};function QT(t){this.l=t||PN,Ae.PerformanceNavigationTiming?(t=Ae.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(Ae.g&&Ae.g.Ka&&Ae.g.Ka()&&Ae.g.Ka().dc),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var PN=10;function YT(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function XT(t){return t.h?1:t.g?t.g.size:0}function Hd(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function Um(t,e){t.g?t.g.add(e):t.h=e}function JT(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}QT.prototype.cancel=function(){if(this.i=ZT(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const t of this.g.values())t.cancel();this.g.clear()}};function ZT(t){if(t.h!=null)return t.i.concat(t.h.F);if(t.g!=null&&t.g.size!==0){let e=t.i;for(const n of t.g.values())e=e.concat(n.F);return e}return Am(t.i)}var CN=class{stringify(t){return Ae.JSON.stringify(t,void 0)}parse(t){return Ae.JSON.parse(t,void 0)}};function ON(){this.g=new CN}function kN(t,e,n){const r=n||"";try{GT(t,function(s,i){let o=s;ol(s)&&(o=Nm(s)),e.push(r+i+"="+encodeURIComponent(o))})}catch(s){throw e.push(r+"type="+encodeURIComponent("_badmap")),s}}function NN(t,e){const n=new Nc;if(Ae.Image){const r=new Image;r.onload=Dl(Ll,n,r,"TestLoadImage: loaded",!0,e),r.onerror=Dl(Ll,n,r,"TestLoadImage: error",!1,e),r.onabort=Dl(Ll,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=Dl(Ll,n,r,"TestLoadImage: timeout",!1,e),Ae.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}function Ll(t,e,n,r,s){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,s(r)}catch{}}function Fc(t){this.l=t.ec||null,this.j=t.ob||!1}xt(Fc,Lm);Fc.prototype.g=function(){return new Uc(this.l,this.j)};Fc.prototype.i=function(t){return function(){return t}}({});function Uc(t,e){kt.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=$m,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}xt(Uc,kt);var $m=0;te=Uc.prototype;te.open=function(t,e){if(this.readyState!=$m)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,Da(this)};te.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||Ae).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))};te.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,dl(this)),this.readyState=$m};te.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,Da(this)),this.g&&(this.readyState=3,Da(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof Ae.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;e0(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))};function e0(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}te.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?dl(this):Da(this),this.readyState==3&&e0(this)}};te.Za=function(t){this.g&&(this.response=this.responseText=t,dl(this))};te.Ya=function(t){this.g&&(this.response=t,dl(this))};te.ka=function(){this.g&&dl(this)};function dl(t){t.readyState=4,t.l=null,t.j=null,t.A=null,Da(t)}te.setRequestHeader=function(t,e){this.v.append(t,e)};te.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};te.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join(`\r
`)};function Da(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(Uc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var xN=Ae.JSON.parse;function _t(t){kt.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=t0,this.L=this.M=!1}xt(_t,kt);var t0="",DN=/^https?$/i,VN=["POST","PUT"];te=_t.prototype;te.Oa=function(t){this.M=t};te.ha=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():Bd.g(),this.C=this.u?Rg(this.u):Rg(Bd),this.g.onreadystatechange=Qt(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(i){Og(this,i);return}if(t=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var s in r)n.set(s,r[s]);else if(typeof r.keys=="function"&&typeof r.get=="function")for(const i of r.keys())n.set(i,r.get(i));else throw Error("Unknown input type for opt_headers: "+String(r));r=Array.from(n.keys()).find(i=>i.toLowerCase()=="content-type"),s=Ae.FormData&&t instanceof Ae.FormData,!(0<=gT(VN,e))||r||s||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[i,o]of n)this.g.setRequestHeader(i,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{s0(this),0<this.B&&((this.L=LN(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Qt(this.ua,this)):this.A=Vm(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(i){Og(this,i)}};function LN(t){return io&&typeof t.timeout=="number"&&t.ontimeout!==void 0}te.ua=function(){typeof wm<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,$t(this,"timeout"),this.abort(8))};function Og(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,n0(t),$c(t)}function n0(t){t.F||(t.F=!0,$t(t,"complete"),$t(t,"error"))}te.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,$t(this,"complete"),$t(this,"abort"),$c(this))};te.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),$c(this,!0)),_t.$.N.call(this)};te.La=function(){this.s||(this.G||this.v||this.l?r0(this):this.kb())};te.kb=function(){r0(this)};function r0(t){if(t.h&&typeof wm<"u"&&(!t.C[1]||Qn(t)!=4||t.da()!=2)){if(t.v&&Qn(t)==4)Vm(t.La,0,t);else if($t(t,"readystatechange"),Qn(t)==4){t.h=!1;try{const o=t.da();e:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var r;if(r=o===0){var s=String(t.I).match(HT)[1]||null;!s&&Ae.self&&Ae.self.location&&(s=Ae.self.location.protocol.slice(0,-1)),r=!DN.test(s?s.toLowerCase():"")}n=r}if(n)$t(t,"complete"),$t(t,"success");else{t.m=6;try{var i=2<Qn(t)?t.g.statusText:""}catch{i=""}t.j=i+" ["+t.da()+"]",n0(t)}}finally{$c(t)}}}}function $c(t,e){if(t.g){s0(t);const n=t.g,r=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||$t(t,"ready");try{n.onreadystatechange=r}catch{}}}function s0(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(Ae.clearTimeout(t.A),t.A=null)}te.isActive=function(){return!!this.g};function Qn(t){return t.g?t.g.readyState:0}te.da=function(){try{return 2<Qn(this)?this.g.status:-1}catch{return-1}};te.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};te.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),xN(e)}};function kg(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case t0:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function MN(t){const e={};t=(t.g&&2<=Qn(t)&&t.g.getAllResponseHeaders()||"").split(`\r
`);for(let r=0;r<t.length;r++){if(Ra(t[r]))continue;var n=lN(t[r]);const s=n[0];if(n=n[1],typeof n!="string")continue;n=n.trim();const i=e[s]||[];e[s]=i,i.push(n)}tN(e,function(r){return r.join(", ")})}te.Ia=function(){return this.m};te.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function i0(t){let e="";return Rm(t,function(n,r){e+=r,e+=":",e+=n,e+=`\r
`}),e}function Bm(t,e,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=i0(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):it(t,e,n))}function Lo(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function o0(t){this.Ga=0,this.j=[],this.l=new Nc,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Lo("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Lo("baseRetryDelayMs",5e3,t),this.hb=Lo("retryDelaySeedMs",1e4,t),this.eb=Lo("forwardChannelMaxRetries",2,t),this.xa=Lo("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.useFetchStreams||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new QT(t&&t.concurrentRequestLimit),this.Ja=new ON,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}te=o0.prototype;te.ra=8;te.H=1;function jm(t){if(a0(t),t.H==3){var e=t.W++,n=Cr(t.I);if(it(n,"SID",t.K),it(n,"RID",e),it(n,"TYPE","terminate"),fl(t,n),e=new cl(t,t.l,e),e.L=2,e.A=Mc(Cr(n)),n=!1,Ae.navigator&&Ae.navigator.sendBeacon)try{n=Ae.navigator.sendBeacon(e.A.toString(),"")}catch{}!n&&Ae.Image&&(new Image().src=e.A,n=!0),n||(e.g=p0(e.l,null),e.g.ha(e.A)),e.G=Date.now(),hl(e)}f0(t)}function Bc(t){t.g&&(Gm(t),t.g.cancel(),t.g=null)}function a0(t){Bc(t),t.u&&(Ae.clearTimeout(t.u),t.u=null),Nu(t),t.i.cancel(),t.m&&(typeof t.m=="number"&&Ae.clearTimeout(t.m),t.m=null)}function jc(t){if(!YT(t.i)&&!t.m){t.m=!0;var e=t.Na;Ca||CT(),Oa||(Ca(),Oa=!0),xm.add(e,t),t.C=0}}function FN(t,e){return XT(t.i)>=t.i.j-(t.m?1:0)?!1:t.m?(t.j=e.F.concat(t.j),!0):t.H==1||t.H==2||t.C>=(t.cb?0:t.eb)?!1:(t.m=ll(Qt(t.Na,t,e),d0(t,t.C)),t.C++,!0)}te.Na=function(t){if(this.m)if(this.m=null,this.H==1){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;const s=new cl(this,this.l,t);let i=this.s;if(this.U&&(i?(i=IT(i),TT(i,this.U)):i=this.U),this.o!==null||this.O||(s.I=i,i=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){t:{var r=this.j[n];if("__data__"in r.map&&(r=r.map.__data__,typeof r=="string")){r=r.length;break t}r=void 0}if(r===void 0)break;if(e+=r,4096<e){e=n;break e}if(e===4096||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=l0(this,s,e),n=Cr(this.I),it(n,"RID",t),it(n,"CVER",22),this.F&&it(n,"X-HTTP-Session-Id",this.F),fl(this,n),i&&(this.O?e="headers="+encodeURIComponent(String(i0(i)))+"&"+e:this.o&&Bm(n,this.o,i)),Um(this.i,s),this.bb&&it(n,"TYPE","init"),this.P?(it(n,"$req",e),it(n,"SID","null"),s.aa=!0,qd(s,n,null)):qd(s,n,e),this.H=2}}else this.H==3&&(t?Ng(this,t):this.j.length==0||YT(this.i)||Ng(this))};function Ng(t,e){var n;e?n=e.m:n=t.W++;const r=Cr(t.I);it(r,"SID",t.K),it(r,"RID",n),it(r,"AID",t.V),fl(t,r),t.o&&t.s&&Bm(r,t.o,t.s),n=new cl(t,t.l,n,t.C+1),t.o===null&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=l0(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),Um(t.i,n),qd(n,r,e)}function fl(t,e){t.na&&Rm(t.na,function(n,r){it(e,r,n)}),t.h&&GT({},function(n,r){it(e,r,n)})}function l0(t,e,n){n=Math.min(t.j.length,n);var r=t.h?Qt(t.h.Va,t.h,t):null;e:{var s=t.j;let i=-1;for(;;){const o=["count="+n];i==-1?0<n?(i=s[0].g,o.push("ofs="+i)):i=0:o.push("ofs="+i);let a=!0;for(let l=0;l<n;l++){let c=s[l].g;const d=s[l].map;if(c-=i,0>c)i=Math.max(0,s[l].g-100),a=!1;else try{kN(d,o,"req"+c+"_")}catch{r&&r(d)}}if(a){r=o.join("&");break e}}}return t=t.j.splice(0,n),e.F=t,r}function u0(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;Ca||CT(),Oa||(Ca(),Oa=!0),xm.add(e,t),t.A=0}}function qm(t){return t.g||t.u||3<=t.A?!1:(t.ba++,t.u=ll(Qt(t.Ma,t),d0(t,t.A)),t.A++,!0)}te.Ma=function(){if(this.u=null,c0(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=ll(Qt(this.jb,this),t)}};te.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,en(10),Bc(this),c0(this))};function Gm(t){t.B!=null&&(Ae.clearTimeout(t.B),t.B=null)}function c0(t){t.g=new cl(t,t.l,"rpc",t.ba),t.o===null&&(t.g.I=t.s),t.g.O=0;var e=Cr(t.wa);it(e,"RID","rpc"),it(e,"SID",t.K),it(e,"AID",t.V),it(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&it(e,"TO",t.qa),it(e,"TYPE","xmlhttp"),fl(t,e),t.o&&t.s&&Bm(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.A=Mc(Cr(e)),n.u=null,n.S=!0,$T(n,t)}te.ib=function(){this.v!=null&&(this.v=null,Bc(this),qm(this),en(19))};function Nu(t){t.v!=null&&(Ae.clearTimeout(t.v),t.v=null)}function h0(t,e){var n=null;if(t.g==e){Nu(t),Gm(t),t.g=null;var r=2}else if(Hd(t.i,e))n=e.F,JT(t.i,e),r=1;else return;if(t.H!=0){if(e.i)if(r==1){n=e.u?e.u.length:0,e=Date.now()-e.G;var s=t.C;r=xc(),$t(r,new VT(r,n)),jc(t)}else u0(t);else if(s=e.s,s==3||s==0&&0<e.ca||!(r==1&&FN(t,e)||r==2&&qm(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),s){case 1:zs(t,5);break;case 4:zs(t,10);break;case 3:zs(t,6);break;default:zs(t,2)}}}function d0(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function zs(t,e){if(t.l.info("Error code "+e),e==2){var n=null;t.h&&(n=null);var r=Qt(t.pb,t);n||(n=new Zs("//www.google.com/images/cleardot.gif"),Ae.location&&Ae.location.protocol=="http"||Ou(n,"https"),Mc(n)),NN(n.toString(),r)}else en(2);t.H=0,t.h&&t.h.za(e),f0(t),a0(t)}te.pb=function(t){t?(this.l.info("Successfully pinged google.com"),en(2)):(this.l.info("Failed to ping google.com"),en(1))};function f0(t){if(t.H=0,t.ma=[],t.h){const e=ZT(t.i);(e.length!=0||t.j.length!=0)&&(Tg(t.ma,e),Tg(t.ma,t.j),t.i.i.length=0,Am(t.j),t.j.length=0),t.h.ya()}}function m0(t,e,n){var r=n instanceof Zs?Cr(n):new Zs(n);if(r.g!="")e&&(r.g=e+"."+r.g),ku(r,r.m);else{var s=Ae.location;r=s.protocol,e=e?e+"."+s.hostname:s.hostname,s=+s.port;var i=new Zs(null);r&&Ou(i,r),e&&(i.g=e),s&&ku(i,s),n&&(i.l=n),r=i}return n=t.F,e=t.Da,n&&e&&it(r,n,e),it(r,"VER",t.ra),fl(t,r),r}function p0(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return e=t.Ha&&!t.va?new _t(new Fc({ob:n})):new _t(t.va),e.Oa(t.J),e}te.isActive=function(){return!!this.h&&this.h.isActive(this)};function _0(){}te=_0.prototype;te.Ba=function(){};te.Aa=function(){};te.za=function(){};te.ya=function(){};te.isActive=function(){return!0};te.Va=function(){};function xu(){if(io&&!(10<=Number(Xk)))throw Error("Environmental error: no available transport.")}xu.prototype.g=function(t,e){return new An(t,e)};function An(t,e){kt.call(this),this.g=new o0(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!Ra(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Ra(e)&&(this.g.F=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new So(this)}xt(An,kt);An.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;en(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=m0(t,null,t.Y),jc(t)};An.prototype.close=function(){jm(this.g)};An.prototype.u=function(t){var e=this.g;if(typeof t=="string"){var n={};n.__data__=t,t=n}else this.v&&(n={},n.__data__=Nm(t),t=n);e.j.push(new RN(e.fb++,t)),e.H==3&&jc(e)};An.prototype.N=function(){this.g.h=null,delete this.j,jm(this.g),delete this.g,An.$.N.call(this)};function g0(t){Mm.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){e:{for(const n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}xt(g0,Mm);function y0(){Fm.call(this),this.status=1}xt(y0,Fm);function So(t){this.g=t}xt(So,_0);So.prototype.Ba=function(){$t(this.g,"a")};So.prototype.Aa=function(t){$t(this.g,new g0(t))};So.prototype.za=function(t){$t(this.g,new y0)};So.prototype.ya=function(){$t(this.g,"b")};function UN(){this.blockSize=-1}function Bn(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}xt(Bn,UN);Bn.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function zh(t,e,n){n||(n=0);var r=Array(16);if(typeof e=="string")for(var s=0;16>s;++s)r[s]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(s=0;16>s;++s)r[s]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;e=t.g[0],n=t.g[1],s=t.g[2];var i=t.g[3],o=e+(i^n&(s^i))+r[0]+3614090360&4294967295;e=n+(o<<7&4294967295|o>>>25),o=i+(s^e&(n^s))+r[1]+3905402710&4294967295,i=e+(o<<12&4294967295|o>>>20),o=s+(n^i&(e^n))+r[2]+606105819&4294967295,s=i+(o<<17&4294967295|o>>>15),o=n+(e^s&(i^e))+r[3]+3250441966&4294967295,n=s+(o<<22&4294967295|o>>>10),o=e+(i^n&(s^i))+r[4]+4118548399&4294967295,e=n+(o<<7&4294967295|o>>>25),o=i+(s^e&(n^s))+r[5]+1200080426&4294967295,i=e+(o<<12&4294967295|o>>>20),o=s+(n^i&(e^n))+r[6]+2821735955&4294967295,s=i+(o<<17&4294967295|o>>>15),o=n+(e^s&(i^e))+r[7]+4249261313&4294967295,n=s+(o<<22&4294967295|o>>>10),o=e+(i^n&(s^i))+r[8]+1770035416&4294967295,e=n+(o<<7&4294967295|o>>>25),o=i+(s^e&(n^s))+r[9]+2336552879&4294967295,i=e+(o<<12&4294967295|o>>>20),o=s+(n^i&(e^n))+r[10]+4294925233&4294967295,s=i+(o<<17&4294967295|o>>>15),o=n+(e^s&(i^e))+r[11]+2304563134&4294967295,n=s+(o<<22&4294967295|o>>>10),o=e+(i^n&(s^i))+r[12]+1804603682&4294967295,e=n+(o<<7&4294967295|o>>>25),o=i+(s^e&(n^s))+r[13]+4254626195&4294967295,i=e+(o<<12&4294967295|o>>>20),o=s+(n^i&(e^n))+r[14]+2792965006&4294967295,s=i+(o<<17&4294967295|o>>>15),o=n+(e^s&(i^e))+r[15]+1236535329&4294967295,n=s+(o<<22&4294967295|o>>>10),o=e+(s^i&(n^s))+r[1]+4129170786&4294967295,e=n+(o<<5&4294967295|o>>>27),o=i+(n^s&(e^n))+r[6]+3225465664&4294967295,i=e+(o<<9&4294967295|o>>>23),o=s+(e^n&(i^e))+r[11]+643717713&4294967295,s=i+(o<<14&4294967295|o>>>18),o=n+(i^e&(s^i))+r[0]+3921069994&4294967295,n=s+(o<<20&4294967295|o>>>12),o=e+(s^i&(n^s))+r[5]+3593408605&4294967295,e=n+(o<<5&4294967295|o>>>27),o=i+(n^s&(e^n))+r[10]+38016083&4294967295,i=e+(o<<9&4294967295|o>>>23),o=s+(e^n&(i^e))+r[15]+3634488961&4294967295,s=i+(o<<14&4294967295|o>>>18),o=n+(i^e&(s^i))+r[4]+3889429448&4294967295,n=s+(o<<20&4294967295|o>>>12),o=e+(s^i&(n^s))+r[9]+568446438&4294967295,e=n+(o<<5&4294967295|o>>>27),o=i+(n^s&(e^n))+r[14]+3275163606&4294967295,i=e+(o<<9&4294967295|o>>>23),o=s+(e^n&(i^e))+r[3]+4107603335&4294967295,s=i+(o<<14&4294967295|o>>>18),o=n+(i^e&(s^i))+r[8]+1163531501&4294967295,n=s+(o<<20&4294967295|o>>>12),o=e+(s^i&(n^s))+r[13]+2850285829&4294967295,e=n+(o<<5&4294967295|o>>>27),o=i+(n^s&(e^n))+r[2]+4243563512&4294967295,i=e+(o<<9&4294967295|o>>>23),o=s+(e^n&(i^e))+r[7]+1735328473&4294967295,s=i+(o<<14&4294967295|o>>>18),o=n+(i^e&(s^i))+r[12]+2368359562&4294967295,n=s+(o<<20&4294967295|o>>>12),o=e+(n^s^i)+r[5]+4294588738&4294967295,e=n+(o<<4&4294967295|o>>>28),o=i+(e^n^s)+r[8]+2272392833&4294967295,i=e+(o<<11&4294967295|o>>>21),o=s+(i^e^n)+r[11]+1839030562&4294967295,s=i+(o<<16&4294967295|o>>>16),o=n+(s^i^e)+r[14]+4259657740&4294967295,n=s+(o<<23&4294967295|o>>>9),o=e+(n^s^i)+r[1]+2763975236&4294967295,e=n+(o<<4&4294967295|o>>>28),o=i+(e^n^s)+r[4]+1272893353&4294967295,i=e+(o<<11&4294967295|o>>>21),o=s+(i^e^n)+r[7]+4139469664&4294967295,s=i+(o<<16&4294967295|o>>>16),o=n+(s^i^e)+r[10]+3200236656&4294967295,n=s+(o<<23&4294967295|o>>>9),o=e+(n^s^i)+r[13]+681279174&4294967295,e=n+(o<<4&4294967295|o>>>28),o=i+(e^n^s)+r[0]+3936430074&4294967295,i=e+(o<<11&4294967295|o>>>21),o=s+(i^e^n)+r[3]+3572445317&4294967295,s=i+(o<<16&4294967295|o>>>16),o=n+(s^i^e)+r[6]+76029189&4294967295,n=s+(o<<23&4294967295|o>>>9),o=e+(n^s^i)+r[9]+3654602809&4294967295,e=n+(o<<4&4294967295|o>>>28),o=i+(e^n^s)+r[12]+3873151461&4294967295,i=e+(o<<11&4294967295|o>>>21),o=s+(i^e^n)+r[15]+530742520&4294967295,s=i+(o<<16&4294967295|o>>>16),o=n+(s^i^e)+r[2]+3299628645&4294967295,n=s+(o<<23&4294967295|o>>>9),o=e+(s^(n|~i))+r[0]+4096336452&4294967295,e=n+(o<<6&4294967295|o>>>26),o=i+(n^(e|~s))+r[7]+1126891415&4294967295,i=e+(o<<10&4294967295|o>>>22),o=s+(e^(i|~n))+r[14]+2878612391&4294967295,s=i+(o<<15&4294967295|o>>>17),o=n+(i^(s|~e))+r[5]+4237533241&4294967295,n=s+(o<<21&4294967295|o>>>11),o=e+(s^(n|~i))+r[12]+1700485571&4294967295,e=n+(o<<6&4294967295|o>>>26),o=i+(n^(e|~s))+r[3]+2399980690&4294967295,i=e+(o<<10&4294967295|o>>>22),o=s+(e^(i|~n))+r[10]+4293915773&4294967295,s=i+(o<<15&4294967295|o>>>17),o=n+(i^(s|~e))+r[1]+2240044497&4294967295,n=s+(o<<21&4294967295|o>>>11),o=e+(s^(n|~i))+r[8]+1873313359&4294967295,e=n+(o<<6&4294967295|o>>>26),o=i+(n^(e|~s))+r[15]+4264355552&4294967295,i=e+(o<<10&4294967295|o>>>22),o=s+(e^(i|~n))+r[6]+2734768916&4294967295,s=i+(o<<15&4294967295|o>>>17),o=n+(i^(s|~e))+r[13]+1309151649&4294967295,n=s+(o<<21&4294967295|o>>>11),o=e+(s^(n|~i))+r[4]+4149444226&4294967295,e=n+(o<<6&4294967295|o>>>26),o=i+(n^(e|~s))+r[11]+3174756917&4294967295,i=e+(o<<10&4294967295|o>>>22),o=s+(e^(i|~n))+r[2]+718787259&4294967295,s=i+(o<<15&4294967295|o>>>17),o=n+(i^(s|~e))+r[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(s+(o<<21&4294967295|o>>>11))&4294967295,t.g[2]=t.g[2]+s&4294967295,t.g[3]=t.g[3]+i&4294967295}Bn.prototype.j=function(t,e){e===void 0&&(e=t.length);for(var n=e-this.blockSize,r=this.m,s=this.h,i=0;i<e;){if(s==0)for(;i<=n;)zh(this,t,i),i+=this.blockSize;if(typeof t=="string"){for(;i<e;)if(r[s++]=t.charCodeAt(i++),s==this.blockSize){zh(this,r),s=0;break}}else for(;i<e;)if(r[s++]=t[i++],s==this.blockSize){zh(this,r),s=0;break}}this.h=s,this.i+=e};Bn.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=n&255,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var r=0;32>r;r+=8)t[n++]=this.g[e]>>>r&255;return t};function ze(t,e){this.h=e;for(var n=[],r=!0,s=t.length-1;0<=s;s--){var i=t[s]|0;r&&i==e||(n[s]=i,r=!1)}this.g=n}var $N={};function Hm(t){return-128<=t&&128>t?zk(t,function(e){return new ze([e|0],0>e?-1:0)}):new ze([t|0],0>t?-1:0)}function Yn(t){if(isNaN(t)||!isFinite(t))return Zi;if(0>t)return Ft(Yn(-t));for(var e=[],n=1,r=0;t>=n;r++)e[r]=t/n|0,n*=Wd;return new ze(e,0)}function v0(t,e){if(t.length==0)throw Error("number format error: empty string");if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(t.charAt(0)=="-")return Ft(v0(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=Yn(Math.pow(e,8)),r=Zi,s=0;s<t.length;s+=8){var i=Math.min(8,t.length-s),o=parseInt(t.substring(s,s+i),e);8>i?(i=Yn(Math.pow(e,i)),r=r.R(i).add(Yn(o))):(r=r.R(n),r=r.add(Yn(o)))}return r}var Wd=4294967296,Zi=Hm(0),Kd=Hm(1),xg=Hm(16777216);te=ze.prototype;te.ea=function(){if(Cn(this))return-Ft(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var r=this.D(n);t+=(0<=r?r:Wd+r)*e,e*=Wd}return t};te.toString=function(t){if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(Er(this))return"0";if(Cn(this))return"-"+Ft(this).toString(t);for(var e=Yn(Math.pow(t,6)),n=this,r="";;){var s=Vu(n,e).g;n=Du(n,s.R(e));var i=((0<n.g.length?n.g[0]:n.h)>>>0).toString(t);if(n=s,Er(n))return i+r;for(;6>i.length;)i="0"+i;r=i+r}};te.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h};function Er(t){if(t.h!=0)return!1;for(var e=0;e<t.g.length;e++)if(t.g[e]!=0)return!1;return!0}function Cn(t){return t.h==-1}te.X=function(t){return t=Du(this,t),Cn(t)?-1:Er(t)?0:1};function Ft(t){for(var e=t.g.length,n=[],r=0;r<e;r++)n[r]=~t.g[r];return new ze(n,~t.h).add(Kd)}te.abs=function(){return Cn(this)?Ft(this):this};te.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0,s=0;s<=e;s++){var i=r+(this.D(s)&65535)+(t.D(s)&65535),o=(i>>>16)+(this.D(s)>>>16)+(t.D(s)>>>16);r=o>>>16,i&=65535,o&=65535,n[s]=o<<16|i}return new ze(n,n[n.length-1]&-2147483648?-1:0)};function Du(t,e){return t.add(Ft(e))}te.R=function(t){if(Er(this)||Er(t))return Zi;if(Cn(this))return Cn(t)?Ft(this).R(Ft(t)):Ft(Ft(this).R(t));if(Cn(t))return Ft(this.R(Ft(t)));if(0>this.X(xg)&&0>t.X(xg))return Yn(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],r=0;r<2*e;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var s=0;s<t.g.length;s++){var i=this.D(r)>>>16,o=this.D(r)&65535,a=t.D(s)>>>16,l=t.D(s)&65535;n[2*r+2*s]+=o*l,Ml(n,2*r+2*s),n[2*r+2*s+1]+=i*l,Ml(n,2*r+2*s+1),n[2*r+2*s+1]+=o*a,Ml(n,2*r+2*s+1),n[2*r+2*s+2]+=i*a,Ml(n,2*r+2*s+2)}for(r=0;r<e;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=e;r<2*e;r++)n[r]=0;return new ze(n,0)};function Ml(t,e){for(;(t[e]&65535)!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function Mo(t,e){this.g=t,this.h=e}function Vu(t,e){if(Er(e))throw Error("division by zero");if(Er(t))return new Mo(Zi,Zi);if(Cn(t))return e=Vu(Ft(t),e),new Mo(Ft(e.g),Ft(e.h));if(Cn(e))return e=Vu(t,Ft(e)),new Mo(Ft(e.g),e.h);if(30<t.g.length){if(Cn(t)||Cn(e))throw Error("slowDivide_ only works with positive integers.");for(var n=Kd,r=e;0>=r.X(t);)n=Dg(n),r=Dg(r);var s=Pi(n,1),i=Pi(r,1);for(r=Pi(r,2),n=Pi(n,2);!Er(r);){var o=i.add(r);0>=o.X(t)&&(s=s.add(n),i=o),r=Pi(r,1),n=Pi(n,1)}return e=Du(t,s.R(e)),new Mo(s,e)}for(s=Zi;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),r=Math.ceil(Math.log(n)/Math.LN2),r=48>=r?1:Math.pow(2,r-48),i=Yn(n),o=i.R(e);Cn(o)||0<o.X(t);)n-=r,i=Yn(n),o=i.R(e);Er(i)&&(i=Kd),s=s.add(i),t=Du(t,o)}return new Mo(s,t)}te.gb=function(t){return Vu(this,t).h};te.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)&t.D(r);return new ze(n,this.h&t.h)};te.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)|t.D(r);return new ze(n,this.h|t.h)};te.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)^t.D(r);return new ze(n,this.h^t.h)};function Dg(t){for(var e=t.g.length+1,n=[],r=0;r<e;r++)n[r]=t.D(r)<<1|t.D(r-1)>>>31;return new ze(n,t.h)}function Pi(t,e){var n=e>>5;e%=32;for(var r=t.g.length-n,s=[],i=0;i<r;i++)s[i]=0<e?t.D(i+n)>>>e|t.D(i+n+1)<<32-e:t.D(i+n);return new ze(s,t.h)}xu.prototype.createWebChannel=xu.prototype.g;An.prototype.send=An.prototype.u;An.prototype.open=An.prototype.m;An.prototype.close=An.prototype.close;Dc.NO_ERROR=0;Dc.TIMEOUT=8;Dc.HTTP_ERROR=6;LT.COMPLETE="complete";MT.EventType=ul;ul.OPEN="a";ul.CLOSE="b";ul.ERROR="c";ul.MESSAGE="d";kt.prototype.listen=kt.prototype.O;_t.prototype.listenOnce=_t.prototype.P;_t.prototype.getLastError=_t.prototype.Sa;_t.prototype.getLastErrorCode=_t.prototype.Ia;_t.prototype.getStatus=_t.prototype.da;_t.prototype.getResponseJson=_t.prototype.Wa;_t.prototype.getResponseText=_t.prototype.ja;_t.prototype.send=_t.prototype.ha;_t.prototype.setWithCredentials=_t.prototype.Oa;Bn.prototype.digest=Bn.prototype.l;Bn.prototype.reset=Bn.prototype.reset;Bn.prototype.update=Bn.prototype.j;ze.prototype.add=ze.prototype.add;ze.prototype.multiply=ze.prototype.R;ze.prototype.modulo=ze.prototype.gb;ze.prototype.compare=ze.prototype.X;ze.prototype.toNumber=ze.prototype.ea;ze.prototype.toString=ze.prototype.toString;ze.prototype.getBits=ze.prototype.D;ze.fromNumber=Yn;ze.fromString=v0;var BN=function(){return new xu},jN=function(){return xc()},Qh=Dc,qN=LT,GN=Ei,Vg={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},Fl=MT,HN=_t,WN=Bn,eo=ze;const Lg="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Gt.UNAUTHENTICATED=new Gt(null),Gt.GOOGLE_CREDENTIALS=new Gt("google-credentials-uid"),Gt.FIRST_PARTY=new Gt("first-party-uid"),Gt.MOCK_USER=new Gt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ro="10.11.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oi=new fm("@firebase/firestore");function Di(){return oi.logLevel}function j(t,...e){if(oi.logLevel<=xe.DEBUG){const n=e.map(Wm);oi.debug(`Firestore (${Ro}): ${t}`,...n)}}function yt(t,...e){if(oi.logLevel<=xe.ERROR){const n=e.map(Wm);oi.error(`Firestore (${Ro}): ${t}`,...n)}}function Va(t,...e){if(oi.logLevel<=xe.WARN){const n=e.map(Wm);oi.warn(`Firestore (${Ro}): ${t}`,...n)}}function Wm(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ae(t="Unexpected state"){const e=`FIRESTORE (${Ro}) INTERNAL ASSERTION FAILED: `+t;throw yt(e),new Error(e)}function me(t,e){t||ae()}function ue(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class K extends cr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ir{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KN{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class zN{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Gt.UNAUTHENTICATED))}shutdown(){}}class QN{constructor(e){this.t=e,this.currentUser=Gt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i;const s=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let i=new ir;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new ir,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const l=i;e.enqueueRetryable(async()=>{await l.promise,await s(this.currentUser)})},a=l=>{j("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(j("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new ir)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(j("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(me(typeof r.accessToken=="string"),new KN(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return me(e===null||typeof e=="string"),new Gt(e)}}class YN{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Gt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class XN{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new YN(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Gt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class JN{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class ZN{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){const r=i=>{i.error!=null&&j("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.R;return this.R=i.token,j("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{j("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):j("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(me(typeof n.token=="string"),this.R=n.token,new JN(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ex(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E0{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=ex(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%e.length))}return r}}function Pe(t,e){return t<e?-1:t>e?1:0}function oo(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}function I0(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dt{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new K(L.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new K(L.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new K(L.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new K(L.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return dt.fromMillis(Date.now())}static fromDate(e){return dt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new dt(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Pe(this.nanoseconds,e.nanoseconds):Pe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pe{constructor(e){this.timestamp=e}static fromTimestamp(e){return new pe(e)}static min(){return new pe(new dt(0,0))}static max(){return new pe(new dt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class La{constructor(e,n,r){n===void 0?n=0:n>e.length&&ae(),r===void 0?r=e.length-n:r>e.length-n&&ae(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return La.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof La?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=e.get(s),o=n.get(s);if(i<o)return-1;if(i>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Ge extends La{construct(e,n,r){return new Ge(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new K(L.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new Ge(n)}static emptyPath(){return new Ge([])}}const tx=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ht extends La{construct(e,n,r){return new ht(e,n,r)}static isValidIdentifier(e){return tx.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ht.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new ht(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new K(L.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const a=e[s];if(a==="\\"){if(s+1===e.length)throw new K(L.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[s+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new K(L.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,s+=2}else a==="`"?(o=!o,s++):a!=="."||o?(r+=a,s++):(i(),s++)}if(i(),o)throw new K(L.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ht(n)}static emptyPath(){return new ht([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ee{constructor(e){this.path=e}static fromPath(e){return new ee(Ge.fromString(e))}static fromName(e){return new ee(Ge.fromString(e).popFirst(5))}static empty(){return new ee(Ge.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ge.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ge.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ee(new Ge(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lu{constructor(e,n,r,s){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=s}}function zd(t){return t.fields.find(e=>e.kind===2)}function Ms(t){return t.fields.filter(e=>e.kind!==2)}Lu.UNKNOWN_ID=-1;class iu{constructor(e,n){this.fieldPath=e,this.kind=n}}class Ma{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new Ma(0,Sn.min())}}function T0(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=pe.fromTimestamp(r===1e9?new dt(n+1,0):new dt(n,r));return new Sn(s,ee.empty(),e)}function b0(t){return new Sn(t.readTime,t.key,-1)}class Sn{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Sn(pe.min(),ee.empty(),-1)}static max(){return new Sn(pe.max(),ee.empty(),-1)}}function Km(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ee.comparator(t.documentKey,e.documentKey),n!==0?n:Pe(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w0="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class A0{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ts(t){if(t.code!==L.FAILED_PRECONDITION||t.message!==w0)throw t;j("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ae(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new x((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof x?n:x.resolve(n)}catch(n){return x.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):x.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):x.reject(n)}static resolve(e){return new x((n,r)=>{n(e)})}static reject(e){return new x((n,r)=>{r(e)})}static waitFor(e){return new x((n,r)=>{let s=0,i=0,o=!1;e.forEach(a=>{++s,a.next(()=>{++i,o&&i===s&&n()},l=>r(l))}),o=!0,i===s&&n()})}static or(e){let n=x.resolve(!1);for(const r of e)n=n.next(s=>s?x.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new x((r,s)=>{const i=e.length,o=new Array(i);let a=0;for(let l=0;l<i;l++){const c=l;n(e[c]).next(d=>{o[c]=d,++a,a===i&&r(o)},d=>s(d))}})}static doWhile(e,n){return new x((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qc{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.V=new ir,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new ca(e,n.error)):this.V.resolve()},this.transaction.onerror=r=>{const s=zm(r.target.error);this.V.reject(new ca(e,s))}}static open(e,n,r,s){try{return new qc(n,e.transaction(s,r))}catch(i){throw new ca(n,i)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(j("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new rx(n)}}class Xn{constructor(e,n,r){this.name=e,this.version=n,this.p=r,Xn.S(Tt())===12.2&&yt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return j("SimpleDb","Removing database:",e),Bs(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!kI())return!1;if(Xn.C())return!0;const e=Tt(),n=Xn.S(e),r=0<n&&n<10,s=Xn.v(e),i=0<s&&s<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||i)}static C(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.F)==="YES"}static M(e,n){return e.store(n)}static S(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static v(e){const n=e.match(/Android ([\d.]+)/i),r=n?n[1].split(".").slice(0,2).join("."):"-1";return Number(r)}async O(e){return this.db||(j("SimpleDb","Opening database:",this.name),this.db=await new Promise((n,r)=>{const s=indexedDB.open(this.name,this.version);s.onsuccess=i=>{const o=i.target.result;n(o)},s.onblocked=()=>{r(new ca(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=i=>{const o=i.target.error;o.name==="VersionError"?r(new K(L.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new K(L.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new ca(e,o))},s.onupgradeneeded=i=>{j("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',i.oldVersion);const o=i.target.result;this.p.N(o,s.transaction,i.oldVersion,this.version).next(()=>{j("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.L&&(this.db.onversionchange=n=>this.L(n)),this.db}B(e){this.L=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,r,s){const i=n==="readonly";let o=0;for(;;){++o;try{this.db=await this.O(e);const a=qc.open(this.db,e,i?"readonly":"readwrite",r),l=s(a).next(c=>(a.g(),c)).catch(c=>(a.abort(c),x.reject(c))).toPromise();return l.catch(()=>{}),await a.m,l}catch(a){const l=a,c=l.name!=="FirebaseError"&&o<3;if(j("SimpleDb","Transaction failed with error:",l.message,"Retrying:",c),this.close(),!c)return Promise.reject(l)}}}close(){this.db&&this.db.close(),this.db=void 0}}class nx{constructor(e){this.k=e,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(e){this.k=e}done(){this.q=!0}U(e){this.K=e}delete(){return Bs(this.k.delete())}}class ca extends K{constructor(e,n){super(L.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function bs(t){return t.name==="IndexedDbTransactionError"}class rx{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(j("SimpleDb","PUT",this.store.name,e,n),r=this.store.put(n,e)):(j("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Bs(r)}add(e){return j("SimpleDb","ADD",this.store.name,e,e),Bs(this.store.add(e))}get(e){return Bs(this.store.get(e)).next(n=>(n===void 0&&(n=null),j("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return j("SimpleDb","DELETE",this.store.name,e),Bs(this.store.delete(e))}count(){return j("SimpleDb","COUNT",this.store.name),Bs(this.store.count())}W(e,n){const r=this.options(e,n),s=r.index?this.store.index(r.index):this.store;if(typeof s.getAll=="function"){const i=s.getAll(r.range);return new x((o,a)=>{i.onerror=l=>{a(l.target.error)},i.onsuccess=l=>{o(l.target.result)}})}{const i=this.cursor(r),o=[];return this.G(i,(a,l)=>{o.push(l)}).next(()=>o)}}j(e,n){const r=this.store.getAll(e,n===null?void 0:n);return new x((s,i)=>{r.onerror=o=>{i(o.target.error)},r.onsuccess=o=>{s(o.target.result)}})}H(e,n){j("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,n);r.J=!1;const s=this.cursor(r);return this.G(s,(i,o,a)=>a.delete())}Y(e,n){let r;n?r=e:(r={},n=e);const s=this.cursor(r);return this.G(s,n)}Z(e){const n=this.cursor({});return new x((r,s)=>{n.onerror=i=>{const o=zm(i.target.error);s(o)},n.onsuccess=i=>{const o=i.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}G(e,n){const r=[];return new x((s,i)=>{e.onerror=o=>{i(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void s();const l=new nx(a),c=n(a.primaryKey,a.value,l);if(c instanceof x){const d=c.catch(u=>(l.done(),x.reject(u)));r.push(d)}l.isDone?s():l.$===null?a.continue():a.continue(l.$)}}).next(()=>x.waitFor(r))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.J?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function Bs(t){return new x((e,n)=>{t.onsuccess=r=>{const s=r.target.result;e(s)},t.onerror=r=>{const s=zm(r.target.error);n(s)}})}let Mg=!1;function zm(t){const e=Xn.S(Tt());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new K("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Mg||(Mg=!0,setTimeout(()=>{throw r},0)),r}}return t}class sx{constructor(e,n){this.asyncQueue=e,this.X=n,this.task=null}start(){this.ee(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}ee(e){j("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{j("IndexBackfiller",`Documents written: ${await this.X.te()}`)}catch(n){bs(n)?j("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",n):await Ts(n)}await this.ee(6e4)})}}class ix{constructor(e,n){this.localStore=e,this.persistence=n}async te(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.ne(n,e))}ne(e,n){const r=new Set;let s=n,i=!0;return x.doWhile(()=>i===!0&&s>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(o!==null&&!r.has(o))return j("IndexBackfiller",`Processing collection: ${o}`),this.re(e,o,s).next(a=>{s-=a,r.add(o)});i=!1})).next(()=>n-s)}re(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(s=>this.localStore.localDocuments.getNextDocuments(e,n,s,r).next(i=>{const o=i.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.ie(s,i)).next(a=>(j("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,n,a))).next(()=>o.size)}))}ie(e,n){let r=e;return n.changes.forEach((s,i)=>{const o=b0(i);Km(o,r)>0&&(r=o)}),new Sn(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _n{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.se(r),this.oe=r=>n.writeSequenceNumber(r))}se(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.oe&&this.oe(e),e}}_n._e=-1;function Gc(t){return t==null}function Fa(t){return t===0&&1/t==-1/0}function S0(t){return typeof t=="number"&&Number.isInteger(t)&&!Fa(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nn(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=Fg(e)),e=ox(t.get(n),e);return Fg(e)}function ox(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case"":n+="";break;default:n+=i}}return n}function Fg(t){return t+""}function Jn(t){const e=t.length;if(me(e>=2),e===2)return me(t.charAt(0)===""&&t.charAt(1)===""),Ge.emptyPath();const n=e-2,r=[];let s="";for(let i=0;i<e;){const o=t.indexOf("",i);switch((o<0||o>n)&&ae(),t.charAt(o+1)){case"":const a=t.substring(i,o);let l;s.length===0?l=a:(s+=a,l=s,s=""),r.push(l);break;case"":s+=t.substring(i,o),s+="\0";break;case"":s+=t.substring(i,o+1);break;default:ae()}i=o+2}return new Ge(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ug=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ou(t,e){return[t,nn(e)]}function R0(t,e,n){return[t,nn(e),n]}const ax={},lx=["prefixPath","collectionGroup","readTime","documentId"],ux=["prefixPath","collectionGroup","documentId"],cx=["collectionGroup","readTime","prefixPath","documentId"],hx=["canonicalId","targetId"],dx=["targetId","path"],fx=["path","targetId"],mx=["collectionId","parent"],px=["indexId","uid"],_x=["uid","sequenceNumber"],gx=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],yx=["indexId","uid","orderedDocumentKey"],vx=["userId","collectionPath","documentId"],Ex=["userId","collectionPath","largestBatchId"],Ix=["userId","collectionGroup","largestBatchId"],P0=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Tx=[...P0,"documentOverlays"],C0=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],O0=C0,k0=[...O0,"indexConfiguration","indexState","indexEntries"],bx=k0;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qd extends A0{constructor(e,n){super(),this.ae=e,this.currentSequenceNumber=n}}function Dt(t,e){const n=ue(t);return Xn.M(n.ae,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $g(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Ii(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function N0(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tt{constructor(e,n){this.comparator=e,this.root=n||Lt.EMPTY}insert(e,n){return new tt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Lt.BLACK,null,null))}remove(e){return new tt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Lt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ul(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ul(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ul(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ul(this.root,e,this.comparator,!0)}}class Ul{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Lt{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??Lt.RED,this.left=s??Lt.EMPTY,this.right=i??Lt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new Lt(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Lt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return Lt.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Lt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Lt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ae();const e=this.left.check();if(e!==this.right.check())throw ae();return e+(this.isRed()?0:1)}}Lt.EMPTY=null,Lt.RED=!0,Lt.BLACK=!1;Lt.EMPTY=new class{constructor(){this.size=0}get key(){throw ae()}get value(){throw ae()}get color(){throw ae()}get left(){throw ae()}get right(){throw ae()}copy(e,n,r,s,i){return this}insert(e,n,r){return new Lt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xe{constructor(e){this.comparator=e,this.data=new tt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Bg(this.data.getIterator())}getIteratorFrom(e){return new Bg(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Xe)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Xe(this.comparator);return n.data=e,n}}class Bg{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Ci(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gn{constructor(e){this.fields=e,e.sort(ht.comparator)}static empty(){return new gn([])}unionWith(e){let n=new Xe(ht.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new gn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return oo(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x0 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new x0("Invalid base64 string: "+i):i}}(e);return new Nt(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new Nt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Pe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Nt.EMPTY_BYTE_STRING=new Nt("");const wx=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Or(t){if(me(!!t),typeof t=="string"){let e=0;const n=wx.exec(t);if(me(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:mt(t.seconds),nanos:mt(t.nanos)}}function mt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function fs(t){return typeof t=="string"?Nt.fromBase64String(t):Nt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hc(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Qm(t){const e=t.mapValue.fields.__previous_value__;return Hc(e)?Qm(e):e}function Ua(t){const e=Or(t.mapValue.fields.__local_write_time__.timestampValue);return new dt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ax{constructor(e,n,r,s,i,o,a,l,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}class ai{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new ai("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof ai&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ns={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},au={nullValue:"NULL_VALUE"};function li(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Hc(t)?4:D0(t)?9007199254740991:10:ae()}function lr(t,e){if(t===e)return!0;const n=li(t);if(n!==li(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Ua(t).isEqual(Ua(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=Or(s.timestampValue),a=Or(i.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return fs(s.bytesValue).isEqual(fs(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return mt(s.geoPointValue.latitude)===mt(i.geoPointValue.latitude)&&mt(s.geoPointValue.longitude)===mt(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return mt(s.integerValue)===mt(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=mt(s.doubleValue),a=mt(i.doubleValue);return o===a?Fa(o)===Fa(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return oo(t.arrayValue.values||[],e.arrayValue.values||[],lr);case 10:return function(s,i){const o=s.mapValue.fields||{},a=i.mapValue.fields||{};if($g(o)!==$g(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!lr(o[l],a[l])))return!1;return!0}(t,e);default:return ae()}}function $a(t,e){return(t.values||[]).find(n=>lr(n,e))!==void 0}function ms(t,e){if(t===e)return 0;const n=li(t),r=li(e);if(n!==r)return Pe(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Pe(t.booleanValue,e.booleanValue);case 2:return function(i,o){const a=mt(i.integerValue||i.doubleValue),l=mt(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return jg(t.timestampValue,e.timestampValue);case 4:return jg(Ua(t),Ua(e));case 5:return Pe(t.stringValue,e.stringValue);case 6:return function(i,o){const a=fs(i),l=fs(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const a=i.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const d=Pe(a[c],l[c]);if(d!==0)return d}return Pe(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const a=Pe(mt(i.latitude),mt(o.latitude));return a!==0?a:Pe(mt(i.longitude),mt(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(i,o){const a=i.values||[],l=o.values||[];for(let c=0;c<a.length&&c<l.length;++c){const d=ms(a[c],l[c]);if(d)return d}return Pe(a.length,l.length)}(t.arrayValue,e.arrayValue);case 10:return function(i,o){if(i===ns.mapValue&&o===ns.mapValue)return 0;if(i===ns.mapValue)return 1;if(o===ns.mapValue)return-1;const a=i.fields||{},l=Object.keys(a),c=o.fields||{},d=Object.keys(c);l.sort(),d.sort();for(let u=0;u<l.length&&u<d.length;++u){const h=Pe(l[u],d[u]);if(h!==0)return h;const f=ms(a[l[u]],c[d[u]]);if(f!==0)return f}return Pe(l.length,d.length)}(t.mapValue,e.mapValue);default:throw ae()}}function jg(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Pe(t,e);const n=Or(t),r=Or(e),s=Pe(n.seconds,r.seconds);return s!==0?s:Pe(n.nanos,r.nanos)}function ao(t){return Yd(t)}function Yd(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Or(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return fs(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ee.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=Yd(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${Yd(n.fields[o])}`;return s+"}"}(t.mapValue):ae()}function ui(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Xd(t){return!!t&&"integerValue"in t}function Ba(t){return!!t&&"arrayValue"in t}function qg(t){return!!t&&"nullValue"in t}function Gg(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function lu(t){return!!t&&"mapValue"in t}function ha(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Ii(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=ha(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=ha(t.arrayValue.values[n]);return e}return Object.assign({},t)}function D0(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}function Sx(t){return"nullValue"in t?au:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?ui(ai.empty(),ee.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?{mapValue:{}}:ae()}function Rx(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?ui(ai.empty(),ee.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?{mapValue:{}}:"mapValue"in t?ns:ae()}function Hg(t,e){const n=ms(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function Wg(t,e){const n=ms(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wt{constructor(e){this.value=e}static empty(){return new Wt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!lu(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=ha(n)}setAll(e){let n=ht.emptyPath(),r={},s=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,s),r={},s=[],n=a.popLast()}o?r[a.lastSegment()]=ha(o):s.push(a.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());lu(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return lr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];lu(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Ii(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new Wt(ha(this.value))}}function V0(t){const e=[];return Ii(t.fields,(n,r)=>{const s=new ht([n]);if(lu(r)){const i=V0(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new gn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pt{constructor(e,n,r,s,i,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new pt(e,0,pe.min(),pe.min(),pe.min(),Wt.empty(),0)}static newFoundDocument(e,n,r,s){return new pt(e,1,n,pe.min(),r,s,0)}static newNoDocument(e,n){return new pt(e,2,n,pe.min(),pe.min(),Wt.empty(),0)}static newUnknownDocument(e,n){return new pt(e,3,n,pe.min(),pe.min(),Wt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(pe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Wt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Wt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=pe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof pt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new pt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ps{constructor(e,n){this.position=e,this.inclusive=n}}function Kg(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=ee.comparator(ee.fromName(o.referenceValue),n.key):r=ms(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function zg(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!lr(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ja{constructor(e,n="asc"){this.field=e,this.dir=n}}function Px(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L0{}class De extends L0{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new Cx(e,n,r):n==="array-contains"?new Nx(e,r):n==="in"?new j0(e,r):n==="not-in"?new xx(e,r):n==="array-contains-any"?new Dx(e,r):new De(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new Ox(e,r):new kx(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(ms(n,this.value)):n!==null&&li(this.value)===li(n)&&this.matchesComparison(ms(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ae()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ke extends L0{constructor(e,n){super(),this.filters=e,this.op=n,this.ue=null}static create(e,n){return new Ke(e,n)}matches(e){return lo(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ue!==null||(this.ue=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ue}getFilters(){return Object.assign([],this.filters)}}function lo(t){return t.op==="and"}function Jd(t){return t.op==="or"}function Ym(t){return M0(t)&&lo(t)}function M0(t){for(const e of t.filters)if(e instanceof Ke)return!1;return!0}function Zd(t){if(t instanceof De)return t.field.canonicalString()+t.op.toString()+ao(t.value);if(Ym(t))return t.filters.map(e=>Zd(e)).join(",");{const e=t.filters.map(n=>Zd(n)).join(",");return`${t.op}(${e})`}}function F0(t,e){return t instanceof De?function(r,s){return s instanceof De&&r.op===s.op&&r.field.isEqual(s.field)&&lr(r.value,s.value)}(t,e):t instanceof Ke?function(r,s){return s instanceof Ke&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,a)=>i&&F0(o,s.filters[a]),!0):!1}(t,e):void ae()}function U0(t,e){const n=t.filters.concat(e);return Ke.create(n,t.op)}function $0(t){return t instanceof De?function(n){return`${n.field.canonicalString()} ${n.op} ${ao(n.value)}`}(t):t instanceof Ke?function(n){return n.op.toString()+" {"+n.getFilters().map($0).join(" ,")+"}"}(t):"Filter"}class Cx extends De{constructor(e,n,r){super(e,n,r),this.key=ee.fromName(r.referenceValue)}matches(e){const n=ee.comparator(e.key,this.key);return this.matchesComparison(n)}}class Ox extends De{constructor(e,n){super(e,"in",n),this.keys=B0("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class kx extends De{constructor(e,n){super(e,"not-in",n),this.keys=B0("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function B0(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>ee.fromName(r.referenceValue))}class Nx extends De{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Ba(n)&&$a(n.arrayValue,this.value)}}class j0 extends De{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&$a(this.value.arrayValue,n)}}class xx extends De{constructor(e,n){super(e,"not-in",n)}matches(e){if($a(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!$a(this.value.arrayValue,n)}}class Dx extends De{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Ba(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>$a(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vx{constructor(e,n=null,r=[],s=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=a,this.ce=null}}function ef(t,e=null,n=[],r=[],s=null,i=null,o=null){return new Vx(t,e,n,r,s,i,o)}function ci(t){const e=ue(t);if(e.ce===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Zd(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Gc(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>ao(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>ao(r)).join(",")),e.ce=n}return e.ce}function ml(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!Px(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!F0(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!zg(t.startAt,e.startAt)&&zg(t.endAt,e.endAt)}function Mu(t){return ee.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function Fu(t,e){return t.filters.filter(n=>n instanceof De&&n.field.isEqual(e))}function Qg(t,e,n){let r=au,s=!0;for(const i of Fu(t,e)){let o=au,a=!0;switch(i.op){case"<":case"<=":o=Sx(i.value);break;case"==":case"in":case">=":o=i.value;break;case">":o=i.value,a=!1;break;case"!=":case"not-in":o=au}Hg({value:r,inclusive:s},{value:o,inclusive:a})<0&&(r=o,s=a)}if(n!==null){for(let i=0;i<t.orderBy.length;++i)if(t.orderBy[i].field.isEqual(e)){const o=n.position[i];Hg({value:r,inclusive:s},{value:o,inclusive:n.inclusive})<0&&(r=o,s=n.inclusive);break}}return{value:r,inclusive:s}}function Yg(t,e,n){let r=ns,s=!0;for(const i of Fu(t,e)){let o=ns,a=!0;switch(i.op){case">=":case">":o=Rx(i.value),a=!1;break;case"==":case"in":case"<=":o=i.value;break;case"<":o=i.value,a=!1;break;case"!=":case"not-in":o=ns}Wg({value:r,inclusive:s},{value:o,inclusive:a})>0&&(r=o,s=a)}if(n!==null){for(let i=0;i<t.orderBy.length;++i)if(t.orderBy[i].field.isEqual(e)){const o=n.position[i];Wg({value:r,inclusive:s},{value:o,inclusive:n.inclusive})>0&&(r=o,s=n.inclusive);break}}return{value:r,inclusive:s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ti{constructor(e,n=null,r=[],s=[],i=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=l,this.le=null,this.he=null,this.Pe=null,this.startAt,this.endAt}}function q0(t,e,n,r,s,i,o,a){return new Ti(t,e,n,r,s,i,o,a)}function Wc(t){return new Ti(t)}function Xg(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Xm(t){return t.collectionGroup!==null}function to(t){const e=ue(t);if(e.le===null){e.le=[];const n=new Set;for(const i of e.explicitOrderBy)e.le.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Xe(ht.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.le.push(new ja(i,r))}),n.has(ht.keyField().canonicalString())||e.le.push(new ja(ht.keyField(),r))}return e.le}function wn(t){const e=ue(t);return e.he||(e.he=Lx(e,to(t))),e.he}function Lx(t,e){if(t.limitType==="F")return ef(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new ja(s.field,i)});const n=t.endAt?new ps(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new ps(t.startAt.position,t.startAt.inclusive):null;return ef(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function tf(t,e){const n=t.filters.concat([e]);return new Ti(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Uu(t,e,n){return new Ti(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Kc(t,e){return ml(wn(t),wn(e))&&t.limitType===e.limitType}function G0(t){return`${ci(wn(t))}|lt:${t.limitType}`}function Vi(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>$0(s)).join(", ")}]`),Gc(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>ao(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>ao(s)).join(",")),`Target(${r})`}(wn(t))}; limitType=${t.limitType})`}function pl(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):ee.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of to(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,a,l){const c=Kg(o,a,l);return o.inclusive?c<=0:c<0}(r.startAt,to(r),s)||r.endAt&&!function(o,a,l){const c=Kg(o,a,l);return o.inclusive?c>=0:c>0}(r.endAt,to(r),s))}(t,e)}function H0(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function W0(t){return(e,n)=>{let r=!1;for(const s of to(t)){const i=Mx(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function Mx(t,e,n){const r=t.field.isKeyField()?ee.comparator(e.key,n.key):function(i,o,a){const l=o.data.field(i),c=a.data.field(i);return l!==null&&c!==null?ms(l,c):ae()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ae()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ws{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Ii(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return N0(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fx=new tt(ee.comparator);function In(){return Fx}const K0=new tt(ee.comparator);function Jo(...t){let e=K0;for(const n of t)e=e.insert(n.key,n);return e}function z0(t){let e=K0;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Zn(){return da()}function Q0(){return da()}function da(){return new ws(t=>t.toString(),(t,e)=>t.isEqual(e))}const Ux=new tt(ee.comparator),$x=new Xe(ee.comparator);function Oe(...t){let e=$x;for(const n of t)e=e.add(n);return e}const Bx=new Xe(Pe);function Jm(){return Bx}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y0(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Fa(e)?"-0":e}}function X0(t){return{integerValue:""+t}}function jx(t,e){return S0(e)?X0(e):Y0(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zc{constructor(){this._=void 0}}function qx(t,e,n){return t instanceof qa?function(s,i){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&Hc(i)&&(i=Qm(i)),i&&(o.fields.__previous_value__=i),{mapValue:o}}(n,e):t instanceof uo?Z0(t,e):t instanceof co?eb(t,e):function(s,i){const o=J0(s,i),a=Jg(o)+Jg(s.Ie);return Xd(o)&&Xd(s.Ie)?X0(a):Y0(s.serializer,a)}(t,e)}function Gx(t,e,n){return t instanceof uo?Z0(t,e):t instanceof co?eb(t,e):n}function J0(t,e){return t instanceof Ga?function(r){return Xd(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class qa extends zc{}class uo extends zc{constructor(e){super(),this.elements=e}}function Z0(t,e){const n=tb(e);for(const r of t.elements)n.some(s=>lr(s,r))||n.push(r);return{arrayValue:{values:n}}}class co extends zc{constructor(e){super(),this.elements=e}}function eb(t,e){let n=tb(e);for(const r of t.elements)n=n.filter(s=>!lr(s,r));return{arrayValue:{values:n}}}class Ga extends zc{constructor(e,n){super(),this.serializer=e,this.Ie=n}}function Jg(t){return mt(t.integerValue||t.doubleValue)}function tb(t){return Ba(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hx{constructor(e,n){this.field=e,this.transform=n}}function Wx(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof uo&&s instanceof uo||r instanceof co&&s instanceof co?oo(r.elements,s.elements,lr):r instanceof Ga&&s instanceof Ga?lr(r.Ie,s.Ie):r instanceof qa&&s instanceof qa}(t.transform,e.transform)}class Kx{constructor(e,n){this.version=e,this.transformResults=n}}class zt{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new zt}static exists(e){return new zt(void 0,e)}static updateTime(e){return new zt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function uu(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Qc{}function nb(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Yc(t.key,zt.none()):new Po(t.key,t.data,zt.none());{const n=t.data,r=Wt.empty();let s=new Xe(ht.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new xr(t.key,r,new gn(s.toArray()),zt.none())}}function zx(t,e,n){t instanceof Po?function(s,i,o){const a=s.value.clone(),l=ey(s.fieldTransforms,i,o.transformResults);a.setAll(l),i.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof xr?function(s,i,o){if(!uu(s.precondition,i))return void i.convertToUnknownDocument(o.version);const a=ey(s.fieldTransforms,i,o.transformResults),l=i.data;l.setAll(rb(s)),l.setAll(a),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function fa(t,e,n,r){return t instanceof Po?function(i,o,a,l){if(!uu(i.precondition,o))return a;const c=i.value.clone(),d=ty(i.fieldTransforms,l,o);return c.setAll(d),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof xr?function(i,o,a,l){if(!uu(i.precondition,o))return a;const c=ty(i.fieldTransforms,l,o),d=o.data;return d.setAll(rb(i)),d.setAll(c),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),a===null?null:a.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(u=>u.field))}(t,e,n,r):function(i,o,a){return uu(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function Qx(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=J0(r.transform,s||null);i!=null&&(n===null&&(n=Wt.empty()),n.set(r.field,i))}return n||null}function Zg(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&oo(r,s,(i,o)=>Wx(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Po extends Qc{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class xr extends Qc{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function rb(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function ey(t,e,n){const r=new Map;me(t.length===n.length);for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,a=e.data.field(i.field);r.set(i.field,Gx(o,a,n[s]))}return r}function ty(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,qx(i,o,e))}return r}class Yc extends Qc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class sb extends Qc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zm{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&zx(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=fa(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=fa(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=Q0();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=n.has(s.key)?null:a;const l=nb(o,a);l!==null&&r.set(s.key,l),o.isValidDocument()||o.convertToNoDocument(pe.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Oe())}isEqual(e){return this.batchId===e.batchId&&oo(this.mutations,e.mutations,(n,r)=>Zg(n,r))&&oo(this.baseMutations,e.baseMutations,(n,r)=>Zg(n,r))}}class ep{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){me(e.mutations.length===r.length);let s=function(){return Ux}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new ep(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tp{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yx{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var It,Me;function Xx(t){switch(t){default:return ae();case L.CANCELLED:case L.UNKNOWN:case L.DEADLINE_EXCEEDED:case L.RESOURCE_EXHAUSTED:case L.INTERNAL:case L.UNAVAILABLE:case L.UNAUTHENTICATED:return!1;case L.INVALID_ARGUMENT:case L.NOT_FOUND:case L.ALREADY_EXISTS:case L.PERMISSION_DENIED:case L.FAILED_PRECONDITION:case L.ABORTED:case L.OUT_OF_RANGE:case L.UNIMPLEMENTED:case L.DATA_LOSS:return!0}}function ib(t){if(t===void 0)return yt("GRPC error has no .code"),L.UNKNOWN;switch(t){case It.OK:return L.OK;case It.CANCELLED:return L.CANCELLED;case It.UNKNOWN:return L.UNKNOWN;case It.DEADLINE_EXCEEDED:return L.DEADLINE_EXCEEDED;case It.RESOURCE_EXHAUSTED:return L.RESOURCE_EXHAUSTED;case It.INTERNAL:return L.INTERNAL;case It.UNAVAILABLE:return L.UNAVAILABLE;case It.UNAUTHENTICATED:return L.UNAUTHENTICATED;case It.INVALID_ARGUMENT:return L.INVALID_ARGUMENT;case It.NOT_FOUND:return L.NOT_FOUND;case It.ALREADY_EXISTS:return L.ALREADY_EXISTS;case It.PERMISSION_DENIED:return L.PERMISSION_DENIED;case It.FAILED_PRECONDITION:return L.FAILED_PRECONDITION;case It.ABORTED:return L.ABORTED;case It.OUT_OF_RANGE:return L.OUT_OF_RANGE;case It.UNIMPLEMENTED:return L.UNIMPLEMENTED;case It.DATA_LOSS:return L.DATA_LOSS;default:return ae()}}(Me=It||(It={}))[Me.OK=0]="OK",Me[Me.CANCELLED=1]="CANCELLED",Me[Me.UNKNOWN=2]="UNKNOWN",Me[Me.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Me[Me.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Me[Me.NOT_FOUND=5]="NOT_FOUND",Me[Me.ALREADY_EXISTS=6]="ALREADY_EXISTS",Me[Me.PERMISSION_DENIED=7]="PERMISSION_DENIED",Me[Me.UNAUTHENTICATED=16]="UNAUTHENTICATED",Me[Me.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Me[Me.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Me[Me.ABORTED=10]="ABORTED",Me[Me.OUT_OF_RANGE=11]="OUT_OF_RANGE",Me[Me.UNIMPLEMENTED=12]="UNIMPLEMENTED",Me[Me.INTERNAL=13]="INTERNAL",Me[Me.UNAVAILABLE=14]="UNAVAILABLE",Me[Me.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jx(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zx=new eo([4294967295,4294967295],0);function ny(t){const e=Jx().encode(t),n=new WN;return n.update(e),new Uint8Array(n.digest())}function ry(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new eo([n,r],0),new eo([s,i],0)]}class np{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Zo(`Invalid padding: ${n}`);if(r<0)throw new Zo(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Zo(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Zo(`Invalid padding when bitmap length is 0: ${n}`);this.Te=8*e.length-n,this.Ee=eo.fromNumber(this.Te)}de(e,n,r){let s=e.add(n.multiply(eo.fromNumber(r)));return s.compare(Zx)===1&&(s=new eo([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Ee).toNumber()}Ae(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Te===0)return!1;const n=ny(e),[r,s]=ry(n);for(let i=0;i<this.hashCount;i++){const o=this.de(r,s,i);if(!this.Ae(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new np(i,s,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Te===0)return;const n=ny(e),[r,s]=ry(n);for(let i=0;i<this.hashCount;i++){const o=this.de(r,s,i);this.Re(o)}}Re(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Zo extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _l{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,gl.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new _l(pe.min(),s,new tt(Pe),In(),Oe())}}class gl{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new gl(r,n,Oe(),Oe(),Oe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cu{constructor(e,n,r,s){this.Ve=e,this.removedTargetIds=n,this.key=r,this.me=s}}class ob{constructor(e,n){this.targetId=e,this.fe=n}}class ab{constructor(e,n,r=Nt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class sy{constructor(){this.ge=0,this.pe=oy(),this.ye=Nt.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return this.ge!==0}get De(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}ve(){let e=Oe(),n=Oe(),r=Oe();return this.pe.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:ae()}}),new gl(this.ye,this.we,e,n,r)}Fe(){this.Se=!1,this.pe=oy()}Me(e,n){this.Se=!0,this.pe=this.pe.insert(e,n)}xe(e){this.Se=!0,this.pe=this.pe.remove(e)}Oe(){this.ge+=1}Ne(){this.ge-=1,me(this.ge>=0)}Le(){this.Se=!0,this.we=!0}}class eD{constructor(e){this.Be=e,this.ke=new Map,this.qe=In(),this.Qe=iy(),this.Ke=new tt(Pe)}$e(e){for(const n of e.Ve)e.me&&e.me.isFoundDocument()?this.Ue(n,e.me):this.We(n,e.key,e.me);for(const n of e.removedTargetIds)this.We(n,e.key,e.me)}Ge(e){this.forEachTarget(e,n=>{const r=this.ze(n);switch(e.state){case 0:this.je(n)&&r.Ce(e.resumeToken);break;case 1:r.Ne(),r.be||r.Fe(),r.Ce(e.resumeToken);break;case 2:r.Ne(),r.be||this.removeTarget(n);break;case 3:this.je(n)&&(r.Le(),r.Ce(e.resumeToken));break;case 4:this.je(n)&&(this.He(n),r.Ce(e.resumeToken));break;default:ae()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ke.forEach((r,s)=>{this.je(s)&&n(s)})}Je(e){const n=e.targetId,r=e.fe.count,s=this.Ye(n);if(s){const i=s.target;if(Mu(i))if(r===0){const o=new ee(i.path);this.We(n,o,pt.newNoDocument(o,pe.min()))}else me(r===1);else{const o=this.Ze(n);if(o!==r){const a=this.Xe(e),l=a?this.et(a,e,o):1;if(l!==0){this.He(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(n,c)}}}}}Xe(e){const n=e.fe.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,a;try{o=fs(r).toUint8Array()}catch(l){if(l instanceof x0)return Va("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new np(o,s,i)}catch(l){return Va(l instanceof Zo?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Te===0?null:a}et(e,n,r){return n.fe.count===r-this.rt(e,n.targetId)?0:2}rt(e,n){const r=this.Be.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Be.nt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(a)||(this.We(n,i,null),s++)}),s}it(e){const n=new Map;this.ke.forEach((i,o)=>{const a=this.Ye(o);if(a){if(i.current&&Mu(a.target)){const l=new ee(a.target.path);this.qe.get(l)!==null||this.st(o,l)||this.We(o,l,pt.newNoDocument(l,e))}i.De&&(n.set(o,i.ve()),i.Fe())}});let r=Oe();this.Qe.forEach((i,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.Ye(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(i))}),this.qe.forEach((i,o)=>o.setReadTime(e));const s=new _l(e,n,this.Ke,this.qe,r);return this.qe=In(),this.Qe=iy(),this.Ke=new tt(Pe),s}Ue(e,n){if(!this.je(e))return;const r=this.st(e,n.key)?2:0;this.ze(e).Me(n.key,r),this.qe=this.qe.insert(n.key,n),this.Qe=this.Qe.insert(n.key,this.ot(n.key).add(e))}We(e,n,r){if(!this.je(e))return;const s=this.ze(e);this.st(e,n)?s.Me(n,1):s.xe(n),this.Qe=this.Qe.insert(n,this.ot(n).delete(e)),r&&(this.qe=this.qe.insert(n,r))}removeTarget(e){this.ke.delete(e)}Ze(e){const n=this.ze(e).ve();return this.Be.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Oe(e){this.ze(e).Oe()}ze(e){let n=this.ke.get(e);return n||(n=new sy,this.ke.set(e,n)),n}ot(e){let n=this.Qe.get(e);return n||(n=new Xe(Pe),this.Qe=this.Qe.insert(e,n)),n}je(e){const n=this.Ye(e)!==null;return n||j("WatchChangeAggregator","Detected inactive target",e),n}Ye(e){const n=this.ke.get(e);return n&&n.be?null:this.Be._t(e)}He(e){this.ke.set(e,new sy),this.Be.getRemoteKeysForTarget(e).forEach(n=>{this.We(e,n,null)})}st(e,n){return this.Be.getRemoteKeysForTarget(e).has(n)}}function iy(){return new tt(ee.comparator)}function oy(){return new tt(ee.comparator)}const tD={asc:"ASCENDING",desc:"DESCENDING"},nD={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},rD={and:"AND",or:"OR"};class sD{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function nf(t,e){return t.useProto3Json||Gc(e)?e:{value:e}}function ho(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function lb(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function iD(t,e){return ho(t,e.toTimestamp())}function rn(t){return me(!!t),pe.fromTimestamp(function(n){const r=Or(n);return new dt(r.seconds,r.nanos)}(t))}function rp(t,e){return rf(t,e).canonicalString()}function rf(t,e){const n=function(s){return new Ge(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function ub(t){const e=Ge.fromString(t);return me(yb(e)),e}function $u(t,e){return rp(t.databaseId,e.path)}function ei(t,e){const n=ub(e);if(n.get(1)!==t.databaseId.projectId)throw new K(L.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new K(L.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ee(db(n))}function cb(t,e){return rp(t.databaseId,e)}function hb(t){const e=ub(t);return e.length===4?Ge.emptyPath():db(e)}function sf(t){return new Ge(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function db(t){return me(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function ay(t,e,n){return{name:$u(t,e),fields:n.value.mapValue.fields}}function oD(t,e,n){const r=ei(t,e.name),s=rn(e.updateTime),i=e.createTime?rn(e.createTime):pe.min(),o=new Wt({mapValue:{fields:e.fields}}),a=pt.newFoundDocument(r,s,i,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function aD(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:ae()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(c,d){return c.useProto3Json?(me(d===void 0||typeof d=="string"),Nt.fromBase64String(d||"")):(me(d===void 0||d instanceof Buffer||d instanceof Uint8Array),Nt.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const d=c.code===void 0?L.UNKNOWN:ib(c.code);return new K(d,c.message||"")}(o);n=new ab(r,s,i,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=ei(t,r.document.name),i=rn(r.document.updateTime),o=r.document.createTime?rn(r.document.createTime):pe.min(),a=new Wt({mapValue:{fields:r.document.fields}}),l=pt.newFoundDocument(s,i,o,a),c=r.targetIds||[],d=r.removedTargetIds||[];n=new cu(c,d,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=ei(t,r.document),i=r.readTime?rn(r.readTime):pe.min(),o=pt.newNoDocument(s,i),a=r.removedTargetIds||[];n=new cu([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=ei(t,r.document),i=r.removedTargetIds||[];n=new cu([],i,s,null)}else{if(!("filter"in e))return ae();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new Yx(s,i),a=r.targetId;n=new ob(a,o)}}return n}function Bu(t,e){let n;if(e instanceof Po)n={update:ay(t,e.key,e.value)};else if(e instanceof Yc)n={delete:$u(t,e.key)};else if(e instanceof xr)n={update:ay(t,e.key,e.data),updateMask:fD(e.fieldMask)};else{if(!(e instanceof sb))return ae();n={verify:$u(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const a=o.transform;if(a instanceof qa)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof uo)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof co)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Ga)return{fieldPath:o.field.canonicalString(),increment:a.Ie};throw ae()}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:iD(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:ae()}(t,e.precondition)),n}function of(t,e){const n=e.currentDocument?function(i){return i.updateTime!==void 0?zt.updateTime(rn(i.updateTime)):i.exists!==void 0?zt.exists(i.exists):zt.none()}(e.currentDocument):zt.none(),r=e.updateTransforms?e.updateTransforms.map(s=>function(o,a){let l=null;if("setToServerValue"in a)me(a.setToServerValue==="REQUEST_TIME"),l=new qa;else if("appendMissingElements"in a){const d=a.appendMissingElements.values||[];l=new uo(d)}else if("removeAllFromArray"in a){const d=a.removeAllFromArray.values||[];l=new co(d)}else"increment"in a?l=new Ga(o,a.increment):ae();const c=ht.fromServerFormat(a.fieldPath);return new Hx(c,l)}(t,s)):[];if(e.update){e.update.name;const s=ei(t,e.update.name),i=new Wt({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=function(l){const c=l.fieldPaths||[];return new gn(c.map(d=>ht.fromServerFormat(d)))}(e.updateMask);return new xr(s,i,o,n,r)}return new Po(s,i,n,r)}if(e.delete){const s=ei(t,e.delete);return new Yc(s,n)}if(e.verify){const s=ei(t,e.verify);return new sb(s,n)}return ae()}function lD(t,e){return t&&t.length>0?(me(e!==void 0),t.map(n=>function(s,i){let o=s.updateTime?rn(s.updateTime):rn(i);return o.isEqual(pe.min())&&(o=rn(i)),new Kx(o,s.transformResults||[])}(n,e))):[]}function fb(t,e){return{documents:[cb(t,e.path)]}}function mb(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=cb(t,s);const i=function(c){if(c.length!==0)return gb(Ke.create(c,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(c){if(c.length!==0)return c.map(d=>function(h){return{field:Li(h.field),direction:cD(h.dir)}}(d))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=nf(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{ut:n,parent:s}}function pb(t){let e=hb(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){me(r===1);const d=n.from[0];d.allDescendants?s=d.collectionId:e=e.child(d.collectionId)}let i=[];n.where&&(i=function(u){const h=_b(u);return h instanceof Ke&&Ym(h)?h.getFilters():[h]}(n.where));let o=[];n.orderBy&&(o=function(u){return u.map(h=>function(m){return new ja(Mi(m.field),function(g){switch(g){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(m.direction))}(h))}(n.orderBy));let a=null;n.limit&&(a=function(u){let h;return h=typeof u=="object"?u.value:u,Gc(h)?null:h}(n.limit));let l=null;n.startAt&&(l=function(u){const h=!!u.before,f=u.values||[];return new ps(f,h)}(n.startAt));let c=null;return n.endAt&&(c=function(u){const h=!u.before,f=u.values||[];return new ps(f,h)}(n.endAt)),q0(e,s,o,i,a,"F",l,c)}function uD(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ae()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function _b(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Mi(n.unaryFilter.field);return De.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Mi(n.unaryFilter.field);return De.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Mi(n.unaryFilter.field);return De.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Mi(n.unaryFilter.field);return De.create(o,"!=",{nullValue:"NULL_VALUE"});default:return ae()}}(t):t.fieldFilter!==void 0?function(n){return De.create(Mi(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ae()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Ke.create(n.compositeFilter.filters.map(r=>_b(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return ae()}}(n.compositeFilter.op))}(t):ae()}function cD(t){return tD[t]}function hD(t){return nD[t]}function dD(t){return rD[t]}function Li(t){return{fieldPath:t.canonicalString()}}function Mi(t){return ht.fromServerFormat(t.fieldPath)}function gb(t){return t instanceof De?function(n){if(n.op==="=="){if(Gg(n.value))return{unaryFilter:{field:Li(n.field),op:"IS_NAN"}};if(qg(n.value))return{unaryFilter:{field:Li(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Gg(n.value))return{unaryFilter:{field:Li(n.field),op:"IS_NOT_NAN"}};if(qg(n.value))return{unaryFilter:{field:Li(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Li(n.field),op:hD(n.op),value:n.value}}}(t):t instanceof Ke?function(n){const r=n.getFilters().map(s=>gb(s));return r.length===1?r[0]:{compositeFilter:{op:dD(n.op),filters:r}}}(t):ae()}function fD(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function yb(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ir{constructor(e,n,r,s,i=pe.min(),o=pe.min(),a=Nt.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new Ir(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Ir(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ir(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ir(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vb{constructor(e){this.ct=e}}function mD(t,e){let n;if(e.document)n=oD(t.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=ee.fromSegments(e.noDocument.path),s=di(e.noDocument.readTime);n=pt.newNoDocument(r,s),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return ae();{const r=ee.fromSegments(e.unknownDocument.path),s=di(e.unknownDocument.version);n=pt.newUnknownDocument(r,s)}}return e.readTime&&n.setReadTime(function(s){const i=new dt(s[0],s[1]);return pe.fromTimestamp(i)}(e.readTime)),n}function ly(t,e){const n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:ju(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(i,o){return{name:$u(i,o.key),fields:o.data.value.mapValue.fields,updateTime:ho(i,o.version.toTimestamp()),createTime:ho(i,o.createTime.toTimestamp())}}(t.ct,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:hi(e.version)};else{if(!e.isUnknownDocument())return ae();r.unknownDocument={path:n.path.toArray(),version:hi(e.version)}}return r}function ju(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function hi(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function di(t){const e=new dt(t.seconds,t.nanoseconds);return pe.fromTimestamp(e)}function js(t,e){const n=(e.baseMutations||[]).map(i=>of(t.ct,i));for(let i=0;i<e.mutations.length-1;++i){const o=e.mutations[i];if(i+1<e.mutations.length&&e.mutations[i+1].transform!==void 0){const a=e.mutations[i+1];o.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(i+1,1),++i}}const r=e.mutations.map(i=>of(t.ct,i)),s=dt.fromMillis(e.localWriteTimeMs);return new Zm(e.batchId,s,n,r)}function ea(t){const e=di(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?di(t.lastLimboFreeSnapshotVersion):pe.min();let r;return r=function(i){return i.documents!==void 0}(t.query)?function(i){return me(i.documents.length===1),wn(Wc(hb(i.documents[0])))}(t.query):function(i){return wn(pb(i))}(t.query),new Ir(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,Nt.fromBase64String(t.resumeToken))}function Eb(t,e){const n=hi(e.snapshotVersion),r=hi(e.lastLimboFreeSnapshotVersion);let s;s=Mu(e.target)?fb(t.ct,e.target):mb(t.ct,e.target).ut;const i=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:ci(e.target),readTime:n,resumeToken:i,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:s}}function Ib(t){const e=pb({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Uu(e,e.limit,"L"):e}function Yh(t,e){return new tp(e.largestBatchId,of(t.ct,e.overlayMutation))}function uy(t,e){const n=e.path.lastSegment();return[t,nn(e.path.popLast()),n]}function cy(t,e,n,r){return{indexId:t,uid:e,sequenceNumber:n,readTime:hi(r.readTime),documentKey:nn(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pD{getBundleMetadata(e,n){return hy(e).get(n).next(r=>{if(r)return function(i){return{id:i.bundleId,createTime:di(i.createTime),version:i.version}}(r)})}saveBundleMetadata(e,n){return hy(e).put(function(s){return{bundleId:s.id,createTime:hi(rn(s.createTime)),version:s.version}}(n))}getNamedQuery(e,n){return dy(e).get(n).next(r=>{if(r)return function(i){return{name:i.name,query:Ib(i.bundledQuery),readTime:di(i.readTime)}}(r)})}saveNamedQuery(e,n){return dy(e).put(function(s){return{name:s.name,readTime:hi(rn(s.readTime)),bundledQuery:s.bundledQuery}}(n))}}function hy(t){return Dt(t,"bundles")}function dy(t){return Dt(t,"namedQueries")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xc{constructor(e,n){this.serializer=e,this.userId=n}static lt(e,n){const r=n.uid||"";return new Xc(e,r)}getOverlay(e,n){return Fo(e).get(uy(this.userId,n)).next(r=>r?Yh(this.serializer,r):null)}getOverlays(e,n){const r=Zn();return x.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){const s=[];return r.forEach((i,o)=>{const a=new tp(n,o);s.push(this.ht(e,a))}),x.waitFor(s)}removeOverlaysForBatchId(e,n,r){const s=new Set;n.forEach(o=>s.add(nn(o.getCollectionPath())));const i=[];return s.forEach(o=>{const a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);i.push(Fo(e).H("collectionPathOverlayIndex",a))}),x.waitFor(i)}getOverlaysForCollection(e,n,r){const s=Zn(),i=nn(n),o=IDBKeyRange.bound([this.userId,i,r],[this.userId,i,Number.POSITIVE_INFINITY],!0);return Fo(e).W("collectionPathOverlayIndex",o).next(a=>{for(const l of a){const c=Yh(this.serializer,l);s.set(c.getKey(),c)}return s})}getOverlaysForCollectionGroup(e,n,r,s){const i=Zn();let o;const a=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return Fo(e).Y({index:"collectionGroupOverlayIndex",range:a},(l,c,d)=>{const u=Yh(this.serializer,c);i.size()<s||u.largestBatchId===o?(i.set(u.getKey(),u),o=u.largestBatchId):d.done()}).next(()=>i)}ht(e,n){return Fo(e).put(function(s,i,o){const[a,l,c]=uy(i,o.mutation.key);return{userId:i,collectionPath:l,documentId:c,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:Bu(s.ct,o.mutation)}}(this.serializer,this.userId,n))}}function Fo(t){return Dt(t,"documentOverlays")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qs{constructor(){}Pt(e,n){this.It(e,n),n.Tt()}It(e,n){if("nullValue"in e)this.Et(n,5);else if("booleanValue"in e)this.Et(n,10),n.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(n,15),n.dt(mt(e.integerValue));else if("doubleValue"in e){const r=mt(e.doubleValue);isNaN(r)?this.Et(n,13):(this.Et(n,15),Fa(r)?n.dt(0):n.dt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Et(n,20),typeof r=="string"&&(r=Or(r)),n.At(`${r.seconds||""}`),n.dt(r.nanos||0)}else if("stringValue"in e)this.Rt(e.stringValue,n),this.Vt(n);else if("bytesValue"in e)this.Et(n,30),n.ft(fs(e.bytesValue)),this.Vt(n);else if("referenceValue"in e)this.gt(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.Et(n,45),n.dt(r.latitude||0),n.dt(r.longitude||0)}else"mapValue"in e?D0(e)?this.Et(n,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,n),this.Vt(n)):"arrayValue"in e?(this.wt(e.arrayValue,n),this.Vt(n)):ae()}Rt(e,n){this.Et(n,25),this.St(e,n)}St(e,n){n.At(e)}yt(e,n){const r=e.fields||{};this.Et(n,55);for(const s of Object.keys(r))this.Rt(s,n),this.It(r[s],n)}wt(e,n){const r=e.values||[];this.Et(n,50);for(const s of r)this.It(s,n)}gt(e,n){this.Et(n,37),ee.fromName(e).path.forEach(r=>{this.Et(n,60),this.St(r,n)})}Et(e,n){e.dt(n)}Vt(e){e.dt(2)}}qs.bt=new qs;function _D(t){if(t===0)return 8;let e=0;return!(t>>4)&&(e+=4,t<<=4),!(t>>6)&&(e+=2,t<<=2),!(t>>7)&&(e+=1),e}function fy(t){const e=64-function(r){let s=0;for(let i=0;i<8;++i){const o=_D(255&r[i]);if(s+=o,o!==8)break}return s}(t);return Math.ceil(e/8)}class gD{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Dt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Ct(r.value),r=n.next();this.vt()}Ft(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Mt(r.value),r=n.next();this.xt()}Ot(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Ct(r);else if(r<2048)this.Ct(960|r>>>6),this.Ct(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Ct(480|r>>>12),this.Ct(128|63&r>>>6),this.Ct(128|63&r);else{const s=n.codePointAt(0);this.Ct(240|s>>>18),this.Ct(128|63&s>>>12),this.Ct(128|63&s>>>6),this.Ct(128|63&s)}}this.vt()}Nt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Mt(r);else if(r<2048)this.Mt(960|r>>>6),this.Mt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Mt(480|r>>>12),this.Mt(128|63&r>>>6),this.Mt(128|63&r);else{const s=n.codePointAt(0);this.Mt(240|s>>>18),this.Mt(128|63&s>>>12),this.Mt(128|63&s>>>6),this.Mt(128|63&s)}}this.xt()}Lt(e){const n=this.Bt(e),r=fy(n);this.kt(1+r),this.buffer[this.position++]=255&r;for(let s=n.length-r;s<n.length;++s)this.buffer[this.position++]=255&n[s]}qt(e){const n=this.Bt(e),r=fy(n);this.kt(1+r),this.buffer[this.position++]=~(255&r);for(let s=n.length-r;s<n.length;++s)this.buffer[this.position++]=~(255&n[s])}Qt(){this.Kt(255),this.Kt(255)}$t(){this.Ut(255),this.Ut(255)}reset(){this.position=0}seed(e){this.kt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Wt(){return this.buffer.slice(0,this.position)}Bt(e){const n=function(i){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,i,!1),new Uint8Array(o.buffer)}(e),r=(128&n[0])!=0;n[0]^=r?255:128;for(let s=1;s<n.length;++s)n[s]^=r?255:0;return n}Ct(e){const n=255&e;n===0?(this.Kt(0),this.Kt(255)):n===255?(this.Kt(255),this.Kt(0)):this.Kt(n)}Mt(e){const n=255&e;n===0?(this.Ut(0),this.Ut(255)):n===255?(this.Ut(255),this.Ut(0)):this.Ut(e)}vt(){this.Kt(0),this.Kt(1)}xt(){this.Ut(0),this.Ut(1)}Kt(e){this.kt(1),this.buffer[this.position++]=e}Ut(e){this.kt(1),this.buffer[this.position++]=~e}kt(e){const n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);const s=new Uint8Array(r);s.set(this.buffer),this.buffer=s}}class yD{constructor(e){this.Gt=e}ft(e){this.Gt.Dt(e)}At(e){this.Gt.Ot(e)}dt(e){this.Gt.Lt(e)}Tt(){this.Gt.Qt()}}class vD{constructor(e){this.Gt=e}ft(e){this.Gt.Ft(e)}At(e){this.Gt.Nt(e)}dt(e){this.Gt.qt(e)}Tt(){this.Gt.$t()}}class Uo{constructor(){this.Gt=new gD,this.zt=new yD(this.Gt),this.jt=new vD(this.Gt)}seed(e){this.Gt.seed(e)}Ht(e){return e===0?this.zt:this.jt}Wt(){return this.Gt.Wt()}reset(){this.Gt.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gs{constructor(e,n,r,s){this.indexId=e,this.documentKey=n,this.arrayValue=r,this.directionalValue=s}Jt(){const e=this.directionalValue.length,n=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Gs(this.indexId,this.documentKey,this.arrayValue,r)}}function Ur(t,e){let n=t.indexId-e.indexId;return n!==0?n:(n=my(t.arrayValue,e.arrayValue),n!==0?n:(n=my(t.directionalValue,e.directionalValue),n!==0?n:ee.comparator(t.documentKey,e.documentKey)))}function my(t,e){for(let n=0;n<t.length&&n<e.length;++n){const r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class py{constructor(e){this.Yt=new Xe((n,r)=>ht.comparator(n.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.Zt=e.orderBy,this.Xt=[];for(const n of e.filters){const r=n;r.isInequality()?this.Yt=this.Yt.add(r):this.Xt.push(r)}}get en(){return this.Yt.size>1}tn(e){if(me(e.collectionGroup===this.collectionId),this.en)return!1;const n=zd(e);if(n!==void 0&&!this.nn(n))return!1;const r=Ms(e);let s=new Set,i=0,o=0;for(;i<r.length&&this.nn(r[i]);++i)s=s.add(r[i].fieldPath.canonicalString());if(i===r.length)return!0;if(this.Yt.size>0){const a=this.Yt.getIterator().getNext();if(!s.has(a.field.canonicalString())){const l=r[i];if(!this.rn(a,l)||!this.sn(this.Zt[o++],l))return!1}++i}for(;i<r.length;++i){const a=r[i];if(o>=this.Zt.length||!this.sn(this.Zt[o++],a))return!1}return!0}on(){if(this.en)return null;let e=new Xe(ht.comparator);const n=[];for(const r of this.Xt)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")n.push(new iu(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new iu(r.field,0))}for(const r of this.Zt)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new iu(r.field,r.dir==="asc"?0:1)));return new Lu(Lu.UNKNOWN_ID,this.collectionId,n,Ma.empty())}nn(e){for(const n of this.Xt)if(this.rn(n,e))return!0;return!1}rn(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===r}sn(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tb(t){var e,n;if(me(t instanceof De||t instanceof Ke),t instanceof De){if(t instanceof j0){const s=((n=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||n===void 0?void 0:n.map(i=>De.create(t.field,"==",i)))||[];return Ke.create(s,"or")}return t}const r=t.filters.map(s=>Tb(s));return Ke.create(r,t.op)}function ED(t){if(t.getFilters().length===0)return[];const e=uf(Tb(t));return me(bb(e)),af(e)||lf(e)?[e]:e.getFilters()}function af(t){return t instanceof De}function lf(t){return t instanceof Ke&&Ym(t)}function bb(t){return af(t)||lf(t)||function(n){if(n instanceof Ke&&Jd(n)){for(const r of n.getFilters())if(!af(r)&&!lf(r))return!1;return!0}return!1}(t)}function uf(t){if(me(t instanceof De||t instanceof Ke),t instanceof De)return t;if(t.filters.length===1)return uf(t.filters[0]);const e=t.filters.map(r=>uf(r));let n=Ke.create(e,t.op);return n=qu(n),bb(n)?n:(me(n instanceof Ke),me(lo(n)),me(n.filters.length>1),n.filters.reduce((r,s)=>sp(r,s)))}function sp(t,e){let n;return me(t instanceof De||t instanceof Ke),me(e instanceof De||e instanceof Ke),n=t instanceof De?e instanceof De?function(s,i){return Ke.create([s,i],"and")}(t,e):_y(t,e):e instanceof De?_y(e,t):function(s,i){if(me(s.filters.length>0&&i.filters.length>0),lo(s)&&lo(i))return U0(s,i.getFilters());const o=Jd(s)?s:i,a=Jd(s)?i:s,l=o.filters.map(c=>sp(c,a));return Ke.create(l,"or")}(t,e),qu(n)}function _y(t,e){if(lo(e))return U0(e,t.getFilters());{const n=e.filters.map(r=>sp(t,r));return Ke.create(n,"or")}}function qu(t){if(me(t instanceof De||t instanceof Ke),t instanceof De)return t;const e=t.getFilters();if(e.length===1)return qu(e[0]);if(M0(t))return t;const n=e.map(s=>qu(s)),r=[];return n.forEach(s=>{s instanceof De?r.push(s):s instanceof Ke&&(s.op===t.op?r.push(...s.filters):r.push(s))}),r.length===1?r[0]:Ke.create(r,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ID{constructor(){this._n=new ip}addToCollectionParentIndex(e,n){return this._n.add(n),x.resolve()}getCollectionParents(e,n){return x.resolve(this._n.getEntries(n))}addFieldIndex(e,n){return x.resolve()}deleteFieldIndex(e,n){return x.resolve()}deleteAllFieldIndexes(e){return x.resolve()}createTargetIndexes(e,n){return x.resolve()}getDocumentsMatchingTarget(e,n){return x.resolve(null)}getIndexType(e,n){return x.resolve(0)}getFieldIndexes(e,n){return x.resolve([])}getNextCollectionGroupToUpdate(e){return x.resolve(null)}getMinOffset(e,n){return x.resolve(Sn.min())}getMinOffsetFromCollectionGroup(e,n){return x.resolve(Sn.min())}updateCollectionGroup(e,n,r){return x.resolve()}updateIndexEntries(e,n){return x.resolve()}}class ip{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new Xe(Ge.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Xe(Ge.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $l=new Uint8Array(0);class TD{constructor(e,n){this.databaseId=n,this.an=new ip,this.un=new ws(r=>ci(r),(r,s)=>ml(r,s)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.an.has(n)){const r=n.lastSegment(),s=n.popLast();e.addOnCommittedListener(()=>{this.an.add(n)});const i={collectionId:r,parent:nn(s)};return gy(e).put(i)}return x.resolve()}getCollectionParents(e,n){const r=[],s=IDBKeyRange.bound([n,""],[I0(n),""],!1,!0);return gy(e).W(s).next(i=>{for(const o of i){if(o.collectionId!==n)break;r.push(Jn(o.parent))}return r})}addFieldIndex(e,n){const r=$o(e),s=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(l=>[l.fieldPath.canonicalString(),l.kind])}}(n);delete s.indexId;const i=r.add(s);if(n.indexState){const o=ki(e);return i.next(a=>{o.put(cy(a,this.uid,n.indexState.sequenceNumber,n.indexState.offset))})}return i.next()}deleteFieldIndex(e,n){const r=$o(e),s=ki(e),i=Oi(e);return r.delete(n.indexId).next(()=>s.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const n=$o(e),r=Oi(e),s=ki(e);return n.H().next(()=>r.H()).next(()=>s.H())}createTargetIndexes(e,n){return x.forEach(this.cn(n),r=>this.getIndexType(e,r).next(s=>{if(s===0||s===1){const i=new py(r).on();if(i!=null)return this.addFieldIndex(e,i)}}))}getDocumentsMatchingTarget(e,n){const r=Oi(e);let s=!0;const i=new Map;return x.forEach(this.cn(n),o=>this.ln(e,o).next(a=>{s&&(s=!!a),i.set(o,a)})).next(()=>{if(s){let o=Oe();const a=[];return x.forEach(i,(l,c)=>{j("IndexedDbIndexManager",`Using index ${function(E){return`id=${E.indexId}|cg=${E.collectionGroup}|f=${E.fields.map(T=>`${T.fieldPath}:${T.kind}`).join(",")}`}(l)} to execute ${ci(n)}`);const d=function(E,T){const S=zd(T);if(S===void 0)return null;for(const w of Fu(E,S.fieldPath))switch(w.op){case"array-contains-any":return w.value.arrayValue.values||[];case"array-contains":return[w.value]}return null}(c,l),u=function(E,T){const S=new Map;for(const w of Ms(T))for(const D of Fu(E,w.fieldPath))switch(D.op){case"==":case"in":S.set(w.fieldPath.canonicalString(),D.value);break;case"not-in":case"!=":return S.set(w.fieldPath.canonicalString(),D.value),Array.from(S.values())}return null}(c,l),h=function(E,T){const S=[];let w=!0;for(const D of Ms(T)){const O=D.kind===0?Qg(E,D.fieldPath,E.startAt):Yg(E,D.fieldPath,E.startAt);S.push(O.value),w&&(w=O.inclusive)}return new ps(S,w)}(c,l),f=function(E,T){const S=[];let w=!0;for(const D of Ms(T)){const O=D.kind===0?Yg(E,D.fieldPath,E.endAt):Qg(E,D.fieldPath,E.endAt);S.push(O.value),w&&(w=O.inclusive)}return new ps(S,w)}(c,l),m=this.hn(l,c,h),y=this.hn(l,c,f),g=this.Pn(l,c,u),v=this.In(l.indexId,d,m,h.inclusive,y,f.inclusive,g);return x.forEach(v,b=>r.j(b,n.limit).next(E=>{E.forEach(T=>{const S=ee.fromSegments(T.documentKey);o.has(S)||(o=o.add(S),a.push(S))})}))}).next(()=>a)}return x.resolve(null)})}cn(e){let n=this.un.get(e);return n||(e.filters.length===0?n=[e]:n=ED(Ke.create(e.filters,"and")).map(r=>ef(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,n),n)}In(e,n,r,s,i,o,a){const l=(n!=null?n.length:1)*Math.max(r.length,i.length),c=l/(n!=null?n.length:1),d=[];for(let u=0;u<l;++u){const h=n?this.Tn(n[u/c]):$l,f=this.En(e,h,r[u%c],s),m=this.dn(e,h,i[u%c],o),y=a.map(g=>this.En(e,h,g,!0));d.push(...this.createRange(f,m,y))}return d}En(e,n,r,s){const i=new Gs(e,ee.empty(),n,r);return s?i:i.Jt()}dn(e,n,r,s){const i=new Gs(e,ee.empty(),n,r);return s?i.Jt():i}ln(e,n){const r=new py(n),s=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,s).next(i=>{let o=null;for(const a of i)r.tn(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,n){let r=2;const s=this.cn(n);return x.forEach(s,i=>this.ln(e,i).next(o=>{o?r!==0&&o.fields.length<function(l){let c=new Xe(ht.comparator),d=!1;for(const u of l.filters)for(const h of u.getFlattenedFilters())h.field.isKeyField()||(h.op==="array-contains"||h.op==="array-contains-any"?d=!0:c=c.add(h.field));for(const u of l.orderBy)u.field.isKeyField()||(c=c.add(u.field));return c.size+(d?1:0)}(i)&&(r=1):r=0})).next(()=>function(o){return o.limit!==null}(n)&&s.length>1&&r===2?1:r)}An(e,n){const r=new Uo;for(const s of Ms(e)){const i=n.data.field(s.fieldPath);if(i==null)return null;const o=r.Ht(s.kind);qs.bt.Pt(i,o)}return r.Wt()}Tn(e){const n=new Uo;return qs.bt.Pt(e,n.Ht(0)),n.Wt()}Rn(e,n){const r=new Uo;return qs.bt.Pt(ui(this.databaseId,n),r.Ht(function(i){const o=Ms(i);return o.length===0?0:o[o.length-1].kind}(e))),r.Wt()}Pn(e,n,r){if(r===null)return[];let s=[];s.push(new Uo);let i=0;for(const o of Ms(e)){const a=r[i++];for(const l of s)if(this.Vn(n,o.fieldPath)&&Ba(a))s=this.mn(s,o,a);else{const c=l.Ht(o.kind);qs.bt.Pt(a,c)}}return this.fn(s)}hn(e,n,r){return this.Pn(e,n,r.position)}fn(e){const n=[];for(let r=0;r<e.length;++r)n[r]=e[r].Wt();return n}mn(e,n,r){const s=[...e],i=[];for(const o of r.arrayValue.values||[])for(const a of s){const l=new Uo;l.seed(a.Wt()),qs.bt.Pt(o,l.Ht(n.kind)),i.push(l)}return i}Vn(e,n){return!!e.filters.find(r=>r instanceof De&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,n){const r=$o(e),s=ki(e);return(n?r.W("collectionGroupIndex",IDBKeyRange.bound(n,n)):r.W()).next(i=>{const o=[];return x.forEach(i,a=>s.get([a.indexId,this.uid]).next(l=>{o.push(function(d,u){const h=u?new Ma(u.sequenceNumber,new Sn(di(u.readTime),new ee(Jn(u.documentKey)),u.largestBatchId)):Ma.empty(),f=d.fields.map(([m,y])=>new iu(ht.fromServerFormat(m),y));return new Lu(d.indexId,d.collectionGroup,f,h)}(a,l))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((r,s)=>{const i=r.indexState.sequenceNumber-s.indexState.sequenceNumber;return i!==0?i:Pe(r.collectionGroup,s.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,r){const s=$o(e),i=ki(e);return this.gn(e).next(o=>s.W("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(a=>x.forEach(a,l=>i.put(cy(l.indexId,this.uid,o,r)))))}updateIndexEntries(e,n){const r=new Map;return x.forEach(n,(s,i)=>{const o=r.get(s.collectionGroup);return(o?x.resolve(o):this.getFieldIndexes(e,s.collectionGroup)).next(a=>(r.set(s.collectionGroup,a),x.forEach(a,l=>this.pn(e,s,l).next(c=>{const d=this.yn(i,l);return c.isEqual(d)?x.resolve():this.wn(e,i,l,c,d)}))))})}Sn(e,n,r,s){return Oi(e).put({indexId:s.indexId,uid:this.uid,arrayValue:s.arrayValue,directionalValue:s.directionalValue,orderedDocumentKey:this.Rn(r,n.key),documentKey:n.key.path.toArray()})}bn(e,n,r,s){return Oi(e).delete([s.indexId,this.uid,s.arrayValue,s.directionalValue,this.Rn(r,n.key),n.key.path.toArray()])}pn(e,n,r){const s=Oi(e);let i=new Xe(Ur);return s.Y({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.Rn(r,n)])},(o,a)=>{i=i.add(new Gs(r.indexId,n,a.arrayValue,a.directionalValue))}).next(()=>i)}yn(e,n){let r=new Xe(Ur);const s=this.An(n,e);if(s==null)return r;const i=zd(n);if(i!=null){const o=e.data.field(i.fieldPath);if(Ba(o))for(const a of o.arrayValue.values||[])r=r.add(new Gs(n.indexId,e.key,this.Tn(a),s))}else r=r.add(new Gs(n.indexId,e.key,$l,s));return r}wn(e,n,r,s,i){j("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);const o=[];return function(l,c,d,u,h){const f=l.getIterator(),m=c.getIterator();let y=Ci(f),g=Ci(m);for(;y||g;){let v=!1,b=!1;if(y&&g){const E=d(y,g);E<0?b=!0:E>0&&(v=!0)}else y!=null?b=!0:v=!0;v?(u(g),g=Ci(m)):b?(h(y),y=Ci(f)):(y=Ci(f),g=Ci(m))}}(s,i,Ur,a=>{o.push(this.Sn(e,n,r,a))},a=>{o.push(this.bn(e,n,r,a))}),x.waitFor(o)}gn(e){let n=1;return ki(e).Y({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,s,i)=>{i.done(),n=s.sequenceNumber+1}).next(()=>n)}createRange(e,n,r){r=r.sort((o,a)=>Ur(o,a)).filter((o,a,l)=>!a||Ur(o,l[a-1])!==0);const s=[];s.push(e);for(const o of r){const a=Ur(o,e),l=Ur(o,n);if(a===0)s[0]=e.Jt();else if(a>0&&l<0)s.push(o),s.push(o.Jt());else if(l>0)break}s.push(n);const i=[];for(let o=0;o<s.length;o+=2){if(this.Dn(s[o],s[o+1]))return[];const a=[s[o].indexId,this.uid,s[o].arrayValue,s[o].directionalValue,$l,[]],l=[s[o+1].indexId,this.uid,s[o+1].arrayValue,s[o+1].directionalValue,$l,[]];i.push(IDBKeyRange.bound(a,l))}return i}Dn(e,n){return Ur(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(yy)}getMinOffset(e,n){return x.mapArray(this.cn(n),r=>this.ln(e,r).next(s=>s||ae())).next(yy)}}function gy(t){return Dt(t,"collectionParents")}function Oi(t){return Dt(t,"indexEntries")}function $o(t){return Dt(t,"indexConfiguration")}function ki(t){return Dt(t,"indexState")}function yy(t){me(t.length!==0);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){const s=t[r].indexState.offset;Km(s,e)<0&&(e=s),n<s.largestBatchId&&(n=s.largestBatchId)}return new Sn(e.readTime,e.documentKey,n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vy={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class hn{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new hn(e,hn.DEFAULT_COLLECTION_PERCENTILE,hn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wb(t,e,n){const r=t.store("mutations"),s=t.store("documentMutations"),i=[],o=IDBKeyRange.only(n.batchId);let a=0;const l=r.Y({range:o},(d,u,h)=>(a++,h.delete()));i.push(l.next(()=>{me(a===1)}));const c=[];for(const d of n.mutations){const u=R0(e,d.key.path,n.batchId);i.push(s.delete(u)),c.push(d.key)}return x.waitFor(i).next(()=>c)}function Gu(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw ae();e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */hn.DEFAULT_COLLECTION_PERCENTILE=10,hn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,hn.DEFAULT=new hn(41943040,hn.DEFAULT_COLLECTION_PERCENTILE,hn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),hn.DISABLED=new hn(-1,0,0);class Jc{constructor(e,n,r,s){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=s,this.Cn={}}static lt(e,n,r,s){me(e.uid!=="");const i=e.isAuthenticated()?e.uid:"";return new Jc(i,n,r,s)}checkEmpty(e){let n=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return $r(e).Y({index:"userMutationsIndex",range:r},(s,i,o)=>{n=!1,o.done()}).next(()=>n)}addMutationBatch(e,n,r,s){const i=Fi(e),o=$r(e);return o.add({}).next(a=>{me(typeof a=="number");const l=new Zm(a,n,r,s),c=function(f,m,y){const g=y.baseMutations.map(b=>Bu(f.ct,b)),v=y.mutations.map(b=>Bu(f.ct,b));return{userId:m,batchId:y.batchId,localWriteTimeMs:y.localWriteTime.toMillis(),baseMutations:g,mutations:v}}(this.serializer,this.userId,l),d=[];let u=new Xe((h,f)=>Pe(h.canonicalString(),f.canonicalString()));for(const h of s){const f=R0(this.userId,h.key.path,a);u=u.add(h.key.path.popLast()),d.push(o.put(c)),d.push(i.put(f,ax))}return u.forEach(h=>{d.push(this.indexManager.addToCollectionParentIndex(e,h))}),e.addOnCommittedListener(()=>{this.Cn[a]=l.keys()}),x.waitFor(d).next(()=>l)})}lookupMutationBatch(e,n){return $r(e).get(n).next(r=>r?(me(r.userId===this.userId),js(this.serializer,r)):null)}vn(e,n){return this.Cn[n]?x.resolve(this.Cn[n]):this.lookupMutationBatch(e,n).next(r=>{if(r){const s=r.keys();return this.Cn[n]=s,s}return null})}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=IDBKeyRange.lowerBound([this.userId,r]);let i=null;return $r(e).Y({index:"userMutationsIndex",range:s},(o,a,l)=>{a.userId===this.userId&&(me(a.batchId>=r),i=js(this.serializer,a)),l.done()}).next(()=>i)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return $r(e).Y({index:"userMutationsIndex",range:n,reverse:!0},(s,i,o)=>{r=i.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return $r(e).W("userMutationsIndex",n).next(r=>r.map(s=>js(this.serializer,s)))}getAllMutationBatchesAffectingDocumentKey(e,n){const r=ou(this.userId,n.path),s=IDBKeyRange.lowerBound(r),i=[];return Fi(e).Y({range:s},(o,a,l)=>{const[c,d,u]=o,h=Jn(d);if(c===this.userId&&n.path.isEqual(h))return $r(e).get(u).next(f=>{if(!f)throw ae();me(f.userId===this.userId),i.push(js(this.serializer,f))});l.done()}).next(()=>i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Xe(Pe);const s=[];return n.forEach(i=>{const o=ou(this.userId,i.path),a=IDBKeyRange.lowerBound(o),l=Fi(e).Y({range:a},(c,d,u)=>{const[h,f,m]=c,y=Jn(f);h===this.userId&&i.path.isEqual(y)?r=r.add(m):u.done()});s.push(l)}),x.waitFor(s).next(()=>this.Fn(e,r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1,i=ou(this.userId,r),o=IDBKeyRange.lowerBound(i);let a=new Xe(Pe);return Fi(e).Y({range:o},(l,c,d)=>{const[u,h,f]=l,m=Jn(h);u===this.userId&&r.isPrefixOf(m)?m.length===s&&(a=a.add(f)):d.done()}).next(()=>this.Fn(e,a))}Fn(e,n){const r=[],s=[];return n.forEach(i=>{s.push($r(e).get(i).next(o=>{if(o===null)throw ae();me(o.userId===this.userId),r.push(js(this.serializer,o))}))}),x.waitFor(s).next(()=>r)}removeMutationBatch(e,n){return wb(e.ae,this.userId,n).next(r=>(e.addOnCommittedListener(()=>{this.Mn(n.batchId)}),x.forEach(r,s=>this.referenceDelegate.markPotentiallyOrphaned(e,s))))}Mn(e){delete this.Cn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return x.resolve();const r=IDBKeyRange.lowerBound(function(o){return[o]}(this.userId)),s=[];return Fi(e).Y({range:r},(i,o,a)=>{if(i[0]===this.userId){const l=Jn(i[1]);s.push(l)}else a.done()}).next(()=>{me(s.length===0)})})}containsKey(e,n){return Ab(e,this.userId,n)}xn(e){return Sb(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function Ab(t,e,n){const r=ou(e,n.path),s=r[1],i=IDBKeyRange.lowerBound(r);let o=!1;return Fi(t).Y({range:i,J:!0},(a,l,c)=>{const[d,u,h]=a;d===e&&u===s&&(o=!0),c.done()}).next(()=>o)}function $r(t){return Dt(t,"mutations")}function Fi(t){return Dt(t,"documentMutations")}function Sb(t){return Dt(t,"mutationQueues")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fi{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new fi(0)}static Ln(){return new fi(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bD{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.Bn(e).next(n=>{const r=new fi(n.highestTargetId);return n.highestTargetId=r.next(),this.kn(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Bn(e).next(n=>pe.fromTimestamp(new dt(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Bn(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,r){return this.Bn(e).next(s=>(s.highestListenSequenceNumber=n,r&&(s.lastRemoteSnapshotVersion=r.toTimestamp()),n>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=n),this.kn(e,s)))}addTargetData(e,n){return this.qn(e,n).next(()=>this.Bn(e).next(r=>(r.targetCount+=1,this.Qn(n,r),this.kn(e,r))))}updateTargetData(e,n){return this.qn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>Ni(e).delete(n.targetId)).next(()=>this.Bn(e)).next(r=>(me(r.targetCount>0),r.targetCount-=1,this.kn(e,r)))}removeTargets(e,n,r){let s=0;const i=[];return Ni(e).Y((o,a)=>{const l=ea(a);l.sequenceNumber<=n&&r.get(l.targetId)===null&&(s++,i.push(this.removeTargetData(e,l)))}).next(()=>x.waitFor(i)).next(()=>s)}forEachTarget(e,n){return Ni(e).Y((r,s)=>{const i=ea(s);n(i)})}Bn(e){return Ey(e).get("targetGlobalKey").next(n=>(me(n!==null),n))}kn(e,n){return Ey(e).put("targetGlobalKey",n)}qn(e,n){return Ni(e).put(Eb(this.serializer,n))}Qn(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Bn(e).next(n=>n.targetCount)}getTargetData(e,n){const r=ci(n),s=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let i=null;return Ni(e).Y({range:s,index:"queryTargetsIndex"},(o,a,l)=>{const c=ea(a);ml(n,c.target)&&(i=c,l.done())}).next(()=>i)}addMatchingKeys(e,n,r){const s=[],i=es(e);return n.forEach(o=>{const a=nn(o.path);s.push(i.put({targetId:r,path:a})),s.push(this.referenceDelegate.addReference(e,r,o))}),x.waitFor(s)}removeMatchingKeys(e,n,r){const s=es(e);return x.forEach(n,i=>{const o=nn(i.path);return x.waitFor([s.delete([r,o]),this.referenceDelegate.removeReference(e,r,i)])})}removeMatchingKeysForTargetId(e,n){const r=es(e),s=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(s)}getMatchingKeysForTargetId(e,n){const r=IDBKeyRange.bound([n],[n+1],!1,!0),s=es(e);let i=Oe();return s.Y({range:r,J:!0},(o,a,l)=>{const c=Jn(o[1]),d=new ee(c);i=i.add(d)}).next(()=>i)}containsKey(e,n){const r=nn(n.path),s=IDBKeyRange.bound([r],[I0(r)],!1,!0);let i=0;return es(e).Y({index:"documentTargetsIndex",J:!0,range:s},([o,a],l,c)=>{o!==0&&(i++,c.done())}).next(()=>i>0)}_t(e,n){return Ni(e).get(n).next(r=>r?ea(r):null)}}function Ni(t){return Dt(t,"targets")}function Ey(t){return Dt(t,"targetGlobal")}function es(t){return Dt(t,"targetDocuments")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iy([t,e],[n,r]){const s=Pe(t,n);return s===0?Pe(e,r):s}class wD{constructor(e){this.Kn=e,this.buffer=new Xe(Iy),this.$n=0}Un(){return++this.$n}Wn(e){const n=[e,this.Un()];if(this.buffer.size<this.Kn)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();Iy(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class AD{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Gn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.zn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return this.Gn!==null}zn(e){j("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Gn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){bs(n)?j("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):await Ts(n)}await this.zn(3e5)})}}class SD{constructor(e,n){this.jn=e,this.params=n}calculateTargetCount(e,n){return this.jn.Hn(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return x.resolve(_n._e);const r=new wD(n);return this.jn.forEachTarget(e,s=>r.Wn(s.sequenceNumber)).next(()=>this.jn.Jn(e,s=>r.Wn(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.jn.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.jn.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(j("LruGarbageCollector","Garbage collection skipped; disabled"),x.resolve(vy)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(j("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),vy):this.Yn(e,n))}getCacheSize(e){return this.jn.getCacheSize(e)}Yn(e,n){let r,s,i,o,a,l,c;const d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(u=>(u>this.params.maximumSequenceNumbersToCollect?(j("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${u}`),s=this.params.maximumSequenceNumbersToCollect):s=u,o=Date.now(),this.nthSequenceNumber(e,s))).next(u=>(r=u,a=Date.now(),this.removeTargets(e,r,n))).next(u=>(i=u,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(u=>(c=Date.now(),Di()<=xe.DEBUG&&j("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-d}ms
	Determined least recently used ${s} in `+(a-o)+`ms
	Removed ${i} targets in `+(l-a)+`ms
	Removed ${u} documents in `+(c-l)+`ms
Total Duration: ${c-d}ms`),x.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:u})))}}function RD(t,e){return new SD(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PD{constructor(e,n){this.db=e,this.garbageCollector=RD(this,n)}Hn(e){const n=this.Zn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}Zn(e){let n=0;return this.Jn(e,r=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}Jn(e,n){return this.Xn(e,(r,s)=>n(s))}addReference(e,n,r){return Bl(e,r)}removeReference(e,n,r){return Bl(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return Bl(e,n)}er(e,n){return function(s,i){let o=!1;return Sb(s).Z(a=>Ab(s,a,i).next(l=>(l&&(o=!0),x.resolve(!l)))).next(()=>o)}(e,n)}removeOrphanedDocuments(e,n){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[];let i=0;return this.Xn(e,(o,a)=>{if(a<=n){const l=this.er(e,o).next(c=>{if(!c)return i++,r.getEntry(e,o).next(()=>(r.removeEntry(o,pe.min()),es(e).delete(function(u){return[0,nn(u.path)]}(o))))});s.push(l)}}).next(()=>x.waitFor(s)).next(()=>r.apply(e)).next(()=>i)}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return Bl(e,n)}Xn(e,n){const r=es(e);let s,i=_n._e;return r.Y({index:"documentTargetsIndex"},([o,a],{path:l,sequenceNumber:c})=>{o===0?(i!==_n._e&&n(new ee(Jn(s)),i),i=c,s=l):i=_n._e}).next(()=>{i!==_n._e&&n(new ee(Jn(s)),i)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Bl(t,e){return es(t).put(function(r,s){return{targetId:0,path:nn(r.path),sequenceNumber:s}}(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rb{constructor(){this.changes=new ws(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,pt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?x.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CD{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return xs(e).put(r)}removeEntry(e,n,r){return xs(e).delete(function(i,o){const a=i.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],ju(o),a[a.length-1]]}(n,r))}updateMetadata(e,n){return this.getMetadata(e).next(r=>(r.byteSize+=n,this.tr(e,r)))}getEntry(e,n){let r=pt.newInvalidDocument(n);return xs(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(Bo(n))},(s,i)=>{r=this.nr(n,i)}).next(()=>r)}rr(e,n){let r={size:0,document:pt.newInvalidDocument(n)};return xs(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(Bo(n))},(s,i)=>{r={document:this.nr(n,i),size:Gu(i)}}).next(()=>r)}getEntries(e,n){let r=In();return this.ir(e,n,(s,i)=>{const o=this.nr(s,i);r=r.insert(s,o)}).next(()=>r)}sr(e,n){let r=In(),s=new tt(ee.comparator);return this.ir(e,n,(i,o)=>{const a=this.nr(i,o);r=r.insert(i,a),s=s.insert(i,Gu(o))}).next(()=>({documents:r,_r:s}))}ir(e,n,r){if(n.isEmpty())return x.resolve();let s=new Xe(wy);n.forEach(l=>s=s.add(l));const i=IDBKeyRange.bound(Bo(s.first()),Bo(s.last())),o=s.getIterator();let a=o.getNext();return xs(e).Y({index:"documentKeyIndex",range:i},(l,c,d)=>{const u=ee.fromSegments([...c.prefixPath,c.collectionGroup,c.documentId]);for(;a&&wy(a,u)<0;)r(a,null),a=o.getNext();a&&a.isEqual(u)&&(r(a,c),a=o.hasNext()?o.getNext():null),a?d.U(Bo(a)):d.done()}).next(()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,n,r,s,i){const o=n.path,a=[o.popLast().toArray(),o.lastSegment(),ju(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],l=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return xs(e).W(IDBKeyRange.bound(a,l,!0)).next(c=>{i==null||i.incrementDocumentReadCount(c.length);let d=In();for(const u of c){const h=this.nr(ee.fromSegments(u.prefixPath.concat(u.collectionGroup,u.documentId)),u);h.isFoundDocument()&&(pl(n,h)||s.has(h.key))&&(d=d.insert(h.key,h))}return d})}getAllFromCollectionGroup(e,n,r,s){let i=In();const o=by(n,r),a=by(n,Sn.max());return xs(e).Y({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,a,!0)},(l,c,d)=>{const u=this.nr(ee.fromSegments(c.prefixPath.concat(c.collectionGroup,c.documentId)),c);i=i.insert(u.key,u),i.size===s&&d.done()}).next(()=>i)}newChangeBuffer(e){return new OD(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return Ty(e).get("remoteDocumentGlobalKey").next(n=>(me(!!n),n))}tr(e,n){return Ty(e).put("remoteDocumentGlobalKey",n)}nr(e,n){if(n){const r=mD(this.serializer,n);if(!(r.isNoDocument()&&r.version.isEqual(pe.min())))return r}return pt.newInvalidDocument(e)}}function Pb(t){return new CD(t)}class OD extends Rb{constructor(e,n){super(),this.ar=e,this.trackRemovals=n,this.ur=new ws(r=>r.toString(),(r,s)=>r.isEqual(s))}applyChanges(e){const n=[];let r=0,s=new Xe((i,o)=>Pe(i.canonicalString(),o.canonicalString()));return this.changes.forEach((i,o)=>{const a=this.ur.get(i);if(n.push(this.ar.removeEntry(e,i,a.readTime)),o.isValidDocument()){const l=ly(this.ar.serializer,o);s=s.add(i.path.popLast());const c=Gu(l);r+=c-a.size,n.push(this.ar.addEntry(e,i,l))}else if(r-=a.size,this.trackRemovals){const l=ly(this.ar.serializer,o.convertToNoDocument(pe.min()));n.push(this.ar.addEntry(e,i,l))}}),s.forEach(i=>{n.push(this.ar.indexManager.addToCollectionParentIndex(e,i))}),n.push(this.ar.updateMetadata(e,r)),x.waitFor(n)}getFromCache(e,n){return this.ar.rr(e,n).next(r=>(this.ur.set(n,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,n){return this.ar.sr(e,n).next(({documents:r,_r:s})=>(s.forEach((i,o)=>{this.ur.set(i,{size:o,readTime:r.get(i).readTime})}),r))}}function Ty(t){return Dt(t,"remoteDocumentGlobal")}function xs(t){return Dt(t,"remoteDocumentsV14")}function Bo(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function by(t,e){const n=e.documentKey.path.toArray();return[t,ju(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function wy(t,e){const n=t.path.toArray(),r=e.path.toArray();let s=0;for(let i=0;i<n.length-2&&i<r.length-2;++i)if(s=Pe(n[i],r[i]),s)return s;return s=Pe(n.length,r.length),s||(s=Pe(n[n.length-2],r[r.length-2]),s||Pe(n[n.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kD{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cb{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&fa(r.mutation,s,gn.empty(),dt.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Oe()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Oe()){const s=Zn();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=Jo();return i.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Zn();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Oe()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,s){let i=In();const o=da(),a=function(){return da()}();return n.forEach((l,c)=>{const d=r.get(c.key);s.has(c.key)&&(d===void 0||d.mutation instanceof xr)?i=i.insert(c.key,c):d!==void 0?(o.set(c.key,d.mutation.getFieldMask()),fa(d.mutation,c,d.mutation.getFieldMask(),dt.now())):o.set(c.key,gn.empty())}),this.recalculateAndSaveOverlays(e,i).next(l=>(l.forEach((c,d)=>o.set(c,d)),n.forEach((c,d)=>{var u;return a.set(c,new kD(d,(u=o.get(c))!==null&&u!==void 0?u:null))}),a))}recalculateAndSaveOverlays(e,n){const r=da();let s=new tt((o,a)=>o-a),i=Oe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let d=r.get(l)||gn.empty();d=a.applyToLocalView(c,d),r.set(l,d);const u=(s.get(a.batchId)||Oe()).add(l);s=s.insert(a.batchId,u)})}).next(()=>{const o=[],a=s.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,d=l.value,u=Q0();d.forEach(h=>{if(!i.has(h)){const f=nb(n.get(h),r.get(h));f!==null&&u.set(h,f),i=i.add(h)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,u))}return x.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return ee.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Xm(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):x.resolve(Zn());let a=-1,l=i;return o.next(c=>x.forEach(c,(d,u)=>(a<u.largestBatchId&&(a=u.largestBatchId),i.get(d)?x.resolve():this.remoteDocumentCache.getEntry(e,d).next(h=>{l=l.insert(d,h)}))).next(()=>this.populateOverlays(e,c,i)).next(()=>this.computeViews(e,l,c,Oe())).next(d=>({batchId:a,changes:z0(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ee(n)).next(r=>{let s=Jo();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=Jo();return this.indexManager.getCollectionParents(e,i).next(a=>x.forEach(a,l=>{const c=function(u,h){return new Ti(h,null,u.explicitOrderBy.slice(),u.filters.slice(),u.limit,u.limitType,u.startAt,u.endAt)}(n,l.child(i));return this.getDocumentsMatchingCollectionQuery(e,c,r,s).next(d=>{d.forEach((u,h)=>{o=o.insert(u,h)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((l,c)=>{const d=c.getKey();o.get(d)===null&&(o=o.insert(d,pt.newInvalidDocument(d)))});let a=Jo();return o.forEach((l,c)=>{const d=i.get(l);d!==void 0&&fa(d.mutation,c,gn.empty(),dt.now()),pl(n,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ND{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,n){return x.resolve(this.cr.get(n))}saveBundleMetadata(e,n){return this.cr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:rn(s.createTime)}}(n)),x.resolve()}getNamedQuery(e,n){return x.resolve(this.lr.get(n))}saveNamedQuery(e,n){return this.lr.set(n.name,function(s){return{name:s.name,query:Ib(s.bundledQuery),readTime:rn(s.readTime)}}(n)),x.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xD{constructor(){this.overlays=new tt(ee.comparator),this.hr=new Map}getOverlay(e,n){return x.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Zn();return x.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.ht(e,n,i)}),x.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.hr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.hr.delete(r)),x.resolve()}getOverlaysForCollection(e,n,r){const s=Zn(),i=n.length+1,o=new ee(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===i&&l.largestBatchId>r&&s.set(l.getKey(),l)}return x.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new tt((c,d)=>c-d);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let d=i.get(c.largestBatchId);d===null&&(d=Zn(),i=i.insert(c.largestBatchId,d)),d.set(c.getKey(),c)}}const a=Zn(),l=i.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,d)=>a.set(c,d)),!(a.size()>=s)););return x.resolve(a)}ht(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.hr.get(s.largestBatchId).delete(r.key);this.hr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new tp(n,r));let i=this.hr.get(n);i===void 0&&(i=Oe(),this.hr.set(n,i)),this.hr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class op{constructor(){this.Pr=new Xe(Rt.Ir),this.Tr=new Xe(Rt.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,n){const r=new Rt(e,n);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Ar(new Rt(e,n))}Rr(e,n){e.forEach(r=>this.removeReference(r,n))}Vr(e){const n=new ee(new Ge([])),r=new Rt(n,e),s=new Rt(n,e+1),i=[];return this.Tr.forEachInRange([r,s],o=>{this.Ar(o),i.push(o.key)}),i}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){const n=new ee(new Ge([])),r=new Rt(n,e),s=new Rt(n,e+1);let i=Oe();return this.Tr.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new Rt(e,0),r=this.Pr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Rt{constructor(e,n){this.key=e,this.pr=n}static Ir(e,n){return ee.comparator(e.key,n.key)||Pe(e.pr,n.pr)}static Er(e,n){return Pe(e.pr,n.pr)||ee.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DD{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new Xe(Rt.Ir)}checkEmpty(e){return x.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new Zm(i,n,r,s);this.mutationQueue.push(o);for(const a of s)this.wr=this.wr.add(new Rt(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return x.resolve(o)}lookupMutationBatch(e,n){return x.resolve(this.Sr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.br(r),i=s<0?0:s;return x.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return x.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(e){return x.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Rt(n,0),s=new Rt(n,Number.POSITIVE_INFINITY),i=[];return this.wr.forEachInRange([r,s],o=>{const a=this.Sr(o.pr);i.push(a)}),x.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Xe(Pe);return n.forEach(s=>{const i=new Rt(s,0),o=new Rt(s,Number.POSITIVE_INFINITY);this.wr.forEachInRange([i,o],a=>{r=r.add(a.pr)})}),x.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;ee.isDocumentKey(i)||(i=i.child(""));const o=new Rt(new ee(i),0);let a=new Xe(Pe);return this.wr.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===s&&(a=a.add(l.pr)),!0)},o),x.resolve(this.Dr(a))}Dr(e){const n=[];return e.forEach(r=>{const s=this.Sr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){me(this.Cr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.wr;return x.forEach(n.mutations,s=>{const i=new Rt(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.wr=r})}Mn(e){}containsKey(e,n){const r=new Rt(n,0),s=this.wr.firstAfterOrEqual(r);return x.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,x.resolve()}Cr(e,n){return this.br(e)}br(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Sr(e){const n=this.br(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VD{constructor(e){this.vr=e,this.docs=function(){return new tt(ee.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.vr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return x.resolve(r?r.document.mutableCopy():pt.newInvalidDocument(n))}getEntries(e,n){let r=In();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():pt.newInvalidDocument(s))}),x.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=In();const o=n.path,a=new ee(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:d}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||Km(b0(d),r)<=0||(s.has(d.key)||pl(n,d))&&(i=i.insert(d.key,d.mutableCopy()))}return x.resolve(i)}getAllFromCollectionGroup(e,n,r,s){ae()}Fr(e,n){return x.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new LD(this)}getSize(e){return x.resolve(this.size)}}class LD extends Rb{constructor(e){super(),this.ar=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.ar.addEntry(e,s)):this.ar.removeEntry(r)}),x.waitFor(n)}getFromCache(e,n){return this.ar.getEntry(e,n)}getAllFromCache(e,n){return this.ar.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MD{constructor(e){this.persistence=e,this.Mr=new ws(n=>ci(n),ml),this.lastRemoteSnapshotVersion=pe.min(),this.highestTargetId=0,this.Or=0,this.Nr=new op,this.targetCount=0,this.Lr=fi.Nn()}forEachTarget(e,n){return this.Mr.forEach((r,s)=>n(s)),x.resolve()}getLastRemoteSnapshotVersion(e){return x.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return x.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Lr.next(),x.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Or&&(this.Or=n),x.resolve()}qn(e){this.Mr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Lr=new fi(n),this.highestTargetId=n),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,n){return this.qn(n),this.targetCount+=1,x.resolve()}updateTargetData(e,n){return this.qn(n),x.resolve()}removeTargetData(e,n){return this.Mr.delete(n.target),this.Nr.Vr(n.targetId),this.targetCount-=1,x.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.Mr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Mr.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),s++)}),x.waitFor(i).next(()=>s)}getTargetCount(e){return x.resolve(this.targetCount)}getTargetData(e,n){const r=this.Mr.get(n)||null;return x.resolve(r)}addMatchingKeys(e,n,r){return this.Nr.dr(n,r),x.resolve()}removeMatchingKeys(e,n,r){this.Nr.Rr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),x.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.Nr.Vr(n),x.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Nr.gr(n);return x.resolve(r)}containsKey(e,n){return x.resolve(this.Nr.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ob{constructor(e,n){this.Br={},this.overlays={},this.kr=new _n(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new MD(this),this.indexManager=new ID,this.remoteDocumentCache=function(s){return new VD(s)}(r=>this.referenceDelegate.Kr(r)),this.serializer=new vb(n),this.$r=new ND(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new xD,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Br[e.toKey()];return r||(r=new DD(n,this.referenceDelegate),this.Br[e.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,n,r){j("MemoryPersistence","Starting transaction:",e);const s=new FD(this.kr.next());return this.referenceDelegate.Ur(),r(s).next(i=>this.referenceDelegate.Wr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Gr(e,n){return x.or(Object.values(this.Br).map(r=>()=>r.containsKey(e,n)))}}class FD extends A0{constructor(e){super(),this.currentSequenceNumber=e}}class Zc{constructor(e){this.persistence=e,this.zr=new op,this.jr=null}static Hr(e){return new Zc(e)}get Jr(){if(this.jr)return this.jr;throw ae()}addReference(e,n,r){return this.zr.addReference(r,n),this.Jr.delete(r.toString()),x.resolve()}removeReference(e,n,r){return this.zr.removeReference(r,n),this.Jr.add(r.toString()),x.resolve()}markPotentiallyOrphaned(e,n){return this.Jr.add(n.toString()),x.resolve()}removeTarget(e,n){this.zr.Vr(n.targetId).forEach(s=>this.Jr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.Jr.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}Ur(){this.jr=new Set}Wr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return x.forEach(this.Jr,r=>{const s=ee.fromPath(r);return this.Yr(e,s).next(i=>{i||n.removeEntry(s,pe.min())})}).next(()=>(this.jr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Yr(e,n).next(r=>{r?this.Jr.delete(n.toString()):this.Jr.add(n.toString())})}Kr(e){return 0}Yr(e,n){return x.or([()=>x.resolve(this.zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Gr(e,n)])}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UD{constructor(e){this.serializer=e}N(e,n,r,s){const i=new qc("createOrUpgrade",n);r<1&&s>=1&&(function(l){l.createObjectStore("owner")}(e),function(l){l.createObjectStore("mutationQueues",{keyPath:"userId"}),l.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Ug,{unique:!0}),l.createObjectStore("documentMutations")}(e),Ay(e),function(l){l.createObjectStore("remoteDocuments")}(e));let o=x.resolve();return r<3&&s>=3&&(r!==0&&(function(l){l.deleteObjectStore("targetDocuments"),l.deleteObjectStore("targets"),l.deleteObjectStore("targetGlobal")}(e),Ay(e)),o=o.next(()=>function(l){const c=l.store("targetGlobal"),d={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:pe.min().toTimestamp(),targetCount:0};return c.put("targetGlobalKey",d)}(i))),r<4&&s>=4&&(r!==0&&(o=o.next(()=>function(l,c){return c.store("mutations").W().next(d=>{l.deleteObjectStore("mutations"),l.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Ug,{unique:!0});const u=c.store("mutations"),h=d.map(f=>u.put(f));return x.waitFor(h)})}(e,i))),o=o.next(()=>{(function(l){l.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),r<5&&s>=5&&(o=o.next(()=>this.Xr(i))),r<6&&s>=6&&(o=o.next(()=>(function(l){l.createObjectStore("remoteDocumentGlobal")}(e),this.ei(i)))),r<7&&s>=7&&(o=o.next(()=>this.ti(i))),r<8&&s>=8&&(o=o.next(()=>this.ni(e,i))),r<9&&s>=9&&(o=o.next(()=>{(function(l){l.objectStoreNames.contains("remoteDocumentChanges")&&l.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&s>=10&&(o=o.next(()=>this.ri(i))),r<11&&s>=11&&(o=o.next(()=>{(function(l){l.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(l){l.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&s>=12&&(o=o.next(()=>{(function(l){const c=l.createObjectStore("documentOverlays",{keyPath:vx});c.createIndex("collectionPathOverlayIndex",Ex,{unique:!1}),c.createIndex("collectionGroupOverlayIndex",Ix,{unique:!1})})(e)})),r<13&&s>=13&&(o=o.next(()=>function(l){const c=l.createObjectStore("remoteDocumentsV14",{keyPath:lx});c.createIndex("documentKeyIndex",ux),c.createIndex("collectionGroupIndex",cx)}(e)).next(()=>this.ii(e,i)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&s>=14&&(o=o.next(()=>this.si(e,i))),r<15&&s>=15&&(o=o.next(()=>function(l){l.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),l.createObjectStore("indexState",{keyPath:px}).createIndex("sequenceNumberIndex",_x,{unique:!1}),l.createObjectStore("indexEntries",{keyPath:gx}).createIndex("documentKeyIndex",yx,{unique:!1})}(e))),r<16&&s>=16&&(o=o.next(()=>{n.objectStore("indexState").clear()}).next(()=>{n.objectStore("indexEntries").clear()})),o}ei(e){let n=0;return e.store("remoteDocuments").Y((r,s)=>{n+=Gu(s)}).next(()=>{const r={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Xr(e){const n=e.store("mutationQueues"),r=e.store("mutations");return n.W().next(s=>x.forEach(s,i=>{const o=IDBKeyRange.bound([i.userId,-1],[i.userId,i.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",o).next(a=>x.forEach(a,l=>{me(l.userId===i.userId);const c=js(this.serializer,l);return wb(e,i.userId,c).next(()=>{})}))}))}ti(e){const n=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(s=>{const i=[];return r.Y((o,a)=>{const l=new Ge(o),c=function(u){return[0,nn(u)]}(l);i.push(n.get(c).next(d=>d?x.resolve():(u=>n.put({targetId:0,path:nn(u),sequenceNumber:s.highestListenSequenceNumber}))(l)))}).next(()=>x.waitFor(i))})}ni(e,n){e.createObjectStore("collectionParents",{keyPath:mx});const r=n.store("collectionParents"),s=new ip,i=o=>{if(s.add(o)){const a=o.lastSegment(),l=o.popLast();return r.put({collectionId:a,parent:nn(l)})}};return n.store("remoteDocuments").Y({J:!0},(o,a)=>{const l=new Ge(o);return i(l.popLast())}).next(()=>n.store("documentMutations").Y({J:!0},([o,a,l],c)=>{const d=Jn(a);return i(d.popLast())}))}ri(e){const n=e.store("targets");return n.Y((r,s)=>{const i=ea(s),o=Eb(this.serializer,i);return n.put(o)})}ii(e,n){const r=n.store("remoteDocuments"),s=[];return r.Y((i,o)=>{const a=n.store("remoteDocumentsV14"),l=function(u){return u.document?new ee(Ge.fromString(u.document.name).popFirst(5)):u.noDocument?ee.fromSegments(u.noDocument.path):u.unknownDocument?ee.fromSegments(u.unknownDocument.path):ae()}(o).path.toArray(),c={prefixPath:l.slice(0,l.length-2),collectionGroup:l[l.length-2],documentId:l[l.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};s.push(a.put(c))}).next(()=>x.waitFor(s))}si(e,n){const r=n.store("mutations"),s=Pb(this.serializer),i=new Ob(Zc.Hr,this.serializer.ct);return r.W().next(o=>{const a=new Map;return o.forEach(l=>{var c;let d=(c=a.get(l.userId))!==null&&c!==void 0?c:Oe();js(this.serializer,l).keys().forEach(u=>d=d.add(u)),a.set(l.userId,d)}),x.forEach(a,(l,c)=>{const d=new Gt(c),u=Xc.lt(this.serializer,d),h=i.getIndexManager(d),f=Jc.lt(d,this.serializer,h,i.referenceDelegate);return new Cb(s,f,u,h).recalculateAndSaveOverlaysForDocumentKeys(new Qd(n,_n._e),l).next()})})}}function Ay(t){t.createObjectStore("targetDocuments",{keyPath:dx}).createIndex("documentTargetsIndex",fx,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",hx,{unique:!0}),t.createObjectStore("targetGlobal")}const Xh="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class ap{constructor(e,n,r,s,i,o,a,l,c,d,u=16){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.oi=i,this.window=o,this.document=a,this._i=c,this.ai=d,this.ui=u,this.kr=null,this.qr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.li=null,this.hi=null,this.Pi=Number.NEGATIVE_INFINITY,this.Ii=h=>Promise.resolve(),!ap.D())throw new K(L.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new PD(this,s),this.Ti=n+"main",this.serializer=new vb(l),this.Ei=new Xn(this.Ti,this.ui,new UD(this.serializer)),this.Qr=new bD(this.referenceDelegate,this.serializer),this.remoteDocumentCache=Pb(this.serializer),this.$r=new pD,this.window&&this.window.localStorage?this.di=this.window.localStorage:(this.di=null,d===!1&&yt("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ai().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new K(L.FAILED_PRECONDITION,Xh);return this.Ri(),this.Vi(),this.mi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Qr.getHighestSequenceNumber(e))}).then(e=>{this.kr=new _n(e,this._i)}).then(()=>{this.qr=!0}).catch(e=>(this.Ei&&this.Ei.close(),Promise.reject(e)))}fi(e){return this.Ii=async n=>{if(this.started)return e(n)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ei.B(async n=>{n.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.oi.enqueueAndForget(async()=>{this.started&&await this.Ai()}))}Ai(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>jl(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.gi(e).next(n=>{n||(this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)))})}).next(()=>this.pi(e)).next(n=>this.isPrimary&&!n?this.yi(e).next(()=>!1):!!n&&this.wi(e).next(()=>!0))).catch(e=>{if(bs(e))return j("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return j("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.oi.enqueueRetryable(()=>this.Ii(e)),this.isPrimary=e})}gi(e){return jo(e).get("owner").next(n=>x.resolve(this.Si(n)))}bi(e){return jl(e).delete(this.clientId)}async Di(){if(this.isPrimary&&!this.Ci(this.Pi,18e5)){this.Pi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{const r=Dt(n,"clientMetadata");return r.W().next(s=>{const i=this.vi(s,18e5),o=s.filter(a=>i.indexOf(a)===-1);return x.forEach(o,a=>r.delete(a.clientId)).next(()=>o)})}).catch(()=>[]);if(this.di)for(const n of e)this.di.removeItem(this.Fi(n.clientId))}}mi(){this.hi=this.oi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Ai().then(()=>this.Di()).then(()=>this.mi()))}Si(e){return!!e&&e.ownerId===this.clientId}pi(e){return this.ai?x.resolve(!0):jo(e).get("owner").next(n=>{if(n!==null&&this.Ci(n.leaseTimestampMs,5e3)&&!this.Mi(n.ownerId)){if(this.Si(n)&&this.networkEnabled)return!0;if(!this.Si(n)){if(!n.allowTabSynchronization)throw new K(L.FAILED_PRECONDITION,Xh);return!1}}return!(!this.networkEnabled||!this.inForeground)||jl(e).W().next(r=>this.vi(r,5e3).find(s=>{if(this.clientId!==s.clientId){const i=!this.networkEnabled&&s.networkEnabled,o=!this.inForeground&&s.inForeground,a=this.networkEnabled===s.networkEnabled;if(i||o&&a)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&j("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}async shutdown(){this.qr=!1,this.xi(),this.hi&&(this.hi.cancel(),this.hi=null),this.Oi(),this.Ni(),await this.Ei.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const n=new Qd(e,_n._e);return this.yi(n).next(()=>this.bi(n))}),this.Ei.close(),this.Li()}vi(e,n){return e.filter(r=>this.Ci(r.updateTimeMs,n)&&!this.Mi(r.clientId))}Bi(){return this.runTransaction("getActiveClients","readonly",e=>jl(e).W().next(n=>this.vi(n,18e5).map(r=>r.clientId)))}get started(){return this.qr}getMutationQueue(e,n){return Jc.lt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new TD(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return Xc.lt(this.serializer,e)}getBundleCache(){return this.$r}runTransaction(e,n,r){j("IndexedDbPersistence","Starting transaction:",e);const s=n==="readonly"?"readonly":"readwrite",i=function(l){return l===16?bx:l===15?k0:l===14?O0:l===13?C0:l===12?Tx:l===11?P0:void ae()}(this.ui);let o;return this.Ei.runTransaction(e,s,i,a=>(o=new Qd(a,this.kr?this.kr.next():_n._e),n==="readwrite-primary"?this.gi(o).next(l=>!!l||this.pi(o)).next(l=>{if(!l)throw yt(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)),new K(L.FAILED_PRECONDITION,w0);return r(o)}).next(l=>this.wi(o).next(()=>l)):this.ki(o).next(()=>r(o)))).then(a=>(o.raiseOnCommittedEvent(),a))}ki(e){return jo(e).get("owner").next(n=>{if(n!==null&&this.Ci(n.leaseTimestampMs,5e3)&&!this.Mi(n.ownerId)&&!this.Si(n)&&!(this.ai||this.allowTabSynchronization&&n.allowTabSynchronization))throw new K(L.FAILED_PRECONDITION,Xh)})}wi(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return jo(e).put("owner",n)}static D(){return Xn.D()}yi(e){const n=jo(e);return n.get("owner").next(r=>this.Si(r)?(j("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):x.resolve())}Ci(e,n){const r=Date.now();return!(e<r-n)&&(!(e>r)||(yt(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Ri(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.li=()=>{this.oi.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.Ai()))},this.document.addEventListener("visibilitychange",this.li),this.inForeground=this.document.visibilityState==="visible")}Oi(){this.li&&(this.document.removeEventListener("visibilitychange",this.li),this.li=null)}Vi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.ci=()=>{this.xi();const n=/(?:Version|Mobile)\/1[456]/;OI()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.oi.enterRestrictedMode(!0),this.oi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}Ni(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Mi(e){var n;try{const r=((n=this.di)===null||n===void 0?void 0:n.getItem(this.Fi(e)))!==null;return j("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return yt("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}xi(){if(this.di)try{this.di.setItem(this.Fi(this.clientId),String(Date.now()))}catch(e){yt("Failed to set zombie client id.",e)}}Li(){if(this.di)try{this.di.removeItem(this.Fi(this.clientId))}catch{}}Fi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function jo(t){return Dt(t,"owner")}function jl(t){return Dt(t,"clientMetadata")}function kb(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lp{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.qi=r,this.Qi=s}static Ki(e,n){let r=Oe(),s=Oe();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new lp(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $D{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nb{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){return OI()?8:Xn.v(Tt())>0?6:4}()}initialize(e,n){this.zi=e,this.indexManager=n,this.$i=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.ji(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.Hi(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new $D;return this.Ji(e,n,o).next(a=>{if(i.result=a,this.Ui)return this.Yi(e,n,o,a.size)})}).next(()=>i.result)}Yi(e,n,r,s){return r.documentReadCount<this.Wi?(Di()<=xe.DEBUG&&j("QueryEngine","SDK will not create cache indexes for query:",Vi(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),x.resolve()):(Di()<=xe.DEBUG&&j("QueryEngine","Query:",Vi(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Gi*s?(Di()<=xe.DEBUG&&j("QueryEngine","The SDK decides to create cache indexes for query:",Vi(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,wn(n))):x.resolve())}ji(e,n){if(Xg(n))return x.resolve(null);let r=wn(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Uu(n,null,"F"),r=wn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=Oe(...i);return this.zi.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.Zi(n,a);return this.Xi(n,c,o,l.readTime)?this.ji(e,Uu(n,null,"F")):this.es(e,c,n,l)}))})))}Hi(e,n,r,s){return Xg(n)||s.isEqual(pe.min())?x.resolve(null):this.zi.getDocuments(e,r).next(i=>{const o=this.Zi(n,i);return this.Xi(n,o,r,s)?x.resolve(null):(Di()<=xe.DEBUG&&j("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Vi(n)),this.es(e,o,n,T0(s,-1)).next(a=>a))})}Zi(e,n){let r=new Xe(W0(e));return n.forEach((s,i)=>{pl(e,i)&&(r=r.add(i))}),r}Xi(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Ji(e,n,r){return Di()<=xe.DEBUG&&j("QueryEngine","Using full collection scan to execute query:",Vi(n)),this.zi.getDocumentsMatchingQuery(e,n,Sn.min(),r)}es(e,n,r,s){return this.zi.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BD{constructor(e,n,r,s){this.persistence=e,this.ts=n,this.serializer=s,this.ns=new tt(Pe),this.rs=new ws(i=>ci(i),ml),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(r)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Cb(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.ns))}}function xb(t,e,n,r){return new BD(t,e,n,r)}async function Db(t,e){const n=ue(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n._s(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],a=[];let l=Oe();for(const c of s){o.push(c.batchId);for(const d of c.mutations)l=l.add(d.key)}for(const c of i){a.push(c.batchId);for(const d of c.mutations)l=l.add(d.key)}return n.localDocuments.getDocuments(r,l).next(c=>({us:c,removedBatchIds:o,addedBatchIds:a}))})})}function jD(t,e){const n=ue(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.os.newChangeBuffer({trackRemovals:!0});return function(a,l,c,d){const u=c.batch,h=u.keys();let f=x.resolve();return h.forEach(m=>{f=f.next(()=>d.getEntry(l,m)).next(y=>{const g=c.docVersions.get(m);me(g!==null),y.version.compareTo(g)<0&&(u.applyToRemoteDocument(y,c),y.isValidDocument()&&(y.setReadTime(c.commitVersion),d.addEntry(y)))})}),f.next(()=>a.mutationQueue.removeMutationBatch(l,u))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=Oe();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function Vb(t){const e=ue(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Qr.getLastRemoteSnapshotVersion(n))}function qD(t,e){const n=ue(t),r=e.snapshotVersion;let s=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.os.newChangeBuffer({trackRemovals:!0});s=n.ns;const a=[];e.targetChanges.forEach((d,u)=>{const h=s.get(u);if(!h)return;a.push(n.Qr.removeMatchingKeys(i,d.removedDocuments,u).next(()=>n.Qr.addMatchingKeys(i,d.addedDocuments,u)));let f=h.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(u)!==null?f=f.withResumeToken(Nt.EMPTY_BYTE_STRING,pe.min()).withLastLimboFreeSnapshotVersion(pe.min()):d.resumeToken.approximateByteSize()>0&&(f=f.withResumeToken(d.resumeToken,r)),s=s.insert(u,f),function(y,g,v){return y.resumeToken.approximateByteSize()===0||g.snapshotVersion.toMicroseconds()-y.snapshotVersion.toMicroseconds()>=3e8?!0:v.addedDocuments.size+v.modifiedDocuments.size+v.removedDocuments.size>0}(h,f,d)&&a.push(n.Qr.updateTargetData(i,f))});let l=In(),c=Oe();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,d))}),a.push(GD(i,o,e.documentUpdates).next(d=>{l=d.cs,c=d.ls})),!r.isEqual(pe.min())){const d=n.Qr.getLastRemoteSnapshotVersion(i).next(u=>n.Qr.setTargetsMetadata(i,i.currentSequenceNumber,r));a.push(d)}return x.waitFor(a).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,l,c)).next(()=>l)}).then(i=>(n.ns=s,i))}function GD(t,e,n){let r=Oe(),s=Oe();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=In();return n.forEach((a,l)=>{const c=i.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(s=s.add(a)),l.isNoDocument()&&l.version.isEqual(pe.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):j("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{cs:o,ls:s}})}function HD(t,e){const n=ue(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Hu(t,e){const n=ue(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Qr.getTargetData(r,e).next(i=>i?(s=i,x.resolve(s)):n.Qr.allocateTargetId(r).next(o=>(s=new Ir(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Qr.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.ns.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.ns=n.ns.insert(r.targetId,r),n.rs.set(e,r.targetId)),r})}async function fo(t,e,n){const r=ue(t),s=r.ns.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!bs(o))throw o;j("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.ns=r.ns.remove(e),r.rs.delete(s.target)}function cf(t,e,n){const r=ue(t);let s=pe.min(),i=Oe();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,d){const u=ue(l),h=u.rs.get(d);return h!==void 0?x.resolve(u.ns.get(h)):u.Qr.getTargetData(c,d)}(r,o,wn(e)).next(a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(o,a.targetId).next(l=>{i=l})}).next(()=>r.ts.getDocumentsMatchingQuery(o,e,n?s:pe.min(),n?i:Oe())).next(a=>(Fb(r,H0(e),a),{documents:a,hs:i})))}function Lb(t,e){const n=ue(t),r=ue(n.Qr),s=n.ns.get(e);return s?Promise.resolve(s.target):n.persistence.runTransaction("Get target data","readonly",i=>r._t(i,e).next(o=>o?o.target:null))}function Mb(t,e){const n=ue(t),r=n.ss.get(e)||pe.min();return n.persistence.runTransaction("Get new document changes","readonly",s=>n.os.getAllFromCollectionGroup(s,e,T0(r,-1),Number.MAX_SAFE_INTEGER)).then(s=>(Fb(n,e,s),s))}function Fb(t,e,n){let r=t.ss.get(e)||pe.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.ss.set(e,r)}function Sy(t,e){return`firestore_clients_${t}_${e}`}function Ry(t,e,n){let r=`firestore_mutations_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function Jh(t,e){return`firestore_targets_${t}_${e}`}class Wu{constructor(e,n,r,s){this.user=e,this.batchId=n,this.state=r,this.error=s}static Es(e,n,r){const s=JSON.parse(r);let i,o=typeof s=="object"&&["pending","acknowledged","rejected"].indexOf(s.state)!==-1&&(s.error===void 0||typeof s.error=="object");return o&&s.error&&(o=typeof s.error.message=="string"&&typeof s.error.code=="string",o&&(i=new K(s.error.code,s.error.message))),o?new Wu(e,n,s.state,i):(yt("SharedClientState",`Failed to parse mutation state for ID '${n}': ${r}`),null)}ds(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class ma{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static Es(e,n){const r=JSON.parse(n);let s,i=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return i&&r.error&&(i=typeof r.error.message=="string"&&typeof r.error.code=="string",i&&(s=new K(r.error.code,r.error.message))),i?new ma(e,r.state,s):(yt("SharedClientState",`Failed to parse target state for ID '${e}': ${n}`),null)}ds(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Ku{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Es(e,n){const r=JSON.parse(n);let s=typeof r=="object"&&r.activeTargetIds instanceof Array,i=Jm();for(let o=0;s&&o<r.activeTargetIds.length;++o)s=S0(r.activeTargetIds[o]),i=i.add(r.activeTargetIds[o]);return s?new Ku(e,i):(yt("SharedClientState",`Failed to parse client data for instance '${e}': ${n}`),null)}}class up{constructor(e,n){this.clientId=e,this.onlineState=n}static Es(e){const n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new up(n.clientId,n.onlineState):(yt("SharedClientState",`Failed to parse online state: ${e}`),null)}}class hf{constructor(){this.activeTargetIds=Jm()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Zh{constructor(e,n,r,s,i){this.window=e,this.oi=n,this.persistenceKey=r,this.Vs=s,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.fs=this.gs.bind(this),this.ps=new tt(Pe),this.started=!1,this.ys=[];const o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.ws=Sy(this.persistenceKey,this.Vs),this.Ss=function(l){return`firestore_sequence_number_${l}`}(this.persistenceKey),this.ps=this.ps.insert(this.Vs,new hf),this.bs=new RegExp(`^firestore_clients_${o}_([^_]*)$`),this.Ds=new RegExp(`^firestore_mutations_${o}_(\\d+)(?:_(.*))?$`),this.Cs=new RegExp(`^firestore_targets_${o}_(\\d+)$`),this.vs=function(l){return`firestore_online_state_${l}`}(this.persistenceKey),this.Fs=function(l){return`firestore_bundle_loaded_v2_${l}`}(this.persistenceKey),this.window.addEventListener("storage",this.fs)}static D(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Bi();for(const r of e){if(r===this.Vs)continue;const s=this.getItem(Sy(this.persistenceKey,r));if(s){const i=Ku.Es(r,s);i&&(this.ps=this.ps.insert(i.clientId,i))}}this.Ms();const n=this.storage.getItem(this.vs);if(n){const r=this.xs(n);r&&this.Os(r)}for(const r of this.ys)this.gs(r);this.ys=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.Ss,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ns(this.ps)}isActiveQueryTarget(e){let n=!1;return this.ps.forEach((r,s)=>{s.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.Ls(e,"pending")}updateMutationState(e,n,r){this.Ls(e,n,r),this.Bs(e)}addLocalQueryTarget(e){let n="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(Jh(this.persistenceKey,e));if(r){const s=ma.Es(e,r);s&&(n=s.state)}}return this.ks.As(e),this.Ms(),n}removeLocalQueryTarget(e){this.ks.Rs(e),this.Ms()}isLocalQueryTarget(e){return this.ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Jh(this.persistenceKey,e))}updateQueryState(e,n,r){this.qs(e,n,r)}handleUserChange(e,n,r){n.forEach(s=>{this.Bs(s)}),this.currentUser=e,r.forEach(s=>{this.addPendingMutation(s)})}setOnlineState(e){this.Qs(e)}notifyBundleLoaded(e){this.Ks(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.fs),this.removeItem(this.ws),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return j("SharedClientState","READ",e,n),n}setItem(e,n){j("SharedClientState","SET",e,n),this.storage.setItem(e,n)}removeItem(e){j("SharedClientState","REMOVE",e),this.storage.removeItem(e)}gs(e){const n=e;if(n.storageArea===this.storage){if(j("SharedClientState","EVENT",n.key,n.newValue),n.key===this.ws)return void yt("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.oi.enqueueRetryable(async()=>{if(this.started){if(n.key!==null){if(this.bs.test(n.key)){if(n.newValue==null){const r=this.$s(n.key);return this.Us(r,null)}{const r=this.Ws(n.key,n.newValue);if(r)return this.Us(r.clientId,r)}}else if(this.Ds.test(n.key)){if(n.newValue!==null){const r=this.Gs(n.key,n.newValue);if(r)return this.zs(r)}}else if(this.Cs.test(n.key)){if(n.newValue!==null){const r=this.js(n.key,n.newValue);if(r)return this.Hs(r)}}else if(n.key===this.vs){if(n.newValue!==null){const r=this.xs(n.newValue);if(r)return this.Os(r)}}else if(n.key===this.Ss){const r=function(i){let o=_n._e;if(i!=null)try{const a=JSON.parse(i);me(typeof a=="number"),o=a}catch(a){yt("SharedClientState","Failed to read sequence number from WebStorage",a)}return o}(n.newValue);r!==_n._e&&this.sequenceNumberHandler(r)}else if(n.key===this.Fs){const r=this.Js(n.newValue);await Promise.all(r.map(s=>this.syncEngine.Ys(s)))}}}else this.ys.push(n)})}}get ks(){return this.ps.get(this.Vs)}Ms(){this.setItem(this.ws,this.ks.ds())}Ls(e,n,r){const s=new Wu(this.currentUser,e,n,r),i=Ry(this.persistenceKey,this.currentUser,e);this.setItem(i,s.ds())}Bs(e){const n=Ry(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Qs(e){const n={clientId:this.Vs,onlineState:e};this.storage.setItem(this.vs,JSON.stringify(n))}qs(e,n,r){const s=Jh(this.persistenceKey,e),i=new ma(e,n,r);this.setItem(s,i.ds())}Ks(e){const n=JSON.stringify(Array.from(e));this.setItem(this.Fs,n)}$s(e){const n=this.bs.exec(e);return n?n[1]:null}Ws(e,n){const r=this.$s(e);return Ku.Es(r,n)}Gs(e,n){const r=this.Ds.exec(e),s=Number(r[1]),i=r[2]!==void 0?r[2]:null;return Wu.Es(new Gt(i),s,n)}js(e,n){const r=this.Cs.exec(e),s=Number(r[1]);return ma.Es(s,n)}xs(e){return up.Es(e)}Js(e){return JSON.parse(e)}async zs(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Zs(e.batchId,e.state,e.error);j("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)}Hs(e){return this.syncEngine.Xs(e.targetId,e.state,e.error)}Us(e,n){const r=n?this.ps.insert(e,n):this.ps.remove(e),s=this.Ns(this.ps),i=this.Ns(r),o=[],a=[];return i.forEach(l=>{s.has(l)||o.push(l)}),s.forEach(l=>{i.has(l)||a.push(l)}),this.syncEngine.eo(o,a).then(()=>{this.ps=r})}Os(e){this.ps.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ns(e){let n=Jm();return e.forEach((r,s)=>{n=n.unionWith(s.activeTargetIds)}),n}}class Ub{constructor(){this.no=new hf,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,n,r){this.ro[e]=n}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new hf,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WD{io(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Py{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){j("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.uo)e(0)}ao(){j("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.uo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ql=null;function ed(){return ql===null?ql=function(){return 268435456+Math.round(2147483648*Math.random())}():ql++,"0x"+ql.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KD={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zD{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}onMessage(e){this.Ao=e}close(){this.ho()}send(e){this.lo(e)}Ro(){this.Io()}Vo(e){this.Eo(e)}mo(e){this.Ao(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qt="WebChannelConnection";class QD extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.fo=r+"://"+n.host,this.po=`projects/${s}/databases/${i}`,this.yo=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}get wo(){return!1}So(n,r,s,i,o){const a=ed(),l=this.bo(n,r.toUriEncodedString());j("RestConnection",`Sending RPC '${n}' ${a}:`,l,s);const c={"google-cloud-resource-prefix":this.po,"x-goog-request-params":this.yo};return this.Do(c,i,o),this.Co(n,l,c,s).then(d=>(j("RestConnection",`Received RPC '${n}' ${a}: `,d),d),d=>{throw Va("RestConnection",`RPC '${n}' ${a} failed with error: `,d,"url: ",l,"request:",s),d})}vo(n,r,s,i,o,a){return this.So(n,r,s,i,o)}Do(n,r,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ro}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,o)=>n[o]=i),s&&s.headers.forEach((i,o)=>n[o]=i)}bo(n,r){const s=KD[n];return`${this.fo}/v1/${r}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Co(e,n,r,s){const i=ed();return new Promise((o,a)=>{const l=new HN;l.setWithCredentials(!0),l.listenOnce(qN.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Qh.NO_ERROR:const d=l.getResponseJson();j(qt,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(d)),o(d);break;case Qh.TIMEOUT:j(qt,`RPC '${e}' ${i} timed out`),a(new K(L.DEADLINE_EXCEEDED,"Request time out"));break;case Qh.HTTP_ERROR:const u=l.getStatus();if(j(qt,`RPC '${e}' ${i} failed with status:`,u,"response text:",l.getResponseText()),u>0){let h=l.getResponseJson();Array.isArray(h)&&(h=h[0]);const f=h==null?void 0:h.error;if(f&&f.status&&f.message){const m=function(g){const v=g.toLowerCase().replace(/_/g,"-");return Object.values(L).indexOf(v)>=0?v:L.UNKNOWN}(f.status);a(new K(m,f.message))}else a(new K(L.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new K(L.UNAVAILABLE,"Connection failed."));break;default:ae()}}finally{j(qt,`RPC '${e}' ${i} completed.`)}});const c=JSON.stringify(s);j(qt,`RPC '${e}' ${i} sending request:`,s),l.send(n,"POST",c,r,15)})}Fo(e,n,r){const s=ed(),i=[this.fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=BN(),a=jN(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Do(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const d=i.join("");j(qt,`Creating RPC '${e}' stream ${s}: ${d}`,l);const u=o.createWebChannel(d,l);let h=!1,f=!1;const m=new zD({lo:g=>{f?j(qt,`Not sending because RPC '${e}' stream ${s} is closed:`,g):(h||(j(qt,`Opening RPC '${e}' stream ${s} transport.`),u.open(),h=!0),j(qt,`RPC '${e}' stream ${s} sending:`,g),u.send(g))},ho:()=>u.close()}),y=(g,v,b)=>{g.listen(v,E=>{try{b(E)}catch(T){setTimeout(()=>{throw T},0)}})};return y(u,Fl.EventType.OPEN,()=>{f||j(qt,`RPC '${e}' stream ${s} transport opened.`)}),y(u,Fl.EventType.CLOSE,()=>{f||(f=!0,j(qt,`RPC '${e}' stream ${s} transport closed`),m.Vo())}),y(u,Fl.EventType.ERROR,g=>{f||(f=!0,Va(qt,`RPC '${e}' stream ${s} transport errored:`,g),m.Vo(new K(L.UNAVAILABLE,"The operation could not be completed")))}),y(u,Fl.EventType.MESSAGE,g=>{var v;if(!f){const b=g.data[0];me(!!b);const E=b,T=E.error||((v=E[0])===null||v===void 0?void 0:v.error);if(T){j(qt,`RPC '${e}' stream ${s} received error:`,T);const S=T.status;let w=function(C){const z=It[C];if(z!==void 0)return ib(z)}(S),D=T.message;w===void 0&&(w=L.INTERNAL,D="Unknown error status: "+S+" with message "+T.message),f=!0,m.Vo(new K(w,D)),u.close()}else j(qt,`RPC '${e}' stream ${s} received:`,b),m.mo(b)}}),y(a,GN.STAT_EVENT,g=>{g.stat===Vg.PROXY?j(qt,`RPC '${e}' stream ${s} detected buffering proxy`):g.stat===Vg.NOPROXY&&j(qt,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{m.Ro()},0),m}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $b(){return typeof window<"u"?window:null}function hu(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eh(t){return new sD(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bb{constructor(e,n,r=1e3,s=1.5,i=6e4){this.oi=e,this.timerId=n,this.Mo=r,this.xo=s,this.Oo=i,this.No=0,this.Lo=null,this.Bo=Date.now(),this.reset()}reset(){this.No=0}ko(){this.No=this.Oo}qo(e){this.cancel();const n=Math.floor(this.No+this.Qo()),r=Math.max(0,Date.now()-this.Bo),s=Math.max(0,n-r);s>0&&j("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.No} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.Lo=this.oi.enqueueAfterDelay(this.timerId,s,()=>(this.Bo=Date.now(),e())),this.No*=this.xo,this.No<this.Mo&&(this.No=this.Mo),this.No>this.Oo&&(this.No=this.Oo)}Ko(){this.Lo!==null&&(this.Lo.skipDelay(),this.Lo=null)}cancel(){this.Lo!==null&&(this.Lo.cancel(),this.Lo=null)}Qo(){return(Math.random()-.5)*this.No}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jb{constructor(e,n,r,s,i,o,a,l){this.oi=e,this.$o=r,this.Uo=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Wo=0,this.Go=null,this.zo=null,this.stream=null,this.jo=new Bb(e,n)}Ho(){return this.state===1||this.state===5||this.Jo()}Jo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Yo()}async stop(){this.Ho()&&await this.close(0)}Zo(){this.state=0,this.jo.reset()}Xo(){this.Jo()&&this.Go===null&&(this.Go=this.oi.enqueueAfterDelay(this.$o,6e4,()=>this.e_()))}t_(e){this.n_(),this.stream.send(e)}async e_(){if(this.Jo())return this.close(0)}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}r_(){this.zo&&(this.zo.cancel(),this.zo=null)}async close(e,n){this.n_(),this.r_(),this.jo.cancel(),this.Wo++,e!==4?this.jo.reset():n&&n.code===L.RESOURCE_EXHAUSTED?(yt(n.toString()),yt("Using maximum backoff delay to prevent overloading the backend."),this.jo.ko()):n&&n.code===L.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.i_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.To(n)}i_(){}auth(){this.state=1;const e=this.s_(this.Wo),n=this.Wo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Wo===n&&this.o_(r,s)},r=>{e(()=>{const s=new K(L.UNKNOWN,"Fetching auth token failed: "+r.message);return this.__(s)})})}o_(e,n){const r=this.s_(this.Wo);this.stream=this.a_(e,n),this.stream.Po(()=>{r(()=>(this.state=2,this.zo=this.oi.enqueueAfterDelay(this.Uo,1e4,()=>(this.Jo()&&(this.state=3),Promise.resolve())),this.listener.Po()))}),this.stream.To(s=>{r(()=>this.__(s))}),this.stream.onMessage(s=>{r(()=>this.onMessage(s))})}Yo(){this.state=5,this.jo.qo(async()=>{this.state=0,this.start()})}__(e){return j("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}s_(e){return n=>{this.oi.enqueueAndForget(()=>this.Wo===e?n():(j("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class YD extends jb{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}a_(e,n){return this.connection.Fo("Listen",e,n)}onMessage(e){this.jo.reset();const n=aD(this.serializer,e),r=function(i){if(!("targetChange"in i))return pe.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?pe.min():o.readTime?rn(o.readTime):pe.min()}(e);return this.listener.u_(n,r)}c_(e){const n={};n.database=sf(this.serializer),n.addTarget=function(i,o){let a;const l=o.target;if(a=Mu(l)?{documents:fb(i,l)}:{query:mb(i,l).ut},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=lb(i,o.resumeToken);const c=nf(i,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(pe.min())>0){a.readTime=ho(i,o.snapshotVersion.toTimestamp());const c=nf(i,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=uD(this.serializer,e);r&&(n.labels=r),this.t_(n)}l_(e){const n={};n.database=sf(this.serializer),n.removeTarget=e,this.t_(n)}}class XD extends jb{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i,this.h_=!1}get P_(){return this.h_}start(){this.h_=!1,this.lastStreamToken=void 0,super.start()}i_(){this.h_&&this.I_([])}a_(e,n){return this.connection.Fo("Write",e,n)}onMessage(e){if(me(!!e.streamToken),this.lastStreamToken=e.streamToken,this.h_){this.jo.reset();const n=lD(e.writeResults,e.commitTime),r=rn(e.commitTime);return this.listener.T_(r,n)}return me(!e.writeResults||e.writeResults.length===0),this.h_=!0,this.listener.E_()}d_(){const e={};e.database=sf(this.serializer),this.t_(e)}I_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>Bu(this.serializer,r))};this.t_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JD extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.A_=!1}R_(){if(this.A_)throw new K(L.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,n,r,s){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.So(e,rf(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===L.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new K(L.UNKNOWN,i.toString())})}vo(e,n,r,s,i){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.vo(e,rf(n,r),s,o,a,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===L.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new K(L.UNKNOWN,o.toString())})}terminate(){this.A_=!0,this.connection.terminate()}}class ZD{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.m_=0,this.f_=null,this.g_=!0}p_(){this.m_===0&&(this.y_("Unknown"),this.f_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.f_=null,this.w_("Backend didn't respond within 10 seconds."),this.y_("Offline"),Promise.resolve())))}S_(e){this.state==="Online"?this.y_("Unknown"):(this.m_++,this.m_>=1&&(this.b_(),this.w_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.y_("Offline")))}set(e){this.b_(),this.m_=0,e==="Online"&&(this.g_=!1),this.y_(e)}y_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}w_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.g_?(yt(n),this.g_=!1):j("OnlineStateTracker",n)}b_(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eV{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.D_=[],this.C_=new Map,this.v_=new Set,this.F_=[],this.M_=i,this.M_.io(o=>{r.enqueueAndForget(async()=>{bi(this)&&(j("RemoteStore","Restarting streams for network reachability change."),await async function(l){const c=ue(l);c.v_.add(4),await yl(c),c.x_.set("Unknown"),c.v_.delete(4),await th(c)}(this))})}),this.x_=new ZD(r,s)}}async function th(t){if(bi(t))for(const e of t.F_)await e(!0)}async function yl(t){for(const e of t.F_)await e(!1)}function nh(t,e){const n=ue(t);n.C_.has(e.targetId)||(n.C_.set(e.targetId,e),dp(n)?hp(n):Oo(n).Jo()&&cp(n,e))}function mo(t,e){const n=ue(t),r=Oo(n);n.C_.delete(e),r.Jo()&&qb(n,e),n.C_.size===0&&(r.Jo()?r.Xo():bi(n)&&n.x_.set("Unknown"))}function cp(t,e){if(t.O_.Oe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(pe.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Oo(t).c_(e)}function qb(t,e){t.O_.Oe(e),Oo(t).l_(e)}function hp(t){t.O_=new eD({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),_t:e=>t.C_.get(e)||null,nt:()=>t.datastore.serializer.databaseId}),Oo(t).start(),t.x_.p_()}function dp(t){return bi(t)&&!Oo(t).Ho()&&t.C_.size>0}function bi(t){return ue(t).v_.size===0}function Gb(t){t.O_=void 0}async function tV(t){t.C_.forEach((e,n)=>{cp(t,e)})}async function nV(t,e){Gb(t),dp(t)?(t.x_.S_(e),hp(t)):t.x_.set("Unknown")}async function rV(t,e,n){if(t.x_.set("Online"),e instanceof ab&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const a of i.targetIds)s.C_.has(a)&&(await s.remoteSyncer.rejectListen(a,o),s.C_.delete(a),s.O_.removeTarget(a))}(t,e)}catch(r){j("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await zu(t,r)}else if(e instanceof cu?t.O_.$e(e):e instanceof ob?t.O_.Je(e):t.O_.Ge(e),!n.isEqual(pe.min()))try{const r=await Vb(t.localStore);n.compareTo(r)>=0&&await function(i,o){const a=i.O_.it(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const d=i.C_.get(c);d&&i.C_.set(c,d.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const d=i.C_.get(l);if(!d)return;i.C_.set(l,d.withResumeToken(Nt.EMPTY_BYTE_STRING,d.snapshotVersion)),qb(i,l);const u=new Ir(d.target,l,c,d.sequenceNumber);cp(i,u)}),i.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){j("RemoteStore","Failed to raise snapshot:",r),await zu(t,r)}}async function zu(t,e,n){if(!bs(e))throw e;t.v_.add(1),await yl(t),t.x_.set("Offline"),n||(n=()=>Vb(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{j("RemoteStore","Retrying IndexedDB access"),await n(),t.v_.delete(1),await th(t)})}function Hb(t,e){return e().catch(n=>zu(t,n,e))}async function Co(t){const e=ue(t),n=_s(e);let r=e.D_.length>0?e.D_[e.D_.length-1].batchId:-1;for(;sV(e);)try{const s=await HD(e.localStore,r);if(s===null){e.D_.length===0&&n.Xo();break}r=s.batchId,iV(e,s)}catch(s){await zu(e,s)}Wb(e)&&Kb(e)}function sV(t){return bi(t)&&t.D_.length<10}function iV(t,e){t.D_.push(e);const n=_s(t);n.Jo()&&n.P_&&n.I_(e.mutations)}function Wb(t){return bi(t)&&!_s(t).Ho()&&t.D_.length>0}function Kb(t){_s(t).start()}async function oV(t){_s(t).d_()}async function aV(t){const e=_s(t);for(const n of t.D_)e.I_(n.mutations)}async function lV(t,e,n){const r=t.D_.shift(),s=ep.from(r,e,n);await Hb(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Co(t)}async function uV(t,e){e&&_s(t).P_&&await async function(r,s){if(function(o){return Xx(o)&&o!==L.ABORTED}(s.code)){const i=r.D_.shift();_s(r).Zo(),await Hb(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await Co(r)}}(t,e),Wb(t)&&Kb(t)}async function Cy(t,e){const n=ue(t);n.asyncQueue.verifyOperationInProgress(),j("RemoteStore","RemoteStore received new credentials");const r=bi(n);n.v_.add(3),await yl(n),r&&n.x_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.v_.delete(3),await th(n)}async function df(t,e){const n=ue(t);e?(n.v_.delete(2),await th(n)):e||(n.v_.add(2),await yl(n),n.x_.set("Unknown"))}function Oo(t){return t.N_||(t.N_=function(n,r,s){const i=ue(n);return i.R_(),new YD(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Po:tV.bind(null,t),To:nV.bind(null,t),u_:rV.bind(null,t)}),t.F_.push(async e=>{e?(t.N_.Zo(),dp(t)?hp(t):t.x_.set("Unknown")):(await t.N_.stop(),Gb(t))})),t.N_}function _s(t){return t.L_||(t.L_=function(n,r,s){const i=ue(n);return i.R_(),new XD(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Po:oV.bind(null,t),To:uV.bind(null,t),E_:aV.bind(null,t),T_:lV.bind(null,t)}),t.F_.push(async e=>{e?(t.L_.Zo(),await Co(t)):(await t.L_.stop(),t.D_.length>0&&(j("RemoteStore",`Stopping write stream with ${t.D_.length} pending writes`),t.D_=[]))})),t.L_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fp{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new ir,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,a=new fp(e,n,o,s,i);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new K(L.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function mp(t,e){if(yt("AsyncQueue",`${e}: ${t}`),bs(t))return new K(L.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class no{constructor(e){this.comparator=e?(n,r)=>e(n,r)||ee.comparator(n.key,r.key):(n,r)=>ee.comparator(n.key,r.key),this.keyedMap=Jo(),this.sortedSet=new tt(this.comparator)}static emptySet(e){return new no(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof no)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new no;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oy{constructor(){this.B_=new tt(ee.comparator)}track(e){const n=e.doc.key,r=this.B_.get(n);r?e.type!==0&&r.type===3?this.B_=this.B_.insert(n,e):e.type===3&&r.type!==1?this.B_=this.B_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.B_=this.B_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.B_=this.B_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.B_=this.B_.remove(n):e.type===1&&r.type===2?this.B_=this.B_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.B_=this.B_.insert(n,{type:2,doc:e.doc}):ae():this.B_=this.B_.insert(n,e)}k_(){const e=[];return this.B_.inorderTraversal((n,r)=>{e.push(r)}),e}}class po{constructor(e,n,r,s,i,o,a,l,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new po(e,n,no.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Kc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cV{constructor(){this.q_=void 0,this.Q_=[]}K_(){return this.Q_.some(e=>e.U_())}}class hV{constructor(){this.queries=new ws(e=>G0(e),Kc),this.onlineState="Unknown",this.W_=new Set}}async function zb(t,e){const n=ue(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.K_()&&e.U_()&&(r=2):(i=new cV,r=e.U_()?0:1);try{switch(r){case 0:i.q_=await n.onListen(s,!0);break;case 1:i.q_=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const a=mp(o,`Initialization of query '${Vi(e.query)}' failed`);return void e.onError(a)}n.queries.set(s,i),i.Q_.push(e),e.G_(n.onlineState),i.q_&&e.z_(i.q_)&&pp(n)}async function Qb(t,e){const n=ue(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.Q_.indexOf(e);o>=0&&(i.Q_.splice(o,1),i.Q_.length===0?s=e.U_()?0:1:!i.K_()&&e.U_()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function dV(t,e){const n=ue(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const a of o.Q_)a.z_(s)&&(r=!0);o.q_=s}}r&&pp(n)}function fV(t,e,n){const r=ue(t),s=r.queries.get(e);if(s)for(const i of s.Q_)i.onError(n);r.queries.delete(e)}function pp(t){t.W_.forEach(e=>{e.next()})}var ff,ky;(ky=ff||(ff={})).j_="default",ky.Cache="cache";class Yb{constructor(e,n,r){this.query=e,this.H_=n,this.J_=!1,this.Y_=null,this.onlineState="Unknown",this.options=r||{}}z_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new po(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.J_?this.Z_(e)&&(this.H_.next(e),n=!0):this.X_(e,this.onlineState)&&(this.ea(e),n=!0),this.Y_=e,n}onError(e){this.H_.error(e)}G_(e){this.onlineState=e;let n=!1;return this.Y_&&!this.J_&&this.X_(this.Y_,e)&&(this.ea(this.Y_),n=!0),n}X_(e,n){if(!e.fromCache||!this.U_())return!0;const r=n!=="Offline";return(!this.options.ta||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Z_(e){if(e.docChanges.length>0)return!0;const n=this.Y_&&this.Y_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ea(e){e=po.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.J_=!0,this.H_.next(e)}U_(){return this.options.source!==ff.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xb{constructor(e){this.key=e}}class Jb{constructor(e){this.key=e}}class mV{constructor(e,n){this.query=e,this.ua=n,this.ca=null,this.hasCachedResults=!1,this.current=!1,this.la=Oe(),this.mutatedKeys=Oe(),this.ha=W0(e),this.Pa=new no(this.ha)}get Ia(){return this.ua}Ta(e,n){const r=n?n.Ea:new Oy,s=n?n.Pa:this.Pa;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,a=!1;const l=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,c=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((d,u)=>{const h=s.get(d),f=pl(this.query,u)?u:null,m=!!h&&this.mutatedKeys.has(h.key),y=!!f&&(f.hasLocalMutations||this.mutatedKeys.has(f.key)&&f.hasCommittedMutations);let g=!1;h&&f?h.data.isEqual(f.data)?m!==y&&(r.track({type:3,doc:f}),g=!0):this.da(h,f)||(r.track({type:2,doc:f}),g=!0,(l&&this.ha(f,l)>0||c&&this.ha(f,c)<0)&&(a=!0)):!h&&f?(r.track({type:0,doc:f}),g=!0):h&&!f&&(r.track({type:1,doc:h}),g=!0,(l||c)&&(a=!0)),g&&(f?(o=o.add(f),i=y?i.add(d):i.delete(d)):(o=o.delete(d),i=i.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),i=i.delete(d.key),r.track({type:1,doc:d})}return{Pa:o,Ea:r,Xi:a,mutatedKeys:i}}da(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.Pa;this.Pa=e.Pa,this.mutatedKeys=e.mutatedKeys;const o=e.Ea.k_();o.sort((d,u)=>function(f,m){const y=g=>{switch(g){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ae()}};return y(f)-y(m)}(d.type,u.type)||this.ha(d.doc,u.doc)),this.Aa(r),s=s!=null&&s;const a=n&&!s?this.Ra():[],l=this.la.size===0&&this.current&&!s?1:0,c=l!==this.ca;return this.ca=l,o.length!==0||c?{snapshot:new po(this.query,e.Pa,i,o,e.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),Va:a}:{Va:a}}G_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Pa:this.Pa,Ea:new Oy,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{Va:[]}}ma(e){return!this.ua.has(e)&&!!this.Pa.has(e)&&!this.Pa.get(e).hasLocalMutations}Aa(e){e&&(e.addedDocuments.forEach(n=>this.ua=this.ua.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.ua=this.ua.delete(n)),this.current=e.current)}Ra(){if(!this.current)return[];const e=this.la;this.la=Oe(),this.Pa.forEach(r=>{this.ma(r.key)&&(this.la=this.la.add(r.key))});const n=[];return e.forEach(r=>{this.la.has(r)||n.push(new Jb(r))}),this.la.forEach(r=>{e.has(r)||n.push(new Xb(r))}),n}fa(e){this.ua=e.hs,this.la=Oe();const n=this.Ta(e.documents);return this.applyChanges(n,!0)}ga(){return po.fromInitialDocuments(this.query,this.Pa,this.mutatedKeys,this.ca===0,this.hasCachedResults)}}class pV{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class _V{constructor(e){this.key=e,this.pa=!1}}class gV{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.ya={},this.wa=new ws(a=>G0(a),Kc),this.Sa=new Map,this.ba=new Set,this.Da=new tt(ee.comparator),this.Ca=new Map,this.va=new op,this.Fa={},this.Ma=new Map,this.xa=fi.Ln(),this.onlineState="Unknown",this.Oa=void 0}get isPrimaryClient(){return this.Oa===!0}}async function yV(t,e,n=!0){const r=rh(t);let s;const i=r.wa.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.ga()):s=await Zb(r,e,n,!0),s}async function vV(t,e){const n=rh(t);await Zb(n,e,!0,!1)}async function Zb(t,e,n,r){const s=await Hu(t.localStore,wn(e)),i=s.targetId,o=n?t.sharedClientState.addLocalQueryTarget(i):"not-current";let a;return r&&(a=await _p(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&nh(t.remoteStore,s),a}async function _p(t,e,n,r,s){t.Na=(u,h,f)=>async function(y,g,v,b){let E=g.view.Ta(v);E.Xi&&(E=await cf(y.localStore,g.query,!1).then(({documents:D})=>g.view.Ta(D,E)));const T=b&&b.targetChanges.get(g.targetId),S=b&&b.targetMismatches.get(g.targetId)!=null,w=g.view.applyChanges(E,y.isPrimaryClient,T,S);return mf(y,g.targetId,w.Va),w.snapshot}(t,u,h,f);const i=await cf(t.localStore,e,!0),o=new mV(e,i.hs),a=o.Ta(i.documents),l=gl.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),c=o.applyChanges(a,t.isPrimaryClient,l);mf(t,n,c.Va);const d=new pV(e,n,o);return t.wa.set(e,d),t.Sa.has(n)?t.Sa.get(n).push(e):t.Sa.set(n,[e]),c.snapshot}async function EV(t,e,n){const r=ue(t),s=r.wa.get(e),i=r.Sa.get(s.targetId);if(i.length>1)return r.Sa.set(s.targetId,i.filter(o=>!Kc(o,e))),void r.wa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await fo(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&mo(r.remoteStore,s.targetId),_o(r,s.targetId)}).catch(Ts)):(_o(r,s.targetId),await fo(r.localStore,s.targetId,!0))}async function IV(t,e){const n=ue(t),r=n.wa.get(e),s=n.Sa.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),mo(n.remoteStore,r.targetId))}async function TV(t,e,n){const r=Ep(t);try{const s=await function(o,a){const l=ue(o),c=dt.now(),d=a.reduce((f,m)=>f.add(m.key),Oe());let u,h;return l.persistence.runTransaction("Locally write mutations","readwrite",f=>{let m=In(),y=Oe();return l.os.getEntries(f,d).next(g=>{m=g,m.forEach((v,b)=>{b.isValidDocument()||(y=y.add(v))})}).next(()=>l.localDocuments.getOverlayedDocuments(f,m)).next(g=>{u=g;const v=[];for(const b of a){const E=Qx(b,u.get(b.key).overlayedDocument);E!=null&&v.push(new xr(b.key,E,V0(E.value.mapValue),zt.exists(!0)))}return l.mutationQueue.addMutationBatch(f,c,v,a)}).next(g=>{h=g;const v=g.applyToLocalDocumentSet(u,y);return l.documentOverlayCache.saveOverlays(f,g.batchId,v)})}).then(()=>({batchId:h.batchId,changes:z0(u)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,a,l){let c=o.Fa[o.currentUser.toKey()];c||(c=new tt(Pe)),c=c.insert(a,l),o.Fa[o.currentUser.toKey()]=c}(r,s.batchId,n),await As(r,s.changes),await Co(r.remoteStore)}catch(s){const i=mp(s,"Failed to persist write");n.reject(i)}}async function ew(t,e){const n=ue(t);try{const r=await qD(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Ca.get(i);o&&(me(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.pa=!0:s.modifiedDocuments.size>0?me(o.pa):s.removedDocuments.size>0&&(me(o.pa),o.pa=!1))}),await As(n,r,e)}catch(r){await Ts(r)}}function Ny(t,e,n){const r=ue(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.wa.forEach((i,o)=>{const a=o.view.G_(e);a.snapshot&&s.push(a.snapshot)}),function(o,a){const l=ue(o);l.onlineState=a;let c=!1;l.queries.forEach((d,u)=>{for(const h of u.Q_)h.G_(a)&&(c=!0)}),c&&pp(l)}(r.eventManager,e),s.length&&r.ya.u_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function bV(t,e,n){const r=ue(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Ca.get(e),i=s&&s.key;if(i){let o=new tt(ee.comparator);o=o.insert(i,pt.newNoDocument(i,pe.min()));const a=Oe().add(i),l=new _l(pe.min(),new Map,new tt(Pe),o,a);await ew(r,l),r.Da=r.Da.remove(i),r.Ca.delete(e),vp(r)}else await fo(r.localStore,e,!1).then(()=>_o(r,e,n)).catch(Ts)}async function wV(t,e){const n=ue(t),r=e.batch.batchId;try{const s=await jD(n.localStore,e);yp(n,r,null),gp(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await As(n,s)}catch(s){await Ts(s)}}async function AV(t,e,n){const r=ue(t);try{const s=await function(o,a){const l=ue(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let d;return l.mutationQueue.lookupMutationBatch(c,a).next(u=>(me(u!==null),d=u.keys(),l.mutationQueue.removeMutationBatch(c,u))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,d,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,d)).next(()=>l.localDocuments.getDocuments(c,d))})}(r.localStore,e);yp(r,e,n),gp(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await As(r,s)}catch(s){await Ts(s)}}function gp(t,e){(t.Ma.get(e)||[]).forEach(n=>{n.resolve()}),t.Ma.delete(e)}function yp(t,e,n){const r=ue(t);let s=r.Fa[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Fa[r.currentUser.toKey()]=s}}function _o(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Sa.get(e))t.wa.delete(r),n&&t.ya.La(r,n);t.Sa.delete(e),t.isPrimaryClient&&t.va.Vr(e).forEach(r=>{t.va.containsKey(r)||tw(t,r)})}function tw(t,e){t.ba.delete(e.path.canonicalString());const n=t.Da.get(e);n!==null&&(mo(t.remoteStore,n),t.Da=t.Da.remove(e),t.Ca.delete(n),vp(t))}function mf(t,e,n){for(const r of n)r instanceof Xb?(t.va.addReference(r.key,e),SV(t,r)):r instanceof Jb?(j("SyncEngine","Document no longer in limbo: "+r.key),t.va.removeReference(r.key,e),t.va.containsKey(r.key)||tw(t,r.key)):ae()}function SV(t,e){const n=e.key,r=n.path.canonicalString();t.Da.get(n)||t.ba.has(r)||(j("SyncEngine","New document in limbo: "+n),t.ba.add(r),vp(t))}function vp(t){for(;t.ba.size>0&&t.Da.size<t.maxConcurrentLimboResolutions;){const e=t.ba.values().next().value;t.ba.delete(e);const n=new ee(Ge.fromString(e)),r=t.xa.next();t.Ca.set(r,new _V(n)),t.Da=t.Da.insert(n,r),nh(t.remoteStore,new Ir(wn(Wc(n.path)),r,"TargetPurposeLimboResolution",_n._e))}}async function As(t,e,n){const r=ue(t),s=[],i=[],o=[];r.wa.isEmpty()||(r.wa.forEach((a,l)=>{o.push(r.Na(l,e,n).then(c=>{if((c||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(l.targetId,c!=null&&c.fromCache?"not-current":"current"),c){s.push(c);const d=lp.Ki(l.targetId,c);i.push(d)}}))}),await Promise.all(o),r.ya.u_(s),await async function(l,c){const d=ue(l);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",u=>x.forEach(c,h=>x.forEach(h.qi,f=>d.persistence.referenceDelegate.addReference(u,h.targetId,f)).next(()=>x.forEach(h.Qi,f=>d.persistence.referenceDelegate.removeReference(u,h.targetId,f)))))}catch(u){if(!bs(u))throw u;j("LocalStore","Failed to update sequence numbers: "+u)}for(const u of c){const h=u.targetId;if(!u.fromCache){const f=d.ns.get(h),m=f.snapshotVersion,y=f.withLastLimboFreeSnapshotVersion(m);d.ns=d.ns.insert(h,y)}}}(r.localStore,i))}async function RV(t,e){const n=ue(t);if(!n.currentUser.isEqual(e)){j("SyncEngine","User change. New user:",e.toKey());const r=await Db(n.localStore,e);n.currentUser=e,function(i,o){i.Ma.forEach(a=>{a.forEach(l=>{l.reject(new K(L.CANCELLED,o))})}),i.Ma.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await As(n,r.us)}}function PV(t,e){const n=ue(t),r=n.Ca.get(e);if(r&&r.pa)return Oe().add(r.key);{let s=Oe();const i=n.Sa.get(e);if(!i)return s;for(const o of i){const a=n.wa.get(o);s=s.unionWith(a.view.Ia)}return s}}async function CV(t,e){const n=ue(t),r=await cf(n.localStore,e.query,!0),s=e.view.fa(r);return n.isPrimaryClient&&mf(n,e.targetId,s.Va),s}async function OV(t,e){const n=ue(t);return Mb(n.localStore,e).then(r=>As(n,r))}async function kV(t,e,n,r){const s=ue(t),i=await function(a,l){const c=ue(a),d=ue(c.mutationQueue);return c.persistence.runTransaction("Lookup mutation documents","readonly",u=>d.vn(u,l).next(h=>h?c.localDocuments.getDocuments(u,h):x.resolve(null)))}(s.localStore,e);i!==null?(n==="pending"?await Co(s.remoteStore):n==="acknowledged"||n==="rejected"?(yp(s,e,r||null),gp(s,e),function(a,l){ue(ue(a).mutationQueue).Mn(l)}(s.localStore,e)):ae(),await As(s,i)):j("SyncEngine","Cannot apply mutation batch with id: "+e)}async function NV(t,e){const n=ue(t);if(rh(n),Ep(n),e===!0&&n.Oa!==!0){const r=n.sharedClientState.getAllActiveQueryTargets(),s=await xy(n,r.toArray());n.Oa=!0,await df(n.remoteStore,!0);for(const i of s)nh(n.remoteStore,i)}else if(e===!1&&n.Oa!==!1){const r=[];let s=Promise.resolve();n.Sa.forEach((i,o)=>{n.sharedClientState.isLocalQueryTarget(o)?r.push(o):s=s.then(()=>(_o(n,o),fo(n.localStore,o,!0))),mo(n.remoteStore,o)}),await s,await xy(n,r),function(o){const a=ue(o);a.Ca.forEach((l,c)=>{mo(a.remoteStore,c)}),a.va.mr(),a.Ca=new Map,a.Da=new tt(ee.comparator)}(n),n.Oa=!1,await df(n.remoteStore,!1)}}async function xy(t,e,n){const r=ue(t),s=[],i=[];for(const o of e){let a;const l=r.Sa.get(o);if(l&&l.length!==0){a=await Hu(r.localStore,wn(l[0]));for(const c of l){const d=r.wa.get(c),u=await CV(r,d);u.snapshot&&i.push(u.snapshot)}}else{const c=await Lb(r.localStore,o);a=await Hu(r.localStore,c),await _p(r,nw(c),o,!1,a.resumeToken)}s.push(a)}return r.ya.u_(i),s}function nw(t){return q0(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function xV(t){return function(n){return ue(ue(n).persistence).Bi()}(ue(t).localStore)}async function DV(t,e,n,r){const s=ue(t);if(s.Oa)return void j("SyncEngine","Ignoring unexpected query state notification.");const i=s.Sa.get(e);if(i&&i.length>0)switch(n){case"current":case"not-current":{const o=await Mb(s.localStore,H0(i[0])),a=_l.createSynthesizedRemoteEventForCurrentChange(e,n==="current",Nt.EMPTY_BYTE_STRING);await As(s,o,a);break}case"rejected":await fo(s.localStore,e,!0),_o(s,e,r);break;default:ae()}}async function VV(t,e,n){const r=rh(t);if(r.Oa){for(const s of e){if(r.Sa.has(s)&&r.sharedClientState.isActiveQueryTarget(s)){j("SyncEngine","Adding an already active target "+s);continue}const i=await Lb(r.localStore,s),o=await Hu(r.localStore,i);await _p(r,nw(i),o.targetId,!1,o.resumeToken),nh(r.remoteStore,o)}for(const s of n)r.Sa.has(s)&&await fo(r.localStore,s,!1).then(()=>{mo(r.remoteStore,s),_o(r,s)}).catch(Ts)}}function rh(t){const e=ue(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=ew.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=PV.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=bV.bind(null,e),e.ya.u_=dV.bind(null,e.eventManager),e.ya.La=fV.bind(null,e.eventManager),e}function Ep(t){const e=ue(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=wV.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=AV.bind(null,e),e}class pf{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=eh(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return xb(this.persistence,new Nb,e.initialUser,this.serializer)}createPersistence(e){return new Ob(Zc.Hr,this.serializer)}createSharedClientState(e){return new Ub}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class rw extends pf{constructor(e,n,r){super(),this.ka=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.ka.initialize(this,e),await Ep(this.ka.syncEngine),await Co(this.ka.remoteStore),await this.persistence.fi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}createLocalStore(e){return xb(this.persistence,new Nb,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,n){const r=this.persistence.referenceDelegate.garbageCollector;return new AD(r,e.asyncQueue,n)}createIndexBackfillerScheduler(e,n){const r=new ix(n,this.persistence);return new sx(e.asyncQueue,r)}createPersistence(e){const n=kb(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?hn.withCacheSize(this.cacheSizeBytes):hn.DEFAULT;return new ap(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,$b(),hu(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new Ub}}class LV extends rw{constructor(e,n){super(e,n,!1),this.ka=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const n=this.ka.syncEngine;this.sharedClientState instanceof Zh&&(this.sharedClientState.syncEngine={Zs:kV.bind(null,n),Xs:DV.bind(null,n),eo:VV.bind(null,n),Bi:xV.bind(null,n),Ys:OV.bind(null,n)},await this.sharedClientState.start()),await this.persistence.fi(async r=>{await NV(this.ka.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())})}createSharedClientState(e){const n=$b();if(!Zh.D(n))throw new K(L.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=kb(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Zh(n,e.asyncQueue,r,e.clientId,e.initialUser)}}class Ip{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Ny(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=RV.bind(null,this.syncEngine),await df(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new hV}()}createDatastore(e){const n=eh(e.databaseInfo.databaseId),r=function(i){return new QD(i)}(e.databaseInfo);return function(i,o,a,l){return new JD(i,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,a){return new eV(r,s,i,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>Ny(this.syncEngine,n,0),function(){return Py.D()?new Py:new WD}())}createSyncEngine(e,n){return function(s,i,o,a,l,c,d){const u=new gV(s,i,o,a,l,c);return d&&(u.Oa=!0),u}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e;await async function(r){const s=ue(r);j("RemoteStore","RemoteStore shutting down."),s.v_.add(5),await yl(s),s.M_.shutdown(),s.x_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sw{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.qa(this.observer.next,e)}error(e){this.observer.error?this.qa(this.observer.error,e):yt("Uncaught Error in snapshot listener:",e.toString())}Qa(){this.muted=!0}qa(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MV{constructor(e,n,r,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=Gt.UNAUTHENTICATED,this.clientId=E0.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async i=>{j("FirestoreClient","Received user=",i.uid),await this.authCredentialListener(i),this.user=i}),this.appCheckCredentials.start(r,i=>(j("FirestoreClient","Received new app check token=",i),this.appCheckCredentialListener(i,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new K(L.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ir;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=mp(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function td(t,e){t.asyncQueue.verifyOperationInProgress(),j("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await Db(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Dy(t,e){t.asyncQueue.verifyOperationInProgress();const n=await UV(t);j("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Cy(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>Cy(e.remoteStore,s)),t._onlineComponents=e}function FV(t){return t.name==="FirebaseError"?t.code===L.FAILED_PRECONDITION||t.code===L.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}async function UV(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){j("FirestoreClient","Using user provided OfflineComponentProvider");try{await td(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!FV(n))throw n;Va("Error using user provided cache. Falling back to memory cache: "+n),await td(t,new pf)}}else j("FirestoreClient","Using default OfflineComponentProvider"),await td(t,new pf);return t._offlineComponents}async function iw(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(j("FirestoreClient","Using user provided OnlineComponentProvider"),await Dy(t,t._uninitializedComponentsProvider._online)):(j("FirestoreClient","Using default OnlineComponentProvider"),await Dy(t,new Ip))),t._onlineComponents}function $V(t){return iw(t).then(e=>e.syncEngine)}async function ow(t){const e=await iw(t),n=e.eventManager;return n.onListen=yV.bind(null,e.syncEngine),n.onUnlisten=EV.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=vV.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=IV.bind(null,e.syncEngine),n}function BV(t,e,n={}){const r=new ir;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,l,c){const d=new sw({next:h=>{o.enqueueAndForget(()=>Qb(i,u));const f=h.docs.has(a);!f&&h.fromCache?c.reject(new K(L.UNAVAILABLE,"Failed to get document because the client is offline.")):f&&h.fromCache&&l&&l.source==="server"?c.reject(new K(L.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(h)},error:h=>c.reject(h)}),u=new Yb(Wc(a.path),d,{includeMetadataChanges:!0,ta:!0});return zb(i,u)}(await ow(t),t.asyncQueue,e,n,r)),r.promise}function jV(t,e,n={}){const r=new ir;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,l,c){const d=new sw({next:h=>{o.enqueueAndForget(()=>Qb(i,u)),h.fromCache&&l.source==="server"?c.reject(new K(L.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(h)},error:h=>c.reject(h)}),u=new Yb(a,d,{includeMetadataChanges:!0,ta:!0});return zb(i,u)}(await ow(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aw(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vy=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lw(t,e,n){if(!n)throw new K(L.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function qV(t,e,n,r){if(e===!0&&r===!0)throw new K(L.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Ly(t){if(!ee.isDocumentKey(t))throw new K(L.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function My(t){if(ee.isDocumentKey(t))throw new K(L.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function sh(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ae()}function ur(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new K(L.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=sh(t);throw new K(L.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function GV(t,e){if(e<=0)throw new K(L.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fy{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new K(L.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new K(L.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}qV("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=aw((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new K(L.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new K(L.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new K(L.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Tp{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Fy({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new K(L.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new K(L.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Fy(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new zN;switch(r.type){case"firstParty":return new XN(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new K(L.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Vy.get(n);r&&(j("ComponentProvider","Removing Datastore"),Vy.delete(n),r.terminate())}(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dr{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Dr(this.firestore,e,this._query)}}class sn{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ls(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new sn(this.firestore,e,this._key)}}class ls extends Dr{constructor(e,n,r){super(e,n,Wc(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new sn(this.firestore,null,new ee(e))}withConverter(e){return new ls(this.firestore,e,this._path)}}function bp(t,e,...n){if(t=ct(t),lw("collection","path",e),t instanceof Tp){const r=Ge.fromString(e,...n);return My(r),new ls(t,null,r)}{if(!(t instanceof sn||t instanceof ls))throw new K(L.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ge.fromString(e,...n));return My(r),new ls(t.firestore,null,r)}}function uw(t,e,...n){if(t=ct(t),arguments.length===1&&(e=E0.newId()),lw("doc","path",e),t instanceof Tp){const r=Ge.fromString(e,...n);return Ly(r),new sn(t,null,new ee(r))}{if(!(t instanceof sn||t instanceof ls))throw new K(L.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ge.fromString(e,...n));return Ly(r),new sn(t.firestore,t instanceof ls?t.converter:null,new ee(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HV{constructor(){this.nu=Promise.resolve(),this.ru=[],this.iu=!1,this.su=[],this.ou=null,this._u=!1,this.au=!1,this.uu=[],this.jo=new Bb(this,"async_queue_retry"),this.cu=()=>{const n=hu();n&&j("AsyncQueue","Visibility state changed to "+n.visibilityState),this.jo.Ko()};const e=hu();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.cu)}get isShuttingDown(){return this.iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.lu(),this.hu(e)}enterRestrictedMode(e){if(!this.iu){this.iu=!0,this.au=e||!1;const n=hu();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.cu)}}enqueue(e){if(this.lu(),this.iu)return new Promise(()=>{});const n=new ir;return this.hu(()=>this.iu&&this.au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.ru.push(e),this.Pu()))}async Pu(){if(this.ru.length!==0){try{await this.ru[0](),this.ru.shift(),this.jo.reset()}catch(e){if(!bs(e))throw e;j("AsyncQueue","Operation failed with retryable error: "+e)}this.ru.length>0&&this.jo.qo(()=>this.Pu())}}hu(e){const n=this.nu.then(()=>(this._u=!0,e().catch(r=>{this.ou=r,this._u=!1;const s=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw yt("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this._u=!1,r))));return this.nu=n,n}enqueueAfterDelay(e,n,r){this.lu(),this.uu.indexOf(e)>-1&&(n=0);const s=fp.createAndSchedule(this,e,n,r,i=>this.Iu(i));return this.su.push(s),s}lu(){this.ou&&ae()}verifyOperationInProgress(){}async Tu(){let e;do e=this.nu,await e;while(e!==this.nu)}Eu(e){for(const n of this.su)if(n.timerId===e)return!0;return!1}du(e){return this.Tu().then(()=>{this.su.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.su)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tu()})}Au(e){this.uu.push(e)}Iu(e){const n=this.su.indexOf(e);this.su.splice(n,1)}}class wi extends Tp{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=function(){return new HV}(),this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||cw(this),this._firestoreClient.terminate()}}function WV(t,e,n){n||(n="(default)");const r=Tc(t,"firestore");if(r.isInitialized(n)){const s=r.getImmediate({identifier:n}),i=r.getOptions(n);if(wa(i,e))return s;throw new K(L.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new K(L.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new K(L.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return r.initialize({options:e,instanceIdentifier:n})}function wp(t){return t._firestoreClient||cw(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function cw(t){var e,n,r;const s=t._freezeSettings(),i=function(a,l,c,d){return new Ax(a,l,c,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,aw(d.experimentalLongPollingOptions),d.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._firestoreClient=new MV(t._authCredentials,t._appCheckCredentials,t._queue,i),!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:s.localCache.kind,_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class go{constructor(e){this._byteString=e}static fromBase64String(e){try{return new go(Nt.fromBase64String(e))}catch(n){throw new K(L.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new go(Nt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ih{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new K(L.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ht(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ap{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sp{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new K(L.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new K(L.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Pe(this._lat,e._lat)||Pe(this._long,e._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KV=/^__.*__$/;class zV{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new xr(e,this.data,this.fieldMask,n,this.fieldTransforms):new Po(e,this.data,n,this.fieldTransforms)}}class hw{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new xr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function dw(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ae()}}class Rp{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.Ru(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Vu(){return this.settings.Vu}mu(e){return new Rp(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}fu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.mu({path:r,gu:!1});return s.pu(e),s}yu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.mu({path:r,gu:!1});return s.Ru(),s}wu(e){return this.mu({path:void 0,gu:!0})}Su(e){return Qu(e,this.settings.methodName,this.settings.bu||!1,this.path,this.settings.Du)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Ru(){if(this.path)for(let e=0;e<this.path.length;e++)this.pu(this.path.get(e))}pu(e){if(e.length===0)throw this.Su("Document fields must not be empty");if(dw(this.Vu)&&KV.test(e))throw this.Su('Document fields cannot begin and end with "__"')}}class QV{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||eh(e)}Cu(e,n,r,s=!1){return new Rp({Vu:e,methodName:n,Du:r,path:ht.emptyPath(),gu:!1,bu:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function vl(t){const e=t._freezeSettings(),n=eh(t._databaseId);return new QV(t._databaseId,!!e.ignoreUndefinedProperties,n)}function fw(t,e,n,r,s,i={}){const o=t.Cu(i.merge||i.mergeFields?2:0,e,n,s);Pp("Data must be an object, but it was:",o,r);const a=pw(r,o);let l,c;if(i.merge)l=new gn(o.fieldMask),c=o.fieldTransforms;else if(i.mergeFields){const d=[];for(const u of i.mergeFields){const h=_f(e,u,n);if(!o.contains(h))throw new K(L.INVALID_ARGUMENT,`Field '${h}' is specified in your field mask but missing from your input data.`);gw(d,h)||d.push(h)}l=new gn(d),c=o.fieldTransforms.filter(u=>l.covers(u.field))}else l=null,c=o.fieldTransforms;return new zV(new Wt(a),l,c)}class oh extends Ap{_toFieldTransform(e){if(e.Vu!==2)throw e.Vu===1?e.Su(`${this._methodName}() can only appear at the top level of your update data`):e.Su(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof oh}}function YV(t,e,n,r){const s=t.Cu(1,e,n);Pp("Data must be an object, but it was:",s,r);const i=[],o=Wt.empty();Ii(r,(l,c)=>{const d=Cp(e,l,n);c=ct(c);const u=s.yu(d);if(c instanceof oh)i.push(d);else{const h=El(c,u);h!=null&&(i.push(d),o.set(d,h))}});const a=new gn(i);return new hw(o,a,s.fieldTransforms)}function XV(t,e,n,r,s,i){const o=t.Cu(1,e,n),a=[_f(e,r,n)],l=[s];if(i.length%2!=0)throw new K(L.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let h=0;h<i.length;h+=2)a.push(_f(e,i[h])),l.push(i[h+1]);const c=[],d=Wt.empty();for(let h=a.length-1;h>=0;--h)if(!gw(c,a[h])){const f=a[h];let m=l[h];m=ct(m);const y=o.yu(f);if(m instanceof oh)c.push(f);else{const g=El(m,y);g!=null&&(c.push(f),d.set(f,g))}}const u=new gn(c);return new hw(d,u,o.fieldTransforms)}function mw(t,e,n,r=!1){return El(n,t.Cu(r?4:3,e))}function El(t,e){if(_w(t=ct(t)))return Pp("Unsupported field value:",e,t),pw(t,e);if(t instanceof Ap)return function(r,s){if(!dw(s.Vu))throw s.Su(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Su(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.gu&&e.Vu!==4)throw e.Su("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const a of r){let l=El(a,s.wu(o));l==null&&(l={nullValue:"NULL_VALUE"}),i.push(l),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=ct(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return jx(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=dt.fromDate(r);return{timestampValue:ho(s.serializer,i)}}if(r instanceof dt){const i=new dt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:ho(s.serializer,i)}}if(r instanceof Sp)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof go)return{bytesValue:lb(s.serializer,r._byteString)};if(r instanceof sn){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Su(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:rp(r.firestore._databaseId||s.databaseId,r._key.path)}}throw s.Su(`Unsupported field value: ${sh(r)}`)}(t,e)}function pw(t,e){const n={};return N0(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ii(t,(r,s)=>{const i=El(s,e.fu(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function _w(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof dt||t instanceof Sp||t instanceof go||t instanceof sn||t instanceof Ap)}function Pp(t,e,n){if(!_w(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=sh(n);throw r==="an object"?e.Su(t+" a custom object"):e.Su(t+" "+r)}}function _f(t,e,n){if((e=ct(e))instanceof ih)return e._internalPath;if(typeof e=="string")return Cp(t,e);throw Qu("Field path arguments must be of type string or ",t,!1,void 0,n)}const JV=new RegExp("[~\\*/\\[\\]]");function Cp(t,e,n){if(e.search(JV)>=0)throw Qu(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new ih(...e.split("."))._internalPath}catch{throw Qu(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Qu(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(i||o)&&(l+=" (found",i&&(l+=` in field ${r}`),o&&(l+=` in document ${s}`),l+=")"),new K(L.INVALID_ARGUMENT,a+t+l)}function gw(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Op{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new sn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new ZV(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(ah("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class ZV extends Op{data(){return super.data()}}function ah(t,e){return typeof e=="string"?Cp(t,e):e instanceof ih?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eL(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new K(L.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class kp{}class lh extends kp{}function y9(t,e,...n){let r=[];e instanceof kp&&r.push(e),r=r.concat(n),function(i){const o=i.filter(l=>l instanceof Np).length,a=i.filter(l=>l instanceof uh).length;if(o>1||o>0&&a>0)throw new K(L.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class uh extends lh{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new uh(e,n,r)}_apply(e){const n=this._parse(e);return yw(e._query,n),new Dr(e.firestore,e.converter,tf(e._query,n))}_parse(e){const n=vl(e.firestore);return function(i,o,a,l,c,d,u){let h;if(c.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new K(L.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){$y(u,d);const f=[];for(const m of u)f.push(Uy(l,i,m));h={arrayValue:{values:f}}}else h=Uy(l,i,u)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||$y(u,d),h=mw(a,o,u,d==="in"||d==="not-in");return De.create(c,d,h)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function v9(t,e,n){const r=e,s=ah("where",t);return uh._create(s,r,n)}class Np extends kp{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Np(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Ke.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const a=i.getFlattenedFilters();for(const l of a)yw(o,l),o=tf(o,l)}(e._query,n),new Dr(e.firestore,e.converter,tf(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class xp extends lh{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new xp(e,n)}_apply(e){const n=function(s,i,o){if(s.startAt!==null)throw new K(L.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new K(L.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ja(i,o)}(e._query,this._field,this._direction);return new Dr(e.firestore,e.converter,function(s,i){const o=s.explicitOrderBy.concat([i]);return new Ti(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function E9(t,e="asc"){const n=e,r=ah("orderBy",t);return xp._create(r,n)}class Dp extends lh{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new Dp(e,n,r)}_apply(e){return new Dr(e.firestore,e.converter,Uu(e._query,this._limit,this._limitType))}}function I9(t){return GV("limit",t),Dp._create("limit",t,"F")}class Vp extends lh{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new Vp(e,n,r)}_apply(e){const n=tL(e,this.type,this._docOrFields,this._inclusive);return new Dr(e.firestore,e.converter,function(s,i){return new Ti(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,i,s.endAt)}(e._query,n))}}function T9(...t){return Vp._create("startAfter",t,!1)}function tL(t,e,n,r){if(n[0]=ct(n[0]),n[0]instanceof Op)return function(i,o,a,l,c){if(!l)throw new K(L.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);const d=[];for(const u of to(i))if(u.field.isKeyField())d.push(ui(o,l.key));else{const h=l.data.field(u.field);if(Hc(h))throw new K(L.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(h===null){const f=u.field.canonicalString();throw new K(L.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${f}' (used as the orderBy) does not exist.`)}d.push(h)}return new ps(d,c)}(t._query,t.firestore._databaseId,e,n[0]._document,r);{const s=vl(t.firestore);return function(o,a,l,c,d,u){const h=o.explicitOrderBy;if(d.length>h.length)throw new K(L.INVALID_ARGUMENT,`Too many arguments provided to ${c}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const f=[];for(let m=0;m<d.length;m++){const y=d[m];if(h[m].field.isKeyField()){if(typeof y!="string")throw new K(L.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${c}(), but got a ${typeof y}`);if(!Xm(o)&&y.indexOf("/")!==-1)throw new K(L.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${c}() must be a plain document ID, but '${y}' contains a slash.`);const g=o.path.child(Ge.fromString(y));if(!ee.isDocumentKey(g))throw new K(L.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${c}() must result in a valid document path, but '${g}' is not because it contains an odd number of segments.`);const v=new ee(g);f.push(ui(a,v))}else{const g=mw(l,c,y);f.push(g)}}return new ps(f,u)}(t._query,t.firestore._databaseId,s,e,n,r)}}function Uy(t,e,n){if(typeof(n=ct(n))=="string"){if(n==="")throw new K(L.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Xm(e)&&n.indexOf("/")!==-1)throw new K(L.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Ge.fromString(n));if(!ee.isDocumentKey(r))throw new K(L.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return ui(t,new ee(r))}if(n instanceof sn)return ui(t,n._key);throw new K(L.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${sh(n)}.`)}function $y(t,e){if(!Array.isArray(t)||t.length===0)throw new K(L.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function yw(t,e){const n=function(s,i){for(const o of s)for(const a of o.getFlattenedFilters())if(i.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new K(L.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new K(L.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class nL{convertValue(e,n="none"){switch(li(e)){case 0:return null;case 1:return e.booleanValue;case 2:return mt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(fs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw ae()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Ii(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertGeoPoint(e){return new Sp(mt(e.latitude),mt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Qm(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Ua(e));default:return null}}convertTimestamp(e){const n=Or(e);return new dt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Ge.fromString(e);me(yb(r));const s=new ai(r.get(1),r.get(3)),i=new ee(r.popFirst(5));return s.isEqual(n)||yt(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vw(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ta{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ew extends Op{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new du(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(ah("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class du extends Ew{data(e={}){return super.data(e)}}class rL{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new ta(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new du(this._firestore,this._userDataWriter,r.key,r,new ta(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new K(L.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(a=>{const l=new du(s._firestore,s._userDataWriter,a.doc.key,a.doc,new ta(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(a=>i||a.type!==3).map(a=>{const l=new du(s._firestore,s._userDataWriter,a.doc.key,a.doc,new ta(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);let c=-1,d=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),d=o.indexOf(a.doc.key)),{type:sL(a.type),doc:l,oldIndex:c,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function sL(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ae()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b9(t){t=ur(t,sn);const e=ur(t.firestore,wi);return BV(wp(e),t._key).then(n=>oL(e,t,n))}class Iw extends nL{constructor(e){super(),this.firestore=e}convertBytes(e){return new go(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new sn(this.firestore,null,n)}}function w9(t){t=ur(t,Dr);const e=ur(t.firestore,wi),n=wp(e),r=new Iw(e);return eL(t._query),jV(n,t._query).then(s=>new rL(e,r,t,s))}function iL(t,e,n){t=ur(t,sn);const r=ur(t.firestore,wi),s=vw(t.converter,e,n);return ch(r,[fw(vl(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,zt.none())])}function A9(t,e,n,...r){t=ur(t,sn);const s=ur(t.firestore,wi),i=vl(s);let o;return o=typeof(e=ct(e))=="string"||e instanceof ih?XV(i,"updateDoc",t._key,e,n,r):YV(i,"updateDoc",t._key,e),ch(s,[o.toMutation(t._key,zt.exists(!0))])}function S9(t){return ch(ur(t.firestore,wi),[new Yc(t._key,zt.none())])}function R9(t,e){const n=ur(t.firestore,wi),r=uw(t),s=vw(t.converter,e);return ch(n,[fw(vl(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,zt.exists(!1))]).then(()=>r)}function ch(t,e){return function(r,s){const i=new ir;return r.asyncQueue.enqueueAndForget(async()=>TV(await $V(r),s,i)),i.promise}(wp(t),e)}function oL(t,e,n){const r=n.docs.get(e._key),s=new Iw(t);return new Ew(t,s,e._key,r,new ta(n.hasPendingWrites,n.fromCache),e.converter)}class aL{constructor(e){let n;this.kind="persistent",e!=null&&e.tabManager?(e.tabManager._initialize(e),n=e.tabManager):(n=hL(void 0),n._initialize(e)),this._onlineComponentProvider=n._onlineComponentProvider,this._offlineComponentProvider=n._offlineComponentProvider}toJSON(){return{kind:this.kind}}}function lL(t){return new aL(t)}class uL{constructor(e){this.forceOwnership=e,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=new Ip,this._offlineComponentProvider=new rw(this._onlineComponentProvider,e==null?void 0:e.cacheSizeBytes,this.forceOwnership)}}class cL{constructor(){this.kind="PersistentMultipleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=new Ip,this._offlineComponentProvider=new LV(this._onlineComponentProvider,e==null?void 0:e.cacheSizeBytes)}}function hL(t){return new uL(t==null?void 0:t.forceOwnership)}function dL(){return new cL}(function(e,n=!0){(function(s){Ro=s})(yi),ri(new ds("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),a=new wi(new QN(r.getProvider("auth-internal")),new ZN(r.getProvider("app-check-internal")),function(c,d){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new K(L.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ai(c.options.projectId,d)}(o,s),o);return i=Object.assign({useFetchStreams:n},i),a._setSettings(i),a},"PUBLIC").setMultipleInstances(!0)),nr(Lg,"4.6.0",e),nr(Lg,"4.6.0","esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tw="firebasestorage.googleapis.com",bw="storageBucket",fL=2*60*1e3,mL=10*60*1e3,pL=1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ft extends cr{constructor(e,n,r=0){super(nd(e),`Firebase Storage: ${n} (${nd(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,ft.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return nd(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var lt;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(lt||(lt={}));function nd(t){return"storage/"+t}function Lp(){const t="An unknown error occurred, please check the error payload for server response.";return new ft(lt.UNKNOWN,t)}function _L(t){return new ft(lt.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function gL(t){return new ft(lt.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function yL(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new ft(lt.UNAUTHENTICATED,t)}function vL(){return new ft(lt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function EL(t){return new ft(lt.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function ww(){return new ft(lt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Aw(){return new ft(lt.CANCELED,"User canceled the upload/download.")}function IL(t){return new ft(lt.INVALID_URL,"Invalid URL '"+t+"'.")}function TL(t){return new ft(lt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function bL(){return new ft(lt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+bw+"' property when initializing the app?")}function Sw(){return new ft(lt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function wL(){return new ft(lt.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function AL(){return new ft(lt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function SL(t){return new ft(lt.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function gf(t){return new ft(lt.INVALID_ARGUMENT,t)}function Rw(){return new ft(lt.APP_DELETED,"The Firebase app was deleted.")}function RL(t){return new ft(lt.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function pa(t,e){return new ft(lt.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function qo(t){throw new ft(lt.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tn{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=Tn.makeFromUrl(e,n)}catch{return new Tn(e,"")}if(r.path==="")return r;throw TL(e)}static makeFromUrl(e,n){let r=null;const s="([A-Za-z0-9.\\-_]+)";function i(T){T.path.charAt(T.path.length-1)==="/"&&(T.path_=T.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+s+o,"i"),l={bucket:1,path:3};function c(T){T.path_=decodeURIComponent(T.path)}const d="v[A-Za-z0-9_]+",u=n.replace(/[.]/g,"\\."),h="(/([^?#]*).*)?$",f=new RegExp(`^https?://${u}/${d}/b/${s}/o${h}`,"i"),m={bucket:1,path:3},y=n===Tw?"(?:storage.googleapis.com|storage.cloud.google.com)":n,g="([^?#]*)",v=new RegExp(`^https?://${y}/${s}/${g}`,"i"),E=[{regex:a,indices:l,postModify:i},{regex:f,indices:m,postModify:c},{regex:v,indices:{bucket:1,path:2},postModify:c}];for(let T=0;T<E.length;T++){const S=E[T],w=S.regex.exec(e);if(w){const D=w[S.indices.bucket];let O=w[S.indices.path];O||(O=""),r=new Tn(D,O),S.postModify(r);break}}if(r==null)throw IL(e);return r}}class PL{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CL(t,e,n){let r=1,s=null,i=null,o=!1,a=0;function l(){return a===2}let c=!1;function d(...g){c||(c=!0,e.apply(null,g))}function u(g){s=setTimeout(()=>{s=null,t(f,l())},g)}function h(){i&&clearTimeout(i)}function f(g,...v){if(c){h();return}if(g){h(),d.call(null,g,...v);return}if(l()||o){h(),d.call(null,g,...v);return}r<64&&(r*=2);let E;a===1?(a=2,E=0):E=(r+Math.random())*1e3,u(E)}let m=!1;function y(g){m||(m=!0,h(),!c&&(s!==null?(g||(a=2),clearTimeout(s),u(0)):g||(a=1)))}return u(0),i=setTimeout(()=>{o=!0,y(!0)},n),y}function OL(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kL(t){return t!==void 0}function NL(t){return typeof t=="function"}function xL(t){return typeof t=="object"&&!Array.isArray(t)}function hh(t){return typeof t=="string"||t instanceof String}function By(t){return Mp()&&t instanceof Blob}function Mp(){return typeof Blob<"u"}function jy(t,e,n,r){if(r<e)throw gf(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw gf(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ko(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function Pw(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const s=e(r)+"="+e(t[r]);n=n+s+"&"}return n=n.slice(0,-1),n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ti;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(ti||(ti={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cw(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,i=e.indexOf(t)!==-1;return n||s||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DL{constructor(e,n,r,s,i,o,a,l,c,d,u,h=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=s,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=c,this.progressCallback_=d,this.connectionFactory_=u,this.retry=h,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((f,m)=>{this.resolve_=f,this.reject_=m,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new Gl(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const o=a=>{const l=a.loaded,c=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,c)};this.progressCallback_!==null&&i.addUploadProgressListener(o),i.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(o),this.pendingConnection_=null;const a=i.getErrorCode()===ti.NO_ERROR,l=i.getStatus();if(!a||Cw(l,this.additionalRetryCodes_)&&this.retry){const d=i.getErrorCode()===ti.ABORT;r(!1,new Gl(!1,null,d));return}const c=this.successCodes_.indexOf(l)!==-1;r(!0,new Gl(c,i))})},n=(r,s)=>{const i=this.resolve_,o=this.reject_,a=s.connection;if(s.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());kL(l)?i(l):i()}catch(l){o(l)}else if(a!==null){const l=Lp();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(s.canceled){const l=this.appDelete_?Rw():Aw();o(l)}else{const l=ww();o(l)}};this.canceled_?n(!1,new Gl(!1,null,!0)):this.backoffId_=CL(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&OL(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Gl{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function VL(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function LL(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function ML(t,e){e&&(t["X-Firebase-GMPID"]=e)}function FL(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function UL(t,e,n,r,s,i,o=!0){const a=Pw(t.urlParams),l=t.url+a,c=Object.assign({},t.headers);return ML(c,e),VL(c,n),LL(c,i),FL(c,r),new DL(l,t.method,c,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $L(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function BL(...t){const e=$L();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(Mp())return new Blob(t);throw new ft(lt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function jL(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qL(t){if(typeof atob>"u")throw SL("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const er={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class rd{constructor(e,n){this.data=e,this.contentType=n||null}}function GL(t,e){switch(t){case er.RAW:return new rd(Ow(e));case er.BASE64:case er.BASE64URL:return new rd(kw(t,e));case er.DATA_URL:return new rd(WL(e),KL(e))}throw Lp()}function Ow(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const i=r,o=t.charCodeAt(++n);r=65536|(i&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function HL(t){let e;try{e=decodeURIComponent(t)}catch{throw pa(er.DATA_URL,"Malformed data URL.")}return Ow(e)}function kw(t,e){switch(t){case er.BASE64:{const s=e.indexOf("-")!==-1,i=e.indexOf("_")!==-1;if(s||i)throw pa(t,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case er.BASE64URL:{const s=e.indexOf("+")!==-1,i=e.indexOf("/")!==-1;if(s||i)throw pa(t,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=qL(e)}catch(s){throw s.message.includes("polyfill")?s:pa(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}class Nw{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw pa(er.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=zL(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function WL(t){const e=new Nw(t);return e.base64?kw(er.BASE64,e.rest):HL(e.rest)}function KL(t){return new Nw(t).contentType}function zL(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ts{constructor(e,n){let r=0,s="";By(e)?(this.data_=e,r=e.size,s=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,n){if(By(this.data_)){const r=this.data_,s=jL(r,e,n);return s===null?null:new ts(s)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new ts(r,!0)}}static getBlob(...e){if(Mp()){const n=e.map(r=>r instanceof ts?r.data_:r);return new ts(BL.apply(null,n))}else{const n=e.map(o=>hh(o)?GL(er.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const s=new Uint8Array(r);let i=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)s[i++]=o[a]}),new ts(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xw(t){let e;try{e=JSON.parse(t)}catch{return null}return xL(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QL(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function YL(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function Dw(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XL(t,e){return e}class Xt{constructor(e,n,r,s){this.server=e,this.local=n||e,this.writable=!!r,this.xform=s||XL}}let Hl=null;function JL(t){return!hh(t)||t.length<2?t:Dw(t)}function Vw(){if(Hl)return Hl;const t=[];t.push(new Xt("bucket")),t.push(new Xt("generation")),t.push(new Xt("metageneration")),t.push(new Xt("name","fullPath",!0));function e(i,o){return JL(o)}const n=new Xt("name");n.xform=e,t.push(n);function r(i,o){return o!==void 0?Number(o):o}const s=new Xt("size");return s.xform=r,t.push(s),t.push(new Xt("timeCreated")),t.push(new Xt("updated")),t.push(new Xt("md5Hash",null,!0)),t.push(new Xt("cacheControl",null,!0)),t.push(new Xt("contentDisposition",null,!0)),t.push(new Xt("contentEncoding",null,!0)),t.push(new Xt("contentLanguage",null,!0)),t.push(new Xt("contentType",null,!0)),t.push(new Xt("metadata","customMetadata",!0)),Hl=t,Hl}function ZL(t,e){function n(){const r=t.bucket,s=t.fullPath,i=new Tn(r,s);return e._makeStorageReference(i)}Object.defineProperty(t,"ref",{get:n})}function eM(t,e,n){const r={};r.type="file";const s=n.length;for(let i=0;i<s;i++){const o=n[i];r[o.local]=o.xform(r,e[o.server])}return ZL(r,t),r}function Lw(t,e,n){const r=xw(e);return r===null?null:eM(t,r,n)}function tM(t,e,n,r){const s=xw(e);if(s===null||!hh(s.downloadTokens))return null;const i=s.downloadTokens;if(i.length===0)return null;const o=encodeURIComponent;return i.split(",").map(c=>{const d=t.bucket,u=t.fullPath,h="/b/"+o(d)+"/o/"+o(u),f=ko(h,n,r),m=Pw({alt:"media",token:c});return f+m})[0]}function Mw(t,e){const n={},r=e.length;for(let s=0;s<r;s++){const i=e[s];i.writable&&(n[i.server]=t[i.local])}return JSON.stringify(n)}class Ai{constructor(e,n,r,s){this.url=e,this.method=n,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ar(t){if(!t)throw Lp()}function Fp(t,e){function n(r,s){const i=Lw(t,s,e);return Ar(i!==null),i}return n}function nM(t,e){function n(r,s){const i=Lw(t,s,e);return Ar(i!==null),tM(i,s,t.host,t._protocol)}return n}function Il(t){function e(n,r){let s;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?s=vL():s=yL():n.getStatus()===402?s=gL(t.bucket):n.getStatus()===403?s=EL(t.path):s=r,s.status=n.getStatus(),s.serverResponse=r.serverResponse,s}return e}function Up(t){const e=Il(t);function n(r,s){let i=e(r,s);return r.getStatus()===404&&(i=_L(t.path)),i.serverResponse=s.serverResponse,i}return n}function rM(t,e,n){const r=e.fullServerUrl(),s=ko(r,t.host,t._protocol),i="GET",o=t.maxOperationRetryTime,a=new Ai(s,i,Fp(t,n),o);return a.errorHandler=Up(e),a}function sM(t,e,n){const r=e.fullServerUrl(),s=ko(r,t.host,t._protocol),i="GET",o=t.maxOperationRetryTime,a=new Ai(s,i,nM(t,n),o);return a.errorHandler=Up(e),a}function iM(t,e){const n=e.fullServerUrl(),r=ko(n,t.host,t._protocol),s="DELETE",i=t.maxOperationRetryTime;function o(l,c){}const a=new Ai(r,s,o,i);return a.successCodes=[200,204],a.errorHandler=Up(e),a}function oM(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function Fw(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=oM(null,e)),r}function aM(t,e,n,r,s){const i=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let E="";for(let T=0;T<2;T++)E=E+Math.random().toString().slice(2);return E}const l=a();o["Content-Type"]="multipart/related; boundary="+l;const c=Fw(e,r,s),d=Mw(c,n),u="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+d+`\r
--`+l+`\r
Content-Type: `+c.contentType+`\r
\r
`,h=`\r
--`+l+"--",f=ts.getBlob(u,r,h);if(f===null)throw Sw();const m={name:c.fullPath},y=ko(i,t.host,t._protocol),g="POST",v=t.maxUploadRetryTime,b=new Ai(y,g,Fp(t,n),v);return b.urlParams=m,b.headers=o,b.body=f.uploadData(),b.errorHandler=Il(e),b}class Yu{constructor(e,n,r,s){this.current=e,this.total=n,this.finalized=!!r,this.metadata=s||null}}function $p(t,e){let n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch{Ar(!1)}return Ar(!!n&&(e||["active"]).indexOf(n)!==-1),n}function lM(t,e,n,r,s){const i=e.bucketOnlyServerUrl(),o=Fw(e,r,s),a={name:o.fullPath},l=ko(i,t.host,t._protocol),c="POST",d={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},u=Mw(o,n),h=t.maxUploadRetryTime;function f(y){$p(y);let g;try{g=y.getResponseHeader("X-Goog-Upload-URL")}catch{Ar(!1)}return Ar(hh(g)),g}const m=new Ai(l,c,f,h);return m.urlParams=a,m.headers=d,m.body=u,m.errorHandler=Il(e),m}function uM(t,e,n,r){const s={"X-Goog-Upload-Command":"query"};function i(c){const d=$p(c,["active","final"]);let u=null;try{u=c.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Ar(!1)}u||Ar(!1);const h=Number(u);return Ar(!isNaN(h)),new Yu(h,r.size(),d==="final")}const o="POST",a=t.maxUploadRetryTime,l=new Ai(n,o,i,a);return l.headers=s,l.errorHandler=Il(e),l}const qy=256*1024;function cM(t,e,n,r,s,i,o,a){const l=new Yu(0,0);if(o?(l.current=o.current,l.total=o.total):(l.current=0,l.total=r.size()),r.size()!==l.total)throw wL();const c=l.total-l.current;let d=c;s>0&&(d=Math.min(d,s));const u=l.current,h=u+d;let f="";d===0?f="finalize":c===d?f="upload, finalize":f="upload";const m={"X-Goog-Upload-Command":f,"X-Goog-Upload-Offset":`${l.current}`},y=r.slice(u,h);if(y===null)throw Sw();function g(T,S){const w=$p(T,["active","final"]),D=l.current+d,O=r.size();let C;return w==="final"?C=Fp(e,i)(T,S):C=null,new Yu(D,O,w==="final",C)}const v="POST",b=e.maxUploadRetryTime,E=new Ai(n,v,g,b);return E.headers=m,E.body=y.uploadData(),E.progressCallback=a||null,E.errorHandler=Il(t),E}const dn={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function sd(t){switch(t){case"running":case"pausing":case"canceling":return dn.RUNNING;case"paused":return dn.PAUSED;case"success":return dn.SUCCESS;case"canceled":return dn.CANCELED;case"error":return dn.ERROR;default:return dn.ERROR}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hM{constructor(e,n,r){if(NL(e)||n!=null||r!=null)this.next=e,this.error=n??void 0,this.complete=r??void 0;else{const i=e;this.next=i.next,this.error=i.error,this.complete=i.complete}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xi(t){return(...e)=>{Promise.resolve().then(()=>t(...e))}}class dM{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=ti.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=ti.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=ti.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,s){if(this.sent_)throw qo("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),s!==void 0)for(const i in s)s.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,s[i].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw qo("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw qo("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw qo("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw qo("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class fM extends dM{initXhr(){this.xhr_.responseType="text"}}function Hs(){return new fM}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mM{constructor(e,n,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=n,this._metadata=r,this._mappings=Vw(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=s=>{if(this._request=void 0,this._chunkMultiplier=1,s._codeEquals(lt.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const i=this.isExponentialBackoffExpired();if(Cw(s.status,[]))if(i)s=ww();else{this.sleepTime=Math.max(this.sleepTime*2,pL),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=s,this._transition("error")}},this._metadataErrorHandler=s=>{this._request=void 0,s._codeEquals(lt.CANCELED)?this.completeTransitions_():(this._error=s,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((s,i)=>{this._resolve=s,this._reject=i,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return n=>this._updateProgress(e+n)}_shouldDoResumable(e){return e.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([n,r])=>{switch(this._state){case"running":e(n,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((e,n)=>{const r=lM(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),s=this._ref.storage._makeRequest(r,Hs,e,n);this._request=s,s.getPromise().then(i=>{this._request=void 0,this._uploadUrl=i,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((n,r)=>{const s=uM(this._ref.storage,this._ref._location,e,this._blob),i=this._ref.storage._makeRequest(s,Hs,n,r);this._request=i,i.getPromise().then(o=>{o=o,this._request=void 0,this._updateProgress(o.current),this._needToFetchStatus=!1,o.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=qy*this._chunkMultiplier,n=new Yu(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((s,i)=>{let o;try{o=cM(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,n,this._makeProgressCallback())}catch(l){this._error=l,this._transition("error");return}const a=this._ref.storage._makeRequest(o,Hs,s,i,!1);this._request=a,a.getPromise().then(l=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(l.current),l.finalized?(this._metadata=l.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){qy*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,n)=>{const r=rM(this._ref.storage,this._ref._location,this._mappings),s=this._ref.storage._makeRequest(r,Hs,e,n);this._request=s,s.getPromise().then(i=>{this._request=void 0,this._metadata=i,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,n)=>{const r=aM(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),s=this._ref.storage._makeRequest(r,Hs,e,n);this._request=s,s.getPromise().then(i=>{this._request=void 0,this._metadata=i,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const n=this._transferred;this._transferred=e,this._transferred!==n&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const n=this._state==="paused";this._state=e,n&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=Aw(),this._state=e,this._notifyObservers();break;case"error":this._state=e,this._notifyObservers();break;case"success":this._state=e,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){const e=sd(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,n,r,s){const i=new hM(n||void 0,r||void 0,s||void 0);return this._addObserver(i),()=>{this._removeObserver(i)}}then(e,n){return this._promise.then(e,n)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const n=this._observers.indexOf(e);n!==-1&&this._observers.splice(n,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(n=>{this._notifyObserver(n)})}_finishPromise(){if(this._resolve!==void 0){let e=!0;switch(sd(this._state)){case dn.SUCCESS:xi(this._resolve.bind(null,this.snapshot))();break;case dn.CANCELED:case dn.ERROR:const n=this._reject;xi(n.bind(null,this._error))();break;default:e=!1;break}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(sd(this._state)){case dn.RUNNING:case dn.PAUSED:e.next&&xi(e.next.bind(e,this.snapshot))();break;case dn.SUCCESS:e.complete&&xi(e.complete.bind(e))();break;case dn.CANCELED:case dn.ERROR:e.error&&xi(e.error.bind(e,this._error))();break;default:e.error&&xi(e.error.bind(e,this._error))()}}resume(){const e=this._state==="paused"||this._state==="pausing";return e&&this._transition("running"),e}pause(){const e=this._state==="running";return e&&this._transition("pausing"),e}cancel(){const e=this._state==="running"||this._state==="pausing";return e&&this._transition("canceling"),e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mi{constructor(e,n){this._service=e,n instanceof Tn?this._location=n:this._location=Tn.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new mi(e,n)}get root(){const e=new Tn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Dw(this._location.path)}get storage(){return this._service}get parent(){const e=QL(this._location.path);if(e===null)return null;const n=new Tn(this._location.bucket,e);return new mi(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw RL(e)}}function pM(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new mM(t,new ts(e),n)}function _M(t){t._throwIfRoot("getDownloadURL");const e=sM(t.storage,t._location,Vw());return t.storage.makeRequestWithTokens(e,Hs).then(n=>{if(n===null)throw AL();return n})}function gM(t){t._throwIfRoot("deleteObject");const e=iM(t.storage,t._location);return t.storage.makeRequestWithTokens(e,Hs)}function yM(t,e){const n=YL(t._location.path,e),r=new Tn(t._location.bucket,n);return new mi(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vM(t){return/^[A-Za-z]+:\/\//.test(t)}function EM(t,e){return new mi(t,e)}function Uw(t,e){if(t instanceof Bp){const n=t;if(n._bucket==null)throw bL();const r=new mi(n,n._bucket);return e!=null?Uw(r,e):r}else return e!==void 0?yM(t,e):t}function IM(t,e){if(e&&vM(e)){if(t instanceof Bp)return EM(t,e);throw gf("To use ref(service, url), the first argument must be a Storage instance.")}else return Uw(t,e)}function Gy(t,e){const n=e==null?void 0:e[bw];return n==null?null:Tn.makeFromBucketSpec(n,t)}function TM(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:s}=r;s&&(t._overrideAuthToken=typeof s=="string"?s:sC(s,t.app.options.projectId))}class Bp{constructor(e,n,r,s,i){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=s,this._firebaseVersion=i,this._bucket=null,this._host=Tw,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=fL,this._maxUploadRetryTime=mL,this._requests=new Set,s!=null?this._bucket=Tn.makeFromBucketSpec(s,this._host):this._bucket=Gy(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Tn.makeFromBucketSpec(this._url,e):this._bucket=Gy(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){jy("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){jy("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new mi(this,e)}_makeRequest(e,n,r,s,i=!0){if(this._deleted)return new PL(Rw());{const o=UL(e,this._appId,r,s,n,this._firebaseVersion,i);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,s).getPromise()}}const Hy="@firebase/storage",Wy="0.12.4";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $w="storage";function P9(t,e,n){return t=ct(t),pM(t,e,n)}function C9(t){return t=ct(t),_M(t)}function O9(t){return t=ct(t),gM(t)}function k9(t,e){return t=ct(t),IM(t,e)}function bM(t=VI(),e){t=ct(t);const r=Tc(t,$w).getImmediate({identifier:e}),s=nC("storage");return s&&wM(r,...s),r}function wM(t,e,n,r={}){TM(t,e,n,r)}function AM(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new Bp(n,r,s,e,yi)}function SM(){ri(new ds($w,AM,"PUBLIC").setMultipleInstances(!0)),nr(Hy,Wy,""),nr(Hy,Wy,"esm2017")}SM();const RM={apiKey:"AIzaSyCe4xspiouuwD3oN8spYSnLZGNrEAw1i78",authDomain:"music-4a433.firebaseapp.com",projectId:"music-4a433",storageBucket:"music-4a433.appspot.com",appId:"1:189242395273:web:688ec4d0eef69b76171458"},jp=DI(RM),Xu=Uk(jp),dh=WV(jp,{localCache:lL({tabManager:dL()})}),N9=bM(jp);bp(dh,"users");const x9=bp(dh,"songs"),D9=bp(dh,"comments"),PM={beforeMount(t,e){let n=`fa fa-${e.value}  text-xl`;e.arg==="full"&&(n=e.value),e.modifiers.right&&(n+=" float-right"),e.modifiers.yellow?n+=" text-yellow-400":n+=" text-green-400",t.innerHTML+=`<i class="${n}"></i>`}};var Kn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function qp(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var yf={};/*!
 *  howler.js v2.2.4
 *  howlerjs.com
 *
 *  (c) 2013-2020, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */(function(t){(function(){var e=function(){this.init()};e.prototype={init:function(){var u=this||n;return u._counter=1e3,u._html5AudioPool=[],u.html5PoolSize=10,u._codecs={},u._howls=[],u._muted=!1,u._volume=1,u._canPlayEvent="canplaythrough",u._navigator=typeof window<"u"&&window.navigator?window.navigator:null,u.masterGain=null,u.noAudio=!1,u.usingWebAudio=!0,u.autoSuspend=!0,u.ctx=null,u.autoUnlock=!0,u._setup(),u},volume:function(u){var h=this||n;if(u=parseFloat(u),h.ctx||d(),typeof u<"u"&&u>=0&&u<=1){if(h._volume=u,h._muted)return h;h.usingWebAudio&&h.masterGain.gain.setValueAtTime(u,n.ctx.currentTime);for(var f=0;f<h._howls.length;f++)if(!h._howls[f]._webAudio)for(var m=h._howls[f]._getSoundIds(),y=0;y<m.length;y++){var g=h._howls[f]._soundById(m[y]);g&&g._node&&(g._node.volume=g._volume*u)}return h}return h._volume},mute:function(u){var h=this||n;h.ctx||d(),h._muted=u,h.usingWebAudio&&h.masterGain.gain.setValueAtTime(u?0:h._volume,n.ctx.currentTime);for(var f=0;f<h._howls.length;f++)if(!h._howls[f]._webAudio)for(var m=h._howls[f]._getSoundIds(),y=0;y<m.length;y++){var g=h._howls[f]._soundById(m[y]);g&&g._node&&(g._node.muted=u?!0:g._muted)}return h},stop:function(){for(var u=this||n,h=0;h<u._howls.length;h++)u._howls[h].stop();return u},unload:function(){for(var u=this||n,h=u._howls.length-1;h>=0;h--)u._howls[h].unload();return u.usingWebAudio&&u.ctx&&typeof u.ctx.close<"u"&&(u.ctx.close(),u.ctx=null,d()),u},codecs:function(u){return(this||n)._codecs[u.replace(/^x-/,"")]},_setup:function(){var u=this||n;if(u.state=u.ctx&&u.ctx.state||"suspended",u._autoSuspend(),!u.usingWebAudio)if(typeof Audio<"u")try{var h=new Audio;typeof h.oncanplaythrough>"u"&&(u._canPlayEvent="canplay")}catch{u.noAudio=!0}else u.noAudio=!0;try{var h=new Audio;h.muted&&(u.noAudio=!0)}catch{}return u.noAudio||u._setupCodecs(),u},_setupCodecs:function(){var u=this||n,h=null;try{h=typeof Audio<"u"?new Audio:null}catch{return u}if(!h||typeof h.canPlayType!="function")return u;var f=h.canPlayType("audio/mpeg;").replace(/^no$/,""),m=u._navigator?u._navigator.userAgent:"",y=m.match(/OPR\/(\d+)/g),g=y&&parseInt(y[0].split("/")[1],10)<33,v=m.indexOf("Safari")!==-1&&m.indexOf("Chrome")===-1,b=m.match(/Version\/(.*?) /),E=v&&b&&parseInt(b[1],10)<15;return u._codecs={mp3:!!(!g&&(f||h.canPlayType("audio/mp3;").replace(/^no$/,""))),mpeg:!!f,opus:!!h.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!h.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!h.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!(h.canPlayType('audio/wav; codecs="1"')||h.canPlayType("audio/wav")).replace(/^no$/,""),aac:!!h.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!h.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(h.canPlayType("audio/x-m4a;")||h.canPlayType("audio/m4a;")||h.canPlayType("audio/aac;")).replace(/^no$/,""),m4b:!!(h.canPlayType("audio/x-m4b;")||h.canPlayType("audio/m4b;")||h.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(h.canPlayType("audio/x-mp4;")||h.canPlayType("audio/mp4;")||h.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!(!E&&h.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),webm:!!(!E&&h.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),dolby:!!h.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(h.canPlayType("audio/x-flac;")||h.canPlayType("audio/flac;")).replace(/^no$/,"")},u},_unlockAudio:function(){var u=this||n;if(!(u._audioUnlocked||!u.ctx)){u._audioUnlocked=!1,u.autoUnlock=!1,!u._mobileUnloaded&&u.ctx.sampleRate!==44100&&(u._mobileUnloaded=!0,u.unload()),u._scratchBuffer=u.ctx.createBuffer(1,1,22050);var h=function(f){for(;u._html5AudioPool.length<u.html5PoolSize;)try{var m=new Audio;m._unlocked=!0,u._releaseHtml5Audio(m)}catch{u.noAudio=!0;break}for(var y=0;y<u._howls.length;y++)if(!u._howls[y]._webAudio)for(var g=u._howls[y]._getSoundIds(),v=0;v<g.length;v++){var b=u._howls[y]._soundById(g[v]);b&&b._node&&!b._node._unlocked&&(b._node._unlocked=!0,b._node.load())}u._autoResume();var E=u.ctx.createBufferSource();E.buffer=u._scratchBuffer,E.connect(u.ctx.destination),typeof E.start>"u"?E.noteOn(0):E.start(0),typeof u.ctx.resume=="function"&&u.ctx.resume(),E.onended=function(){E.disconnect(0),u._audioUnlocked=!0,document.removeEventListener("touchstart",h,!0),document.removeEventListener("touchend",h,!0),document.removeEventListener("click",h,!0),document.removeEventListener("keydown",h,!0);for(var T=0;T<u._howls.length;T++)u._howls[T]._emit("unlock")}};return document.addEventListener("touchstart",h,!0),document.addEventListener("touchend",h,!0),document.addEventListener("click",h,!0),document.addEventListener("keydown",h,!0),u}},_obtainHtml5Audio:function(){var u=this||n;if(u._html5AudioPool.length)return u._html5AudioPool.pop();var h=new Audio().play();return h&&typeof Promise<"u"&&(h instanceof Promise||typeof h.then=="function")&&h.catch(function(){console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.")}),new Audio},_releaseHtml5Audio:function(u){var h=this||n;return u._unlocked&&h._html5AudioPool.push(u),h},_autoSuspend:function(){var u=this;if(!(!u.autoSuspend||!u.ctx||typeof u.ctx.suspend>"u"||!n.usingWebAudio)){for(var h=0;h<u._howls.length;h++)if(u._howls[h]._webAudio){for(var f=0;f<u._howls[h]._sounds.length;f++)if(!u._howls[h]._sounds[f]._paused)return u}return u._suspendTimer&&clearTimeout(u._suspendTimer),u._suspendTimer=setTimeout(function(){if(u.autoSuspend){u._suspendTimer=null,u.state="suspending";var m=function(){u.state="suspended",u._resumeAfterSuspend&&(delete u._resumeAfterSuspend,u._autoResume())};u.ctx.suspend().then(m,m)}},3e4),u}},_autoResume:function(){var u=this;if(!(!u.ctx||typeof u.ctx.resume>"u"||!n.usingWebAudio))return u.state==="running"&&u.ctx.state!=="interrupted"&&u._suspendTimer?(clearTimeout(u._suspendTimer),u._suspendTimer=null):u.state==="suspended"||u.state==="running"&&u.ctx.state==="interrupted"?(u.ctx.resume().then(function(){u.state="running";for(var h=0;h<u._howls.length;h++)u._howls[h]._emit("resume")}),u._suspendTimer&&(clearTimeout(u._suspendTimer),u._suspendTimer=null)):u.state==="suspending"&&(u._resumeAfterSuspend=!0),u}};var n=new e,r=function(u){var h=this;if(!u.src||u.src.length===0){console.error("An array of source files must be passed with any new Howl.");return}h.init(u)};r.prototype={init:function(u){var h=this;return n.ctx||d(),h._autoplay=u.autoplay||!1,h._format=typeof u.format!="string"?u.format:[u.format],h._html5=u.html5||!1,h._muted=u.mute||!1,h._loop=u.loop||!1,h._pool=u.pool||5,h._preload=typeof u.preload=="boolean"||u.preload==="metadata"?u.preload:!0,h._rate=u.rate||1,h._sprite=u.sprite||{},h._src=typeof u.src!="string"?u.src:[u.src],h._volume=u.volume!==void 0?u.volume:1,h._xhr={method:u.xhr&&u.xhr.method?u.xhr.method:"GET",headers:u.xhr&&u.xhr.headers?u.xhr.headers:null,withCredentials:u.xhr&&u.xhr.withCredentials?u.xhr.withCredentials:!1},h._duration=0,h._state="unloaded",h._sounds=[],h._endTimers={},h._queue=[],h._playLock=!1,h._onend=u.onend?[{fn:u.onend}]:[],h._onfade=u.onfade?[{fn:u.onfade}]:[],h._onload=u.onload?[{fn:u.onload}]:[],h._onloaderror=u.onloaderror?[{fn:u.onloaderror}]:[],h._onplayerror=u.onplayerror?[{fn:u.onplayerror}]:[],h._onpause=u.onpause?[{fn:u.onpause}]:[],h._onplay=u.onplay?[{fn:u.onplay}]:[],h._onstop=u.onstop?[{fn:u.onstop}]:[],h._onmute=u.onmute?[{fn:u.onmute}]:[],h._onvolume=u.onvolume?[{fn:u.onvolume}]:[],h._onrate=u.onrate?[{fn:u.onrate}]:[],h._onseek=u.onseek?[{fn:u.onseek}]:[],h._onunlock=u.onunlock?[{fn:u.onunlock}]:[],h._onresume=[],h._webAudio=n.usingWebAudio&&!h._html5,typeof n.ctx<"u"&&n.ctx&&n.autoUnlock&&n._unlockAudio(),n._howls.push(h),h._autoplay&&h._queue.push({event:"play",action:function(){h.play()}}),h._preload&&h._preload!=="none"&&h.load(),h},load:function(){var u=this,h=null;if(n.noAudio){u._emit("loaderror",null,"No audio support.");return}typeof u._src=="string"&&(u._src=[u._src]);for(var f=0;f<u._src.length;f++){var m,y;if(u._format&&u._format[f])m=u._format[f];else{if(y=u._src[f],typeof y!="string"){u._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}m=/^data:audio\/([^;,]+);/i.exec(y),m||(m=/\.([^.]+)$/.exec(y.split("?",1)[0])),m&&(m=m[1].toLowerCase())}if(m||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),m&&n.codecs(m)){h=u._src[f];break}}if(!h){u._emit("loaderror",null,"No codec support for selected audio sources.");return}return u._src=h,u._state="loading",window.location.protocol==="https:"&&h.slice(0,5)==="http:"&&(u._html5=!0,u._webAudio=!1),new s(u),u._webAudio&&o(u),u},play:function(u,h){var f=this,m=null;if(typeof u=="number")m=u,u=null;else{if(typeof u=="string"&&f._state==="loaded"&&!f._sprite[u])return null;if(typeof u>"u"&&(u="__default",!f._playLock)){for(var y=0,g=0;g<f._sounds.length;g++)f._sounds[g]._paused&&!f._sounds[g]._ended&&(y++,m=f._sounds[g]._id);y===1?u=null:m=null}}var v=m?f._soundById(m):f._inactiveSound();if(!v)return null;if(m&&!u&&(u=v._sprite||"__default"),f._state!=="loaded"){v._sprite=u,v._ended=!1;var b=v._id;return f._queue.push({event:"play",action:function(){f.play(b)}}),b}if(m&&!v._paused)return h||f._loadQueue("play"),v._id;f._webAudio&&n._autoResume();var E=Math.max(0,v._seek>0?v._seek:f._sprite[u][0]/1e3),T=Math.max(0,(f._sprite[u][0]+f._sprite[u][1])/1e3-E),S=T*1e3/Math.abs(v._rate),w=f._sprite[u][0]/1e3,D=(f._sprite[u][0]+f._sprite[u][1])/1e3;v._sprite=u,v._ended=!1;var O=function(){v._paused=!1,v._seek=E,v._start=w,v._stop=D,v._loop=!!(v._loop||f._sprite[u][2])};if(E>=D){f._ended(v);return}var C=v._node;if(f._webAudio){var z=function(){f._playLock=!1,O(),f._refreshBuffer(v);var we=v._muted||f._muted?0:v._volume;C.gain.setValueAtTime(we,n.ctx.currentTime),v._playStart=n.ctx.currentTime,typeof C.bufferSource.start>"u"?v._loop?C.bufferSource.noteGrainOn(0,E,86400):C.bufferSource.noteGrainOn(0,E,T):v._loop?C.bufferSource.start(0,E,86400):C.bufferSource.start(0,E,T),S!==1/0&&(f._endTimers[v._id]=setTimeout(f._ended.bind(f,v),S)),h||setTimeout(function(){f._emit("play",v._id),f._loadQueue()},0)};n.state==="running"&&n.ctx.state!=="interrupted"?z():(f._playLock=!0,f.once("resume",z),f._clearTimer(v._id))}else{var de=function(){C.currentTime=E,C.muted=v._muted||f._muted||n._muted||C.muted,C.volume=v._volume*n.volume(),C.playbackRate=v._rate;try{var we=C.play();if(we&&typeof Promise<"u"&&(we instanceof Promise||typeof we.then=="function")?(f._playLock=!0,O(),we.then(function(){f._playLock=!1,C._unlocked=!0,h?f._loadQueue():f._emit("play",v._id)}).catch(function(){f._playLock=!1,f._emit("playerror",v._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction."),v._ended=!0,v._paused=!0})):h||(f._playLock=!1,O(),f._emit("play",v._id)),C.playbackRate=v._rate,C.paused){f._emit("playerror",v._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");return}u!=="__default"||v._loop?f._endTimers[v._id]=setTimeout(f._ended.bind(f,v),S):(f._endTimers[v._id]=function(){f._ended(v),C.removeEventListener("ended",f._endTimers[v._id],!1)},C.addEventListener("ended",f._endTimers[v._id],!1))}catch(Ne){f._emit("playerror",v._id,Ne)}};C.src==="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"&&(C.src=f._src,C.load());var $=window&&window.ejecta||!C.readyState&&n._navigator.isCocoonJS;if(C.readyState>=3||$)de();else{f._playLock=!0,f._state="loading";var ie=function(){f._state="loaded",de(),C.removeEventListener(n._canPlayEvent,ie,!1)};C.addEventListener(n._canPlayEvent,ie,!1),f._clearTimer(v._id)}}return v._id},pause:function(u){var h=this;if(h._state!=="loaded"||h._playLock)return h._queue.push({event:"pause",action:function(){h.pause(u)}}),h;for(var f=h._getSoundIds(u),m=0;m<f.length;m++){h._clearTimer(f[m]);var y=h._soundById(f[m]);if(y&&!y._paused&&(y._seek=h.seek(f[m]),y._rateSeek=0,y._paused=!0,h._stopFade(f[m]),y._node))if(h._webAudio){if(!y._node.bufferSource)continue;typeof y._node.bufferSource.stop>"u"?y._node.bufferSource.noteOff(0):y._node.bufferSource.stop(0),h._cleanBuffer(y._node)}else(!isNaN(y._node.duration)||y._node.duration===1/0)&&y._node.pause();arguments[1]||h._emit("pause",y?y._id:null)}return h},stop:function(u,h){var f=this;if(f._state!=="loaded"||f._playLock)return f._queue.push({event:"stop",action:function(){f.stop(u)}}),f;for(var m=f._getSoundIds(u),y=0;y<m.length;y++){f._clearTimer(m[y]);var g=f._soundById(m[y]);g&&(g._seek=g._start||0,g._rateSeek=0,g._paused=!0,g._ended=!0,f._stopFade(m[y]),g._node&&(f._webAudio?g._node.bufferSource&&(typeof g._node.bufferSource.stop>"u"?g._node.bufferSource.noteOff(0):g._node.bufferSource.stop(0),f._cleanBuffer(g._node)):(!isNaN(g._node.duration)||g._node.duration===1/0)&&(g._node.currentTime=g._start||0,g._node.pause(),g._node.duration===1/0&&f._clearSound(g._node))),h||f._emit("stop",g._id))}return f},mute:function(u,h){var f=this;if(f._state!=="loaded"||f._playLock)return f._queue.push({event:"mute",action:function(){f.mute(u,h)}}),f;if(typeof h>"u")if(typeof u=="boolean")f._muted=u;else return f._muted;for(var m=f._getSoundIds(h),y=0;y<m.length;y++){var g=f._soundById(m[y]);g&&(g._muted=u,g._interval&&f._stopFade(g._id),f._webAudio&&g._node?g._node.gain.setValueAtTime(u?0:g._volume,n.ctx.currentTime):g._node&&(g._node.muted=n._muted?!0:u),f._emit("mute",g._id))}return f},volume:function(){var u=this,h=arguments,f,m;if(h.length===0)return u._volume;if(h.length===1||h.length===2&&typeof h[1]>"u"){var y=u._getSoundIds(),g=y.indexOf(h[0]);g>=0?m=parseInt(h[0],10):f=parseFloat(h[0])}else h.length>=2&&(f=parseFloat(h[0]),m=parseInt(h[1],10));var v;if(typeof f<"u"&&f>=0&&f<=1){if(u._state!=="loaded"||u._playLock)return u._queue.push({event:"volume",action:function(){u.volume.apply(u,h)}}),u;typeof m>"u"&&(u._volume=f),m=u._getSoundIds(m);for(var b=0;b<m.length;b++)v=u._soundById(m[b]),v&&(v._volume=f,h[2]||u._stopFade(m[b]),u._webAudio&&v._node&&!v._muted?v._node.gain.setValueAtTime(f,n.ctx.currentTime):v._node&&!v._muted&&(v._node.volume=f*n.volume()),u._emit("volume",v._id))}else return v=m?u._soundById(m):u._sounds[0],v?v._volume:0;return u},fade:function(u,h,f,m){var y=this;if(y._state!=="loaded"||y._playLock)return y._queue.push({event:"fade",action:function(){y.fade(u,h,f,m)}}),y;u=Math.min(Math.max(0,parseFloat(u)),1),h=Math.min(Math.max(0,parseFloat(h)),1),f=parseFloat(f),y.volume(u,m);for(var g=y._getSoundIds(m),v=0;v<g.length;v++){var b=y._soundById(g[v]);if(b){if(m||y._stopFade(g[v]),y._webAudio&&!b._muted){var E=n.ctx.currentTime,T=E+f/1e3;b._volume=u,b._node.gain.setValueAtTime(u,E),b._node.gain.linearRampToValueAtTime(h,T)}y._startFadeInterval(b,u,h,f,g[v],typeof m>"u")}}return y},_startFadeInterval:function(u,h,f,m,y,g){var v=this,b=h,E=f-h,T=Math.abs(E/.01),S=Math.max(4,T>0?m/T:m),w=Date.now();u._fadeTo=f,u._interval=setInterval(function(){var D=(Date.now()-w)/m;w=Date.now(),b+=E*D,b=Math.round(b*100)/100,E<0?b=Math.max(f,b):b=Math.min(f,b),v._webAudio?u._volume=b:v.volume(b,u._id,!0),g&&(v._volume=b),(f<h&&b<=f||f>h&&b>=f)&&(clearInterval(u._interval),u._interval=null,u._fadeTo=null,v.volume(f,u._id),v._emit("fade",u._id))},S)},_stopFade:function(u){var h=this,f=h._soundById(u);return f&&f._interval&&(h._webAudio&&f._node.gain.cancelScheduledValues(n.ctx.currentTime),clearInterval(f._interval),f._interval=null,h.volume(f._fadeTo,u),f._fadeTo=null,h._emit("fade",u)),h},loop:function(){var u=this,h=arguments,f,m,y;if(h.length===0)return u._loop;if(h.length===1)if(typeof h[0]=="boolean")f=h[0],u._loop=f;else return y=u._soundById(parseInt(h[0],10)),y?y._loop:!1;else h.length===2&&(f=h[0],m=parseInt(h[1],10));for(var g=u._getSoundIds(m),v=0;v<g.length;v++)y=u._soundById(g[v]),y&&(y._loop=f,u._webAudio&&y._node&&y._node.bufferSource&&(y._node.bufferSource.loop=f,f&&(y._node.bufferSource.loopStart=y._start||0,y._node.bufferSource.loopEnd=y._stop,u.playing(g[v])&&(u.pause(g[v],!0),u.play(g[v],!0)))));return u},rate:function(){var u=this,h=arguments,f,m;if(h.length===0)m=u._sounds[0]._id;else if(h.length===1){var y=u._getSoundIds(),g=y.indexOf(h[0]);g>=0?m=parseInt(h[0],10):f=parseFloat(h[0])}else h.length===2&&(f=parseFloat(h[0]),m=parseInt(h[1],10));var v;if(typeof f=="number"){if(u._state!=="loaded"||u._playLock)return u._queue.push({event:"rate",action:function(){u.rate.apply(u,h)}}),u;typeof m>"u"&&(u._rate=f),m=u._getSoundIds(m);for(var b=0;b<m.length;b++)if(v=u._soundById(m[b]),v){u.playing(m[b])&&(v._rateSeek=u.seek(m[b]),v._playStart=u._webAudio?n.ctx.currentTime:v._playStart),v._rate=f,u._webAudio&&v._node&&v._node.bufferSource?v._node.bufferSource.playbackRate.setValueAtTime(f,n.ctx.currentTime):v._node&&(v._node.playbackRate=f);var E=u.seek(m[b]),T=(u._sprite[v._sprite][0]+u._sprite[v._sprite][1])/1e3-E,S=T*1e3/Math.abs(v._rate);(u._endTimers[m[b]]||!v._paused)&&(u._clearTimer(m[b]),u._endTimers[m[b]]=setTimeout(u._ended.bind(u,v),S)),u._emit("rate",v._id)}}else return v=u._soundById(m),v?v._rate:u._rate;return u},seek:function(){var u=this,h=arguments,f,m;if(h.length===0)u._sounds.length&&(m=u._sounds[0]._id);else if(h.length===1){var y=u._getSoundIds(),g=y.indexOf(h[0]);g>=0?m=parseInt(h[0],10):u._sounds.length&&(m=u._sounds[0]._id,f=parseFloat(h[0]))}else h.length===2&&(f=parseFloat(h[0]),m=parseInt(h[1],10));if(typeof m>"u")return 0;if(typeof f=="number"&&(u._state!=="loaded"||u._playLock))return u._queue.push({event:"seek",action:function(){u.seek.apply(u,h)}}),u;var v=u._soundById(m);if(v)if(typeof f=="number"&&f>=0){var b=u.playing(m);b&&u.pause(m,!0),v._seek=f,v._ended=!1,u._clearTimer(m),!u._webAudio&&v._node&&!isNaN(v._node.duration)&&(v._node.currentTime=f);var E=function(){b&&u.play(m,!0),u._emit("seek",m)};if(b&&!u._webAudio){var T=function(){u._playLock?setTimeout(T,0):E()};setTimeout(T,0)}else E()}else if(u._webAudio){var S=u.playing(m)?n.ctx.currentTime-v._playStart:0,w=v._rateSeek?v._rateSeek-v._seek:0;return v._seek+(w+S*Math.abs(v._rate))}else return v._node.currentTime;return u},playing:function(u){var h=this;if(typeof u=="number"){var f=h._soundById(u);return f?!f._paused:!1}for(var m=0;m<h._sounds.length;m++)if(!h._sounds[m]._paused)return!0;return!1},duration:function(u){var h=this,f=h._duration,m=h._soundById(u);return m&&(f=h._sprite[m._sprite][1]/1e3),f},state:function(){return this._state},unload:function(){for(var u=this,h=u._sounds,f=0;f<h.length;f++)h[f]._paused||u.stop(h[f]._id),u._webAudio||(u._clearSound(h[f]._node),h[f]._node.removeEventListener("error",h[f]._errorFn,!1),h[f]._node.removeEventListener(n._canPlayEvent,h[f]._loadFn,!1),h[f]._node.removeEventListener("ended",h[f]._endFn,!1),n._releaseHtml5Audio(h[f]._node)),delete h[f]._node,u._clearTimer(h[f]._id);var m=n._howls.indexOf(u);m>=0&&n._howls.splice(m,1);var y=!0;for(f=0;f<n._howls.length;f++)if(n._howls[f]._src===u._src||u._src.indexOf(n._howls[f]._src)>=0){y=!1;break}return i&&y&&delete i[u._src],n.noAudio=!1,u._state="unloaded",u._sounds=[],u=null,null},on:function(u,h,f,m){var y=this,g=y["_on"+u];return typeof h=="function"&&g.push(m?{id:f,fn:h,once:m}:{id:f,fn:h}),y},off:function(u,h,f){var m=this,y=m["_on"+u],g=0;if(typeof h=="number"&&(f=h,h=null),h||f)for(g=0;g<y.length;g++){var v=f===y[g].id;if(h===y[g].fn&&v||!h&&v){y.splice(g,1);break}}else if(u)m["_on"+u]=[];else{var b=Object.keys(m);for(g=0;g<b.length;g++)b[g].indexOf("_on")===0&&Array.isArray(m[b[g]])&&(m[b[g]]=[])}return m},once:function(u,h,f){var m=this;return m.on(u,h,f,1),m},_emit:function(u,h,f){for(var m=this,y=m["_on"+u],g=y.length-1;g>=0;g--)(!y[g].id||y[g].id===h||u==="load")&&(setTimeout((function(v){v.call(this,h,f)}).bind(m,y[g].fn),0),y[g].once&&m.off(u,y[g].fn,y[g].id));return m._loadQueue(u),m},_loadQueue:function(u){var h=this;if(h._queue.length>0){var f=h._queue[0];f.event===u&&(h._queue.shift(),h._loadQueue()),u||f.action()}return h},_ended:function(u){var h=this,f=u._sprite;if(!h._webAudio&&u._node&&!u._node.paused&&!u._node.ended&&u._node.currentTime<u._stop)return setTimeout(h._ended.bind(h,u),100),h;var m=!!(u._loop||h._sprite[f][2]);if(h._emit("end",u._id),!h._webAudio&&m&&h.stop(u._id,!0).play(u._id),h._webAudio&&m){h._emit("play",u._id),u._seek=u._start||0,u._rateSeek=0,u._playStart=n.ctx.currentTime;var y=(u._stop-u._start)*1e3/Math.abs(u._rate);h._endTimers[u._id]=setTimeout(h._ended.bind(h,u),y)}return h._webAudio&&!m&&(u._paused=!0,u._ended=!0,u._seek=u._start||0,u._rateSeek=0,h._clearTimer(u._id),h._cleanBuffer(u._node),n._autoSuspend()),!h._webAudio&&!m&&h.stop(u._id,!0),h},_clearTimer:function(u){var h=this;if(h._endTimers[u]){if(typeof h._endTimers[u]!="function")clearTimeout(h._endTimers[u]);else{var f=h._soundById(u);f&&f._node&&f._node.removeEventListener("ended",h._endTimers[u],!1)}delete h._endTimers[u]}return h},_soundById:function(u){for(var h=this,f=0;f<h._sounds.length;f++)if(u===h._sounds[f]._id)return h._sounds[f];return null},_inactiveSound:function(){var u=this;u._drain();for(var h=0;h<u._sounds.length;h++)if(u._sounds[h]._ended)return u._sounds[h].reset();return new s(u)},_drain:function(){var u=this,h=u._pool,f=0,m=0;if(!(u._sounds.length<h)){for(m=0;m<u._sounds.length;m++)u._sounds[m]._ended&&f++;for(m=u._sounds.length-1;m>=0;m--){if(f<=h)return;u._sounds[m]._ended&&(u._webAudio&&u._sounds[m]._node&&u._sounds[m]._node.disconnect(0),u._sounds.splice(m,1),f--)}}},_getSoundIds:function(u){var h=this;if(typeof u>"u"){for(var f=[],m=0;m<h._sounds.length;m++)f.push(h._sounds[m]._id);return f}else return[u]},_refreshBuffer:function(u){var h=this;return u._node.bufferSource=n.ctx.createBufferSource(),u._node.bufferSource.buffer=i[h._src],u._panner?u._node.bufferSource.connect(u._panner):u._node.bufferSource.connect(u._node),u._node.bufferSource.loop=u._loop,u._loop&&(u._node.bufferSource.loopStart=u._start||0,u._node.bufferSource.loopEnd=u._stop||0),u._node.bufferSource.playbackRate.setValueAtTime(u._rate,n.ctx.currentTime),h},_cleanBuffer:function(u){var h=this,f=n._navigator&&n._navigator.vendor.indexOf("Apple")>=0;if(!u.bufferSource)return h;if(n._scratchBuffer&&u.bufferSource&&(u.bufferSource.onended=null,u.bufferSource.disconnect(0),f))try{u.bufferSource.buffer=n._scratchBuffer}catch{}return u.bufferSource=null,h},_clearSound:function(u){var h=/MSIE |Trident\//.test(n._navigator&&n._navigator.userAgent);h||(u.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA")}};var s=function(u){this._parent=u,this.init()};s.prototype={init:function(){var u=this,h=u._parent;return u._muted=h._muted,u._loop=h._loop,u._volume=h._volume,u._rate=h._rate,u._seek=0,u._paused=!0,u._ended=!0,u._sprite="__default",u._id=++n._counter,h._sounds.push(u),u.create(),u},create:function(){var u=this,h=u._parent,f=n._muted||u._muted||u._parent._muted?0:u._volume;return h._webAudio?(u._node=typeof n.ctx.createGain>"u"?n.ctx.createGainNode():n.ctx.createGain(),u._node.gain.setValueAtTime(f,n.ctx.currentTime),u._node.paused=!0,u._node.connect(n.masterGain)):n.noAudio||(u._node=n._obtainHtml5Audio(),u._errorFn=u._errorListener.bind(u),u._node.addEventListener("error",u._errorFn,!1),u._loadFn=u._loadListener.bind(u),u._node.addEventListener(n._canPlayEvent,u._loadFn,!1),u._endFn=u._endListener.bind(u),u._node.addEventListener("ended",u._endFn,!1),u._node.src=h._src,u._node.preload=h._preload===!0?"auto":h._preload,u._node.volume=f*n.volume(),u._node.load()),u},reset:function(){var u=this,h=u._parent;return u._muted=h._muted,u._loop=h._loop,u._volume=h._volume,u._rate=h._rate,u._seek=0,u._rateSeek=0,u._paused=!0,u._ended=!0,u._sprite="__default",u._id=++n._counter,u},_errorListener:function(){var u=this;u._parent._emit("loaderror",u._id,u._node.error?u._node.error.code:0),u._node.removeEventListener("error",u._errorFn,!1)},_loadListener:function(){var u=this,h=u._parent;h._duration=Math.ceil(u._node.duration*10)/10,Object.keys(h._sprite).length===0&&(h._sprite={__default:[0,h._duration*1e3]}),h._state!=="loaded"&&(h._state="loaded",h._emit("load"),h._loadQueue()),u._node.removeEventListener(n._canPlayEvent,u._loadFn,!1)},_endListener:function(){var u=this,h=u._parent;h._duration===1/0&&(h._duration=Math.ceil(u._node.duration*10)/10,h._sprite.__default[1]===1/0&&(h._sprite.__default[1]=h._duration*1e3),h._ended(u)),u._node.removeEventListener("ended",u._endFn,!1)}};var i={},o=function(u){var h=u._src;if(i[h]){u._duration=i[h].duration,c(u);return}if(/^data:[^;]+;base64,/.test(h)){for(var f=atob(h.split(",")[1]),m=new Uint8Array(f.length),y=0;y<f.length;++y)m[y]=f.charCodeAt(y);l(m.buffer,u)}else{var g=new XMLHttpRequest;g.open(u._xhr.method,h,!0),g.withCredentials=u._xhr.withCredentials,g.responseType="arraybuffer",u._xhr.headers&&Object.keys(u._xhr.headers).forEach(function(v){g.setRequestHeader(v,u._xhr.headers[v])}),g.onload=function(){var v=(g.status+"")[0];if(v!=="0"&&v!=="2"&&v!=="3"){u._emit("loaderror",null,"Failed loading audio file with status: "+g.status+".");return}l(g.response,u)},g.onerror=function(){u._webAudio&&(u._html5=!0,u._webAudio=!1,u._sounds=[],delete i[h],u.load())},a(g)}},a=function(u){try{u.send()}catch{u.onerror()}},l=function(u,h){var f=function(){h._emit("loaderror",null,"Decoding audio data failed.")},m=function(y){y&&h._sounds.length>0?(i[h._src]=y,c(h,y)):f()};typeof Promise<"u"&&n.ctx.decodeAudioData.length===1?n.ctx.decodeAudioData(u).then(m).catch(f):n.ctx.decodeAudioData(u,m,f)},c=function(u,h){h&&!u._duration&&(u._duration=h.duration),Object.keys(u._sprite).length===0&&(u._sprite={__default:[0,u._duration*1e3]}),u._state!=="loaded"&&(u._state="loaded",u._emit("load"),u._loadQueue())},d=function(){if(n.usingWebAudio){try{typeof AudioContext<"u"?n.ctx=new AudioContext:typeof webkitAudioContext<"u"?n.ctx=new webkitAudioContext:n.usingWebAudio=!1}catch{n.usingWebAudio=!1}n.ctx||(n.usingWebAudio=!1);var u=/iP(hone|od|ad)/.test(n._navigator&&n._navigator.platform),h=n._navigator&&n._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),f=h?parseInt(h[1],10):null;if(u&&f&&f<9){var m=/safari/.test(n._navigator&&n._navigator.userAgent.toLowerCase());n._navigator&&!m&&(n.usingWebAudio=!1)}n.usingWebAudio&&(n.masterGain=typeof n.ctx.createGain>"u"?n.ctx.createGainNode():n.ctx.createGain(),n.masterGain.gain.setValueAtTime(n._muted?0:n._volume,n.ctx.currentTime),n.masterGain.connect(n.ctx.destination)),n._setup()}};t.Howler=n,t.Howl=r,typeof Kn<"u"?(Kn.HowlerGlobal=e,Kn.Howler=n,Kn.Howl=r,Kn.Sound=s):typeof window<"u"&&(window.HowlerGlobal=e,window.Howler=n,window.Howl=r,window.Sound=s)})();/*!
 *  Spatial Plugin - Adds support for stereo and 3D audio where Web Audio is supported.
 *  
 *  howler.js v2.2.4
 *  howlerjs.com
 *
 *  (c) 2013-2020, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */(function(){HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(n){var r=this;if(!r.ctx||!r.ctx.listener)return r;for(var s=r._howls.length-1;s>=0;s--)r._howls[s].stereo(n);return r},HowlerGlobal.prototype.pos=function(n,r,s){var i=this;if(!i.ctx||!i.ctx.listener)return i;if(r=typeof r!="number"?i._pos[1]:r,s=typeof s!="number"?i._pos[2]:s,typeof n=="number")i._pos=[n,r,s],typeof i.ctx.listener.positionX<"u"?(i.ctx.listener.positionX.setTargetAtTime(i._pos[0],Howler.ctx.currentTime,.1),i.ctx.listener.positionY.setTargetAtTime(i._pos[1],Howler.ctx.currentTime,.1),i.ctx.listener.positionZ.setTargetAtTime(i._pos[2],Howler.ctx.currentTime,.1)):i.ctx.listener.setPosition(i._pos[0],i._pos[1],i._pos[2]);else return i._pos;return i},HowlerGlobal.prototype.orientation=function(n,r,s,i,o,a){var l=this;if(!l.ctx||!l.ctx.listener)return l;var c=l._orientation;if(r=typeof r!="number"?c[1]:r,s=typeof s!="number"?c[2]:s,i=typeof i!="number"?c[3]:i,o=typeof o!="number"?c[4]:o,a=typeof a!="number"?c[5]:a,typeof n=="number")l._orientation=[n,r,s,i,o,a],typeof l.ctx.listener.forwardX<"u"?(l.ctx.listener.forwardX.setTargetAtTime(n,Howler.ctx.currentTime,.1),l.ctx.listener.forwardY.setTargetAtTime(r,Howler.ctx.currentTime,.1),l.ctx.listener.forwardZ.setTargetAtTime(s,Howler.ctx.currentTime,.1),l.ctx.listener.upX.setTargetAtTime(i,Howler.ctx.currentTime,.1),l.ctx.listener.upY.setTargetAtTime(o,Howler.ctx.currentTime,.1),l.ctx.listener.upZ.setTargetAtTime(a,Howler.ctx.currentTime,.1)):l.ctx.listener.setOrientation(n,r,s,i,o,a);else return c;return l},Howl.prototype.init=function(n){return function(r){var s=this;return s._orientation=r.orientation||[1,0,0],s._stereo=r.stereo||null,s._pos=r.pos||null,s._pannerAttr={coneInnerAngle:typeof r.coneInnerAngle<"u"?r.coneInnerAngle:360,coneOuterAngle:typeof r.coneOuterAngle<"u"?r.coneOuterAngle:360,coneOuterGain:typeof r.coneOuterGain<"u"?r.coneOuterGain:0,distanceModel:typeof r.distanceModel<"u"?r.distanceModel:"inverse",maxDistance:typeof r.maxDistance<"u"?r.maxDistance:1e4,panningModel:typeof r.panningModel<"u"?r.panningModel:"HRTF",refDistance:typeof r.refDistance<"u"?r.refDistance:1,rolloffFactor:typeof r.rolloffFactor<"u"?r.rolloffFactor:1},s._onstereo=r.onstereo?[{fn:r.onstereo}]:[],s._onpos=r.onpos?[{fn:r.onpos}]:[],s._onorientation=r.onorientation?[{fn:r.onorientation}]:[],n.call(this,r)}}(Howl.prototype.init),Howl.prototype.stereo=function(n,r){var s=this;if(!s._webAudio)return s;if(s._state!=="loaded")return s._queue.push({event:"stereo",action:function(){s.stereo(n,r)}}),s;var i=typeof Howler.ctx.createStereoPanner>"u"?"spatial":"stereo";if(typeof r>"u")if(typeof n=="number")s._stereo=n,s._pos=[n,0,0];else return s._stereo;for(var o=s._getSoundIds(r),a=0;a<o.length;a++){var l=s._soundById(o[a]);if(l)if(typeof n=="number")l._stereo=n,l._pos=[n,0,0],l._node&&(l._pannerAttr.panningModel="equalpower",(!l._panner||!l._panner.pan)&&e(l,i),i==="spatial"?typeof l._panner.positionX<"u"?(l._panner.positionX.setValueAtTime(n,Howler.ctx.currentTime),l._panner.positionY.setValueAtTime(0,Howler.ctx.currentTime),l._panner.positionZ.setValueAtTime(0,Howler.ctx.currentTime)):l._panner.setPosition(n,0,0):l._panner.pan.setValueAtTime(n,Howler.ctx.currentTime)),s._emit("stereo",l._id);else return l._stereo}return s},Howl.prototype.pos=function(n,r,s,i){var o=this;if(!o._webAudio)return o;if(o._state!=="loaded")return o._queue.push({event:"pos",action:function(){o.pos(n,r,s,i)}}),o;if(r=typeof r!="number"?0:r,s=typeof s!="number"?-.5:s,typeof i>"u")if(typeof n=="number")o._pos=[n,r,s];else return o._pos;for(var a=o._getSoundIds(i),l=0;l<a.length;l++){var c=o._soundById(a[l]);if(c)if(typeof n=="number")c._pos=[n,r,s],c._node&&((!c._panner||c._panner.pan)&&e(c,"spatial"),typeof c._panner.positionX<"u"?(c._panner.positionX.setValueAtTime(n,Howler.ctx.currentTime),c._panner.positionY.setValueAtTime(r,Howler.ctx.currentTime),c._panner.positionZ.setValueAtTime(s,Howler.ctx.currentTime)):c._panner.setPosition(n,r,s)),o._emit("pos",c._id);else return c._pos}return o},Howl.prototype.orientation=function(n,r,s,i){var o=this;if(!o._webAudio)return o;if(o._state!=="loaded")return o._queue.push({event:"orientation",action:function(){o.orientation(n,r,s,i)}}),o;if(r=typeof r!="number"?o._orientation[1]:r,s=typeof s!="number"?o._orientation[2]:s,typeof i>"u")if(typeof n=="number")o._orientation=[n,r,s];else return o._orientation;for(var a=o._getSoundIds(i),l=0;l<a.length;l++){var c=o._soundById(a[l]);if(c)if(typeof n=="number")c._orientation=[n,r,s],c._node&&(c._panner||(c._pos||(c._pos=o._pos||[0,0,-.5]),e(c,"spatial")),typeof c._panner.orientationX<"u"?(c._panner.orientationX.setValueAtTime(n,Howler.ctx.currentTime),c._panner.orientationY.setValueAtTime(r,Howler.ctx.currentTime),c._panner.orientationZ.setValueAtTime(s,Howler.ctx.currentTime)):c._panner.setOrientation(n,r,s)),o._emit("orientation",c._id);else return c._orientation}return o},Howl.prototype.pannerAttr=function(){var n=this,r=arguments,s,i,o;if(!n._webAudio)return n;if(r.length===0)return n._pannerAttr;if(r.length===1)if(typeof r[0]=="object")s=r[0],typeof i>"u"&&(s.pannerAttr||(s.pannerAttr={coneInnerAngle:s.coneInnerAngle,coneOuterAngle:s.coneOuterAngle,coneOuterGain:s.coneOuterGain,distanceModel:s.distanceModel,maxDistance:s.maxDistance,refDistance:s.refDistance,rolloffFactor:s.rolloffFactor,panningModel:s.panningModel}),n._pannerAttr={coneInnerAngle:typeof s.pannerAttr.coneInnerAngle<"u"?s.pannerAttr.coneInnerAngle:n._coneInnerAngle,coneOuterAngle:typeof s.pannerAttr.coneOuterAngle<"u"?s.pannerAttr.coneOuterAngle:n._coneOuterAngle,coneOuterGain:typeof s.pannerAttr.coneOuterGain<"u"?s.pannerAttr.coneOuterGain:n._coneOuterGain,distanceModel:typeof s.pannerAttr.distanceModel<"u"?s.pannerAttr.distanceModel:n._distanceModel,maxDistance:typeof s.pannerAttr.maxDistance<"u"?s.pannerAttr.maxDistance:n._maxDistance,refDistance:typeof s.pannerAttr.refDistance<"u"?s.pannerAttr.refDistance:n._refDistance,rolloffFactor:typeof s.pannerAttr.rolloffFactor<"u"?s.pannerAttr.rolloffFactor:n._rolloffFactor,panningModel:typeof s.pannerAttr.panningModel<"u"?s.pannerAttr.panningModel:n._panningModel});else return o=n._soundById(parseInt(r[0],10)),o?o._pannerAttr:n._pannerAttr;else r.length===2&&(s=r[0],i=parseInt(r[1],10));for(var a=n._getSoundIds(i),l=0;l<a.length;l++)if(o=n._soundById(a[l]),o){var c=o._pannerAttr;c={coneInnerAngle:typeof s.coneInnerAngle<"u"?s.coneInnerAngle:c.coneInnerAngle,coneOuterAngle:typeof s.coneOuterAngle<"u"?s.coneOuterAngle:c.coneOuterAngle,coneOuterGain:typeof s.coneOuterGain<"u"?s.coneOuterGain:c.coneOuterGain,distanceModel:typeof s.distanceModel<"u"?s.distanceModel:c.distanceModel,maxDistance:typeof s.maxDistance<"u"?s.maxDistance:c.maxDistance,refDistance:typeof s.refDistance<"u"?s.refDistance:c.refDistance,rolloffFactor:typeof s.rolloffFactor<"u"?s.rolloffFactor:c.rolloffFactor,panningModel:typeof s.panningModel<"u"?s.panningModel:c.panningModel};var d=o._panner;d||(o._pos||(o._pos=n._pos||[0,0,-.5]),e(o,"spatial"),d=o._panner),d.coneInnerAngle=c.coneInnerAngle,d.coneOuterAngle=c.coneOuterAngle,d.coneOuterGain=c.coneOuterGain,d.distanceModel=c.distanceModel,d.maxDistance=c.maxDistance,d.refDistance=c.refDistance,d.rolloffFactor=c.rolloffFactor,d.panningModel=c.panningModel}return n},Sound.prototype.init=function(n){return function(){var r=this,s=r._parent;r._orientation=s._orientation,r._stereo=s._stereo,r._pos=s._pos,r._pannerAttr=s._pannerAttr,n.call(this),r._stereo?s.stereo(r._stereo):r._pos&&s.pos(r._pos[0],r._pos[1],r._pos[2],r._id)}}(Sound.prototype.init),Sound.prototype.reset=function(n){return function(){var r=this,s=r._parent;return r._orientation=s._orientation,r._stereo=s._stereo,r._pos=s._pos,r._pannerAttr=s._pannerAttr,r._stereo?s.stereo(r._stereo):r._pos?s.pos(r._pos[0],r._pos[1],r._pos[2],r._id):r._panner&&(r._panner.disconnect(0),r._panner=void 0,s._refreshBuffer(r)),n.call(this)}}(Sound.prototype.reset);var e=function(n,r){r=r||"spatial",r==="spatial"?(n._panner=Howler.ctx.createPanner(),n._panner.coneInnerAngle=n._pannerAttr.coneInnerAngle,n._panner.coneOuterAngle=n._pannerAttr.coneOuterAngle,n._panner.coneOuterGain=n._pannerAttr.coneOuterGain,n._panner.distanceModel=n._pannerAttr.distanceModel,n._panner.maxDistance=n._pannerAttr.maxDistance,n._panner.refDistance=n._pannerAttr.refDistance,n._panner.rolloffFactor=n._pannerAttr.rolloffFactor,n._panner.panningModel=n._pannerAttr.panningModel,typeof n._panner.positionX<"u"?(n._panner.positionX.setValueAtTime(n._pos[0],Howler.ctx.currentTime),n._panner.positionY.setValueAtTime(n._pos[1],Howler.ctx.currentTime),n._panner.positionZ.setValueAtTime(n._pos[2],Howler.ctx.currentTime)):n._panner.setPosition(n._pos[0],n._pos[1],n._pos[2]),typeof n._panner.orientationX<"u"?(n._panner.orientationX.setValueAtTime(n._orientation[0],Howler.ctx.currentTime),n._panner.orientationY.setValueAtTime(n._orientation[1],Howler.ctx.currentTime),n._panner.orientationZ.setValueAtTime(n._orientation[2],Howler.ctx.currentTime)):n._panner.setOrientation(n._orientation[0],n._orientation[1],n._orientation[2])):(n._panner=Howler.ctx.createStereoPanner(),n._panner.pan.setValueAtTime(n._stereo,Howler.ctx.currentTime)),n._panner.connect(n._node),n._paused||n._parent.pause(n._id,!0).play(n._id,!0)}})()})(yf);const Ky={formatTime(t){const e=Math.floor(t/60)||0,n=Math.round(t-e*60)||0;return`${e}:${n<10?"0":""}${n}`}},zy=hm("player",{state:()=>({currentSong:{},sound:{},seek:"00:00",duration:"00:00",playerProgress:"0%"}),actions:{async newSong(t){this.sound instanceof yf.Howl&&this.sound.unload(),this.currentSong=t,this.sound=new yf.Howl({src:[t.url],html5:!0}),this.sound.play(),this.sound.on("play",()=>{requestAnimationFrame(this.progress)})},async toggleAudio(){this.sound.playing&&(this.sound.playing()?this.sound.pause():this.sound.play())},progress(){this.seek=Ky.formatTime(this.sound.seek()),this.duration=Ky.formatTime(this.sound.duration()),this.playerProgress=`${this.sound.seek()/this.sound.duration()*100}%`,this.sound.playing()&&requestAnimationFrame(this.progress)},updateSeek(t){if(!this.sound.playing)return;const{x:e,width:n}=t.target.getBoundingClientRect(),s=(t.clientX-e)/n,i=this.sound.duration()*s;this.sound.seek(i),this.sound.once("seek",this.progress)}},getters:{isPlaying(t){return t.sound.playing?t.sound.playing():!1}}}),Si=(t,e)=>{const n=t.__vccOpts||t;for(const[r,s]of e)n[r]=s;return n},CM={name:"AppPlayer",methods:{...dm(zy,["toggleAudio","updateSeek"])},computed:{...TI(zy,["isPlaying","duration","seek","playerProgress","currentSong"])}},OM={class:"fixed bottom-0 left-0 w-full bg-white px-4 py-2"},kM={key:0,class:"text-center"},NM={class:"song-title font-bold"},xM={class:"song-artist"},DM={class:"flex flex-nowrap items-center gap-4"},VM={class:"player-currenttime"},LM=oe("i",{class:"fas fa-circle"},null,-1),MM=[LM],FM={class:"player-duration"};function UM(t,e,n,r,s,i){return Ct(),pn("div",OM,[t.currentSong.modifiedName?(Ct(),pn("div",kM,[oe("span",NM,_r(t.currentSong.modifiedName),1),oa(" by "),oe("span",xM,_r(t.currentSong.displayName),1)])):lm("",!0),oe("div",DM,[oe("button",{type:"button",onClick:e[0]||(e[0]=Js((...o)=>t.toggleAudio&&t.toggleAudio(...o),["prevent"]))},[oe("i",{class:Tr(["fa text-xl text-gray-500",{"fa-play":!t.isPlaying,"fa-pause":t.isPlaying}])},null,2)]),oe("div",VM,_r(t.seek),1),oe("div",{class:"relative h-2 w-full cursor-pointer rounded bg-gray-200",onClick:e[1]||(e[1]=Js((...o)=>t.updateSeek&&t.updateSeek(...o),["prevent"]))},[oe("span",{class:"absolute -top-2.5 -ml-2.5 text-lg text-gray-800",style:ya({left:t.playerProgress})},MM,4),oe("span",{class:"block h-2 rounded bg-gradient-to-r from-green-500 to-green-400",style:ya({width:t.playerProgress})},null,4)]),oe("div",FM,_r(t.duration),1)])])}const $M=Si(CM,[["render",UM]]),vf=hm("modal",{state:()=>({isOpen:!1}),getters:{hiddenClass(){return this.isOpen?"":"hidden"}}}),Tl=hm("user",{state:()=>({userLoggedIn:!1}),actions:{async register(t){const e=await IO(t.email,t.password);await iL(uw(dh,"users",e.user.uid),{name:t.name,email:t.email,age:t.age,country:t.country}),await wO(e.user,{displayName:t.name}),this.userLoggedIn=!0},async login(t){await TO(Xu,t.email,t.password),this.userLoggedIn=!0},async logout(){await RO(Xu),this.userLoggedIn=!1}}}),BM={name:"AppHeader",computed:{...zP(vf,Tl),currentLocale(){return this.$i18n.locale==="en"?"English":"Chinese"}},methods:{toggleAuthModal(){this.modalStore.isOpen=!this.modalStore.isOpen},signOut(){this.userStore.logout(),this.$route.meta.requiresAuth!==!0&&this.$router.push({name:"home"})},changeLocale(){this.currentLocale==="English"?this.$i18n.locale="cn":this.$i18n.locale="en"}}},jM={id:"header",class:"bg-gray-700"},qM={class:"container mx-auto flex items-center justify-start px-4 py-5"},GM={class:"flex flex-grow items-center"},HM={class:"mt-1 flex flex-row"},WM={key:0},KM={class:"ml-auto"};function zM(t,e,n,r,s,i){const o=mn("RouterLink");return Ct(),pn("header",jM,[oe("nav",qM,[Ce(o,{class:"mr-4 text-2xl font-bold uppercase text-white",to:{name:"home"},"exact-active-class":"no-active"},{default:Vn(()=>[oa(" Music ")]),_:1}),oe("div",GM,[oe("ul",HM,[oe("li",null,[Ce(o,{class:"px-2 text-white",to:{name:"about"}},{default:Vn(()=>[oa("About")]),_:1})]),t.userStore.userLoggedIn?(Ct(),pn(Mt,{key:1},[oe("li",null,[Ce(o,{class:"px-2 text-white",to:{name:"manage"}},{default:Vn(()=>[oa("Manage")]),_:1})]),oe("li",null,[oe("a",{class:"px-2 text-white",href:"#",onClick:e[1]||(e[1]=Js((...a)=>i.signOut&&i.signOut(...a),["prevent"]))},"Logout")])],64)):(Ct(),pn("li",WM,[oe("a",{class:"px-2 text-white",href:"#",onClick:e[0]||(e[0]=Js((...a)=>i.toggleAuthModal&&i.toggleAuthModal(...a),["prevent"]))},"Login / Register")]))]),oe("ul",KM,[oe("li",null,[oe("a",{class:"px-2 text-white",href:"#",onClick:e[2]||(e[2]=Js((...a)=>i.changeLocale&&i.changeLocale(...a),["prevent"]))},_r(i.currentLocale),1)])])])])])}const QM=Si(BM,[["render",zM]]),YM={name:"LoginForm",data(){return{loginSchema:{email:"required|email|min:3|max:100",password:"required|min:9|max:50|excluded:password"},loginInSubmission:!1,loginShowAlert:!1,loginAlertVariant:"bg-blue-500",loginAlertMessage:"Please wait! We are logging you in."}},methods:{...dm(Tl,{authenticate:"login"}),async login(t){this.loginInSubmission=!0,this.loginShowAlert=!0,this.loginAlertVariant="bg-blue-500",this.loginAlertMessage="Please wait! We are logging you in.";try{await this.authenticate(t)}catch(e){this.loginInSubmission=!1,this.loginShowAlert=!0,this.loginAlertVariant="bg-red-500";const n=JSON.parse(e.message);this.loginAlertMessage=n.error.message;return}this.loginAlertVariant="bg-green-500",this.loginAlertMessage="You are now logged in.",window.location.reload()}}},XM={class:"mb-3"},JM=oe("label",{class:"mb-2 inline-block"},"Email",-1),ZM={class:"mb-3"},eF=oe("label",{class:"mb-2 inline-block"},"Password",-1),tF=["disabled"];function nF(t,e,n,r,s,i){const o=mn("VeeField"),a=mn("ErrorMessage"),l=mn("VeeForm");return Ct(),pn(Mt,null,[s.loginShowAlert?(Ct(),pn("div",{key:0,class:Tr(["mb-4 rounded p-4 text-center font-bold text-white",s.loginAlertVariant])},_r(s.loginAlertMessage),3)):lm("",!0),Ce(l,{"validation-schema":s.loginSchema,onSubmit:i.login},{default:Vn(()=>[oe("div",XM,[JM,Ce(o,{name:"email",type:"email",class:"block w-full rounded border border-gray-300 px-3 py-1.5 text-gray-800 transition duration-500 focus:border-black focus:outline-none",placeholder:"Enter Email"}),Ce(a,{class:"text-red-600",name:"email"})]),oe("div",ZM,[eF,Ce(o,{name:"password",type:"password",class:"block w-full rounded border border-gray-300 px-3 py-1.5 text-gray-800 transition duration-500 focus:border-black focus:outline-none",placeholder:"Password",autocomplete:"on"})]),Ce(a,{class:"text-red-600",name:"password"}),oe("button",{type:"submit",class:"block w-full rounded bg-purple-600 px-3 py-1.5 text-white transition hover:bg-purple-700",disabled:s.loginInSubmission}," Submit ",8,tF)]),_:1},8,["validation-schema","onSubmit"])],64)}const rF=Si(YM,[["render",nF]]),sF={name:"RegisterForm",data(){return{schema:{name:"required|min:3|max:50|alpha_spaces",email:"required|email|min:3|max:100",age:"required|min_value:18|max_value:100",password:"required|min:9|max:50|excluded:password",confirmPassword:"passwords_mismatch:@password",country:"required|country_excluded:Antarctica",tos:"tos"},userData:{country:"USA"},regInSubmission:!1,regShowAlert:!1,regAlertVariant:"bg-blue-500",regAlertMessage:"Please wait! Your account is being created."}},methods:{...dm(Tl,{createUser:"register"}),async register(t){this.regShowAlert=!0,this.regInSubmission=!0,this.regAlertVariant="bg-blue-500",this.regAlertMessage="Please wait! Your account is being created.";try{await this.createUser(t)}catch(e){this.regInSubmission=!1,this.regAlertVariant="bg-red-500",this.regAlertMessage=e.message;return}this.regAlertVariant="bg-green-500",this.regAlertMessage="Account created successfully!",window.location.reload()}}},iF={class:"mb-3"},oF=oe("label",{class:"mb-2 inline-block"},"Name",-1),aF={class:"mb-3"},lF=oe("label",{class:"mb-2 inline-block"},"Email",-1),uF={class:"mb-3"},cF=oe("label",{class:"mb-2 inline-block"},"Age",-1),hF={class:"mb-3"},dF=oe("label",{class:"mb-2 inline-block"},"Password",-1),fF={class:"mb-3"},mF=oe("label",{class:"mb-2 inline-block"},"Confirm Password",-1),pF={class:"mb-3"},_F=oe("label",{class:"mb-2 inline-block"},"Country",-1),gF=oe("option",{value:"USA"},"USA",-1),yF=oe("option",{value:"Mexico"},"Mexico",-1),vF=oe("option",{value:"Germany"},"Germany",-1),EF=oe("option",{value:"Antarctica"},"Antarctica",-1),IF={class:"mb-3 pl-6"},TF={href:"#"},bF=["disabled"];function wF(t,e,n,r,s,i){const o=mn("VeeField"),a=mn("ErrorMessage"),l=mn("i18n-t"),c=mn("VeeForm");return Ct(),pn(Mt,null,[s.regShowAlert?(Ct(),pn("div",{key:0,class:Tr(["mb-4 rounded p-4 text-center font-bold text-white",s.regAlertVariant])},_r(s.regAlertMessage),3)):lm("",!0),Ce(c,{"validation-schema":s.schema,onSubmit:i.register,"initial-values":s.userData},{default:Vn(()=>[oe("div",iF,[oF,Ce(o,{name:"name",type:"text",class:"block w-full rounded border border-gray-300 px-3 py-1.5 text-gray-800 transition duration-500 focus:border-black focus:outline-none",placeholder:"Enter Name"}),Ce(a,{class:"text-red-600",name:"name"})]),oe("div",aF,[lF,Ce(o,{name:"email",type:"email",class:"block w-full rounded border border-gray-300 px-3 py-1.5 text-gray-800 transition duration-500 focus:border-black focus:outline-none",placeholder:"Enter Email"}),Ce(a,{class:"text-red-600",name:"email"})]),oe("div",uF,[cF,Ce(o,{name:"age",type:"number",class:"block w-full rounded border border-gray-300 px-3 py-1.5 text-gray-800 transition duration-500 focus:border-black focus:outline-none"}),Ce(a,{class:"text-red-600",name:"age"})]),oe("div",hF,[dF,Ce(o,{name:"password",bails:!1},{default:Vn(({field:d,errors:u})=>[oe("input",dI({type:"password",class:"block w-full rounded border border-gray-300 px-3 py-1.5 text-gray-800 transition duration-500 focus:border-black focus:outline-none",placeholder:"Password"},d),null,16),(Ct(!0),pn(Mt,null,OR(u,h=>(Ct(),pn("div",{class:"text-red-600",key:h},_r(h),1))),128))]),_:1})]),oe("div",fF,[mF,Ce(o,{name:"confirmPassword",type:"password",class:"block w-full rounded border border-gray-300 px-3 py-1.5 text-gray-800 transition duration-500 focus:border-black focus:outline-none",placeholder:"Confirm Password"}),Ce(a,{class:"text-red-600",name:"confirmPassword"})]),oe("div",pF,[_F,Ce(o,{as:"select",name:"country",class:"block w-full rounded border border-gray-300 px-3 py-1.5 text-gray-800 transition duration-500 focus:border-black focus:outline-none"},{default:Vn(()=>[gF,yF,vF,EF]),_:1}),Ce(a,{class:"text-red-600",name:"country"})]),oe("div",IF,[Ce(o,{name:"tos",value:"1",type:"checkbox",class:"float-left -ml-6 mt-1 h-4 w-4 rounded"}),Ce(l,{class:"inline-block",keypath:"register.accept",tag:"label"},{default:Vn(()=>[oe("a",TF,_r(t.$t("register.tos")),1)]),_:1}),Ce(a,{class:"block text-red-600",name:"tos"})]),oe("button",{type:"submit",class:"block w-full rounded bg-purple-600 px-3 py-1.5 text-white transition hover:bg-purple-700",disabled:s.regInSubmission}," Submit ",8,bF)]),_:1},8,["validation-schema","onSubmit","initial-values"])],64)}const AF=Si(sF,[["render",wF]]),SF={name:"AppAuth",components:{AppLoginForm:rF,AppRegisterForm:AF},data(){return{tab:"login"}},computed:{...TI(vf,["hiddenClass"]),...bI(vf,{modalVisability:"isOpen"})}},RF={class:"flex min-h-screen items-end justify-center px-4 pb-20 pt-4 text-center sm:block sm:p-0"},PF=oe("div",{class:"fixed inset-0 transition-opacity"},[oe("div",{class:"absolute inset-0 bg-gray-800 opacity-75"})],-1),CF=oe("span",{class:"hidden sm:inline-block sm:h-screen sm:align-middle"},"",-1),OF={class:"inline-block transform overflow-hidden rounded-lg bg-white text-left align-bottom shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-lg sm:align-middle"},kF={class:"px-6 py-4 text-left"},NF={class:"flex items-center justify-between pb-4"},xF=oe("p",{class:"text-2xl font-bold"},"Your Account",-1),DF=oe("i",{class:"fas fa-times"},null,-1),VF=[DF],LF={class:"mb-4 flex flex-wrap"},MF={class:"flex-auto text-center"},FF={class:"flex-auto text-center"};function UF(t,e,n,r,s,i){const o=mn("AppLoginForm"),a=mn("AppRegisterForm");return Ct(),pn("div",{class:Tr(["fixed inset-0 z-10 overflow-y-auto",t.hiddenClass]),id:"modal"},[oe("div",RF,[PF,CF,oe("div",OF,[oe("div",kF,[oe("div",NF,[xF,oe("div",{class:"modal-close z-50 cursor-pointer",onClick:e[0]||(e[0]=l=>t.modalVisability=!1)},VF)]),oe("ul",LF,[oe("li",MF,[oe("a",{class:Tr(["block rounded transition",{"bg-blue-600 px-4 py-3 text-white hover:text-white":s.tab==="login","hover:text-blue-600":s.tab==="register"}]),href:"#",onClick:e[1]||(e[1]=Js(l=>s.tab="login",["prevent"]))},"Login",2)]),oe("li",FF,[oe("a",{class:Tr(["block rounded px-4 py-3 transition",{"bg-blue-600 px-4 py-3 text-white hover:text-white":s.tab==="register","hover:text-blue-600":s.tab==="login"}]),href:"#",onClick:e[2]||(e[2]=Js(l=>s.tab="register",["prevent"]))},"Register",2)])]),s.tab==="login"?(Ct(),vu(o,{key:0})):(Ct(),vu(a,{key:1}))])])])],2)}const $F=Si(SF,[["render",UF]]),BF={name:"App",components:{AppHeader:QM,AppAuth:$F,AppPlayer:$M},computed:{...bI(Tl,["userLoggedIn"])},created(){Xu.currentUser&&(this.userLoggedIn=!0)}};function jF(t,e,n,r,s,i){const o=mn("AppHeader"),a=mn("RouterView"),l=mn("AppPlayer"),c=mn("AppAuth");return Ct(),pn(Mt,null,[Ce(o),Ce(a,null,{default:Vn(({Component:d})=>[Ce(cm,{name:"fade",mode:"out-in"},{default:Vn(()=>[(Ct(),vu(mc(d)))]),_:2},1024)]),_:1}),Ce(l),Ce(c)],64)}const qF=Si(BF,[["render",jF]]),GF="modulepreload",HF=function(t){return"/music-playing/"+t},Qy={},bl=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){const i=document.getElementsByTagName("link"),o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.all(n.map(l=>{if(l=HF(l),l in Qy)return;Qy[l]=!0;const c=l.endsWith(".css"),d=c?'[rel="stylesheet"]':"";if(!!r)for(let f=i.length-1;f>=0;f--){const m=i[f];if(m.href===l&&(!c||m.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${l}"]${d}`))return;const h=document.createElement("link");if(h.rel=c?"stylesheet":GF,c||(h.as="script",h.crossOrigin=""),h.href=l,a&&h.setAttribute("nonce",a),document.head.appendChild(h),c)return new Promise((f,m)=>{h.addEventListener("load",f),h.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${l}`)))})}))}return s.then(()=>e()).catch(i=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=i,window.dispatchEvent(o),!o.defaultPrevented)throw i})};/*!
  * vue-router v4.3.0
  * (c) 2024 Eduardo San Martin Morote
  * @license MIT
  */const Ui=typeof document<"u";function WF(t){return t.__esModule||t[Symbol.toStringTag]==="Module"}const We=Object.assign;function id(t,e){const n={};for(const r in e){const s=e[r];n[r]=jn(s)?s.map(t):t(s)}return n}const _a=()=>{},jn=Array.isArray,Bw=/#/g,KF=/&/g,zF=/\//g,QF=/=/g,YF=/\?/g,jw=/\+/g,XF=/%5B/g,JF=/%5D/g,qw=/%5E/g,ZF=/%60/g,Gw=/%7B/g,eU=/%7C/g,Hw=/%7D/g,tU=/%20/g;function Gp(t){return encodeURI(""+t).replace(eU,"|").replace(XF,"[").replace(JF,"]")}function nU(t){return Gp(t).replace(Gw,"{").replace(Hw,"}").replace(qw,"^")}function Ef(t){return Gp(t).replace(jw,"%2B").replace(tU,"+").replace(Bw,"%23").replace(KF,"%26").replace(ZF,"`").replace(Gw,"{").replace(Hw,"}").replace(qw,"^")}function rU(t){return Ef(t).replace(QF,"%3D")}function sU(t){return Gp(t).replace(Bw,"%23").replace(YF,"%3F")}function iU(t){return t==null?"":sU(t).replace(zF,"%2F")}function Ha(t){try{return decodeURIComponent(""+t)}catch{}return""+t}const oU=/\/$/,aU=t=>t.replace(oU,"");function od(t,e,n="/"){let r,s={},i="",o="";const a=e.indexOf("#");let l=e.indexOf("?");return a<l&&a>=0&&(l=-1),l>-1&&(r=e.slice(0,l),i=e.slice(l+1,a>-1?a:e.length),s=t(i)),a>-1&&(r=r||e.slice(0,a),o=e.slice(a,e.length)),r=hU(r??e,n),{fullPath:r+(i&&"?")+i+o,path:r,query:s,hash:Ha(o)}}function lU(t,e){const n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}function Yy(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function uU(t,e,n){const r=e.matched.length-1,s=n.matched.length-1;return r>-1&&r===s&&yo(e.matched[r],n.matched[s])&&Ww(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}function yo(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function Ww(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!cU(t[n],e[n]))return!1;return!0}function cU(t,e){return jn(t)?Xy(t,e):jn(e)?Xy(e,t):t===e}function Xy(t,e){return jn(e)?t.length===e.length&&t.every((n,r)=>n===e[r]):t.length===1&&t[0]===e}function hU(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),r=t.split("/"),s=r[r.length-1];(s===".."||s===".")&&r.push("");let i=n.length-1,o,a;for(o=0;o<r.length;o++)if(a=r[o],a!==".")if(a==="..")i>1&&i--;else break;return n.slice(0,i).join("/")+"/"+r.slice(o).join("/")}var Wa;(function(t){t.pop="pop",t.push="push"})(Wa||(Wa={}));var ga;(function(t){t.back="back",t.forward="forward",t.unknown=""})(ga||(ga={}));function dU(t){if(!t)if(Ui){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),aU(t)}const fU=/^[^#]+#/;function mU(t,e){return t.replace(fU,"#")+e}function pU(t,e){const n=document.documentElement.getBoundingClientRect(),r=t.getBoundingClientRect();return{behavior:e.behavior,left:r.left-n.left-(e.left||0),top:r.top-n.top-(e.top||0)}}const fh=()=>({left:window.scrollX,top:window.scrollY});function _U(t){let e;if("el"in t){const n=t.el,r=typeof n=="string"&&n.startsWith("#"),s=typeof n=="string"?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!s)return;e=pU(s,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function Jy(t,e){return(history.state?history.state.position-e:-1)+t}const If=new Map;function gU(t,e){If.set(t,e)}function yU(t){const e=If.get(t);return If.delete(t),e}let vU=()=>location.protocol+"//"+location.host;function Kw(t,e){const{pathname:n,search:r,hash:s}=e,i=t.indexOf("#");if(i>-1){let a=s.includes(t.slice(i))?t.slice(i).length:1,l=s.slice(a);return l[0]!=="/"&&(l="/"+l),Yy(l,"")}return Yy(n,t)+r+s}function EU(t,e,n,r){let s=[],i=[],o=null;const a=({state:h})=>{const f=Kw(t,location),m=n.value,y=e.value;let g=0;if(h){if(n.value=f,e.value=h,o&&o===m){o=null;return}g=y?h.position-y.position:0}else r(f);s.forEach(v=>{v(n.value,m,{delta:g,type:Wa.pop,direction:g?g>0?ga.forward:ga.back:ga.unknown})})};function l(){o=n.value}function c(h){s.push(h);const f=()=>{const m=s.indexOf(h);m>-1&&s.splice(m,1)};return i.push(f),f}function d(){const{history:h}=window;h.state&&h.replaceState(We({},h.state,{scroll:fh()}),"")}function u(){for(const h of i)h();i=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",d)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",d,{passive:!0}),{pauseListeners:l,listen:c,destroy:u}}function Zy(t,e,n,r=!1,s=!1){return{back:t,current:e,forward:n,replaced:r,position:window.history.length,scroll:s?fh():null}}function IU(t){const{history:e,location:n}=window,r={value:Kw(t,n)},s={value:e.state};s.value||i(r.value,{back:null,current:r.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function i(l,c,d){const u=t.indexOf("#"),h=u>-1?(n.host&&document.querySelector("base")?t:t.slice(u))+l:vU()+t+l;try{e[d?"replaceState":"pushState"](c,"",h),s.value=c}catch(f){console.error(f),n[d?"replace":"assign"](h)}}function o(l,c){const d=We({},e.state,Zy(s.value.back,l,s.value.forward,!0),c,{position:s.value.position});i(l,d,!0),r.value=l}function a(l,c){const d=We({},s.value,e.state,{forward:l,scroll:fh()});i(d.current,d,!0);const u=We({},Zy(r.value,l,null),{position:d.position+1},c);i(l,u,!1),r.value=l}return{location:r,state:s,push:a,replace:o}}function TU(t){t=dU(t);const e=IU(t),n=EU(t,e.state,e.location,e.replace);function r(i,o=!0){o||n.pauseListeners(),history.go(i)}const s=We({location:"",base:t,go:r,createHref:mU.bind(null,t)},e,n);return Object.defineProperty(s,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(s,"state",{enumerable:!0,get:()=>e.state.value}),s}function bU(t){return typeof t=="string"||t&&typeof t=="object"}function zw(t){return typeof t=="string"||typeof t=="symbol"}const Br={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},Qw=Symbol("");var ev;(function(t){t[t.aborted=4]="aborted",t[t.cancelled=8]="cancelled",t[t.duplicated=16]="duplicated"})(ev||(ev={}));function vo(t,e){return We(new Error,{type:t,[Qw]:!0},e)}function hr(t,e){return t instanceof Error&&Qw in t&&(e==null||!!(t.type&e))}const tv="[^/]+?",wU={sensitive:!1,strict:!1,start:!0,end:!0},AU=/[.+*?^${}()[\]/\\]/g;function SU(t,e){const n=We({},wU,e),r=[];let s=n.start?"^":"";const i=[];for(const c of t){const d=c.length?[]:[90];n.strict&&!c.length&&(s+="/");for(let u=0;u<c.length;u++){const h=c[u];let f=40+(n.sensitive?.25:0);if(h.type===0)u||(s+="/"),s+=h.value.replace(AU,"\\$&"),f+=40;else if(h.type===1){const{value:m,repeatable:y,optional:g,regexp:v}=h;i.push({name:m,repeatable:y,optional:g});const b=v||tv;if(b!==tv){f+=10;try{new RegExp(`(${b})`)}catch(T){throw new Error(`Invalid custom RegExp for param "${m}" (${b}): `+T.message)}}let E=y?`((?:${b})(?:/(?:${b}))*)`:`(${b})`;u||(E=g&&c.length<2?`(?:/${E})`:"/"+E),g&&(E+="?"),s+=E,f+=20,g&&(f+=-8),y&&(f+=-20),b===".*"&&(f+=-50)}d.push(f)}r.push(d)}if(n.strict&&n.end){const c=r.length-1;r[c][r[c].length-1]+=.7000000000000001}n.strict||(s+="/?"),n.end?s+="$":n.strict&&(s+="(?:/|$)");const o=new RegExp(s,n.sensitive?"":"i");function a(c){const d=c.match(o),u={};if(!d)return null;for(let h=1;h<d.length;h++){const f=d[h]||"",m=i[h-1];u[m.name]=f&&m.repeatable?f.split("/"):f}return u}function l(c){let d="",u=!1;for(const h of t){(!u||!d.endsWith("/"))&&(d+="/"),u=!1;for(const f of h)if(f.type===0)d+=f.value;else if(f.type===1){const{value:m,repeatable:y,optional:g}=f,v=m in c?c[m]:"";if(jn(v)&&!y)throw new Error(`Provided param "${m}" is an array but it is not repeatable (* or + modifiers)`);const b=jn(v)?v.join("/"):v;if(!b)if(g)h.length<2&&(d.endsWith("/")?d=d.slice(0,-1):u=!0);else throw new Error(`Missing required param "${m}"`);d+=b}}return d||"/"}return{re:o,score:r,keys:i,parse:a,stringify:l}}function RU(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=e[n]-t[n];if(r)return r;n++}return t.length<e.length?t.length===1&&t[0]===80?-1:1:t.length>e.length?e.length===1&&e[0]===80?1:-1:0}function PU(t,e){let n=0;const r=t.score,s=e.score;for(;n<r.length&&n<s.length;){const i=RU(r[n],s[n]);if(i)return i;n++}if(Math.abs(s.length-r.length)===1){if(nv(r))return 1;if(nv(s))return-1}return s.length-r.length}function nv(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const CU={type:0,value:""},OU=/[a-zA-Z0-9_]/;function kU(t){if(!t)return[[]];if(t==="/")return[[CU]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(f){throw new Error(`ERR (${n})/"${c}": ${f}`)}let n=0,r=n;const s=[];let i;function o(){i&&s.push(i),i=[]}let a=0,l,c="",d="";function u(){c&&(n===0?i.push({type:0,value:c}):n===1||n===2||n===3?(i.length>1&&(l==="*"||l==="+")&&e(`A repeatable param (${c}) must be alone in its segment. eg: '/:ids+.`),i.push({type:1,value:c,regexp:d,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):e("Invalid state to consume buffer"),c="")}function h(){c+=l}for(;a<t.length;){if(l=t[a++],l==="\\"&&n!==2){r=n,n=4;continue}switch(n){case 0:l==="/"?(c&&u(),o()):l===":"?(u(),n=1):h();break;case 4:h(),n=r;break;case 1:l==="("?n=2:OU.test(l)?h():(u(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&a--);break;case 2:l===")"?d[d.length-1]=="\\"?d=d.slice(0,-1)+l:n=3:d+=l;break;case 3:u(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&a--,d="";break;default:e("Unknown state");break}}return n===2&&e(`Unfinished custom RegExp for param "${c}"`),u(),o(),s}function NU(t,e,n){const r=SU(kU(t.path),n),s=We(r,{record:t,parent:e,children:[],alias:[]});return e&&!s.record.aliasOf==!e.record.aliasOf&&e.children.push(s),s}function xU(t,e){const n=[],r=new Map;e=iv({strict:!1,end:!0,sensitive:!1},e);function s(d){return r.get(d)}function i(d,u,h){const f=!h,m=DU(d);m.aliasOf=h&&h.record;const y=iv(e,d),g=[m];if("alias"in d){const E=typeof d.alias=="string"?[d.alias]:d.alias;for(const T of E)g.push(We({},m,{components:h?h.record.components:m.components,path:T,aliasOf:h?h.record:m}))}let v,b;for(const E of g){const{path:T}=E;if(u&&T[0]!=="/"){const S=u.record.path,w=S[S.length-1]==="/"?"":"/";E.path=u.record.path+(T&&w+T)}if(v=NU(E,u,y),h?h.alias.push(v):(b=b||v,b!==v&&b.alias.push(v),f&&d.name&&!sv(v)&&o(d.name)),m.children){const S=m.children;for(let w=0;w<S.length;w++)i(S[w],v,h&&h.children[w])}h=h||v,(v.record.components&&Object.keys(v.record.components).length||v.record.name||v.record.redirect)&&l(v)}return b?()=>{o(b)}:_a}function o(d){if(zw(d)){const u=r.get(d);u&&(r.delete(d),n.splice(n.indexOf(u),1),u.children.forEach(o),u.alias.forEach(o))}else{const u=n.indexOf(d);u>-1&&(n.splice(u,1),d.record.name&&r.delete(d.record.name),d.children.forEach(o),d.alias.forEach(o))}}function a(){return n}function l(d){let u=0;for(;u<n.length&&PU(d,n[u])>=0&&(d.record.path!==n[u].record.path||!Yw(d,n[u]));)u++;n.splice(u,0,d),d.record.name&&!sv(d)&&r.set(d.record.name,d)}function c(d,u){let h,f={},m,y;if("name"in d&&d.name){if(h=r.get(d.name),!h)throw vo(1,{location:d});y=h.record.name,f=We(rv(u.params,h.keys.filter(b=>!b.optional).concat(h.parent?h.parent.keys.filter(b=>b.optional):[]).map(b=>b.name)),d.params&&rv(d.params,h.keys.map(b=>b.name))),m=h.stringify(f)}else if(d.path!=null)m=d.path,h=n.find(b=>b.re.test(m)),h&&(f=h.parse(m),y=h.record.name);else{if(h=u.name?r.get(u.name):n.find(b=>b.re.test(u.path)),!h)throw vo(1,{location:d,currentLocation:u});y=h.record.name,f=We({},u.params,d.params),m=h.stringify(f)}const g=[];let v=h;for(;v;)g.unshift(v.record),v=v.parent;return{name:y,path:m,params:f,matched:g,meta:LU(g)}}return t.forEach(d=>i(d)),{addRoute:i,resolve:c,removeRoute:o,getRoutes:a,getRecordMatcher:s}}function rv(t,e){const n={};for(const r of e)r in t&&(n[r]=t[r]);return n}function DU(t){return{path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:void 0,beforeEnter:t.beforeEnter,props:VU(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}}}function VU(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(const r in t.components)e[r]=typeof n=="object"?n[r]:n;return e}function sv(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function LU(t){return t.reduce((e,n)=>We(e,n.meta),{})}function iv(t,e){const n={};for(const r in t)n[r]=r in e?e[r]:t[r];return n}function Yw(t,e){return e.children.some(n=>n===t||Yw(t,n))}function MU(t){const e={};if(t===""||t==="?")return e;const r=(t[0]==="?"?t.slice(1):t).split("&");for(let s=0;s<r.length;++s){const i=r[s].replace(jw," "),o=i.indexOf("="),a=Ha(o<0?i:i.slice(0,o)),l=o<0?null:Ha(i.slice(o+1));if(a in e){let c=e[a];jn(c)||(c=e[a]=[c]),c.push(l)}else e[a]=l}return e}function ov(t){let e="";for(let n in t){const r=t[n];if(n=rU(n),r==null){r!==void 0&&(e+=(e.length?"&":"")+n);continue}(jn(r)?r.map(i=>i&&Ef(i)):[r&&Ef(r)]).forEach(i=>{i!==void 0&&(e+=(e.length?"&":"")+n,i!=null&&(e+="="+i))})}return e}function FU(t){const e={};for(const n in t){const r=t[n];r!==void 0&&(e[n]=jn(r)?r.map(s=>s==null?null:""+s):r==null?r:""+r)}return e}const UU=Symbol(""),av=Symbol(""),Hp=Symbol(""),Xw=Symbol(""),Tf=Symbol("");function Go(){let t=[];function e(r){return t.push(r),()=>{const s=t.indexOf(r);s>-1&&t.splice(s,1)}}function n(){t=[]}return{add:e,list:()=>t.slice(),reset:n}}function Qr(t,e,n,r,s,i=o=>o()){const o=r&&(r.enterCallbacks[s]=r.enterCallbacks[s]||[]);return()=>new Promise((a,l)=>{const c=h=>{h===!1?l(vo(4,{from:n,to:e})):h instanceof Error?l(h):bU(h)?l(vo(2,{from:e,to:h})):(o&&r.enterCallbacks[s]===o&&typeof h=="function"&&o.push(h),a())},d=i(()=>t.call(r&&r.instances[s],e,n,c));let u=Promise.resolve(d);t.length<3&&(u=u.then(c)),u.catch(h=>l(h))})}function ad(t,e,n,r,s=i=>i()){const i=[];for(const o of t)for(const a in o.components){let l=o.components[a];if(!(e!=="beforeRouteEnter"&&!o.instances[a]))if($U(l)){const d=(l.__vccOpts||l)[e];d&&i.push(Qr(d,n,r,o,a,s))}else{let c=l();i.push(()=>c.then(d=>{if(!d)return Promise.reject(new Error(`Couldn't resolve component "${a}" at "${o.path}"`));const u=WF(d)?d.default:d;o.components[a]=u;const f=(u.__vccOpts||u)[e];return f&&Qr(f,n,r,o,a,s)()}))}}return i}function $U(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function lv(t){const e=bn(Hp),n=bn(Xw),r=ge(()=>e.resolve($e(t.to))),s=ge(()=>{const{matched:l}=r.value,{length:c}=l,d=l[c-1],u=n.matched;if(!d||!u.length)return-1;const h=u.findIndex(yo.bind(null,d));if(h>-1)return h;const f=uv(l[c-2]);return c>1&&uv(d)===f&&u[u.length-1].path!==f?u.findIndex(yo.bind(null,l[c-2])):h}),i=ge(()=>s.value>-1&&GU(n.params,r.value.params)),o=ge(()=>s.value>-1&&s.value===n.matched.length-1&&Ww(n.params,r.value.params));function a(l={}){return qU(l)?e[$e(t.replace)?"replace":"push"]($e(t.to)).catch(_a):Promise.resolve()}return{route:r,href:ge(()=>r.value.href),isActive:i,isExactActive:o,navigate:a}}const BU=ys({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:lv,setup(t,{slots:e}){const n=Sr(lv(t)),{options:r}=bn(Hp),s=ge(()=>({[cv(t.activeClass,r.linkActiveClass,"router-link-active")]:n.isActive,[cv(t.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const i=e.default&&e.default(n);return t.custom?i:Rr("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:s.value},i)}}}),jU=BU;function qU(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function GU(t,e){for(const n in e){const r=e[n],s=t[n];if(typeof r=="string"){if(r!==s)return!1}else if(!jn(s)||s.length!==r.length||r.some((i,o)=>i!==s[o]))return!1}return!0}function uv(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const cv=(t,e,n)=>t??e??n,HU=ys({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:n}){const r=bn(Tf),s=ge(()=>t.route||r.value),i=bn(av,0),o=ge(()=>{let c=$e(i);const{matched:d}=s.value;let u;for(;(u=d[c])&&!u.components;)c++;return c}),a=ge(()=>s.value.matched[o.value]);Qi(av,ge(()=>o.value+1)),Qi(UU,a),Qi(Tf,s);const l=gt();return tn(()=>[l.value,a.value,t.name],([c,d,u],[h,f,m])=>{d&&(d.instances[u]=c,f&&f!==d&&c&&c===h&&(d.leaveGuards.size||(d.leaveGuards=f.leaveGuards),d.updateGuards.size||(d.updateGuards=f.updateGuards))),c&&d&&(!f||!yo(d,f)||!h)&&(d.enterCallbacks[u]||[]).forEach(y=>y(c))},{flush:"post"}),()=>{const c=s.value,d=t.name,u=a.value,h=u&&u.components[d];if(!h)return hv(n.default,{Component:h,route:c});const f=u.props[d],m=f?f===!0?c.params:typeof f=="function"?f(c):f:null,g=Rr(h,We({},m,e,{onVnodeUnmounted:v=>{v.component.isUnmounted&&(u.instances[d]=null)},ref:l}));return hv(n.default,{Component:g,route:c})||g}}});function hv(t,e){if(!t)return null;const n=t(e);return n.length===1?n[0]:n}const WU=HU;function KU(t){const e=xU(t.routes,t),n=t.parseQuery||MU,r=t.stringifyQuery||ov,s=t.history,i=Go(),o=Go(),a=Go(),l=hc(Br);let c=Br;Ui&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const d=id.bind(null,V=>""+V),u=id.bind(null,iU),h=id.bind(null,Ha);function f(V,B){let W,J;return zw(V)?(W=e.getRecordMatcher(V),J=B):J=V,e.addRoute(J,W)}function m(V){const B=e.getRecordMatcher(V);B&&e.removeRoute(B)}function y(){return e.getRoutes().map(V=>V.record)}function g(V){return!!e.getRecordMatcher(V)}function v(V,B){if(B=We({},B||l.value),typeof V=="string"){const p=od(n,V,B.path),I=e.resolve({path:p.path},B),P=s.createHref(p.fullPath);return We(p,I,{params:h(I.params),hash:Ha(p.hash),redirectedFrom:void 0,href:P})}let W;if(V.path!=null)W=We({},V,{path:od(n,V.path,B.path).path});else{const p=We({},V.params);for(const I in p)p[I]==null&&delete p[I];W=We({},V,{params:u(p)}),B.params=u(B.params)}const J=e.resolve(W,B),ve=V.hash||"";J.params=d(h(J.params));const Be=lU(r,We({},V,{hash:nU(ve),path:J.path})),_=s.createHref(Be);return We({fullPath:Be,hash:ve,query:r===ov?FU(V.query):V.query||{}},J,{redirectedFrom:void 0,href:_})}function b(V){return typeof V=="string"?od(n,V,l.value.path):We({},V)}function E(V,B){if(c!==V)return vo(8,{from:B,to:V})}function T(V){return D(V)}function S(V){return T(We(b(V),{replace:!0}))}function w(V){const B=V.matched[V.matched.length-1];if(B&&B.redirect){const{redirect:W}=B;let J=typeof W=="function"?W(V):W;return typeof J=="string"&&(J=J.includes("?")||J.includes("#")?J=b(J):{path:J},J.params={}),We({query:V.query,hash:V.hash,params:J.path!=null?{}:V.params},J)}}function D(V,B){const W=c=v(V),J=l.value,ve=V.state,Be=V.force,_=V.replace===!0,p=w(W);if(p)return D(We(b(p),{state:typeof p=="object"?We({},ve,p.state):ve,force:Be,replace:_}),B||W);const I=W;I.redirectedFrom=B;let P;return!Be&&uU(r,J,W)&&(P=vo(16,{to:I,from:J}),Ze(J,J,!0,!1)),(P?Promise.resolve(P):z(I,J)).catch(k=>hr(k)?hr(k,2)?k:Et(k):Ie(k,I,J)).then(k=>{if(k){if(hr(k,2))return D(We({replace:_},b(k.to),{state:typeof k.to=="object"?We({},ve,k.to.state):ve,force:Be}),B||I)}else k=$(I,J,!0,_,ve);return de(I,J,k),k})}function O(V,B){const W=E(V,B);return W?Promise.reject(W):Promise.resolve()}function C(V){const B=Vt.values().next().value;return B&&typeof B.runWithContext=="function"?B.runWithContext(V):V()}function z(V,B){let W;const[J,ve,Be]=zU(V,B);W=ad(J.reverse(),"beforeRouteLeave",V,B);for(const p of J)p.leaveGuards.forEach(I=>{W.push(Qr(I,V,B))});const _=O.bind(null,V,B);return W.push(_),le(W).then(()=>{W=[];for(const p of i.list())W.push(Qr(p,V,B));return W.push(_),le(W)}).then(()=>{W=ad(ve,"beforeRouteUpdate",V,B);for(const p of ve)p.updateGuards.forEach(I=>{W.push(Qr(I,V,B))});return W.push(_),le(W)}).then(()=>{W=[];for(const p of Be)if(p.beforeEnter)if(jn(p.beforeEnter))for(const I of p.beforeEnter)W.push(Qr(I,V,B));else W.push(Qr(p.beforeEnter,V,B));return W.push(_),le(W)}).then(()=>(V.matched.forEach(p=>p.enterCallbacks={}),W=ad(Be,"beforeRouteEnter",V,B,C),W.push(_),le(W))).then(()=>{W=[];for(const p of o.list())W.push(Qr(p,V,B));return W.push(_),le(W)}).catch(p=>hr(p,8)?p:Promise.reject(p))}function de(V,B,W){a.list().forEach(J=>C(()=>J(V,B,W)))}function $(V,B,W,J,ve){const Be=E(V,B);if(Be)return Be;const _=B===Br,p=Ui?history.state:{};W&&(J||_?s.replace(V.fullPath,We({scroll:_&&p&&p.scroll},ve)):s.push(V.fullPath,ve)),l.value=V,Ze(V,B,W,_),Et()}let ie;function we(){ie||(ie=s.listen((V,B,W)=>{if(!se.listening)return;const J=v(V),ve=w(J);if(ve){D(We(ve,{replace:!0}),J).catch(_a);return}c=J;const Be=l.value;Ui&&gU(Jy(Be.fullPath,W.delta),fh()),z(J,Be).catch(_=>hr(_,12)?_:hr(_,2)?(D(_.to,J).then(p=>{hr(p,20)&&!W.delta&&W.type===Wa.pop&&s.go(-1,!1)}).catch(_a),Promise.reject()):(W.delta&&s.go(-W.delta,!1),Ie(_,J,Be))).then(_=>{_=_||$(J,Be,!1),_&&(W.delta&&!hr(_,8)?s.go(-W.delta,!1):W.type===Wa.pop&&hr(_,20)&&s.go(-1,!1)),de(J,Be,_)}).catch(_a)}))}let Ne=Go(),Q=Go(),Ee;function Ie(V,B,W){Et(V);const J=Q.list();return J.length?J.forEach(ve=>ve(V,B,W)):console.error(V),Promise.reject(V)}function nt(){return Ee&&l.value!==Br?Promise.resolve():new Promise((V,B)=>{Ne.add([V,B])})}function Et(V){return Ee||(Ee=!V,we(),Ne.list().forEach(([B,W])=>V?W(V):B()),Ne.reset()),V}function Ze(V,B,W,J){const{scrollBehavior:ve}=t;if(!Ui||!ve)return Promise.resolve();const Be=!W&&yU(Jy(V.fullPath,0))||(J||!W)&&history.state&&history.state.scroll||null;return cn().then(()=>ve(V,B,Be)).then(_=>_&&_U(_)).catch(_=>Ie(_,V,B))}const ut=V=>s.go(V);let Qe;const Vt=new Set,se={currentRoute:l,listening:!0,addRoute:f,removeRoute:m,hasRoute:g,getRoutes:y,resolve:v,options:t,push:T,replace:S,go:ut,back:()=>ut(-1),forward:()=>ut(1),beforeEach:i.add,beforeResolve:o.add,afterEach:a.add,onError:Q.add,isReady:nt,install(V){const B=this;V.component("RouterLink",jU),V.component("RouterView",WU),V.config.globalProperties.$router=B,Object.defineProperty(V.config.globalProperties,"$route",{enumerable:!0,get:()=>$e(l)}),Ui&&!Qe&&l.value===Br&&(Qe=!0,T(s.location).catch(ve=>{}));const W={};for(const ve in Br)Object.defineProperty(W,ve,{get:()=>l.value[ve],enumerable:!0});V.provide(Hp,B),V.provide(Xw,VE(W)),V.provide(Tf,l);const J=V.unmount;Vt.add(V),V.unmount=function(){Vt.delete(V),Vt.size<1&&(c=Br,ie&&ie(),ie=null,l.value=Br,Qe=!1,Ee=!1),J()}}};function le(V){return V.reduce((B,W)=>B.then(()=>C(W)),Promise.resolve())}return se}function zU(t,e){const n=[],r=[],s=[],i=Math.max(e.matched.length,t.matched.length);for(let o=0;o<i;o++){const a=e.matched[o];a&&(t.matched.find(c=>yo(c,a))?r.push(a):n.push(a));const l=t.matched[o];l&&(e.matched.find(c=>yo(c,l))||s.push(l))}return[n,r,s]}const QU=()=>bl(()=>import("./HomeView-CAYdV_0l.js"),[]),YU=()=>bl(()=>import("./AboutView-D7FFkskU.js"),__vite__mapDeps([0,1])),XU=()=>bl(()=>import("./ManageView-CLEU5WpS.js"),[]),JU=()=>bl(()=>import("./SongView-B5iK4Ktb.js"),[]),ZU=[{path:"/",name:"home",component:QU},{path:"/about",name:"about",component:YU},{path:"/manage-music",name:"manage",component:XU,meta:{requiresAuth:!0}},{path:"/manage",redirect:{name:"manage"}},{name:"song",path:"/song/:id",component:JU},{path:"/:catchAll(.*)*",redirect:{name:"home"}}],Wp=KU({history:TU("/music-playing/"),routes:ZU,linkExactActiveClass:"text-yellow-500"});Wp.beforeEach((t,e,n)=>{if(!t.meta.requiresAuth){n();return}Tl().userLoggedIn?n():(window.alert("You must be logged in to access this page"),n({name:"home"}))});/*!
  * shared v9.12.0
  * (c) 2024 kazuya kawaguchi
  * Released under the MIT License.
  */const Ju=typeof window<"u",Ss=(t,e=!1)=>e?Symbol.for(t):Symbol(t),e2=(t,e,n)=>t2({l:t,k:e,s:n}),t2=t=>JSON.stringify(t).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029").replace(/\u0027/g,"\\u0027"),bt=t=>typeof t=="number"&&isFinite(t),n2=t=>Zw(t)==="[object Date]",gs=t=>Zw(t)==="[object RegExp]",mh=t=>Se(t)&&Object.keys(t).length===0,Bt=Object.assign;let dv;const pr=()=>dv||(dv=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function fv(t){return t.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}const r2=Object.prototype.hasOwnProperty;function Zu(t,e){return r2.call(t,e)}const ot=Array.isArray,et=t=>typeof t=="function",ne=t=>typeof t=="string",ke=t=>typeof t=="boolean",He=t=>t!==null&&typeof t=="object",s2=t=>He(t)&&et(t.then)&&et(t.catch),Jw=Object.prototype.toString,Zw=t=>Jw.call(t),Se=t=>{if(!He(t))return!1;const e=Object.getPrototypeOf(t);return e===null||e.constructor===Object},i2=t=>t==null?"":ot(t)||Se(t)&&t.toString===Jw?JSON.stringify(t,null,2):String(t);function o2(t,e=""){return t.reduce((n,r,s)=>s===0?n+r:n+e+r,"")}function ph(t){let e=t;return()=>++e}function a2(t,e){typeof console<"u"&&(console.warn("[intlify] "+t),e&&console.warn(e.stack))}const Wl=t=>!He(t)||ot(t);function fu(t,e){if(Wl(t)||Wl(e))throw new Error("Invalid value");const n=[{src:t,des:e}];for(;n.length;){const{src:r,des:s}=n.pop();Object.keys(r).forEach(i=>{Wl(r[i])||Wl(s[i])?s[i]=r[i]:n.push({src:r[i],des:s[i]})})}}/*!
  * message-compiler v9.12.0
  * (c) 2024 kazuya kawaguchi
  * Released under the MIT License.
  */function l2(t,e,n){return{line:t,column:e,offset:n}}function ec(t,e,n){const r={start:t,end:e};return n!=null&&(r.source=n),r}const u2=/\{([0-9a-zA-Z]+)\}/g;function eA(t,...e){return e.length===1&&c2(e[0])&&(e=e[0]),(!e||!e.hasOwnProperty)&&(e={}),t.replace(u2,(n,r)=>e.hasOwnProperty(r)?e[r]:"")}const tA=Object.assign,mv=t=>typeof t=="string",c2=t=>t!==null&&typeof t=="object";function nA(t,e=""){return t.reduce((n,r,s)=>s===0?n+r:n+e+r,"")}const Kp={USE_MODULO_SYNTAX:1,__EXTEND_POINT__:2},h2={[Kp.USE_MODULO_SYNTAX]:"Use modulo before '{{0}}'."};function d2(t,e,...n){const r=eA(h2[t]||"",...n||[]),s={message:String(r),code:t};return e&&(s.location=e),s}const Te={EXPECTED_TOKEN:1,INVALID_TOKEN_IN_PLACEHOLDER:2,UNTERMINATED_SINGLE_QUOTE_IN_PLACEHOLDER:3,UNKNOWN_ESCAPE_SEQUENCE:4,INVALID_UNICODE_ESCAPE_SEQUENCE:5,UNBALANCED_CLOSING_BRACE:6,UNTERMINATED_CLOSING_BRACE:7,EMPTY_PLACEHOLDER:8,NOT_ALLOW_NEST_PLACEHOLDER:9,INVALID_LINKED_FORMAT:10,MUST_HAVE_MESSAGES_IN_PLURAL:11,UNEXPECTED_EMPTY_LINKED_MODIFIER:12,UNEXPECTED_EMPTY_LINKED_KEY:13,UNEXPECTED_LEXICAL_ANALYSIS:14,UNHANDLED_CODEGEN_NODE_TYPE:15,UNHANDLED_MINIFIER_NODE_TYPE:16,__EXTEND_POINT__:17},f2={[Te.EXPECTED_TOKEN]:"Expected token: '{0}'",[Te.INVALID_TOKEN_IN_PLACEHOLDER]:"Invalid token in placeholder: '{0}'",[Te.UNTERMINATED_SINGLE_QUOTE_IN_PLACEHOLDER]:"Unterminated single quote in placeholder",[Te.UNKNOWN_ESCAPE_SEQUENCE]:"Unknown escape sequence: \\{0}",[Te.INVALID_UNICODE_ESCAPE_SEQUENCE]:"Invalid unicode escape sequence: {0}",[Te.UNBALANCED_CLOSING_BRACE]:"Unbalanced closing brace",[Te.UNTERMINATED_CLOSING_BRACE]:"Unterminated closing brace",[Te.EMPTY_PLACEHOLDER]:"Empty placeholder",[Te.NOT_ALLOW_NEST_PLACEHOLDER]:"Not allowed nest placeholder",[Te.INVALID_LINKED_FORMAT]:"Invalid linked format",[Te.MUST_HAVE_MESSAGES_IN_PLURAL]:"Plural must have messages",[Te.UNEXPECTED_EMPTY_LINKED_MODIFIER]:"Unexpected empty linked modifier",[Te.UNEXPECTED_EMPTY_LINKED_KEY]:"Unexpected empty linked key",[Te.UNEXPECTED_LEXICAL_ANALYSIS]:"Unexpected lexical analysis in token: '{0}'",[Te.UNHANDLED_CODEGEN_NODE_TYPE]:"unhandled codegen node type: '{0}'",[Te.UNHANDLED_MINIFIER_NODE_TYPE]:"unhandled mimifier node type: '{0}'"};function No(t,e,n={}){const{domain:r,messages:s,args:i}=n,o=eA((s||f2)[t]||"",...i||[]),a=new SyntaxError(String(o));return a.code=t,e&&(a.location=e),a.domain=r,a}function m2(t){throw t}const dr=" ",p2="\r",Zt=`
`,_2="\u2028",g2="\u2029";function y2(t){const e=t;let n=0,r=1,s=1,i=0;const o=D=>e[D]===p2&&e[D+1]===Zt,a=D=>e[D]===Zt,l=D=>e[D]===g2,c=D=>e[D]===_2,d=D=>o(D)||a(D)||l(D)||c(D),u=()=>n,h=()=>r,f=()=>s,m=()=>i,y=D=>o(D)||l(D)||c(D)?Zt:e[D],g=()=>y(n),v=()=>y(n+i);function b(){return i=0,d(n)&&(r++,s=0),o(n)&&n++,n++,s++,e[n]}function E(){return o(n+i)&&i++,i++,e[n+i]}function T(){n=0,r=1,s=1,i=0}function S(D=0){i=D}function w(){const D=n+i;for(;D!==n;)b();i=0}return{index:u,line:h,column:f,peekOffset:m,charAt:y,currentChar:g,currentPeek:v,next:b,peek:E,reset:T,resetPeek:S,skipToPeek:w}}const jr=void 0,v2=".",pv="'",E2="tokenizer";function I2(t,e={}){const n=e.location!==!1,r=y2(t),s=()=>r.index(),i=()=>l2(r.line(),r.column(),r.index()),o=i(),a=s(),l={currentType:14,offset:a,startLoc:o,endLoc:o,lastType:14,lastOffset:a,lastStartLoc:o,lastEndLoc:o,braceNest:0,inLinked:!1,text:""},c=()=>l,{onError:d}=e;function u(_,p,I,...P){const k=c();if(p.column+=I,p.offset+=I,d){const F=n?ec(k.startLoc,p):null,H=No(_,F,{domain:E2,args:P});d(H)}}function h(_,p,I){_.endLoc=i(),_.currentType=p;const P={type:p};return n&&(P.loc=ec(_.startLoc,_.endLoc)),I!=null&&(P.value=I),P}const f=_=>h(_,14);function m(_,p){return _.currentChar()===p?(_.next(),p):(u(Te.EXPECTED_TOKEN,i(),0,p),"")}function y(_){let p="";for(;_.currentPeek()===dr||_.currentPeek()===Zt;)p+=_.currentPeek(),_.peek();return p}function g(_){const p=y(_);return _.skipToPeek(),p}function v(_){if(_===jr)return!1;const p=_.charCodeAt(0);return p>=97&&p<=122||p>=65&&p<=90||p===95}function b(_){if(_===jr)return!1;const p=_.charCodeAt(0);return p>=48&&p<=57}function E(_,p){const{currentType:I}=p;if(I!==2)return!1;y(_);const P=v(_.currentPeek());return _.resetPeek(),P}function T(_,p){const{currentType:I}=p;if(I!==2)return!1;y(_);const P=_.currentPeek()==="-"?_.peek():_.currentPeek(),k=b(P);return _.resetPeek(),k}function S(_,p){const{currentType:I}=p;if(I!==2)return!1;y(_);const P=_.currentPeek()===pv;return _.resetPeek(),P}function w(_,p){const{currentType:I}=p;if(I!==8)return!1;y(_);const P=_.currentPeek()===".";return _.resetPeek(),P}function D(_,p){const{currentType:I}=p;if(I!==9)return!1;y(_);const P=v(_.currentPeek());return _.resetPeek(),P}function O(_,p){const{currentType:I}=p;if(!(I===8||I===12))return!1;y(_);const P=_.currentPeek()===":";return _.resetPeek(),P}function C(_,p){const{currentType:I}=p;if(I!==10)return!1;const P=()=>{const F=_.currentPeek();return F==="{"?v(_.peek()):F==="@"||F==="%"||F==="|"||F===":"||F==="."||F===dr||!F?!1:F===Zt?(_.peek(),P()):v(F)},k=P();return _.resetPeek(),k}function z(_){y(_);const p=_.currentPeek()==="|";return _.resetPeek(),p}function de(_){const p=y(_),I=_.currentPeek()==="%"&&_.peek()==="{";return _.resetPeek(),{isModulo:I,hasSpace:p.length>0}}function $(_,p=!0){const I=(k=!1,F="",H=!1)=>{const G=_.currentPeek();return G==="{"?F==="%"?!1:k:G==="@"||!G?F==="%"?!0:k:G==="%"?(_.peek(),I(k,"%",!0)):G==="|"?F==="%"||H?!0:!(F===dr||F===Zt):G===dr?(_.peek(),I(!0,dr,H)):G===Zt?(_.peek(),I(!0,Zt,H)):!0},P=I();return p&&_.resetPeek(),P}function ie(_,p){const I=_.currentChar();return I===jr?jr:p(I)?(_.next(),I):null}function we(_){return ie(_,I=>{const P=I.charCodeAt(0);return P>=97&&P<=122||P>=65&&P<=90||P>=48&&P<=57||P===95||P===36})}function Ne(_){return ie(_,I=>{const P=I.charCodeAt(0);return P>=48&&P<=57})}function Q(_){return ie(_,I=>{const P=I.charCodeAt(0);return P>=48&&P<=57||P>=65&&P<=70||P>=97&&P<=102})}function Ee(_){let p="",I="";for(;p=Ne(_);)I+=p;return I}function Ie(_){g(_);const p=_.currentChar();return p!=="%"&&u(Te.EXPECTED_TOKEN,i(),0,p),_.next(),"%"}function nt(_){let p="";for(;;){const I=_.currentChar();if(I==="{"||I==="}"||I==="@"||I==="|"||!I)break;if(I==="%")if($(_))p+=I,_.next();else break;else if(I===dr||I===Zt)if($(_))p+=I,_.next();else{if(z(_))break;p+=I,_.next()}else p+=I,_.next()}return p}function Et(_){g(_);let p="",I="";for(;p=we(_);)I+=p;return _.currentChar()===jr&&u(Te.UNTERMINATED_CLOSING_BRACE,i(),0),I}function Ze(_){g(_);let p="";return _.currentChar()==="-"?(_.next(),p+=`-${Ee(_)}`):p+=Ee(_),_.currentChar()===jr&&u(Te.UNTERMINATED_CLOSING_BRACE,i(),0),p}function ut(_){g(_),m(_,"'");let p="",I="";const P=F=>F!==pv&&F!==Zt;for(;p=ie(_,P);)p==="\\"?I+=Qe(_):I+=p;const k=_.currentChar();return k===Zt||k===jr?(u(Te.UNTERMINATED_SINGLE_QUOTE_IN_PLACEHOLDER,i(),0),k===Zt&&(_.next(),m(_,"'")),I):(m(_,"'"),I)}function Qe(_){const p=_.currentChar();switch(p){case"\\":case"'":return _.next(),`\\${p}`;case"u":return Vt(_,p,4);case"U":return Vt(_,p,6);default:return u(Te.UNKNOWN_ESCAPE_SEQUENCE,i(),0,p),""}}function Vt(_,p,I){m(_,p);let P="";for(let k=0;k<I;k++){const F=Q(_);if(!F){u(Te.INVALID_UNICODE_ESCAPE_SEQUENCE,i(),0,`\\${p}${P}${_.currentChar()}`);break}P+=F}return`\\${p}${P}`}function se(_){g(_);let p="",I="";const P=k=>k!=="{"&&k!=="}"&&k!==dr&&k!==Zt;for(;p=ie(_,P);)I+=p;return I}function le(_){let p="",I="";for(;p=we(_);)I+=p;return I}function V(_){const p=(I=!1,P)=>{const k=_.currentChar();return k==="{"||k==="%"||k==="@"||k==="|"||k==="("||k===")"||!k||k===dr?P:k===Zt||k===v2?(P+=k,_.next(),p(I,P)):(P+=k,_.next(),p(!0,P))};return p(!1,"")}function B(_){g(_);const p=m(_,"|");return g(_),p}function W(_,p){let I=null;switch(_.currentChar()){case"{":return p.braceNest>=1&&u(Te.NOT_ALLOW_NEST_PLACEHOLDER,i(),0),_.next(),I=h(p,2,"{"),g(_),p.braceNest++,I;case"}":return p.braceNest>0&&p.currentType===2&&u(Te.EMPTY_PLACEHOLDER,i(),0),_.next(),I=h(p,3,"}"),p.braceNest--,p.braceNest>0&&g(_),p.inLinked&&p.braceNest===0&&(p.inLinked=!1),I;case"@":return p.braceNest>0&&u(Te.UNTERMINATED_CLOSING_BRACE,i(),0),I=J(_,p)||f(p),p.braceNest=0,I;default:{let k=!0,F=!0,H=!0;if(z(_))return p.braceNest>0&&u(Te.UNTERMINATED_CLOSING_BRACE,i(),0),I=h(p,1,B(_)),p.braceNest=0,p.inLinked=!1,I;if(p.braceNest>0&&(p.currentType===5||p.currentType===6||p.currentType===7))return u(Te.UNTERMINATED_CLOSING_BRACE,i(),0),p.braceNest=0,ve(_,p);if(k=E(_,p))return I=h(p,5,Et(_)),g(_),I;if(F=T(_,p))return I=h(p,6,Ze(_)),g(_),I;if(H=S(_,p))return I=h(p,7,ut(_)),g(_),I;if(!k&&!F&&!H)return I=h(p,13,se(_)),u(Te.INVALID_TOKEN_IN_PLACEHOLDER,i(),0,I.value),g(_),I;break}}return I}function J(_,p){const{currentType:I}=p;let P=null;const k=_.currentChar();switch((I===8||I===9||I===12||I===10)&&(k===Zt||k===dr)&&u(Te.INVALID_LINKED_FORMAT,i(),0),k){case"@":return _.next(),P=h(p,8,"@"),p.inLinked=!0,P;case".":return g(_),_.next(),h(p,9,".");case":":return g(_),_.next(),h(p,10,":");default:return z(_)?(P=h(p,1,B(_)),p.braceNest=0,p.inLinked=!1,P):w(_,p)||O(_,p)?(g(_),J(_,p)):D(_,p)?(g(_),h(p,12,le(_))):C(_,p)?(g(_),k==="{"?W(_,p)||P:h(p,11,V(_))):(I===8&&u(Te.INVALID_LINKED_FORMAT,i(),0),p.braceNest=0,p.inLinked=!1,ve(_,p))}}function ve(_,p){let I={type:14};if(p.braceNest>0)return W(_,p)||f(p);if(p.inLinked)return J(_,p)||f(p);switch(_.currentChar()){case"{":return W(_,p)||f(p);case"}":return u(Te.UNBALANCED_CLOSING_BRACE,i(),0),_.next(),h(p,3,"}");case"@":return J(_,p)||f(p);default:{if(z(_))return I=h(p,1,B(_)),p.braceNest=0,p.inLinked=!1,I;const{isModulo:k,hasSpace:F}=de(_);if(k)return F?h(p,0,nt(_)):h(p,4,Ie(_));if($(_))return h(p,0,nt(_));break}}return I}function Be(){const{currentType:_,offset:p,startLoc:I,endLoc:P}=l;return l.lastType=_,l.lastOffset=p,l.lastStartLoc=I,l.lastEndLoc=P,l.offset=s(),l.startLoc=i(),r.currentChar()===jr?h(l,14):ve(r,l)}return{nextToken:Be,currentOffset:s,currentPosition:i,context:c}}const T2="parser",b2=/(?:\\\\|\\'|\\u([0-9a-fA-F]{4})|\\U([0-9a-fA-F]{6}))/g;function w2(t,e,n){switch(t){case"\\\\":return"\\";case"\\'":return"'";default:{const r=parseInt(e||n,16);return r<=55295||r>=57344?String.fromCodePoint(r):""}}}function A2(t={}){const e=t.location!==!1,{onError:n,onWarn:r}=t;function s(E,T,S,w,...D){const O=E.currentPosition();if(O.offset+=w,O.column+=w,n){const C=e?ec(S,O):null,z=No(T,C,{domain:T2,args:D});n(z)}}function i(E,T,S,w,...D){const O=E.currentPosition();if(O.offset+=w,O.column+=w,r){const C=e?ec(S,O):null;r(d2(T,C,D))}}function o(E,T,S){const w={type:E};return e&&(w.start=T,w.end=T,w.loc={start:S,end:S}),w}function a(E,T,S,w){w&&(E.type=w),e&&(E.end=T,E.loc&&(E.loc.end=S))}function l(E,T){const S=E.context(),w=o(3,S.offset,S.startLoc);return w.value=T,a(w,E.currentOffset(),E.currentPosition()),w}function c(E,T){const S=E.context(),{lastOffset:w,lastStartLoc:D}=S,O=o(5,w,D);return O.index=parseInt(T,10),E.nextToken(),a(O,E.currentOffset(),E.currentPosition()),O}function d(E,T,S){const w=E.context(),{lastOffset:D,lastStartLoc:O}=w,C=o(4,D,O);return C.key=T,S===!0&&(C.modulo=!0),E.nextToken(),a(C,E.currentOffset(),E.currentPosition()),C}function u(E,T){const S=E.context(),{lastOffset:w,lastStartLoc:D}=S,O=o(9,w,D);return O.value=T.replace(b2,w2),E.nextToken(),a(O,E.currentOffset(),E.currentPosition()),O}function h(E){const T=E.nextToken(),S=E.context(),{lastOffset:w,lastStartLoc:D}=S,O=o(8,w,D);return T.type!==12?(s(E,Te.UNEXPECTED_EMPTY_LINKED_MODIFIER,S.lastStartLoc,0),O.value="",a(O,w,D),{nextConsumeToken:T,node:O}):(T.value==null&&s(E,Te.UNEXPECTED_LEXICAL_ANALYSIS,S.lastStartLoc,0,xn(T)),O.value=T.value||"",a(O,E.currentOffset(),E.currentPosition()),{node:O})}function f(E,T){const S=E.context(),w=o(7,S.offset,S.startLoc);return w.value=T,a(w,E.currentOffset(),E.currentPosition()),w}function m(E){const T=E.context(),S=o(6,T.offset,T.startLoc);let w=E.nextToken();if(w.type===9){const D=h(E);S.modifier=D.node,w=D.nextConsumeToken||E.nextToken()}switch(w.type!==10&&s(E,Te.UNEXPECTED_LEXICAL_ANALYSIS,T.lastStartLoc,0,xn(w)),w=E.nextToken(),w.type===2&&(w=E.nextToken()),w.type){case 11:w.value==null&&s(E,Te.UNEXPECTED_LEXICAL_ANALYSIS,T.lastStartLoc,0,xn(w)),S.key=f(E,w.value||"");break;case 5:w.value==null&&s(E,Te.UNEXPECTED_LEXICAL_ANALYSIS,T.lastStartLoc,0,xn(w)),S.key=d(E,w.value||"");break;case 6:w.value==null&&s(E,Te.UNEXPECTED_LEXICAL_ANALYSIS,T.lastStartLoc,0,xn(w)),S.key=c(E,w.value||"");break;case 7:w.value==null&&s(E,Te.UNEXPECTED_LEXICAL_ANALYSIS,T.lastStartLoc,0,xn(w)),S.key=u(E,w.value||"");break;default:{s(E,Te.UNEXPECTED_EMPTY_LINKED_KEY,T.lastStartLoc,0);const D=E.context(),O=o(7,D.offset,D.startLoc);return O.value="",a(O,D.offset,D.startLoc),S.key=O,a(S,D.offset,D.startLoc),{nextConsumeToken:w,node:S}}}return a(S,E.currentOffset(),E.currentPosition()),{node:S}}function y(E){const T=E.context(),S=T.currentType===1?E.currentOffset():T.offset,w=T.currentType===1?T.endLoc:T.startLoc,D=o(2,S,w);D.items=[];let O=null,C=null;do{const $=O||E.nextToken();switch(O=null,$.type){case 0:$.value==null&&s(E,Te.UNEXPECTED_LEXICAL_ANALYSIS,T.lastStartLoc,0,xn($)),D.items.push(l(E,$.value||""));break;case 6:$.value==null&&s(E,Te.UNEXPECTED_LEXICAL_ANALYSIS,T.lastStartLoc,0,xn($)),D.items.push(c(E,$.value||""));break;case 4:C=!0;break;case 5:$.value==null&&s(E,Te.UNEXPECTED_LEXICAL_ANALYSIS,T.lastStartLoc,0,xn($)),D.items.push(d(E,$.value||"",!!C)),C&&(i(E,Kp.USE_MODULO_SYNTAX,T.lastStartLoc,0,xn($)),C=null);break;case 7:$.value==null&&s(E,Te.UNEXPECTED_LEXICAL_ANALYSIS,T.lastStartLoc,0,xn($)),D.items.push(u(E,$.value||""));break;case 8:{const ie=m(E);D.items.push(ie.node),O=ie.nextConsumeToken||null;break}}}while(T.currentType!==14&&T.currentType!==1);const z=T.currentType===1?T.lastOffset:E.currentOffset(),de=T.currentType===1?T.lastEndLoc:E.currentPosition();return a(D,z,de),D}function g(E,T,S,w){const D=E.context();let O=w.items.length===0;const C=o(1,T,S);C.cases=[],C.cases.push(w);do{const z=y(E);O||(O=z.items.length===0),C.cases.push(z)}while(D.currentType!==14);return O&&s(E,Te.MUST_HAVE_MESSAGES_IN_PLURAL,S,0),a(C,E.currentOffset(),E.currentPosition()),C}function v(E){const T=E.context(),{offset:S,startLoc:w}=T,D=y(E);return T.currentType===14?D:g(E,S,w,D)}function b(E){const T=I2(E,tA({},t)),S=T.context(),w=o(0,S.offset,S.startLoc);return e&&w.loc&&(w.loc.source=E),w.body=v(T),t.onCacheKey&&(w.cacheKey=t.onCacheKey(E)),S.currentType!==14&&s(T,Te.UNEXPECTED_LEXICAL_ANALYSIS,S.lastStartLoc,0,E[S.offset]||""),a(w,T.currentOffset(),T.currentPosition()),w}return{parse:b}}function xn(t){if(t.type===14)return"EOF";const e=(t.value||"").replace(/\r?\n/gu,"\\n");return e.length>10?e.slice(0,9)+"":e}function S2(t,e={}){const n={ast:t,helpers:new Set};return{context:()=>n,helper:i=>(n.helpers.add(i),i)}}function _v(t,e){for(let n=0;n<t.length;n++)zp(t[n],e)}function zp(t,e){switch(t.type){case 1:_v(t.cases,e),e.helper("plural");break;case 2:_v(t.items,e);break;case 6:{zp(t.key,e),e.helper("linked"),e.helper("type");break}case 5:e.helper("interpolate"),e.helper("list");break;case 4:e.helper("interpolate"),e.helper("named");break}}function R2(t,e={}){const n=S2(t);n.helper("normalize"),t.body&&zp(t.body,n);const r=n.context();t.helpers=Array.from(r.helpers)}function P2(t){const e=t.body;return e.type===2?gv(e):e.cases.forEach(n=>gv(n)),t}function gv(t){if(t.items.length===1){const e=t.items[0];(e.type===3||e.type===9)&&(t.static=e.value,delete e.value)}else{const e=[];for(let n=0;n<t.items.length;n++){const r=t.items[n];if(!(r.type===3||r.type===9)||r.value==null)break;e.push(r.value)}if(e.length===t.items.length){t.static=nA(e);for(let n=0;n<t.items.length;n++){const r=t.items[n];(r.type===3||r.type===9)&&delete r.value}}}}const C2="minifier";function $i(t){switch(t.t=t.type,t.type){case 0:{const e=t;$i(e.body),e.b=e.body,delete e.body;break}case 1:{const e=t,n=e.cases;for(let r=0;r<n.length;r++)$i(n[r]);e.c=n,delete e.cases;break}case 2:{const e=t,n=e.items;for(let r=0;r<n.length;r++)$i(n[r]);e.i=n,delete e.items,e.static&&(e.s=e.static,delete e.static);break}case 3:case 9:case 8:case 7:{const e=t;e.value&&(e.v=e.value,delete e.value);break}case 6:{const e=t;$i(e.key),e.k=e.key,delete e.key,e.modifier&&($i(e.modifier),e.m=e.modifier,delete e.modifier);break}case 5:{const e=t;e.i=e.index,delete e.index;break}case 4:{const e=t;e.k=e.key,delete e.key;break}default:throw No(Te.UNHANDLED_MINIFIER_NODE_TYPE,null,{domain:C2,args:[t.type]})}delete t.type}const O2="parser";function k2(t,e){const{sourceMap:n,filename:r,breakLineCode:s,needIndent:i}=e,o=e.location!==!1,a={filename:r,code:"",column:1,line:1,offset:0,map:void 0,breakLineCode:s,needIndent:i,indentLevel:0};o&&t.loc&&(a.source=t.loc.source);const l=()=>a;function c(g,v){a.code+=g}function d(g,v=!0){const b=v?s:"";c(i?b+"  ".repeat(g):b)}function u(g=!0){const v=++a.indentLevel;g&&d(v)}function h(g=!0){const v=--a.indentLevel;g&&d(v)}function f(){d(a.indentLevel)}return{context:l,push:c,indent:u,deindent:h,newline:f,helper:g=>`_${g}`,needIndent:()=>a.needIndent}}function N2(t,e){const{helper:n}=t;t.push(`${n("linked")}(`),Eo(t,e.key),e.modifier?(t.push(", "),Eo(t,e.modifier),t.push(", _type")):t.push(", undefined, _type"),t.push(")")}function x2(t,e){const{helper:n,needIndent:r}=t;t.push(`${n("normalize")}([`),t.indent(r());const s=e.items.length;for(let i=0;i<s&&(Eo(t,e.items[i]),i!==s-1);i++)t.push(", ");t.deindent(r()),t.push("])")}function D2(t,e){const{helper:n,needIndent:r}=t;if(e.cases.length>1){t.push(`${n("plural")}([`),t.indent(r());const s=e.cases.length;for(let i=0;i<s&&(Eo(t,e.cases[i]),i!==s-1);i++)t.push(", ");t.deindent(r()),t.push("])")}}function V2(t,e){e.body?Eo(t,e.body):t.push("null")}function Eo(t,e){const{helper:n}=t;switch(e.type){case 0:V2(t,e);break;case 1:D2(t,e);break;case 2:x2(t,e);break;case 6:N2(t,e);break;case 8:t.push(JSON.stringify(e.value),e);break;case 7:t.push(JSON.stringify(e.value),e);break;case 5:t.push(`${n("interpolate")}(${n("list")}(${e.index}))`,e);break;case 4:t.push(`${n("interpolate")}(${n("named")}(${JSON.stringify(e.key)}))`,e);break;case 9:t.push(JSON.stringify(e.value),e);break;case 3:t.push(JSON.stringify(e.value),e);break;default:throw No(Te.UNHANDLED_CODEGEN_NODE_TYPE,null,{domain:O2,args:[e.type]})}}const L2=(t,e={})=>{const n=mv(e.mode)?e.mode:"normal",r=mv(e.filename)?e.filename:"message.intl",s=!!e.sourceMap,i=e.breakLineCode!=null?e.breakLineCode:n==="arrow"?";":`
`,o=e.needIndent?e.needIndent:n!=="arrow",a=t.helpers||[],l=k2(t,{mode:n,filename:r,sourceMap:s,breakLineCode:i,needIndent:o});l.push(n==="normal"?"function __msg__ (ctx) {":"(ctx) => {"),l.indent(o),a.length>0&&(l.push(`const { ${nA(a.map(u=>`${u}: _${u}`),", ")} } = ctx`),l.newline()),l.push("return "),Eo(l,t),l.deindent(o),l.push("}"),delete t.helpers;const{code:c,map:d}=l.context();return{ast:t,code:c,map:d?d.toJSON():void 0}};function M2(t,e={}){const n=tA({},e),r=!!n.jit,s=!!n.minify,i=n.optimize==null?!0:n.optimize,a=A2(n).parse(t);return r?(i&&P2(a),s&&$i(a),{ast:a,code:""}):(R2(a,n),L2(a,n))}/*!
  * core-base v9.12.0
  * (c) 2024 kazuya kawaguchi
  * Released under the MIT License.
  */function F2(){typeof __INTLIFY_PROD_DEVTOOLS__!="boolean"&&(pr().__INTLIFY_PROD_DEVTOOLS__=!1),typeof __INTLIFY_JIT_COMPILATION__!="boolean"&&(pr().__INTLIFY_JIT_COMPILATION__=!1),typeof __INTLIFY_DROP_MESSAGE_COMPILER__!="boolean"&&(pr().__INTLIFY_DROP_MESSAGE_COMPILER__=!1)}const Rs=[];Rs[0]={w:[0],i:[3,0],"[":[4],o:[7]};Rs[1]={w:[1],".":[2],"[":[4],o:[7]};Rs[2]={w:[2],i:[3,0],0:[3,0]};Rs[3]={i:[3,0],0:[3,0],w:[1,1],".":[2,1],"[":[4,1],o:[7,1]};Rs[4]={"'":[5,0],'"':[6,0],"[":[4,2],"]":[1,3],o:8,l:[4,0]};Rs[5]={"'":[4,0],o:8,l:[5,0]};Rs[6]={'"':[4,0],o:8,l:[6,0]};const U2=/^\s?(?:true|false|-?[\d.]+|'[^']*'|"[^"]*")\s?$/;function $2(t){return U2.test(t)}function B2(t){const e=t.charCodeAt(0),n=t.charCodeAt(t.length-1);return e===n&&(e===34||e===39)?t.slice(1,-1):t}function j2(t){if(t==null)return"o";switch(t.charCodeAt(0)){case 91:case 93:case 46:case 34:case 39:return t;case 95:case 36:case 45:return"i";case 9:case 10:case 13:case 160:case 65279:case 8232:case 8233:return"w"}return"i"}function q2(t){const e=t.trim();return t.charAt(0)==="0"&&isNaN(parseInt(t))?!1:$2(e)?B2(e):"*"+e}function G2(t){const e=[];let n=-1,r=0,s=0,i,o,a,l,c,d,u;const h=[];h[0]=()=>{o===void 0?o=a:o+=a},h[1]=()=>{o!==void 0&&(e.push(o),o=void 0)},h[2]=()=>{h[0](),s++},h[3]=()=>{if(s>0)s--,r=4,h[0]();else{if(s=0,o===void 0||(o=q2(o),o===!1))return!1;h[1]()}};function f(){const m=t[n+1];if(r===5&&m==="'"||r===6&&m==='"')return n++,a="\\"+m,h[0](),!0}for(;r!==null;)if(n++,i=t[n],!(i==="\\"&&f())){if(l=j2(i),u=Rs[r],c=u[l]||u.l||8,c===8||(r=c[0],c[1]!==void 0&&(d=h[c[1]],d&&(a=i,d()===!1))))return;if(r===7)return e}}const yv=new Map;function H2(t,e){return He(t)?t[e]:null}function W2(t,e){if(!He(t))return null;let n=yv.get(e);if(n||(n=G2(e),n&&yv.set(e,n)),!n)return null;const r=n.length;let s=t,i=0;for(;i<r;){const o=s[n[i]];if(o===void 0||et(s))return null;s=o,i++}return s}const K2=t=>t,z2=t=>"",Q2="text",Y2=t=>t.length===0?"":o2(t),X2=i2;function vv(t,e){return t=Math.abs(t),e===2?t?t>1?1:0:1:t?Math.min(t,2):0}function J2(t){const e=bt(t.pluralIndex)?t.pluralIndex:-1;return t.named&&(bt(t.named.count)||bt(t.named.n))?bt(t.named.count)?t.named.count:bt(t.named.n)?t.named.n:e:e}function Z2(t,e){e.count||(e.count=t),e.n||(e.n=t)}function e$(t={}){const e=t.locale,n=J2(t),r=He(t.pluralRules)&&ne(e)&&et(t.pluralRules[e])?t.pluralRules[e]:vv,s=He(t.pluralRules)&&ne(e)&&et(t.pluralRules[e])?vv:void 0,i=v=>v[r(n,v.length,s)],o=t.list||[],a=v=>o[v],l=t.named||{};bt(t.pluralIndex)&&Z2(n,l);const c=v=>l[v];function d(v){const b=et(t.messages)?t.messages(v):He(t.messages)?t.messages[v]:!1;return b||(t.parent?t.parent.message(v):z2)}const u=v=>t.modifiers?t.modifiers[v]:K2,h=Se(t.processor)&&et(t.processor.normalize)?t.processor.normalize:Y2,f=Se(t.processor)&&et(t.processor.interpolate)?t.processor.interpolate:X2,m=Se(t.processor)&&ne(t.processor.type)?t.processor.type:Q2,g={list:a,named:c,plural:i,linked:(v,...b)=>{const[E,T]=b;let S="text",w="";b.length===1?He(E)?(w=E.modifier||w,S=E.type||S):ne(E)&&(w=E||w):b.length===2&&(ne(E)&&(w=E||w),ne(T)&&(S=T||S));const D=d(v)(g),O=S==="vnode"&&ot(D)&&w?D[0]:D;return w?u(w)(O,S):O},message:d,type:m,interpolate:f,normalize:h,values:Bt({},o,l)};return g}let Ka=null;function t$(t){Ka=t}function n$(t,e,n){Ka&&Ka.emit("i18n:init",{timestamp:Date.now(),i18n:t,version:e,meta:n})}const r$=s$("function:translate");function s$(t){return e=>Ka&&Ka.emit(t,e)}const rA=Kp.__EXTEND_POINT__,Ds=ph(rA),i$={NOT_FOUND_KEY:rA,FALLBACK_TO_TRANSLATE:Ds(),CANNOT_FORMAT_NUMBER:Ds(),FALLBACK_TO_NUMBER_FORMAT:Ds(),CANNOT_FORMAT_DATE:Ds(),FALLBACK_TO_DATE_FORMAT:Ds(),EXPERIMENTAL_CUSTOM_MESSAGE_COMPILER:Ds(),__EXTEND_POINT__:Ds()},sA=Te.__EXTEND_POINT__,Vs=ph(sA),Mn={INVALID_ARGUMENT:sA,INVALID_DATE_ARGUMENT:Vs(),INVALID_ISO_DATE_ARGUMENT:Vs(),NOT_SUPPORT_NON_STRING_MESSAGE:Vs(),NOT_SUPPORT_LOCALE_PROMISE_VALUE:Vs(),NOT_SUPPORT_LOCALE_ASYNC_FUNCTION:Vs(),NOT_SUPPORT_LOCALE_TYPE:Vs(),__EXTEND_POINT__:Vs()};function tr(t){return No(t,null,void 0)}function Qp(t,e){return e.locale!=null?Ev(e.locale):Ev(t.locale)}let ld;function Ev(t){if(ne(t))return t;if(et(t)){if(t.resolvedOnce&&ld!=null)return ld;if(t.constructor.name==="Function"){const e=t();if(s2(e))throw tr(Mn.NOT_SUPPORT_LOCALE_PROMISE_VALUE);return ld=e}else throw tr(Mn.NOT_SUPPORT_LOCALE_ASYNC_FUNCTION)}else throw tr(Mn.NOT_SUPPORT_LOCALE_TYPE)}function o$(t,e,n){return[...new Set([n,...ot(e)?e:He(e)?Object.keys(e):ne(e)?[e]:[n]])]}function iA(t,e,n){const r=ne(n)?n:Io,s=t;s.__localeChainCache||(s.__localeChainCache=new Map);let i=s.__localeChainCache.get(r);if(!i){i=[];let o=[n];for(;ot(o);)o=Iv(i,o,e);const a=ot(e)||!Se(e)?e:e.default?e.default:null;o=ne(a)?[a]:a,ot(o)&&Iv(i,o,!1),s.__localeChainCache.set(r,i)}return i}function Iv(t,e,n){let r=!0;for(let s=0;s<e.length&&ke(r);s++){const i=e[s];ne(i)&&(r=a$(t,e[s],n))}return r}function a$(t,e,n){let r;const s=e.split("-");do{const i=s.join("-");r=l$(t,i,n),s.splice(-1,1)}while(s.length&&r===!0);return r}function l$(t,e,n){let r=!1;if(!t.includes(e)&&(r=!0,e)){r=e[e.length-1]!=="!";const s=e.replace(/!/g,"");t.push(s),(ot(n)||Se(n))&&n[s]&&(r=n[s])}return r}const u$="9.12.0",_h=-1,Io="en-US",Tv="",bv=t=>`${t.charAt(0).toLocaleUpperCase()}${t.substr(1)}`;function c$(){return{upper:(t,e)=>e==="text"&&ne(t)?t.toUpperCase():e==="vnode"&&He(t)&&"__v_isVNode"in t?t.children.toUpperCase():t,lower:(t,e)=>e==="text"&&ne(t)?t.toLowerCase():e==="vnode"&&He(t)&&"__v_isVNode"in t?t.children.toLowerCase():t,capitalize:(t,e)=>e==="text"&&ne(t)?bv(t):e==="vnode"&&He(t)&&"__v_isVNode"in t?bv(t.children):t}}let oA;function wv(t){oA=t}let aA;function h$(t){aA=t}let lA;function d$(t){lA=t}let uA=null;const f$=t=>{uA=t},m$=()=>uA;let cA=null;const Av=t=>{cA=t},p$=()=>cA;let Sv=0;function _$(t={}){const e=et(t.onWarn)?t.onWarn:a2,n=ne(t.version)?t.version:u$,r=ne(t.locale)||et(t.locale)?t.locale:Io,s=et(r)?Io:r,i=ot(t.fallbackLocale)||Se(t.fallbackLocale)||ne(t.fallbackLocale)||t.fallbackLocale===!1?t.fallbackLocale:s,o=Se(t.messages)?t.messages:{[s]:{}},a=Se(t.datetimeFormats)?t.datetimeFormats:{[s]:{}},l=Se(t.numberFormats)?t.numberFormats:{[s]:{}},c=Bt({},t.modifiers||{},c$()),d=t.pluralRules||{},u=et(t.missing)?t.missing:null,h=ke(t.missingWarn)||gs(t.missingWarn)?t.missingWarn:!0,f=ke(t.fallbackWarn)||gs(t.fallbackWarn)?t.fallbackWarn:!0,m=!!t.fallbackFormat,y=!!t.unresolving,g=et(t.postTranslation)?t.postTranslation:null,v=Se(t.processor)?t.processor:null,b=ke(t.warnHtmlMessage)?t.warnHtmlMessage:!0,E=!!t.escapeParameter,T=et(t.messageCompiler)?t.messageCompiler:oA,S=et(t.messageResolver)?t.messageResolver:aA||H2,w=et(t.localeFallbacker)?t.localeFallbacker:lA||o$,D=He(t.fallbackContext)?t.fallbackContext:void 0,O=t,C=He(O.__datetimeFormatters)?O.__datetimeFormatters:new Map,z=He(O.__numberFormatters)?O.__numberFormatters:new Map,de=He(O.__meta)?O.__meta:{};Sv++;const $={version:n,cid:Sv,locale:r,fallbackLocale:i,messages:o,modifiers:c,pluralRules:d,missing:u,missingWarn:h,fallbackWarn:f,fallbackFormat:m,unresolving:y,postTranslation:g,processor:v,warnHtmlMessage:b,escapeParameter:E,messageCompiler:T,messageResolver:S,localeFallbacker:w,fallbackContext:D,onWarn:e,__meta:de};return $.datetimeFormats=a,$.numberFormats=l,$.__datetimeFormatters=C,$.__numberFormatters=z,__INTLIFY_PROD_DEVTOOLS__&&n$($,n,de),$}function Yp(t,e,n,r,s){const{missing:i,onWarn:o}=t;if(i!==null){const a=i(t,n,e,s);return ne(a)?a:e}else return e}function Ho(t,e,n){const r=t;r.__localeChainCache=new Map,t.localeFallbacker(t,n,e)}function ud(t){return n=>g$(n,t)}function g$(t,e){const n=e.b||e.body;if((n.t||n.type)===1){const r=n,s=r.c||r.cases;return t.plural(s.reduce((i,o)=>[...i,Rv(t,o)],[]))}else return Rv(t,n)}function Rv(t,e){const n=e.s||e.static;if(n)return t.type==="text"?n:t.normalize([n]);{const r=(e.i||e.items).reduce((s,i)=>[...s,bf(t,i)],[]);return t.normalize(r)}}function bf(t,e){const n=e.t||e.type;switch(n){case 3:{const r=e;return r.v||r.value}case 9:{const r=e;return r.v||r.value}case 4:{const r=e;return t.interpolate(t.named(r.k||r.key))}case 5:{const r=e;return t.interpolate(t.list(r.i!=null?r.i:r.index))}case 6:{const r=e,s=r.m||r.modifier;return t.linked(bf(t,r.k||r.key),s?bf(t,s):void 0,t.type)}case 7:{const r=e;return r.v||r.value}case 8:{const r=e;return r.v||r.value}default:throw new Error(`unhandled node type on format message part: ${n}`)}}const hA=t=>t;let Gi=Object.create(null);const To=t=>He(t)&&(t.t===0||t.type===0)&&("b"in t||"body"in t);function dA(t,e={}){let n=!1;const r=e.onError||m2;return e.onError=s=>{n=!0,r(s)},{...M2(t,e),detectError:n}}const y$=(t,e)=>{if(!ne(t))throw tr(Mn.NOT_SUPPORT_NON_STRING_MESSAGE);{ke(e.warnHtmlMessage)&&e.warnHtmlMessage;const r=(e.onCacheKey||hA)(t),s=Gi[r];if(s)return s;const{code:i,detectError:o}=dA(t,e),a=new Function(`return ${i}`)();return o?a:Gi[r]=a}};function v$(t,e){if(__INTLIFY_JIT_COMPILATION__&&!__INTLIFY_DROP_MESSAGE_COMPILER__&&ne(t)){ke(e.warnHtmlMessage)&&e.warnHtmlMessage;const r=(e.onCacheKey||hA)(t),s=Gi[r];if(s)return s;const{ast:i,detectError:o}=dA(t,{...e,location:!1,jit:!0}),a=ud(i);return o?a:Gi[r]=a}else{const n=t.cacheKey;if(n){const r=Gi[n];return r||(Gi[n]=ud(t))}else return ud(t)}}const Pv=()=>"",Pn=t=>et(t);function Cv(t,...e){const{fallbackFormat:n,postTranslation:r,unresolving:s,messageCompiler:i,fallbackLocale:o,messages:a}=t,[l,c]=wf(...e),d=ke(c.missingWarn)?c.missingWarn:t.missingWarn,u=ke(c.fallbackWarn)?c.fallbackWarn:t.fallbackWarn,h=ke(c.escapeParameter)?c.escapeParameter:t.escapeParameter,f=!!c.resolvedMessage,m=ne(c.default)||ke(c.default)?ke(c.default)?i?l:()=>l:c.default:n?i?l:()=>l:"",y=n||m!=="",g=Qp(t,c);h&&E$(c);let[v,b,E]=f?[l,g,a[g]||{}]:fA(t,l,g,o,u,d),T=v,S=l;if(!f&&!(ne(T)||To(T)||Pn(T))&&y&&(T=m,S=T),!f&&(!(ne(T)||To(T)||Pn(T))||!ne(b)))return s?_h:l;let w=!1;const D=()=>{w=!0},O=Pn(T)?T:mA(t,l,b,T,S,D);if(w)return T;const C=b$(t,b,E,c),z=e$(C),de=I$(t,O,z),$=r?r(de,l):de;if(__INTLIFY_PROD_DEVTOOLS__){const ie={timestamp:Date.now(),key:ne(l)?l:Pn(T)?T.key:"",locale:b||(Pn(T)?T.locale:""),format:ne(T)?T:Pn(T)?T.source:"",message:$};ie.meta=Bt({},t.__meta,m$()||{}),r$(ie)}return $}function E$(t){ot(t.list)?t.list=t.list.map(e=>ne(e)?fv(e):e):He(t.named)&&Object.keys(t.named).forEach(e=>{ne(t.named[e])&&(t.named[e]=fv(t.named[e]))})}function fA(t,e,n,r,s,i){const{messages:o,onWarn:a,messageResolver:l,localeFallbacker:c}=t,d=c(t,r,n);let u={},h,f=null;const m="translate";for(let y=0;y<d.length&&(h=d[y],u=o[h]||{},(f=l(u,e))===null&&(f=u[e]),!(ne(f)||To(f)||Pn(f)));y++){const g=Yp(t,e,h,i,m);g!==e&&(f=g)}return[f,h,u]}function mA(t,e,n,r,s,i){const{messageCompiler:o,warnHtmlMessage:a}=t;if(Pn(r)){const c=r;return c.locale=c.locale||n,c.key=c.key||e,c}if(o==null){const c=()=>r;return c.locale=n,c.key=e,c}const l=o(r,T$(t,n,s,r,a,i));return l.locale=n,l.key=e,l.source=r,l}function I$(t,e,n){return e(n)}function wf(...t){const[e,n,r]=t,s={};if(!ne(e)&&!bt(e)&&!Pn(e)&&!To(e))throw tr(Mn.INVALID_ARGUMENT);const i=bt(e)?String(e):(Pn(e),e);return bt(n)?s.plural=n:ne(n)?s.default=n:Se(n)&&!mh(n)?s.named=n:ot(n)&&(s.list=n),bt(r)?s.plural=r:ne(r)?s.default=r:Se(r)&&Bt(s,r),[i,s]}function T$(t,e,n,r,s,i){return{locale:e,key:n,warnHtmlMessage:s,onError:o=>{throw i&&i(o),o},onCacheKey:o=>e2(e,n,o)}}function b$(t,e,n,r){const{modifiers:s,pluralRules:i,messageResolver:o,fallbackLocale:a,fallbackWarn:l,missingWarn:c,fallbackContext:d}=t,h={locale:e,modifiers:s,pluralRules:i,messages:f=>{let m=o(n,f);if(m==null&&d){const[,,y]=fA(d,f,e,a,l,c);m=o(y,f)}if(ne(m)||To(m)){let y=!1;const v=mA(t,f,e,m,f,()=>{y=!0});return y?Pv:v}else return Pn(m)?m:Pv}};return t.processor&&(h.processor=t.processor),r.list&&(h.list=r.list),r.named&&(h.named=r.named),bt(r.plural)&&(h.pluralIndex=r.plural),h}function Ov(t,...e){const{datetimeFormats:n,unresolving:r,fallbackLocale:s,onWarn:i,localeFallbacker:o}=t,{__datetimeFormatters:a}=t,[l,c,d,u]=Af(...e),h=ke(d.missingWarn)?d.missingWarn:t.missingWarn;ke(d.fallbackWarn)?d.fallbackWarn:t.fallbackWarn;const f=!!d.part,m=Qp(t,d),y=o(t,s,m);if(!ne(l)||l==="")return new Intl.DateTimeFormat(m,u).format(c);let g={},v,b=null;const E="datetime format";for(let w=0;w<y.length&&(v=y[w],g=n[v]||{},b=g[l],!Se(b));w++)Yp(t,l,v,h,E);if(!Se(b)||!ne(v))return r?_h:l;let T=`${v}__${l}`;mh(u)||(T=`${T}__${JSON.stringify(u)}`);let S=a.get(T);return S||(S=new Intl.DateTimeFormat(v,Bt({},b,u)),a.set(T,S)),f?S.formatToParts(c):S.format(c)}const pA=["localeMatcher","weekday","era","year","month","day","hour","minute","second","timeZoneName","formatMatcher","hour12","timeZone","dateStyle","timeStyle","calendar","dayPeriod","numberingSystem","hourCycle","fractionalSecondDigits"];function Af(...t){const[e,n,r,s]=t,i={};let o={},a;if(ne(e)){const l=e.match(/(\d{4}-\d{2}-\d{2})(T|\s)?(.*)/);if(!l)throw tr(Mn.INVALID_ISO_DATE_ARGUMENT);const c=l[3]?l[3].trim().startsWith("T")?`${l[1].trim()}${l[3].trim()}`:`${l[1].trim()}T${l[3].trim()}`:l[1].trim();a=new Date(c);try{a.toISOString()}catch{throw tr(Mn.INVALID_ISO_DATE_ARGUMENT)}}else if(n2(e)){if(isNaN(e.getTime()))throw tr(Mn.INVALID_DATE_ARGUMENT);a=e}else if(bt(e))a=e;else throw tr(Mn.INVALID_ARGUMENT);return ne(n)?i.key=n:Se(n)&&Object.keys(n).forEach(l=>{pA.includes(l)?o[l]=n[l]:i[l]=n[l]}),ne(r)?i.locale=r:Se(r)&&(o=r),Se(s)&&(o=s),[i.key||"",a,i,o]}function kv(t,e,n){const r=t;for(const s in n){const i=`${e}__${s}`;r.__datetimeFormatters.has(i)&&r.__datetimeFormatters.delete(i)}}function Nv(t,...e){const{numberFormats:n,unresolving:r,fallbackLocale:s,onWarn:i,localeFallbacker:o}=t,{__numberFormatters:a}=t,[l,c,d,u]=Sf(...e),h=ke(d.missingWarn)?d.missingWarn:t.missingWarn;ke(d.fallbackWarn)?d.fallbackWarn:t.fallbackWarn;const f=!!d.part,m=Qp(t,d),y=o(t,s,m);if(!ne(l)||l==="")return new Intl.NumberFormat(m,u).format(c);let g={},v,b=null;const E="number format";for(let w=0;w<y.length&&(v=y[w],g=n[v]||{},b=g[l],!Se(b));w++)Yp(t,l,v,h,E);if(!Se(b)||!ne(v))return r?_h:l;let T=`${v}__${l}`;mh(u)||(T=`${T}__${JSON.stringify(u)}`);let S=a.get(T);return S||(S=new Intl.NumberFormat(v,Bt({},b,u)),a.set(T,S)),f?S.formatToParts(c):S.format(c)}const _A=["localeMatcher","style","currency","currencyDisplay","currencySign","useGrouping","minimumIntegerDigits","minimumFractionDigits","maximumFractionDigits","minimumSignificantDigits","maximumSignificantDigits","compactDisplay","notation","signDisplay","unit","unitDisplay","roundingMode","roundingPriority","roundingIncrement","trailingZeroDisplay"];function Sf(...t){const[e,n,r,s]=t,i={};let o={};if(!bt(e))throw tr(Mn.INVALID_ARGUMENT);const a=e;return ne(n)?i.key=n:Se(n)&&Object.keys(n).forEach(l=>{_A.includes(l)?o[l]=n[l]:i[l]=n[l]}),ne(r)?i.locale=r:Se(r)&&(o=r),Se(s)&&(o=s),[i.key||"",a,i,o]}function xv(t,e,n){const r=t;for(const s in n){const i=`${e}__${s}`;r.__numberFormatters.has(i)&&r.__numberFormatters.delete(i)}}F2();/*!
  * vue-i18n v9.12.0
  * (c) 2024 kazuya kawaguchi
  * Released under the MIT License.
  */const w$="9.12.0";function A$(){typeof __VUE_I18N_FULL_INSTALL__!="boolean"&&(pr().__VUE_I18N_FULL_INSTALL__=!0),typeof __VUE_I18N_LEGACY_API__!="boolean"&&(pr().__VUE_I18N_LEGACY_API__=!0),typeof __INTLIFY_JIT_COMPILATION__!="boolean"&&(pr().__INTLIFY_JIT_COMPILATION__=!1),typeof __INTLIFY_DROP_MESSAGE_COMPILER__!="boolean"&&(pr().__INTLIFY_DROP_MESSAGE_COMPILER__=!1),typeof __INTLIFY_PROD_DEVTOOLS__!="boolean"&&(pr().__INTLIFY_PROD_DEVTOOLS__=!1)}const gA=i$.__EXTEND_POINT__,fr=ph(gA);fr(),fr(),fr(),fr(),fr(),fr(),fr(),fr(),fr();const yA=Mn.__EXTEND_POINT__,ln=ph(yA),wt={UNEXPECTED_RETURN_TYPE:yA,INVALID_ARGUMENT:ln(),MUST_BE_CALL_SETUP_TOP:ln(),NOT_INSTALLED:ln(),NOT_AVAILABLE_IN_LEGACY_MODE:ln(),REQUIRED_VALUE:ln(),INVALID_VALUE:ln(),CANNOT_SETUP_VUE_DEVTOOLS_PLUGIN:ln(),NOT_INSTALLED_WITH_PROVIDE:ln(),UNEXPECTED_ERROR:ln(),NOT_COMPATIBLE_LEGACY_VUE_I18N:ln(),BRIDGE_SUPPORT_VUE_2_ONLY:ln(),MUST_DEFINE_I18N_OPTION_IN_ALLOW_COMPOSITION:ln(),NOT_AVAILABLE_COMPOSITION_IN_LEGACY:ln(),__EXTEND_POINT__:ln()};function Ot(t,...e){return No(t,null,void 0)}const Rf=Ss("__translateVNode"),Pf=Ss("__datetimeParts"),Cf=Ss("__numberParts"),vA=Ss("__setPluralRules"),EA=Ss("__injectWithOption"),Of=Ss("__dispose");function za(t){if(!He(t))return t;for(const e in t)if(Zu(t,e))if(!e.includes("."))He(t[e])&&za(t[e]);else{const n=e.split("."),r=n.length-1;let s=t,i=!1;for(let o=0;o<r;o++){if(n[o]in s||(s[n[o]]={}),!He(s[n[o]])){i=!0;break}s=s[n[o]]}i||(s[n[r]]=t[e],delete t[e]),He(s[n[r]])&&za(s[n[r]])}return t}function gh(t,e){const{messages:n,__i18n:r,messageResolver:s,flatJson:i}=e,o=Se(n)?n:ot(r)?{}:{[t]:{}};if(ot(r)&&r.forEach(a=>{if("locale"in a&&"resource"in a){const{locale:l,resource:c}=a;l?(o[l]=o[l]||{},fu(c,o[l])):fu(c,o)}else ne(a)&&fu(JSON.parse(a),o)}),s==null&&i)for(const a in o)Zu(o,a)&&za(o[a]);return o}function IA(t){return t.type}function TA(t,e,n){let r=He(e.messages)?e.messages:{};"__i18nGlobal"in n&&(r=gh(t.locale.value,{messages:r,__i18n:n.__i18nGlobal}));const s=Object.keys(r);s.length&&s.forEach(i=>{t.mergeLocaleMessage(i,r[i])});{if(He(e.datetimeFormats)){const i=Object.keys(e.datetimeFormats);i.length&&i.forEach(o=>{t.mergeDateTimeFormat(o,e.datetimeFormats[o])})}if(He(e.numberFormats)){const i=Object.keys(e.numberFormats);i.length&&i.forEach(o=>{t.mergeNumberFormat(o,e.numberFormats[o])})}}}function Dv(t){return Ce(Ja,null,t,0)}const Vv="__INTLIFY_META__",Lv=()=>[],S$=()=>!1;let Mv=0;function Fv(t){return(e,n,r,s)=>t(n,r,ar()||void 0,s)}const R$=()=>{const t=ar();let e=null;return t&&(e=IA(t)[Vv])?{[Vv]:e}:null};function Xp(t={},e){const{__root:n,__injectWithOption:r}=t,s=n===void 0,i=t.flatJson,o=Ju?gt:hc,a=!!t.translateExistCompatible;let l=ke(t.inheritLocale)?t.inheritLocale:!0;const c=o(n&&l?n.locale.value:ne(t.locale)?t.locale:Io),d=o(n&&l?n.fallbackLocale.value:ne(t.fallbackLocale)||ot(t.fallbackLocale)||Se(t.fallbackLocale)||t.fallbackLocale===!1?t.fallbackLocale:c.value),u=o(gh(c.value,t)),h=o(Se(t.datetimeFormats)?t.datetimeFormats:{[c.value]:{}}),f=o(Se(t.numberFormats)?t.numberFormats:{[c.value]:{}});let m=n?n.missingWarn:ke(t.missingWarn)||gs(t.missingWarn)?t.missingWarn:!0,y=n?n.fallbackWarn:ke(t.fallbackWarn)||gs(t.fallbackWarn)?t.fallbackWarn:!0,g=n?n.fallbackRoot:ke(t.fallbackRoot)?t.fallbackRoot:!0,v=!!t.fallbackFormat,b=et(t.missing)?t.missing:null,E=et(t.missing)?Fv(t.missing):null,T=et(t.postTranslation)?t.postTranslation:null,S=n?n.warnHtmlMessage:ke(t.warnHtmlMessage)?t.warnHtmlMessage:!0,w=!!t.escapeParameter;const D=n?n.modifiers:Se(t.modifiers)?t.modifiers:{};let O=t.pluralRules||n&&n.pluralRules,C;C=(()=>{s&&Av(null);const N={version:w$,locale:c.value,fallbackLocale:d.value,messages:u.value,modifiers:D,pluralRules:O,missing:E===null?void 0:E,missingWarn:m,fallbackWarn:y,fallbackFormat:v,unresolving:!0,postTranslation:T===null?void 0:T,warnHtmlMessage:S,escapeParameter:w,messageResolver:t.messageResolver,messageCompiler:t.messageCompiler,__meta:{framework:"vue"}};N.datetimeFormats=h.value,N.numberFormats=f.value,N.__datetimeFormatters=Se(C)?C.__datetimeFormatters:void 0,N.__numberFormatters=Se(C)?C.__numberFormatters:void 0;const M=_$(N);return s&&Av(M),M})(),Ho(C,c.value,d.value);function de(){return[c.value,d.value,u.value,h.value,f.value]}const $=ge({get:()=>c.value,set:N=>{c.value=N,C.locale=c.value}}),ie=ge({get:()=>d.value,set:N=>{d.value=N,C.fallbackLocale=d.value,Ho(C,c.value,N)}}),we=ge(()=>u.value),Ne=ge(()=>h.value),Q=ge(()=>f.value);function Ee(){return et(T)?T:null}function Ie(N){T=N,C.postTranslation=N}function nt(){return b}function Et(N){N!==null&&(E=Fv(N)),b=N,C.missing=E}const Ze=(N,M,he,A,R,U)=>{de();let X;try{__INTLIFY_PROD_DEVTOOLS__,s||(C.fallbackContext=n?p$():void 0),X=N(C)}finally{__INTLIFY_PROD_DEVTOOLS__,s||(C.fallbackContext=void 0)}if(he!=="translate exists"&&bt(X)&&X===_h||he==="translate exists"&&!X){const[_e,ce]=M();return n&&g?A(n):R(_e)}else{if(U(X))return X;throw Ot(wt.UNEXPECTED_RETURN_TYPE)}};function ut(...N){return Ze(M=>Reflect.apply(Cv,null,[M,...N]),()=>wf(...N),"translate",M=>Reflect.apply(M.t,M,[...N]),M=>M,M=>ne(M))}function Qe(...N){const[M,he,A]=N;if(A&&!He(A))throw Ot(wt.INVALID_ARGUMENT);return ut(M,he,Bt({resolvedMessage:!0},A||{}))}function Vt(...N){return Ze(M=>Reflect.apply(Ov,null,[M,...N]),()=>Af(...N),"datetime format",M=>Reflect.apply(M.d,M,[...N]),()=>Tv,M=>ne(M))}function se(...N){return Ze(M=>Reflect.apply(Nv,null,[M,...N]),()=>Sf(...N),"number format",M=>Reflect.apply(M.n,M,[...N]),()=>Tv,M=>ne(M))}function le(N){return N.map(M=>ne(M)||bt(M)||ke(M)?Dv(String(M)):M)}const B={normalize:le,interpolate:N=>N,type:"vnode"};function W(...N){return Ze(M=>{let he;const A=M;try{A.processor=B,he=Reflect.apply(Cv,null,[A,...N])}finally{A.processor=null}return he},()=>wf(...N),"translate",M=>M[Rf](...N),M=>[Dv(M)],M=>ot(M))}function J(...N){return Ze(M=>Reflect.apply(Nv,null,[M,...N]),()=>Sf(...N),"number format",M=>M[Cf](...N),Lv,M=>ne(M)||ot(M))}function ve(...N){return Ze(M=>Reflect.apply(Ov,null,[M,...N]),()=>Af(...N),"datetime format",M=>M[Pf](...N),Lv,M=>ne(M)||ot(M))}function Be(N){O=N,C.pluralRules=O}function _(N,M){return Ze(()=>{if(!N)return!1;const he=ne(M)?M:c.value,A=P(he),R=C.messageResolver(A,N);return a?R!=null:To(R)||Pn(R)||ne(R)},()=>[N],"translate exists",he=>Reflect.apply(he.te,he,[N,M]),S$,he=>ke(he))}function p(N){let M=null;const he=iA(C,d.value,c.value);for(let A=0;A<he.length;A++){const R=u.value[he[A]]||{},U=C.messageResolver(R,N);if(U!=null){M=U;break}}return M}function I(N){const M=p(N);return M??(n?n.tm(N)||{}:{})}function P(N){return u.value[N]||{}}function k(N,M){if(i){const he={[N]:M};for(const A in he)Zu(he,A)&&za(he[A]);M=he[N]}u.value[N]=M,C.messages=u.value}function F(N,M){u.value[N]=u.value[N]||{};const he={[N]:M};if(i)for(const A in he)Zu(he,A)&&za(he[A]);M=he[N],fu(M,u.value[N]),C.messages=u.value}function H(N){return h.value[N]||{}}function G(N,M){h.value[N]=M,C.datetimeFormats=h.value,kv(C,N,M)}function Y(N,M){h.value[N]=Bt(h.value[N]||{},M),C.datetimeFormats=h.value,kv(C,N,M)}function q(N){return f.value[N]||{}}function re(N,M){f.value[N]=M,C.numberFormats=f.value,xv(C,N,M)}function fe(N,M){f.value[N]=Bt(f.value[N]||{},M),C.numberFormats=f.value,xv(C,N,M)}Mv++,n&&Ju&&(tn(n.locale,N=>{l&&(c.value=N,C.locale=N,Ho(C,c.value,d.value))}),tn(n.fallbackLocale,N=>{l&&(d.value=N,C.fallbackLocale=N,Ho(C,c.value,d.value))}));const Z={id:Mv,locale:$,fallbackLocale:ie,get inheritLocale(){return l},set inheritLocale(N){l=N,N&&n&&(c.value=n.locale.value,d.value=n.fallbackLocale.value,Ho(C,c.value,d.value))},get availableLocales(){return Object.keys(u.value).sort()},messages:we,get modifiers(){return D},get pluralRules(){return O||{}},get isGlobal(){return s},get missingWarn(){return m},set missingWarn(N){m=N,C.missingWarn=m},get fallbackWarn(){return y},set fallbackWarn(N){y=N,C.fallbackWarn=y},get fallbackRoot(){return g},set fallbackRoot(N){g=N},get fallbackFormat(){return v},set fallbackFormat(N){v=N,C.fallbackFormat=v},get warnHtmlMessage(){return S},set warnHtmlMessage(N){S=N,C.warnHtmlMessage=N},get escapeParameter(){return w},set escapeParameter(N){w=N,C.escapeParameter=N},t:ut,getLocaleMessage:P,setLocaleMessage:k,mergeLocaleMessage:F,getPostTranslationHandler:Ee,setPostTranslationHandler:Ie,getMissingHandler:nt,setMissingHandler:Et,[vA]:Be};return Z.datetimeFormats=Ne,Z.numberFormats=Q,Z.rt=Qe,Z.te=_,Z.tm=I,Z.d=Vt,Z.n=se,Z.getDateTimeFormat=H,Z.setDateTimeFormat=G,Z.mergeDateTimeFormat=Y,Z.getNumberFormat=q,Z.setNumberFormat=re,Z.mergeNumberFormat=fe,Z[EA]=r,Z[Rf]=W,Z[Pf]=ve,Z[Cf]=J,Z}function P$(t){const e=ne(t.locale)?t.locale:Io,n=ne(t.fallbackLocale)||ot(t.fallbackLocale)||Se(t.fallbackLocale)||t.fallbackLocale===!1?t.fallbackLocale:e,r=et(t.missing)?t.missing:void 0,s=ke(t.silentTranslationWarn)||gs(t.silentTranslationWarn)?!t.silentTranslationWarn:!0,i=ke(t.silentFallbackWarn)||gs(t.silentFallbackWarn)?!t.silentFallbackWarn:!0,o=ke(t.fallbackRoot)?t.fallbackRoot:!0,a=!!t.formatFallbackMessages,l=Se(t.modifiers)?t.modifiers:{},c=t.pluralizationRules,d=et(t.postTranslation)?t.postTranslation:void 0,u=ne(t.warnHtmlInMessage)?t.warnHtmlInMessage!=="off":!0,h=!!t.escapeParameterHtml,f=ke(t.sync)?t.sync:!0;let m=t.messages;if(Se(t.sharedMessages)){const w=t.sharedMessages;m=Object.keys(w).reduce((O,C)=>{const z=O[C]||(O[C]={});return Bt(z,w[C]),O},m||{})}const{__i18n:y,__root:g,__injectWithOption:v}=t,b=t.datetimeFormats,E=t.numberFormats,T=t.flatJson,S=t.translateExistCompatible;return{locale:e,fallbackLocale:n,messages:m,flatJson:T,datetimeFormats:b,numberFormats:E,missing:r,missingWarn:s,fallbackWarn:i,fallbackRoot:o,fallbackFormat:a,modifiers:l,pluralRules:c,postTranslation:d,warnHtmlMessage:u,escapeParameter:h,messageResolver:t.messageResolver,inheritLocale:f,translateExistCompatible:S,__i18n:y,__root:g,__injectWithOption:v}}function kf(t={},e){{const n=Xp(P$(t)),{__extender:r}=t,s={id:n.id,get locale(){return n.locale.value},set locale(i){n.locale.value=i},get fallbackLocale(){return n.fallbackLocale.value},set fallbackLocale(i){n.fallbackLocale.value=i},get messages(){return n.messages.value},get datetimeFormats(){return n.datetimeFormats.value},get numberFormats(){return n.numberFormats.value},get availableLocales(){return n.availableLocales},get formatter(){return{interpolate(){return[]}}},set formatter(i){},get missing(){return n.getMissingHandler()},set missing(i){n.setMissingHandler(i)},get silentTranslationWarn(){return ke(n.missingWarn)?!n.missingWarn:n.missingWarn},set silentTranslationWarn(i){n.missingWarn=ke(i)?!i:i},get silentFallbackWarn(){return ke(n.fallbackWarn)?!n.fallbackWarn:n.fallbackWarn},set silentFallbackWarn(i){n.fallbackWarn=ke(i)?!i:i},get modifiers(){return n.modifiers},get formatFallbackMessages(){return n.fallbackFormat},set formatFallbackMessages(i){n.fallbackFormat=i},get postTranslation(){return n.getPostTranslationHandler()},set postTranslation(i){n.setPostTranslationHandler(i)},get sync(){return n.inheritLocale},set sync(i){n.inheritLocale=i},get warnHtmlInMessage(){return n.warnHtmlMessage?"warn":"off"},set warnHtmlInMessage(i){n.warnHtmlMessage=i!=="off"},get escapeParameterHtml(){return n.escapeParameter},set escapeParameterHtml(i){n.escapeParameter=i},get preserveDirectiveContent(){return!0},set preserveDirectiveContent(i){},get pluralizationRules(){return n.pluralRules||{}},__composer:n,t(...i){const[o,a,l]=i,c={};let d=null,u=null;if(!ne(o))throw Ot(wt.INVALID_ARGUMENT);const h=o;return ne(a)?c.locale=a:ot(a)?d=a:Se(a)&&(u=a),ot(l)?d=l:Se(l)&&(u=l),Reflect.apply(n.t,n,[h,d||u||{},c])},rt(...i){return Reflect.apply(n.rt,n,[...i])},tc(...i){const[o,a,l]=i,c={plural:1};let d=null,u=null;if(!ne(o))throw Ot(wt.INVALID_ARGUMENT);const h=o;return ne(a)?c.locale=a:bt(a)?c.plural=a:ot(a)?d=a:Se(a)&&(u=a),ne(l)?c.locale=l:ot(l)?d=l:Se(l)&&(u=l),Reflect.apply(n.t,n,[h,d||u||{},c])},te(i,o){return n.te(i,o)},tm(i){return n.tm(i)},getLocaleMessage(i){return n.getLocaleMessage(i)},setLocaleMessage(i,o){n.setLocaleMessage(i,o)},mergeLocaleMessage(i,o){n.mergeLocaleMessage(i,o)},d(...i){return Reflect.apply(n.d,n,[...i])},getDateTimeFormat(i){return n.getDateTimeFormat(i)},setDateTimeFormat(i,o){n.setDateTimeFormat(i,o)},mergeDateTimeFormat(i,o){n.mergeDateTimeFormat(i,o)},n(...i){return Reflect.apply(n.n,n,[...i])},getNumberFormat(i){return n.getNumberFormat(i)},setNumberFormat(i,o){n.setNumberFormat(i,o)},mergeNumberFormat(i,o){n.mergeNumberFormat(i,o)},getChoiceIndex(i,o){return-1}};return s.__extender=r,s}}const Jp={tag:{type:[String,Object]},locale:{type:String},scope:{type:String,validator:t=>t==="parent"||t==="global",default:"parent"},i18n:{type:Object}};function C$({slots:t},e){return e.length===1&&e[0]==="default"?(t.default?t.default():[]).reduce((r,s)=>[...r,...s.type===Mt?s.children:[s]],[]):e.reduce((n,r)=>{const s=t[r];return s&&(n[r]=s()),n},{})}function bA(t){return Mt}const O$=ys({name:"i18n-t",props:Bt({keypath:{type:String,required:!0},plural:{type:[Number,String],validator:t=>bt(t)||!isNaN(t)}},Jp),setup(t,e){const{slots:n,attrs:r}=e,s=t.i18n||Zp({useScope:t.scope,__useComponent:!0});return()=>{const i=Object.keys(n).filter(u=>u!=="_"),o={};t.locale&&(o.locale=t.locale),t.plural!==void 0&&(o.plural=ne(t.plural)?+t.plural:t.plural);const a=C$(e,i),l=s[Rf](t.keypath,a,o),c=Bt({},r),d=ne(t.tag)||He(t.tag)?t.tag:bA();return Rr(d,c,l)}}}),Uv=O$;function k$(t){return ot(t)&&!ne(t[0])}function wA(t,e,n,r){const{slots:s,attrs:i}=e;return()=>{const o={part:!0};let a={};t.locale&&(o.locale=t.locale),ne(t.format)?o.key=t.format:He(t.format)&&(ne(t.format.key)&&(o.key=t.format.key),a=Object.keys(t.format).reduce((h,f)=>n.includes(f)?Bt({},h,{[f]:t.format[f]}):h,{}));const l=r(t.value,o,a);let c=[o.key];ot(l)?c=l.map((h,f)=>{const m=s[h.type],y=m?m({[h.type]:h.value,index:f,parts:l}):[h.value];return k$(y)&&(y[0].key=`${h.type}-${f}`),y}):ne(l)&&(c=[l]);const d=Bt({},i),u=ne(t.tag)||He(t.tag)?t.tag:bA();return Rr(u,d,c)}}const N$=ys({name:"i18n-n",props:Bt({value:{type:Number,required:!0},format:{type:[String,Object]}},Jp),setup(t,e){const n=t.i18n||Zp({useScope:t.scope,__useComponent:!0});return wA(t,e,_A,(...r)=>n[Cf](...r))}}),$v=N$,x$=ys({name:"i18n-d",props:Bt({value:{type:[Number,Date],required:!0},format:{type:[String,Object]}},Jp),setup(t,e){const n=t.i18n||Zp({useScope:t.scope,__useComponent:!0});return wA(t,e,pA,(...r)=>n[Pf](...r))}}),Bv=x$;function D$(t,e){const n=t;if(t.mode==="composition")return n.__getInstance(e)||t.global;{const r=n.__getInstance(e);return r!=null?r.__composer:t.global.__composer}}function V$(t){const e=o=>{const{instance:a,modifiers:l,value:c}=o;if(!a||!a.$)throw Ot(wt.UNEXPECTED_ERROR);const d=D$(t,a.$),u=jv(c);return[Reflect.apply(d.t,d,[...qv(u)]),d]};return{created:(o,a)=>{const[l,c]=e(a);Ju&&t.global===c&&(o.__i18nWatcher=tn(c.locale,()=>{a.instance&&a.instance.$forceUpdate()})),o.__composer=c,o.textContent=l},unmounted:o=>{Ju&&o.__i18nWatcher&&(o.__i18nWatcher(),o.__i18nWatcher=void 0,delete o.__i18nWatcher),o.__composer&&(o.__composer=void 0,delete o.__composer)},beforeUpdate:(o,{value:a})=>{if(o.__composer){const l=o.__composer,c=jv(a);o.textContent=Reflect.apply(l.t,l,[...qv(c)])}},getSSRProps:o=>{const[a]=e(o);return{textContent:a}}}}function jv(t){if(ne(t))return{path:t};if(Se(t)){if(!("path"in t))throw Ot(wt.REQUIRED_VALUE,"path");return t}else throw Ot(wt.INVALID_VALUE)}function qv(t){const{path:e,locale:n,args:r,choice:s,plural:i}=t,o={},a=r||{};return ne(n)&&(o.locale=n),bt(s)&&(o.plural=s),bt(i)&&(o.plural=i),[e,a,o]}function L$(t,e,...n){const r=Se(n[0])?n[0]:{},s=!!r.useI18nComponentName;(ke(r.globalInstall)?r.globalInstall:!0)&&([s?"i18n":Uv.name,"I18nT"].forEach(o=>t.component(o,Uv)),[$v.name,"I18nN"].forEach(o=>t.component(o,$v)),[Bv.name,"I18nD"].forEach(o=>t.component(o,Bv))),t.directive("t",V$(e))}function M$(t,e,n){return{beforeCreate(){const r=ar();if(!r)throw Ot(wt.UNEXPECTED_ERROR);const s=this.$options;if(s.i18n){const i=s.i18n;if(s.__i18n&&(i.__i18n=s.__i18n),i.__root=e,this===this.$root)this.$i18n=Gv(t,i);else{i.__injectWithOption=!0,i.__extender=n.__vueI18nExtend,this.$i18n=kf(i);const o=this.$i18n;o.__extender&&(o.__disposer=o.__extender(this.$i18n))}}else if(s.__i18n)if(this===this.$root)this.$i18n=Gv(t,s);else{this.$i18n=kf({__i18n:s.__i18n,__injectWithOption:!0,__extender:n.__vueI18nExtend,__root:e});const i=this.$i18n;i.__extender&&(i.__disposer=i.__extender(this.$i18n))}else this.$i18n=t;s.__i18nGlobal&&TA(e,s,s),this.$t=(...i)=>this.$i18n.t(...i),this.$rt=(...i)=>this.$i18n.rt(...i),this.$tc=(...i)=>this.$i18n.tc(...i),this.$te=(i,o)=>this.$i18n.te(i,o),this.$d=(...i)=>this.$i18n.d(...i),this.$n=(...i)=>this.$i18n.n(...i),this.$tm=i=>this.$i18n.tm(i),n.__setInstance(r,this.$i18n)},mounted(){},unmounted(){const r=ar();if(!r)throw Ot(wt.UNEXPECTED_ERROR);const s=this.$i18n;delete this.$t,delete this.$rt,delete this.$tc,delete this.$te,delete this.$d,delete this.$n,delete this.$tm,s.__disposer&&(s.__disposer(),delete s.__disposer,delete s.__extender),n.__deleteInstance(r),delete this.$i18n}}}function Gv(t,e){t.locale=e.locale||t.locale,t.fallbackLocale=e.fallbackLocale||t.fallbackLocale,t.missing=e.missing||t.missing,t.silentTranslationWarn=e.silentTranslationWarn||t.silentFallbackWarn,t.silentFallbackWarn=e.silentFallbackWarn||t.silentFallbackWarn,t.formatFallbackMessages=e.formatFallbackMessages||t.formatFallbackMessages,t.postTranslation=e.postTranslation||t.postTranslation,t.warnHtmlInMessage=e.warnHtmlInMessage||t.warnHtmlInMessage,t.escapeParameterHtml=e.escapeParameterHtml||t.escapeParameterHtml,t.sync=e.sync||t.sync,t.__composer[vA](e.pluralizationRules||t.pluralizationRules);const n=gh(t.locale,{messages:e.messages,__i18n:e.__i18n});return Object.keys(n).forEach(r=>t.mergeLocaleMessage(r,n[r])),e.datetimeFormats&&Object.keys(e.datetimeFormats).forEach(r=>t.mergeDateTimeFormat(r,e.datetimeFormats[r])),e.numberFormats&&Object.keys(e.numberFormats).forEach(r=>t.mergeNumberFormat(r,e.numberFormats[r])),t}const F$=Ss("global-vue-i18n");function U$(t={},e){const n=__VUE_I18N_LEGACY_API__&&ke(t.legacy)?t.legacy:__VUE_I18N_LEGACY_API__,r=ke(t.globalInjection)?t.globalInjection:!0,s=__VUE_I18N_LEGACY_API__&&n?!!t.allowComposition:!0,i=new Map,[o,a]=$$(t,n),l=Ss("");function c(h){return i.get(h)||null}function d(h,f){i.set(h,f)}function u(h){i.delete(h)}{const h={get mode(){return __VUE_I18N_LEGACY_API__&&n?"legacy":"composition"},get allowComposition(){return s},async install(f,...m){if(f.__VUE_I18N_SYMBOL__=l,f.provide(f.__VUE_I18N_SYMBOL__,h),Se(m[0])){const v=m[0];h.__composerExtend=v.__composerExtend,h.__vueI18nExtend=v.__vueI18nExtend}let y=null;!n&&r&&(y=Q$(f,h.global)),__VUE_I18N_FULL_INSTALL__&&L$(f,h,...m),__VUE_I18N_LEGACY_API__&&n&&f.mixin(M$(a,a.__composer,h));const g=f.unmount;f.unmount=()=>{y&&y(),h.dispose(),g()}},get global(){return a},dispose(){o.stop()},__instances:i,__getInstance:c,__setInstance:d,__deleteInstance:u};return h}}function Zp(t={}){const e=ar();if(e==null)throw Ot(wt.MUST_BE_CALL_SETUP_TOP);if(!e.isCE&&e.appContext.app!=null&&!e.appContext.app.__VUE_I18N_SYMBOL__)throw Ot(wt.NOT_INSTALLED);const n=B$(e),r=q$(n),s=IA(e),i=j$(t,s);if(__VUE_I18N_LEGACY_API__&&n.mode==="legacy"&&!t.__useComponent){if(!n.allowComposition)throw Ot(wt.NOT_AVAILABLE_IN_LEGACY_MODE);return K$(e,i,r,t)}if(i==="global")return TA(r,t,s),r;if(i==="parent"){let l=G$(n,e,t.__useComponent);return l==null&&(l=r),l}const o=n;let a=o.__getInstance(e);if(a==null){const l=Bt({},t);"__i18n"in s&&(l.__i18n=s.__i18n),r&&(l.__root=r),a=Xp(l),o.__composerExtend&&(a[Of]=o.__composerExtend(a)),W$(o,e,a),o.__setInstance(e,a)}return a}function $$(t,e,n){const r=Gf();{const s=__VUE_I18N_LEGACY_API__&&e?r.run(()=>kf(t)):r.run(()=>Xp(t));if(s==null)throw Ot(wt.UNEXPECTED_ERROR);return[r,s]}}function B$(t){{const e=bn(t.isCE?F$:t.appContext.app.__VUE_I18N_SYMBOL__);if(!e)throw Ot(t.isCE?wt.NOT_INSTALLED_WITH_PROVIDE:wt.UNEXPECTED_ERROR);return e}}function j$(t,e){return mh(t)?"__i18n"in e?"local":"global":t.useScope?t.useScope:"local"}function q$(t){return t.mode==="composition"?t.global:t.global.__composer}function G$(t,e,n=!1){let r=null;const s=e.root;let i=H$(e,n);for(;i!=null;){const o=t;if(t.mode==="composition")r=o.__getInstance(i);else if(__VUE_I18N_LEGACY_API__){const a=o.__getInstance(i);a!=null&&(r=a.__composer,n&&r&&!r[EA]&&(r=null))}if(r!=null||s===i)break;i=i.parent}return r}function H$(t,e=!1){return t==null?null:e&&t.vnode.ctx||t.parent}function W$(t,e,n){Xa(()=>{},e),im(()=>{const r=n;t.__deleteInstance(e);const s=r[Of];s&&(s(),delete r[Of])},e)}function K$(t,e,n,r={}){const s=e==="local",i=hc(null);if(s&&t.proxy&&!(t.proxy.$options.i18n||t.proxy.$options.__i18n))throw Ot(wt.MUST_DEFINE_I18N_OPTION_IN_ALLOW_COMPOSITION);const o=ke(r.inheritLocale)?r.inheritLocale:!ne(r.locale),a=gt(!s||o?n.locale.value:ne(r.locale)?r.locale:Io),l=gt(!s||o?n.fallbackLocale.value:ne(r.fallbackLocale)||ot(r.fallbackLocale)||Se(r.fallbackLocale)||r.fallbackLocale===!1?r.fallbackLocale:a.value),c=gt(gh(a.value,r)),d=gt(Se(r.datetimeFormats)?r.datetimeFormats:{[a.value]:{}}),u=gt(Se(r.numberFormats)?r.numberFormats:{[a.value]:{}}),h=s?n.missingWarn:ke(r.missingWarn)||gs(r.missingWarn)?r.missingWarn:!0,f=s?n.fallbackWarn:ke(r.fallbackWarn)||gs(r.fallbackWarn)?r.fallbackWarn:!0,m=s?n.fallbackRoot:ke(r.fallbackRoot)?r.fallbackRoot:!0,y=!!r.fallbackFormat,g=et(r.missing)?r.missing:null,v=et(r.postTranslation)?r.postTranslation:null,b=s?n.warnHtmlMessage:ke(r.warnHtmlMessage)?r.warnHtmlMessage:!0,E=!!r.escapeParameter,T=s?n.modifiers:Se(r.modifiers)?r.modifiers:{},S=r.pluralRules||s&&n.pluralRules;function w(){return[a.value,l.value,c.value,d.value,u.value]}const D=ge({get:()=>i.value?i.value.locale.value:a.value,set:p=>{i.value&&(i.value.locale.value=p),a.value=p}}),O=ge({get:()=>i.value?i.value.fallbackLocale.value:l.value,set:p=>{i.value&&(i.value.fallbackLocale.value=p),l.value=p}}),C=ge(()=>i.value?i.value.messages.value:c.value),z=ge(()=>d.value),de=ge(()=>u.value);function $(){return i.value?i.value.getPostTranslationHandler():v}function ie(p){i.value&&i.value.setPostTranslationHandler(p)}function we(){return i.value?i.value.getMissingHandler():g}function Ne(p){i.value&&i.value.setMissingHandler(p)}function Q(p){return w(),p()}function Ee(...p){return i.value?Q(()=>Reflect.apply(i.value.t,null,[...p])):Q(()=>"")}function Ie(...p){return i.value?Reflect.apply(i.value.rt,null,[...p]):""}function nt(...p){return i.value?Q(()=>Reflect.apply(i.value.d,null,[...p])):Q(()=>"")}function Et(...p){return i.value?Q(()=>Reflect.apply(i.value.n,null,[...p])):Q(()=>"")}function Ze(p){return i.value?i.value.tm(p):{}}function ut(p,I){return i.value?i.value.te(p,I):!1}function Qe(p){return i.value?i.value.getLocaleMessage(p):{}}function Vt(p,I){i.value&&(i.value.setLocaleMessage(p,I),c.value[p]=I)}function se(p,I){i.value&&i.value.mergeLocaleMessage(p,I)}function le(p){return i.value?i.value.getDateTimeFormat(p):{}}function V(p,I){i.value&&(i.value.setDateTimeFormat(p,I),d.value[p]=I)}function B(p,I){i.value&&i.value.mergeDateTimeFormat(p,I)}function W(p){return i.value?i.value.getNumberFormat(p):{}}function J(p,I){i.value&&(i.value.setNumberFormat(p,I),u.value[p]=I)}function ve(p,I){i.value&&i.value.mergeNumberFormat(p,I)}const Be={get id(){return i.value?i.value.id:-1},locale:D,fallbackLocale:O,messages:C,datetimeFormats:z,numberFormats:de,get inheritLocale(){return i.value?i.value.inheritLocale:o},set inheritLocale(p){i.value&&(i.value.inheritLocale=p)},get availableLocales(){return i.value?i.value.availableLocales:Object.keys(c.value)},get modifiers(){return i.value?i.value.modifiers:T},get pluralRules(){return i.value?i.value.pluralRules:S},get isGlobal(){return i.value?i.value.isGlobal:!1},get missingWarn(){return i.value?i.value.missingWarn:h},set missingWarn(p){i.value&&(i.value.missingWarn=p)},get fallbackWarn(){return i.value?i.value.fallbackWarn:f},set fallbackWarn(p){i.value&&(i.value.missingWarn=p)},get fallbackRoot(){return i.value?i.value.fallbackRoot:m},set fallbackRoot(p){i.value&&(i.value.fallbackRoot=p)},get fallbackFormat(){return i.value?i.value.fallbackFormat:y},set fallbackFormat(p){i.value&&(i.value.fallbackFormat=p)},get warnHtmlMessage(){return i.value?i.value.warnHtmlMessage:b},set warnHtmlMessage(p){i.value&&(i.value.warnHtmlMessage=p)},get escapeParameter(){return i.value?i.value.escapeParameter:E},set escapeParameter(p){i.value&&(i.value.escapeParameter=p)},t:Ee,getPostTranslationHandler:$,setPostTranslationHandler:ie,getMissingHandler:we,setMissingHandler:Ne,rt:Ie,d:nt,n:Et,tm:Ze,te:ut,getLocaleMessage:Qe,setLocaleMessage:Vt,mergeLocaleMessage:se,getDateTimeFormat:le,setDateTimeFormat:V,mergeDateTimeFormat:B,getNumberFormat:W,setNumberFormat:J,mergeNumberFormat:ve};function _(p){p.locale.value=a.value,p.fallbackLocale.value=l.value,Object.keys(c.value).forEach(I=>{p.mergeLocaleMessage(I,c.value[I])}),Object.keys(d.value).forEach(I=>{p.mergeDateTimeFormat(I,d.value[I])}),Object.keys(u.value).forEach(I=>{p.mergeNumberFormat(I,u.value[I])}),p.escapeParameter=E,p.fallbackFormat=y,p.fallbackRoot=m,p.fallbackWarn=f,p.missingWarn=h,p.warnHtmlMessage=b}return eI(()=>{if(t.proxy==null||t.proxy.$i18n==null)throw Ot(wt.NOT_AVAILABLE_COMPOSITION_IN_LEGACY);const p=i.value=t.proxy.$i18n.__composer;e==="global"?(a.value=p.locale.value,l.value=p.fallbackLocale.value,c.value=p.messages.value,d.value=p.datetimeFormats.value,u.value=p.numberFormats.value):s&&_(p)}),Be}const z$=["locale","fallbackLocale","availableLocales"],Hv=["t","rt","d","n","tm","te"];function Q$(t,e){const n=Object.create(null);return z$.forEach(s=>{const i=Object.getOwnPropertyDescriptor(e,s);if(!i)throw Ot(wt.UNEXPECTED_ERROR);const o=at(i.value)?{get(){return i.value.value},set(a){i.value.value=a}}:{get(){return i.get&&i.get()}};Object.defineProperty(n,s,o)}),t.config.globalProperties.$i18n=n,Hv.forEach(s=>{const i=Object.getOwnPropertyDescriptor(e,s);if(!i||!i.value)throw Ot(wt.UNEXPECTED_ERROR);Object.defineProperty(t.config.globalProperties,`$${s}`,i)}),()=>{delete t.config.globalProperties.$i18n,Hv.forEach(s=>{delete t.config.globalProperties[`$${s}`]})}}A$();__INTLIFY_JIT_COMPILATION__?wv(v$):wv(y$);h$(W2);d$(iA);if(__INTLIFY_PROD_DEVTOOLS__){const t=pr();t.__INTLIFY__=!0,t$(t.__INTLIFY_DEVTOOLS_GLOBAL_HOOK__)}const Y$={listen:"Listen to Great Music!"},X$={commentCount:"No comments | 1 comment | {count} comments"},J$={accept:"I accept Music's {0}",tos:"Terms of Service"},Z$={mySongs:"My Songs"},eB={home:Y$,song:X$,register:J$,manage:Z$},tB={listen:""},nB={commentCount:"{count} "},rB={mySongs:""},sB={home:tB,song:nB,manage:rB},iB=U$({locale:"en",fallbackLocale:"en",messages:{en:eB,cn:sB},numberFormats:{en:{currency:{style:"currency",currency:"USD"}},cn:{currency:{style:"currency",currency:"CNY"}}}});function oB(t={}){const{immediate:e=!1,onNeedRefresh:n,onOfflineReady:r,onRegistered:s,onRegisteredSW:i,onRegisterError:o}=t;let a,l;const c=async(u=!0)=>{await l};async function d(){if("serviceWorker"in navigator){if(a=await bl(()=>import("./workbox-window.prod.es5-DFjpnwFp.js"),[]).then(({Workbox:u})=>new u("/music-playing/sw.js",{scope:"/music-playing/",type:"classic"})).catch(u=>{o==null||o(u)}),!a)return;a.addEventListener("activated",u=>{(u.isUpdate||u.isExternal)&&window.location.reload()}),a.addEventListener("installed",u=>{u.isUpdate||r==null||r()}),a.register({immediate:e}).then(u=>{i?i("/music-playing/sw.js",u):s==null||s(u)}).catch(u=>{o==null||o(u)})}}return l=d(),c}/**
  * vee-validate v4.12.6
  * (c) 2024 Abdelrahman Awad
  * @license MIT
  */function Ut(t){return typeof t=="function"}function AA(t){return t==null}const pi=t=>t!==null&&!!t&&typeof t=="object"&&!Array.isArray(t);function e_(t){return Number(t)>=0}function aB(t){const e=parseFloat(t);return isNaN(e)?t:e}function lB(t){return typeof t=="object"&&t!==null}function uB(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}function Wv(t){if(!lB(t)||uB(t)!=="[object Object]")return!1;if(Object.getPrototypeOf(t)===null)return!0;let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function Qa(t,e){return Object.keys(e).forEach(n=>{if(Wv(e[n])&&Wv(t[n])){t[n]||(t[n]={}),Qa(t[n],e[n]);return}t[n]=e[n]}),t}function na(t){const e=t.split(".");if(!e.length)return"";let n=String(e[0]);for(let r=1;r<e.length;r++){if(e_(e[r])){n+=`[${e[r]}]`;continue}n+=`.${e[r]}`}return n}const SA={};function Dn(t,e){hB(t,e),SA[t]=e}function cB(t){return SA[t]}function hB(t,e){if(!Ut(e))throw new Error(`Extension Error: The validator '${t}' must be a function.`)}function Kv(t,e,n){typeof n.value=="object"&&(n.value=Ye(n.value)),!n.enumerable||n.get||n.set||!n.configurable||!n.writable||e==="__proto__"?Object.defineProperty(t,e,n):t[e]=n.value}function Ye(t){if(typeof t!="object")return t;var e=0,n,r,s,i=Object.prototype.toString.call(t);if(i==="[object Object]"?s=Object.create(t.__proto__||null):i==="[object Array]"?s=Array(t.length):i==="[object Set]"?(s=new Set,t.forEach(function(o){s.add(Ye(o))})):i==="[object Map]"?(s=new Map,t.forEach(function(o,a){s.set(Ye(a),Ye(o))})):i==="[object Date]"?s=new Date(+t):i==="[object RegExp]"?s=new RegExp(t.source,t.flags):i==="[object DataView]"?s=new t.constructor(Ye(t.buffer)):i==="[object ArrayBuffer]"?s=t.slice(0):i.slice(-6)==="Array]"&&(s=new t.constructor(t)),s){for(r=Object.getOwnPropertySymbols(t);e<r.length;e++)Kv(s,r[e],Object.getOwnPropertyDescriptor(t,r[e]));for(e=0,r=Object.getOwnPropertyNames(t);e<r.length;e++)Object.hasOwnProperty.call(s,n=r[e])&&s[n]===t[n]||Kv(s,n,Object.getOwnPropertyDescriptor(t,n))}return s||t}const yh=Symbol("vee-validate-form"),dB=Symbol("vee-validate-field-instance"),tc=Symbol("Default empty value"),fB=typeof window<"u";function Nf(t){return Ut(t)&&!!t.__locatorRef}function Fn(t){return!!t&&Ut(t.parse)&&t.__type==="VVTypedSchema"}function nc(t){return!!t&&Ut(t.validate)}function wl(t){return t==="checkbox"||t==="radio"}function mB(t){return pi(t)||Array.isArray(t)}function pB(t){return Array.isArray(t)?t.length===0:pi(t)&&Object.keys(t).length===0}function vh(t){return/^\[.+\]$/i.test(t)}function _B(t){return RA(t)&&t.multiple}function RA(t){return t.tagName==="SELECT"}function gB(t,e){const n=![!1,null,void 0,0].includes(e.multiple)&&!Number.isNaN(e.multiple);return t==="select"&&"multiple"in e&&n}function yB(t,e){return!gB(t,e)&&e.type!=="file"&&!wl(e.type)}function PA(t){return t_(t)&&t.target&&"submit"in t.target}function t_(t){return t?!!(typeof Event<"u"&&Ut(Event)&&t instanceof Event||t&&t.srcElement):!1}function zv(t,e){return e in t&&t[e]!==tc}function on(t,e){if(t===e)return!0;if(t&&e&&typeof t=="object"&&typeof e=="object"){if(t.constructor!==e.constructor)return!1;var n,r,s;if(Array.isArray(t)){if(n=t.length,n!=e.length)return!1;for(r=n;r--!==0;)if(!on(t[r],e[r]))return!1;return!0}if(t instanceof Map&&e instanceof Map){if(t.size!==e.size)return!1;for(r of t.entries())if(!e.has(r[0]))return!1;for(r of t.entries())if(!on(r[1],e.get(r[0])))return!1;return!0}if(Qv(t)&&Qv(e))return!(t.size!==e.size||t.name!==e.name||t.lastModified!==e.lastModified||t.type!==e.type);if(t instanceof Set&&e instanceof Set){if(t.size!==e.size)return!1;for(r of t.entries())if(!e.has(r[0]))return!1;return!0}if(ArrayBuffer.isView(t)&&ArrayBuffer.isView(e)){if(n=t.length,n!=e.length)return!1;for(r=n;r--!==0;)if(t[r]!==e[r])return!1;return!0}if(t.constructor===RegExp)return t.source===e.source&&t.flags===e.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===e.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===e.toString();for(s=Object.keys(t),n=s.length,r=n;r--!==0;){var i=s[r];if(!on(t[i],e[i]))return!1}return!0}return t!==t&&e!==e}function Qv(t){return fB?t instanceof File:!1}function n_(t){return vh(t)?t.replace(/\[|\]/gi,""):t}function fn(t,e,n){return t?vh(e)?t[n_(e)]:(e||"").split(/\.|\[(\d+)\]/).filter(Boolean).reduce((s,i)=>mB(s)&&i in s?s[i]:n,t):n}function Gr(t,e,n){if(vh(e)){t[n_(e)]=n;return}const r=e.split(/\.|\[(\d+)\]/).filter(Boolean);let s=t;for(let i=0;i<r.length;i++){if(i===r.length-1){s[r[i]]=n;return}(!(r[i]in s)||AA(s[r[i]]))&&(s[r[i]]=e_(r[i+1])?[]:{}),s=s[r[i]]}}function cd(t,e){if(Array.isArray(t)&&e_(e)){t.splice(Number(e),1);return}pi(t)&&delete t[e]}function Yv(t,e){if(vh(e)){delete t[n_(e)];return}const n=e.split(/\.|\[(\d+)\]/).filter(Boolean);let r=t;for(let i=0;i<n.length;i++){if(i===n.length-1){cd(r,n[i]);break}if(!(n[i]in r)||AA(r[n[i]]))break;r=r[n[i]]}const s=n.map((i,o)=>fn(t,n.slice(0,o).join(".")));for(let i=s.length-1;i>=0;i--)if(pB(s[i])){if(i===0){cd(t,n[0]);continue}cd(s[i-1],n[i-1])}}function En(t){return Object.keys(t)}function CA(t,e=void 0){const n=ar();return(n==null?void 0:n.provides[t])||bn(t,e)}function Xv(t,e,n){if(Array.isArray(t)){const r=[...t],s=r.findIndex(i=>on(i,e));return s>=0?r.splice(s,1):r.push(e),r}return on(t,e)?n:e}function Jv(t,e=0){let n=null,r=[];return function(...s){return n&&clearTimeout(n),n=setTimeout(()=>{const i=t(...s);r.forEach(o=>o(i)),r=[]},e),new Promise(i=>r.push(i))}}function vB(t,e){return pi(e)&&e.number?aB(t):t}function xf(t,e){let n;return async function(...s){const i=t(...s);n=i;const o=await i;return i!==n?o:(n=void 0,e(o,s))}}function Df(t){return Array.isArray(t)?t:t?[t]:[]}function Kl(t,e){const n={};for(const r in t)e.includes(r)||(n[r]=t[r]);return n}function EB(t){let e=null,n=[];return function(...r){const s=cn(()=>{if(e!==s)return;const i=t(...r);n.forEach(o=>o(i)),n=[],e=null});return e=s,new Promise(i=>n.push(i))}}function r_(t,e,n){return e.slots.default?typeof t=="string"||!t?e.slots.default(n()):{default:()=>{var r,s;return(s=(r=e.slots).default)===null||s===void 0?void 0:s.call(r,n())}}:e.slots.default}function hd(t){if(OA(t))return t._value}function OA(t){return"_value"in t}function IB(t){return t.type==="number"||t.type==="range"?Number.isNaN(t.valueAsNumber)?t.value:t.valueAsNumber:t.value}function rc(t){if(!t_(t))return t;const e=t.target;if(wl(e.type)&&OA(e))return hd(e);if(e.type==="file"&&e.files){const n=Array.from(e.files);return e.multiple?n:n[0]}if(_B(e))return Array.from(e.options).filter(n=>n.selected&&!n.disabled).map(hd);if(RA(e)){const n=Array.from(e.options).find(r=>r.selected);return n?hd(n):e.value}return IB(e)}function kA(t){const e={};return Object.defineProperty(e,"_$$isNormalized",{value:!0,writable:!1,enumerable:!1,configurable:!1}),t?pi(t)&&t._$$isNormalized?t:pi(t)?Object.keys(t).reduce((n,r)=>{const s=TB(t[r]);return t[r]!==!1&&(n[r]=Zv(s)),n},e):typeof t!="string"?e:t.split("|").reduce((n,r)=>{const s=bB(r);return s.name&&(n[s.name]=Zv(s.params)),n},e):e}function TB(t){return t===!0?[]:Array.isArray(t)||pi(t)?t:[t]}function Zv(t){const e=n=>typeof n=="string"&&n[0]==="@"?wB(n.slice(1)):n;return Array.isArray(t)?t.map(e):t instanceof RegExp?[t]:Object.keys(t).reduce((n,r)=>(n[r]=e(t[r]),n),{})}const bB=t=>{let e=[];const n=t.split(":")[0];return t.includes(":")&&(e=t.split(":").slice(1).join(":").split(",")),{name:n,params:e}};function wB(t){const e=n=>fn(n,t)||n[t];return e.__locatorRef=t,e}function AB(t){return Array.isArray(t)?t.filter(Nf):En(t).filter(e=>Nf(t[e])).map(e=>t[e])}const SB={generateMessage:({field:t})=>`${t} is not valid.`,bails:!0,validateOnBlur:!0,validateOnChange:!0,validateOnInput:!1,validateOnModelUpdate:!0};let Vf=Object.assign({},SB);const Qs=()=>Vf,RB=t=>{Vf=Object.assign(Object.assign({},Vf),t)},PB=RB;async function NA(t,e,n={}){const r=n==null?void 0:n.bails,s={name:(n==null?void 0:n.name)||"{field}",rules:e,label:n==null?void 0:n.label,bails:r??!0,formData:(n==null?void 0:n.values)||{}},o=(await CB(s,t)).errors;return{errors:o,valid:!o.length}}async function CB(t,e){if(Fn(t.rules)||nc(t.rules))return kB(e,t.rules);if(Ut(t.rules)||Array.isArray(t.rules)){const o={field:t.label||t.name,name:t.name,label:t.label,form:t.formData,value:e},a=Array.isArray(t.rules)?t.rules:[t.rules],l=a.length,c=[];for(let d=0;d<l;d++){const u=a[d],h=await u(e,o);if(!(typeof h!="string"&&!Array.isArray(h)&&h)){if(Array.isArray(h))c.push(...h);else{const m=typeof h=="string"?h:DA(o);c.push(m)}if(t.bails)return{errors:c}}}return{errors:c}}const n=Object.assign(Object.assign({},t),{rules:kA(t.rules)}),r=[],s=Object.keys(n.rules),i=s.length;for(let o=0;o<i;o++){const a=s[o],l=await NB(n,e,{name:a,params:n.rules[a]});if(l.error&&(r.push(l.error),t.bails))return{errors:r}}return{errors:r}}function OB(t){return!!t&&t.name==="ValidationError"}function xA(t){return{__type:"VVTypedSchema",async parse(n){var r;try{return{output:await t.validate(n,{abortEarly:!1}),errors:[]}}catch(s){if(!OB(s))throw s;if(!(!((r=s.inner)===null||r===void 0)&&r.length)&&s.errors.length)return{errors:[{path:s.path,errors:s.errors}]};const i=s.inner.reduce((o,a)=>{const l=a.path||"";return o[l]||(o[l]={errors:[],path:l}),o[l].errors.push(...a.errors),o},{});return{errors:Object.values(i)}}}}}async function kB(t,e){const r=await(Fn(e)?e:xA(e)).parse(t),s=[];for(const i of r.errors)i.errors.length&&s.push(...i.errors);return{errors:s}}async function NB(t,e,n){const r=cB(n.name);if(!r)throw new Error(`No such validator '${n.name}' exists.`);const s=xB(n.params,t.formData),i={field:t.label||t.name,name:t.name,label:t.label,value:e,form:t.formData,rule:Object.assign(Object.assign({},n),{params:s})},o=await r(e,s,i);return typeof o=="string"?{error:o}:{error:o?void 0:DA(i)}}function DA(t){const e=Qs().generateMessage;return e?e(t):"Field is invalid"}function xB(t,e){const n=r=>Nf(r)?r(e):r;return Array.isArray(t)?t.map(n):Object.keys(t).reduce((r,s)=>(r[s]=n(t[s]),r),{})}async function DB(t,e){const r=await(Fn(t)?t:xA(t)).parse(Ye(e)),s={},i={};for(const o of r.errors){const a=o.errors,l=(o.path||"").replace(/\["(\d+)"\]/g,(c,d)=>`[${d}]`);s[l]={valid:!a.length,errors:a},a.length&&(i[l]=a[0])}return{valid:!r.errors.length,results:s,errors:i,values:r.value}}async function VB(t,e,n){const s=En(t).map(async c=>{var d,u,h;const f=(d=n==null?void 0:n.names)===null||d===void 0?void 0:d[c],m=await NA(fn(e,c),t[c],{name:(f==null?void 0:f.name)||c,label:f==null?void 0:f.label,values:e,bails:(h=(u=n==null?void 0:n.bailsMap)===null||u===void 0?void 0:u[c])!==null&&h!==void 0?h:!0});return Object.assign(Object.assign({},m),{path:c})});let i=!0;const o=await Promise.all(s),a={},l={};for(const c of o)a[c.path]={valid:c.valid,errors:c.errors},c.valid||(i=!1,l[c.path]=c.errors[0]);return{valid:i,results:a,errors:l}}let eE=0;function LB(t,e){const{value:n,initialValue:r,setInitialValue:s}=MB(t,e.modelValue,e.form);if(!e.form){let l=function(f){var m;"value"in f&&(n.value=f.value),"errors"in f&&d(f.errors),"touched"in f&&(h.touched=(m=f.touched)!==null&&m!==void 0?m:h.touched),"initialValue"in f&&s(f.initialValue)};const{errors:c,setErrors:d}=$B(),u=eE>=Number.MAX_SAFE_INTEGER?0:++eE,h=UB(n,r,c,e.schema);return{id:u,path:t,value:n,initialValue:r,meta:h,flags:{pendingUnmount:{[u]:!1},pendingReset:!1},errors:c,setState:l}}const i=e.form.createPathState(t,{bails:e.bails,label:e.label,type:e.type,validate:e.validate,schema:e.schema}),o=ge(()=>i.errors);function a(l){var c,d,u;"value"in l&&(n.value=l.value),"errors"in l&&((c=e.form)===null||c===void 0||c.setFieldError($e(t),l.errors)),"touched"in l&&((d=e.form)===null||d===void 0||d.setFieldTouched($e(t),(u=l.touched)!==null&&u!==void 0?u:!1)),"initialValue"in l&&s(l.initialValue)}return{id:Array.isArray(i.id)?i.id[i.id.length-1]:i.id,path:t,value:n,errors:o,meta:i,initialValue:r,flags:i.__flags,setState:a}}function MB(t,e,n){const r=gt($e(e));function s(){return n?fn(n.initialValues.value,$e(t),$e(r)):$e(r)}function i(c){if(!n){r.value=c;return}n.setFieldInitialValue($e(t),c,!0)}const o=ge(s);if(!n)return{value:gt(s()),initialValue:o,setInitialValue:i};const a=FB(e,n,o,t);return n.stageInitialValue($e(t),a,!0),{value:ge({get(){return fn(n.values,$e(t))},set(c){n.setFieldValue($e(t),c,!1)}}),initialValue:o,setInitialValue:i}}function FB(t,e,n,r){return at(t)?$e(t):t!==void 0?t:fn(e.values,$e(r),$e(n))}function UB(t,e,n,r){var s,i;const o=(i=(s=r==null?void 0:r.describe)===null||s===void 0?void 0:s.call(r).required)!==null&&i!==void 0?i:!1,a=Sr({touched:!1,pending:!1,valid:!0,required:o,validated:!!$e(n).length,initialValue:ge(()=>$e(e)),dirty:ge(()=>!on($e(t),$e(e)))});return tn(n,l=>{a.valid=!l.length},{immediate:!0,flush:"sync"}),a}function $B(){const t=gt([]);return{errors:t,setErrors:e=>{t.value=Df(e)}}}function BB(t,e,n){return wl(n==null?void 0:n.type)?qB(t,e,n):VA(t,e,n)}function VA(t,e,n){const{initialValue:r,validateOnMount:s,bails:i,type:o,checkedValue:a,label:l,validateOnValueUpdate:c,uncheckedValue:d,controlled:u,keepValueOnUnmount:h,syncVModel:f,form:m}=jB(n),y=u?CA(yh):void 0,g=m||y,v=ge(()=>na(qe(t))),b=ge(()=>{if(qe(g==null?void 0:g.schema))return;const le=$e(e);return nc(le)||Fn(le)||Ut(le)||Array.isArray(le)?le:kA(le)}),{id:E,value:T,initialValue:S,meta:w,setState:D,errors:O,flags:C}=LB(v,{modelValue:r,form:g,bails:i,label:l,type:o,validate:b.value?Ne:void 0,schema:Fn(e)?e:void 0}),z=ge(()=>O.value[0]);f&&GB({value:T,prop:f,handleChange:Q,shouldValidate:()=>c&&!C.pendingReset});const de=(se,le=!1)=>{w.touched=!0,le&&ie()};async function $(se){var le,V;if(g!=null&&g.validateSchema){const{results:B}=await g.validateSchema(se);return(le=B[qe(v)])!==null&&le!==void 0?le:{valid:!0,errors:[]}}return b.value?NA(T.value,b.value,{name:qe(v),label:qe(l),values:(V=g==null?void 0:g.values)!==null&&V!==void 0?V:{},bails:i}):{valid:!0,errors:[]}}const ie=xf(async()=>(w.pending=!0,w.validated=!0,$("validated-only")),se=>(C.pendingUnmount[Qe.id]||(D({errors:se.errors}),w.pending=!1,w.valid=se.valid),se)),we=xf(async()=>$("silent"),se=>(w.valid=se.valid,se));function Ne(se){return(se==null?void 0:se.mode)==="silent"?we():ie()}function Q(se,le=!0){const V=rc(se);Et(V,le)}Xa(()=>{if(s)return ie();(!g||!g.validateSchema)&&we()});function Ee(se){w.touched=se}function Ie(se){var le;const V=se&&"value"in se?se.value:S.value;D({value:Ye(V),initialValue:Ye(V),touched:(le=se==null?void 0:se.touched)!==null&&le!==void 0?le:!1,errors:(se==null?void 0:se.errors)||[]}),w.pending=!1,w.validated=!1,we()}const nt=ar();function Et(se,le=!0){T.value=nt&&f?vB(se,nt.props.modelModifiers):se,(le?ie:we)()}function Ze(se){D({errors:Array.isArray(se)?se:[se]})}const ut=ge({get(){return T.value},set(se){Et(se,c)}}),Qe={id:E,name:v,label:l,value:ut,meta:w,errors:O,errorMessage:z,type:o,checkedValue:a,uncheckedValue:d,bails:i,keepValueOnUnmount:h,resetField:Ie,handleReset:()=>Ie(),validate:Ne,handleChange:Q,handleBlur:de,setState:D,setTouched:Ee,setErrors:Ze,setValue:Et};if(Qi(dB,Qe),at(e)&&typeof $e(e)!="function"&&tn(e,(se,le)=>{on(se,le)||(w.validated?ie():we())},{deep:!0}),!g)return Qe;const Vt=ge(()=>{const se=b.value;return!se||Ut(se)||nc(se)||Fn(se)||Array.isArray(se)?{}:Object.keys(se).reduce((le,V)=>{const B=AB(se[V]).map(W=>W.__locatorRef).reduce((W,J)=>{const ve=fn(g.values,J)||g.values[J];return ve!==void 0&&(W[J]=ve),W},{});return Object.assign(le,B),le},{})});return tn(Vt,(se,le)=>{if(!Object.keys(se).length)return;!on(se,le)&&(w.validated?ie():we())}),sm(()=>{var se;const le=(se=qe(Qe.keepValueOnUnmount))!==null&&se!==void 0?se:qe(g.keepValuesOnUnmount),V=qe(v);if(le||!g||C.pendingUnmount[Qe.id]){g==null||g.removePathState(V,E);return}C.pendingUnmount[Qe.id]=!0;const B=g.getPathState(V);if(Array.isArray(B==null?void 0:B.id)&&(B!=null&&B.multiple)?B!=null&&B.id.includes(Qe.id):(B==null?void 0:B.id)===Qe.id){if(B!=null&&B.multiple&&Array.isArray(B.value)){const J=B.value.findIndex(ve=>on(ve,qe(Qe.checkedValue)));if(J>-1){const ve=[...B.value];ve.splice(J,1),g.setFieldValue(V,ve)}Array.isArray(B.id)&&B.id.splice(B.id.indexOf(Qe.id),1)}else g.unsetPathValue(qe(v));g.removePathState(V,E)}}),Qe}function jB(t){const e=()=>({initialValue:void 0,validateOnMount:!1,bails:!0,label:void 0,validateOnValueUpdate:!0,keepValueOnUnmount:void 0,syncVModel:!1,controlled:!0}),n=!!(t!=null&&t.syncVModel),r=typeof(t==null?void 0:t.syncVModel)=="string"?t.syncVModel:(t==null?void 0:t.modelPropName)||"modelValue",s=n&&!("initialValue"in(t||{}))?Lf(ar(),r):t==null?void 0:t.initialValue;if(!t)return Object.assign(Object.assign({},e()),{initialValue:s});const i="valueProp"in t?t.valueProp:t.checkedValue,o="standalone"in t?!t.standalone:t.controlled,a=(t==null?void 0:t.modelPropName)||(t==null?void 0:t.syncVModel)||!1;return Object.assign(Object.assign(Object.assign({},e()),t||{}),{initialValue:s,controlled:o??!0,checkedValue:i,syncVModel:a})}function qB(t,e,n){const r=n!=null&&n.standalone?void 0:CA(yh),s=n==null?void 0:n.checkedValue,i=n==null?void 0:n.uncheckedValue;function o(a){const l=a.handleChange,c=ge(()=>{const u=qe(a.value),h=qe(s);return Array.isArray(u)?u.findIndex(f=>on(f,h))>=0:on(h,u)});function d(u,h=!0){var f,m;if(c.value===((f=u==null?void 0:u.target)===null||f===void 0?void 0:f.checked)){h&&a.validate();return}const y=qe(t),g=r==null?void 0:r.getPathState(y),v=rc(u);let b=(m=qe(s))!==null&&m!==void 0?m:v;r&&(g!=null&&g.multiple)&&g.type==="checkbox"?b=Xv(fn(r.values,y)||[],b,void 0):(n==null?void 0:n.type)==="checkbox"&&(b=Xv(qe(a.value),b,qe(i))),l(b,h)}return Object.assign(Object.assign({},a),{checked:c,checkedValue:s,uncheckedValue:i,handleChange:d})}return o(VA(t,e,n))}function GB({prop:t,value:e,handleChange:n,shouldValidate:r}){const s=ar();if(!s||!t)return;const i=typeof t=="string"?t:"modelValue",o=`update:${i}`;i in s.props&&(tn(e,a=>{on(a,Lf(s,i))||s.emit(o,a)}),tn(()=>Lf(s,i),a=>{if(a===tc&&e.value===void 0)return;const l=a===tc?void 0:a;on(l,e.value)||n(l,r())}))}function Lf(t,e){if(t)return t.props[e]}const HB=ys({name:"Field",inheritAttrs:!1,props:{as:{type:[String,Object],default:void 0},name:{type:String,required:!0},rules:{type:[Object,String,Function],default:void 0},validateOnMount:{type:Boolean,default:!1},validateOnBlur:{type:Boolean,default:void 0},validateOnChange:{type:Boolean,default:void 0},validateOnInput:{type:Boolean,default:void 0},validateOnModelUpdate:{type:Boolean,default:void 0},bails:{type:Boolean,default:()=>Qs().bails},label:{type:String,default:void 0},uncheckedValue:{type:null,default:void 0},modelValue:{type:null,default:tc},modelModifiers:{type:null,default:()=>({})},"onUpdate:modelValue":{type:null,default:void 0},standalone:{type:Boolean,default:!1},keepValue:{type:Boolean,default:void 0}},setup(t,e){const n=Fs(t,"rules"),r=Fs(t,"name"),s=Fs(t,"label"),i=Fs(t,"uncheckedValue"),o=Fs(t,"keepValue"),{errors:a,value:l,errorMessage:c,validate:d,handleChange:u,handleBlur:h,setTouched:f,resetField:m,handleReset:y,meta:g,checked:v,setErrors:b}=BB(r,n,{validateOnMount:t.validateOnMount,bails:t.bails,standalone:t.standalone,type:e.attrs.type,initialValue:KB(t,e),checkedValue:e.attrs.value,uncheckedValue:i,label:s,validateOnValueUpdate:t.validateOnModelUpdate,keepValueOnUnmount:o,syncVModel:!0}),E=function(C,z=!0){u(C,z)},T=ge(()=>{const{validateOnInput:O,validateOnChange:C,validateOnBlur:z,validateOnModelUpdate:de}=WB(t);function $(Q){h(Q,z),Ut(e.attrs.onBlur)&&e.attrs.onBlur(Q)}function ie(Q){E(Q,O),Ut(e.attrs.onInput)&&e.attrs.onInput(Q)}function we(Q){E(Q,C),Ut(e.attrs.onChange)&&e.attrs.onChange(Q)}const Ne={name:t.name,onBlur:$,onInput:ie,onChange:we};return Ne["onUpdate:modelValue"]=Q=>E(Q,de),Ne}),S=ge(()=>{const O=Object.assign({},T.value);wl(e.attrs.type)&&v&&(O.checked=v.value);const C=tE(t,e);return yB(C,e.attrs)&&(O.value=l.value),O}),w=ge(()=>Object.assign(Object.assign({},T.value),{modelValue:l.value}));function D(){return{field:S.value,componentField:w.value,value:l.value,meta:g,errors:a.value,errorMessage:c.value,validate:d,resetField:m,handleChange:E,handleInput:O=>E(O,!1),handleReset:y,handleBlur:T.value.onBlur,setTouched:f,setErrors:b}}return e.expose({value:l,meta:g,errors:a,errorMessage:c,setErrors:b,setTouched:f,reset:m,validate:d,handleChange:u}),()=>{const O=mc(tE(t,e)),C=r_(O,e,D);return O?Rr(O,Object.assign(Object.assign({},e.attrs),S.value),C):C}}});function tE(t,e){let n=t.as||"";return!t.as&&!e.slots.default&&(n="input"),n}function WB(t){var e,n,r,s;const{validateOnInput:i,validateOnChange:o,validateOnBlur:a,validateOnModelUpdate:l}=Qs();return{validateOnInput:(e=t.validateOnInput)!==null&&e!==void 0?e:i,validateOnChange:(n=t.validateOnChange)!==null&&n!==void 0?n:o,validateOnBlur:(r=t.validateOnBlur)!==null&&r!==void 0?r:a,validateOnModelUpdate:(s=t.validateOnModelUpdate)!==null&&s!==void 0?s:l}}function KB(t,e){return wl(e.attrs.type)?zv(t,"modelValue")?t.modelValue:void 0:zv(t,"modelValue")?t.modelValue:e.attrs.value}const zB=HB;let QB=0;const zl=["bails","fieldsCount","id","multiple","type","validate"];function LA(t){const e=Object.assign({},qe((t==null?void 0:t.initialValues)||{})),n=$e(t==null?void 0:t.validationSchema);return n&&Fn(n)&&Ut(n.cast)?Ye(n.cast(e)||{}):Ye(e)}function YB(t){var e;const n=QB++;let r=0;const s=gt(!1),i=gt(!1),o=gt(0),a=[],l=Sr(LA(t)),c=gt([]),d=gt({}),u=gt({}),h=EB(()=>{u.value=c.value.reduce((A,R)=>(A[na(qe(R.path))]=R,A),{})});function f(A,R){const U=Q(A);if(!U){typeof A=="string"&&(d.value[na(A)]=Df(R));return}if(typeof A=="string"){const X=na(A);d.value[X]&&delete d.value[X]}U.errors=Df(R),U.valid=!U.errors.length}function m(A){En(A).forEach(R=>{f(R,A[R])})}t!=null&&t.initialErrors&&m(t.initialErrors);const y=ge(()=>{const A=c.value.reduce((R,U)=>(U.errors.length&&(R[U.path]=U.errors),R),{});return Object.assign(Object.assign({},d.value),A)}),g=ge(()=>En(y.value).reduce((A,R)=>{const U=y.value[R];return U!=null&&U.length&&(A[R]=U[0]),A},{})),v=ge(()=>c.value.reduce((A,R)=>(A[R.path]={name:R.path||"",label:R.label||""},A),{})),b=ge(()=>c.value.reduce((A,R)=>{var U;return A[R.path]=(U=R.bails)!==null&&U!==void 0?U:!0,A},{})),E=Object.assign({},(t==null?void 0:t.initialErrors)||{}),T=(e=t==null?void 0:t.keepValuesOnUnmount)!==null&&e!==void 0?e:!1,{initialValues:S,originalInitialValues:w,setInitialValues:D}=JB(c,l,t),O=XB(c,l,w,g),C=ge(()=>c.value.reduce((A,R)=>{const U=fn(l,R.path);return Gr(A,R.path,U),A},{})),z=t==null?void 0:t.validationSchema;function de(A,R){var U,X;const _e=ge(()=>fn(S.value,qe(A))),ce=u.value[qe(A)],Ve=(R==null?void 0:R.type)==="checkbox"||(R==null?void 0:R.type)==="radio";if(ce&&Ve){ce.multiple=!0;const Nn=r++;return Array.isArray(ce.id)?ce.id.push(Nn):ce.id=[ce.id,Nn],ce.fieldsCount++,ce.__flags.pendingUnmount[Nn]=!1,ce}const Le=ge(()=>fn(l,qe(A))),je=qe(A),St=Ie.findIndex(Nn=>Nn===je);St!==-1&&Ie.splice(St,1);const rt=ge(()=>{var Nn,xo,Ih,i_,Th,bh;return Fn(z)?(Ih=(xo=(Nn=z).describe)===null||xo===void 0?void 0:xo.call(Nn,qe(A)).required)!==null&&Ih!==void 0?Ih:!1:Fn(R==null?void 0:R.schema)&&(bh=(Th=(i_=R==null?void 0:R.schema).describe)===null||Th===void 0?void 0:Th.call(i_).required)!==null&&bh!==void 0?bh:!1}),jt=r++,an=Sr({id:jt,path:A,touched:!1,pending:!1,valid:!0,validated:!!(!((U=E[je])===null||U===void 0)&&U.length),required:rt,initialValue:_e,errors:hc([]),bails:(X=R==null?void 0:R.bails)!==null&&X!==void 0?X:!1,label:R==null?void 0:R.label,type:(R==null?void 0:R.type)||"default",value:Le,multiple:!1,__flags:{pendingUnmount:{[jt]:!1},pendingReset:!1},fieldsCount:1,validate:R==null?void 0:R.validate,dirty:ge(()=>!on($e(Le),$e(_e)))});return c.value.push(an),u.value[je]=an,h(),g.value[je]&&!E[je]&&cn(()=>{H(je,{mode:"silent"})}),at(A)&&tn(A,Nn=>{h();const xo=Ye(Le.value);u.value[Nn]=an,cn(()=>{Gr(l,Nn,xo)})}),an}const $=Jv(re,5),ie=Jv(re,5),we=xf(async A=>await(A==="silent"?$():ie()),(A,[R])=>{const U=En(le.errorBag.value),_e=[...new Set([...En(A.results),...c.value.map(ce=>ce.path),...U])].sort().reduce((ce,Ve)=>{var Le;const je=Ve,St=Q(je)||Ee(je),rt=((Le=A.results[je])===null||Le===void 0?void 0:Le.errors)||[],jt=qe(St==null?void 0:St.path)||je,an=ZB({errors:rt,valid:!rt.length},ce.results[jt]);return ce.results[jt]=an,an.valid||(ce.errors[jt]=an.errors[0]),St&&d.value[jt]&&delete d.value[jt],St?(St.valid=an.valid,R==="silent"||R==="validated-only"&&!St.validated||f(St,an.errors),ce):(f(jt,rt),ce)},{valid:A.valid,results:{},errors:{}});return A.values&&(_e.values=A.values),En(_e.results).forEach(ce=>{var Ve;const Le=Q(ce);Le&&R!=="silent"&&(R==="validated-only"&&!Le.validated||f(Le,(Ve=_e.results[ce])===null||Ve===void 0?void 0:Ve.errors))}),_e});function Ne(A){c.value.forEach(A)}function Q(A){const R=typeof A=="string"?na(A):A;return typeof R=="string"?u.value[R]:R}function Ee(A){return c.value.filter(U=>A.startsWith(U.path)).reduce((U,X)=>U?X.path.length>U.path.length?X:U:X,void 0)}let Ie=[],nt;function Et(A){return Ie.push(A),nt||(nt=cn(()=>{[...Ie].sort().reverse().forEach(U=>{Yv(l,U)}),Ie=[],nt=null})),nt}function Ze(A){return function(U,X){return function(ce){return ce instanceof Event&&(ce.preventDefault(),ce.stopPropagation()),Ne(Ve=>Ve.touched=!0),s.value=!0,o.value++,F().then(Ve=>{const Le=Ye(l);if(Ve.valid&&typeof U=="function"){const je=Ye(C.value);let St=A?je:Le;return Ve.values&&(St=Ve.values),U(St,{evt:ce,controlledValues:je,setErrors:m,setFieldError:f,setTouched:I,setFieldTouched:ve,setValues:W,setFieldValue:V,resetForm:k,resetField:P})}!Ve.valid&&typeof X=="function"&&X({values:Le,evt:ce,errors:Ve.errors,results:Ve.results})}).then(Ve=>(s.value=!1,Ve),Ve=>{throw s.value=!1,Ve})}}}const Qe=Ze(!1);Qe.withControlled=Ze(!0);function Vt(A,R){const U=c.value.findIndex(_e=>_e.path===A&&(Array.isArray(_e.id)?_e.id.includes(R):_e.id===R)),X=c.value[U];if(!(U===-1||!X)){if(cn(()=>{H(A,{mode:"silent",warn:!1})}),X.multiple&&X.fieldsCount&&X.fieldsCount--,Array.isArray(X.id)){const _e=X.id.indexOf(R);_e>=0&&X.id.splice(_e,1),delete X.__flags.pendingUnmount[R]}(!X.multiple||X.fieldsCount<=0)&&(c.value.splice(U,1),G(A),h(),delete u.value[A])}}function se(A){En(u.value).forEach(R=>{R.startsWith(A)&&delete u.value[R]}),c.value=c.value.filter(R=>!R.path.startsWith(A)),cn(()=>{h()})}const le={formId:n,values:l,controlledValues:C,errorBag:y,errors:g,schema:z,submitCount:o,meta:O,isSubmitting:s,isValidating:i,fieldArrays:a,keepValuesOnUnmount:T,validateSchema:$e(z)?we:void 0,validate:F,setFieldError:f,validateField:H,setFieldValue:V,setValues:W,setErrors:m,setFieldTouched:ve,setTouched:I,resetForm:k,resetField:P,handleSubmit:Qe,useFieldModel:N,defineInputBinds:M,defineComponentBinds:he,defineField:Z,stageInitialValue:Y,unsetInitialValue:G,setFieldInitialValue:q,createPathState:de,getPathState:Q,unsetPathValue:Et,removePathState:Vt,initialValues:S,getAllPathStates:()=>c.value,destroyPath:se,isFieldTouched:Be,isFieldDirty:_,isFieldValid:p};function V(A,R,U=!0){const X=Ye(R),_e=typeof A=="string"?A:A.path;Q(_e)||de(_e),Gr(l,_e,X),U&&H(_e)}function B(A,R=!0){En(l).forEach(U=>{delete l[U]}),En(A).forEach(U=>{V(U,A[U],!1)}),R&&F()}function W(A,R=!0){Qa(l,A),a.forEach(U=>U&&U.reset()),R&&F()}function J(A,R){const U=Q(qe(A))||de(A);return ge({get(){return U.value},set(X){var _e;const ce=qe(A);V(ce,X,(_e=qe(R))!==null&&_e!==void 0?_e:!1)}})}function ve(A,R){const U=Q(A);U&&(U.touched=R)}function Be(A){const R=Q(A);return R?R.touched:c.value.filter(U=>U.path.startsWith(A)).some(U=>U.touched)}function _(A){const R=Q(A);return R?R.dirty:c.value.filter(U=>U.path.startsWith(A)).some(U=>U.dirty)}function p(A){const R=Q(A);return R?R.valid:c.value.filter(U=>U.path.startsWith(A)).every(U=>U.valid)}function I(A){if(typeof A=="boolean"){Ne(R=>{R.touched=A});return}En(A).forEach(R=>{ve(R,!!A[R])})}function P(A,R){var U;const X=R&&"value"in R?R.value:fn(S.value,A),_e=Q(A);_e&&(_e.__flags.pendingReset=!0),q(A,Ye(X),!0),V(A,X,!1),ve(A,(U=R==null?void 0:R.touched)!==null&&U!==void 0?U:!1),f(A,(R==null?void 0:R.errors)||[]),cn(()=>{_e&&(_e.__flags.pendingReset=!1)})}function k(A,R){let U=Ye(A!=null&&A.values?A.values:w.value);U=R!=null&&R.force?U:Qa(w.value,U),U=Fn(z)&&Ut(z.cast)?z.cast(U):U,D(U),Ne(X=>{var _e;X.__flags.pendingReset=!0,X.validated=!1,X.touched=((_e=A==null?void 0:A.touched)===null||_e===void 0?void 0:_e[X.path])||!1,V(X.path,fn(U,X.path),!1),f(X.path,void 0)}),R!=null&&R.force?B(U,!1):W(U,!1),m((A==null?void 0:A.errors)||{}),o.value=(A==null?void 0:A.submitCount)||0,cn(()=>{F({mode:"silent"}),Ne(X=>{X.__flags.pendingReset=!1})})}async function F(A){const R=(A==null?void 0:A.mode)||"force";if(R==="force"&&Ne(ce=>ce.validated=!0),le.validateSchema)return le.validateSchema(R);i.value=!0;const U=await Promise.all(c.value.map(ce=>ce.validate?ce.validate(A).then(Ve=>({key:ce.path,valid:Ve.valid,errors:Ve.errors})):Promise.resolve({key:ce.path,valid:!0,errors:[]})));i.value=!1;const X={},_e={};for(const ce of U)X[ce.key]={valid:ce.valid,errors:ce.errors},ce.errors.length&&(_e[ce.key]=ce.errors[0]);return{valid:U.every(ce=>ce.valid),results:X,errors:_e}}async function H(A,R){var U;const X=Q(A);if(X&&(R==null?void 0:R.mode)!=="silent"&&(X.validated=!0),z){const{results:_e}=await we((R==null?void 0:R.mode)||"validated-only");return _e[A]||{errors:[],valid:!0}}return X!=null&&X.validate?X.validate(R):(!X&&(U=R==null?void 0:R.warn),Promise.resolve({errors:[],valid:!0}))}function G(A){Yv(S.value,A)}function Y(A,R,U=!1){q(A,R),Gr(l,A,R),U&&!(t!=null&&t.initialValues)&&Gr(w.value,A,Ye(R))}function q(A,R,U=!1){Gr(S.value,A,Ye(R)),U&&Gr(w.value,A,Ye(R))}async function re(){const A=$e(z);if(!A)return{valid:!0,results:{},errors:{}};i.value=!0;const R=nc(A)||Fn(A)?await DB(A,l):await VB(A,l,{names:v.value,bailsMap:b.value});return i.value=!1,R}const fe=Qe((A,{evt:R})=>{PA(R)&&R.target.submit()});Xa(()=>{if(t!=null&&t.initialErrors&&m(t.initialErrors),t!=null&&t.initialTouched&&I(t.initialTouched),t!=null&&t.validateOnMount){F();return}le.validateSchema&&le.validateSchema("silent")}),at(z)&&tn(z,()=>{var A;(A=le.validateSchema)===null||A===void 0||A.call(le,"validated-only")}),Qi(yh,le);function Z(A,R){const U=Ut(R)||R==null?void 0:R.label,X=Q(qe(A))||de(A,{label:U}),_e=()=>Ut(R)?R(Kl(X,zl)):R||{};function ce(){var rt;X.touched=!0,((rt=_e().validateOnBlur)!==null&&rt!==void 0?rt:Qs().validateOnBlur)&&H(X.path)}function Ve(){var rt;((rt=_e().validateOnInput)!==null&&rt!==void 0?rt:Qs().validateOnInput)&&cn(()=>{H(X.path)})}function Le(){var rt;((rt=_e().validateOnChange)!==null&&rt!==void 0?rt:Qs().validateOnChange)&&cn(()=>{H(X.path)})}const je=ge(()=>{const rt={onChange:Le,onInput:Ve,onBlur:ce};return Ut(R)?Object.assign(Object.assign({},rt),R(Kl(X,zl)).props||{}):R!=null&&R.props?Object.assign(Object.assign({},rt),R.props(Kl(X,zl))):rt});return[J(A,()=>{var rt,jt,an;return(an=(rt=_e().validateOnModelUpdate)!==null&&rt!==void 0?rt:(jt=Qs())===null||jt===void 0?void 0:jt.validateOnModelUpdate)!==null&&an!==void 0?an:!0}),je]}function N(A){return Array.isArray(A)?A.map(R=>J(R,!0)):J(A)}function M(A,R){const[U,X]=Z(A,R);function _e(){X.value.onBlur()}function ce(Le){const je=rc(Le);V(qe(A),je,!1),X.value.onInput()}function Ve(Le){const je=rc(Le);V(qe(A),je,!1),X.value.onChange()}return ge(()=>Object.assign(Object.assign({},X.value),{onBlur:_e,onInput:ce,onChange:Ve,value:U.value}))}function he(A,R){const[U,X]=Z(A,R),_e=Q(qe(A));function ce(Ve){U.value=Ve}return ge(()=>{const Ve=Ut(R)?R(Kl(_e,zl)):R||{};return Object.assign({[Ve.model||"modelValue"]:U.value,[`onUpdate:${Ve.model||"modelValue"}`]:ce},X.value)})}return Object.assign(Object.assign({},le),{values:Yf(l),handleReset:()=>k(),submitForm:fe})}function XB(t,e,n,r){const s={touched:"some",pending:"some",valid:"every"},i=ge(()=>!on(e,$e(n)));function o(){const l=t.value;return En(s).reduce((c,d)=>{const u=s[d];return c[d]=l[u](h=>h[d]),c},{})}const a=Sr(o());return _R(()=>{const l=o();a.touched=l.touched,a.valid=l.valid,a.pending=l.pending}),ge(()=>Object.assign(Object.assign({initialValues:$e(n)},a),{valid:a.valid&&!En(r.value).length,dirty:i.value}))}function JB(t,e,n){const r=LA(n),s=gt(r),i=gt(Ye(r));function o(a,l=!1){s.value=Qa(Ye(s.value)||{},Ye(a)),i.value=Qa(Ye(i.value)||{},Ye(a)),l&&t.value.forEach(c=>{if(c.touched)return;const u=fn(s.value,c.path);Gr(e,c.path,Ye(u))})}return{initialValues:s,originalInitialValues:i,setInitialValues:o}}function ZB(t,e){return e?{valid:t.valid&&e.valid,errors:[...t.errors,...e.errors]}:t}const e4=ys({name:"Form",inheritAttrs:!1,props:{as:{type:null,default:"form"},validationSchema:{type:Object,default:void 0},initialValues:{type:Object,default:void 0},initialErrors:{type:Object,default:void 0},initialTouched:{type:Object,default:void 0},validateOnMount:{type:Boolean,default:!1},onSubmit:{type:Function,default:void 0},onInvalidSubmit:{type:Function,default:void 0},keepValues:{type:Boolean,default:!1}},setup(t,e){const n=Fs(t,"validationSchema"),r=Fs(t,"keepValues"),{errors:s,errorBag:i,values:o,meta:a,isSubmitting:l,isValidating:c,submitCount:d,controlledValues:u,validate:h,validateField:f,handleReset:m,resetForm:y,handleSubmit:g,setErrors:v,setFieldError:b,setFieldValue:E,setValues:T,setFieldTouched:S,setTouched:w,resetField:D}=YB({validationSchema:n.value?n:void 0,initialValues:t.initialValues,initialErrors:t.initialErrors,initialTouched:t.initialTouched,validateOnMount:t.validateOnMount,keepValuesOnUnmount:r}),O=g((Q,{evt:Ee})=>{PA(Ee)&&Ee.target.submit()},t.onInvalidSubmit),C=t.onSubmit?g(t.onSubmit,t.onInvalidSubmit):O;function z(Q){t_(Q)&&Q.preventDefault(),m(),typeof e.attrs.onReset=="function"&&e.attrs.onReset()}function de(Q,Ee){return g(typeof Q=="function"&&!Ee?Q:Ee,t.onInvalidSubmit)(Q)}function $(){return Ye(o)}function ie(){return Ye(a.value)}function we(){return Ye(s.value)}function Ne(){return{meta:a.value,errors:s.value,errorBag:i.value,values:o,isSubmitting:l.value,isValidating:c.value,submitCount:d.value,controlledValues:u.value,validate:h,validateField:f,handleSubmit:de,handleReset:m,submitForm:O,setErrors:v,setFieldError:b,setFieldValue:E,setValues:T,setFieldTouched:S,setTouched:w,resetForm:y,resetField:D,getValues:$,getMeta:ie,getErrors:we}}return e.expose({setFieldError:b,setErrors:v,setFieldValue:E,setValues:T,setFieldTouched:S,setTouched:w,resetForm:y,validate:h,validateField:f,resetField:D,getValues:$,getMeta:ie,getErrors:we,values:o,meta:a,errors:s}),function(){const Ee=t.as==="form"?t.as:t.as?mc(t.as):null,Ie=r_(Ee,e,Ne);return Ee?Rr(Ee,Object.assign(Object.assign(Object.assign({},Ee==="form"?{novalidate:!0}:{}),e.attrs),{onSubmit:C,onReset:z}),Ie):Ie}}}),t4=e4,n4=ys({name:"ErrorMessage",props:{as:{type:String,default:void 0},name:{type:String,required:!0}},setup(t,e){const n=bn(yh,void 0),r=ge(()=>n==null?void 0:n.errors.value[t.name]);function s(){return{message:r.value}}return()=>{if(!r.value)return;const i=t.as?mc(t.as):t.as,o=r_(i,e,s),a=Object.assign({role:"alert"},e.attrs);return!i&&(Array.isArray(o)||!o)&&(o!=null&&o.length)?o:(Array.isArray(o)||!o)&&!(o!=null&&o.length)?Rr(i||"span",a,r.value):Rr(i,a,o)}}}),r4=n4;/**
  * vee-validate v4.12.6
  * (c) 2024 Abdelrahman Awad
  * @license MIT
  */const Ql={en:/^[A-Z\s]*$/i,cs:/^[A-Z\s]*$/i,da:/^[A-Z\s]*$/i,de:/^[A-Z\s]*$/i,es:/^[A-Z\s]*$/i,fr:/^[A-Z\s]*$/i,it:/^[A-Z\xC0-\xFF\s]*$/i,lt:/^[A-Z\s]*$/i,nl:/^[A-Z\s]*$/i,hu:/^[A-Z\s]*$/i,pl:/^[A-Z\s]*$/i,pt:/^[A-Z\s]*$/i,ru:/^[-\s]*$/i,kz:/^[-\u04D8\u04B0\u0406\u04A2\u0492\u04AE\u049A\u04E8\u04BA\s]*$/i,sk:/^[A-Z\s]*$/i,sr:/^[A-Z\s]*$/i,sv:/^[A-Z\s]*$/i,tr:/^[A-Z\s]*$/i,uk:/^[-\s]*$/i,ar:/^[\s]*$/,az:/^[A-Z\s]*$/i,ug:/^[A-Z\s]*$/i},s4=t=>{if(t)return Array.isArray(t)?t[0]:t.locale};function Al(t,e){return Array.isArray(t)?t[0]:t[e]}function Ps(t){return!!(t==null||t===""||Array.isArray(t)&&t.length===0)}const MA=(t,e)=>{if(Ps(t))return!0;const n=s4(e);if(Array.isArray(t))return t.every(s=>MA(s,{locale:n}));const r=String(t);return n?(Ql[n]||Ql.en).test(r):Object.keys(Ql).some(s=>Ql[s].test(r))},i4=(t,e)=>{const n=Al(e,"target");return String(t)===String(n)},nE=/^(?!\.)(?!.*\.\.)([A-Z0-9_+-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,o4=t=>Ps(t)?!0:Array.isArray(t)?t.every(e=>nE.test(String(e))):nE.test(String(t)),FA=(t,e)=>{if(Ps(t))return!0;const n=Al(e,"length");return Array.isArray(t)?t.every(r=>FA(r,{length:n})):[...String(t)].length<=Number(n)},UA=(t,e)=>{if(Ps(t))return!0;const n=Al(e,"max");return Array.isArray(t)?t.length>0&&t.every(r=>UA(r,{max:n})):Number(t)<=Number(n)},$A=(t,e)=>{if(Ps(t))return!0;const n=Al(e,"length");return Array.isArray(t)?t.every(r=>$A(r,{length:n})):[...String(t)].length>=Number(n)},BA=(t,e)=>{if(Ps(t))return!0;const n=Al(e,"min");return Array.isArray(t)?t.length>0&&t.every(r=>BA(r,{min:n})):Number(t)>=Number(n)},jA=(t,e)=>Ps(t)?!0:Array.isArray(t)?t.every(n=>jA(n,e)):Array.from(e).some(n=>n==t),rE=(t,e)=>Ps(t)?!0:!jA(t,e);function a4(t){return t==null}function l4(t){return Array.isArray(t)&&t.length===0}const sE=t=>a4(t)||l4(t)||t===!1?!1:!!String(t).trim().length,u4={install(t){t.component("VeeForm",t4),t.component("VeeField",zB),t.component("ErrorMessage",r4),Dn("required",sE),Dn("tos",sE),Dn("min",$A),Dn("max",FA),Dn("email",o4),Dn("passwords_mismatch",i4),Dn("max_value",UA),Dn("min_value",BA),Dn("alpha_spaces",MA),Dn("excluded",rE),Dn("country_excluded",rE),PB({generateMessage:e=>{const n={required:`The field ${e.field} is required.`,min:`The field ${e.field} is too short.`,max:`The field ${e.field} is too long.`,email:`The field ${e.field} must be a valid email.`,passwords_mismatch:"The passwords do not match.",min_value:`The field ${e.field} is too low.`,max_value:`The field ${e.field} is too high.`,alpha_spaces:`The field ${e.field} may only contain alphabetic characters and spaces.`,excluded:`You are not allowed to use this value for the field ${e.field}.`,country_excluded:"Due to restrictions, we do not accept users from this location.",tos:"You must accept the Terms of Service."};return n[e.rule.name]?n[e.rule.name]:`The field ${e.field} is invalid.`},validateOnBlur:!0,validateOnChange:!0,validateOnInput:!1,validateOnModelUpdate:!0})}},c4={},h4={type:"button",class:"rounded bg-blue-500 px-4 py-2 font-bold text-white hover:bg-blue-700"};function d4(t,e){return Ct(),pn("button",h4," Test Button ")}const f4=Si(c4,[["render",d4]]),m4=Object.freeze(Object.defineProperty({__proto__:null,default:f4},Symbol.toStringTag,{value:"Module"}));function p4(t,e,n){var r=-1,s=t.length;e<0&&(e=-e>s?0:s+e),n=n>s?s:n,n<0&&(n+=s),s=e>n?0:n-e>>>0,e>>>=0;for(var i=Array(s);++r<s;)i[r]=t[r+e];return i}var _4=p4,g4=_4;function y4(t,e,n){var r=t.length;return n=n===void 0?r:n,!e&&n>=r?t:g4(t,e,n)}var v4=y4,E4="\\ud800-\\udfff",I4="\\u0300-\\u036f",T4="\\ufe20-\\ufe2f",b4="\\u20d0-\\u20ff",w4=I4+T4+b4,A4="\\ufe0e\\ufe0f",S4="\\u200d",R4=RegExp("["+S4+E4+w4+A4+"]");function P4(t){return R4.test(t)}var qA=P4;function C4(t){return t.split("")}var O4=C4,GA="\\ud800-\\udfff",k4="\\u0300-\\u036f",N4="\\ufe20-\\ufe2f",x4="\\u20d0-\\u20ff",D4=k4+N4+x4,V4="\\ufe0e\\ufe0f",L4="["+GA+"]",Mf="["+D4+"]",Ff="\\ud83c[\\udffb-\\udfff]",M4="(?:"+Mf+"|"+Ff+")",HA="[^"+GA+"]",WA="(?:\\ud83c[\\udde6-\\uddff]){2}",KA="[\\ud800-\\udbff][\\udc00-\\udfff]",F4="\\u200d",zA=M4+"?",QA="["+V4+"]?",U4="(?:"+F4+"(?:"+[HA,WA,KA].join("|")+")"+QA+zA+")*",$4=QA+zA+U4,B4="(?:"+[HA+Mf+"?",Mf,WA,KA,L4].join("|")+")",j4=RegExp(Ff+"(?="+Ff+")|"+B4+$4,"g");function q4(t){return t.match(j4)||[]}var G4=q4,H4=O4,W4=qA,K4=G4;function z4(t){return W4(t)?K4(t):H4(t)}var Q4=z4,Y4=typeof Kn=="object"&&Kn&&Kn.Object===Object&&Kn,X4=Y4,J4=X4,Z4=typeof self=="object"&&self&&self.Object===Object&&self,ej=J4||Z4||Function("return this")(),tj=ej,nj=tj,rj=nj.Symbol,s_=rj;function sj(t,e){for(var n=-1,r=t==null?0:t.length,s=Array(r);++n<r;)s[n]=e(t[n],n,t);return s}var ij=sj,oj=Array.isArray,aj=oj,iE=s_,YA=Object.prototype,lj=YA.hasOwnProperty,uj=YA.toString,Wo=iE?iE.toStringTag:void 0;function cj(t){var e=lj.call(t,Wo),n=t[Wo];try{t[Wo]=void 0;var r=!0}catch{}var s=uj.call(t);return r&&(e?t[Wo]=n:delete t[Wo]),s}var hj=cj,dj=Object.prototype,fj=dj.toString;function mj(t){return fj.call(t)}var pj=mj,oE=s_,_j=hj,gj=pj,yj="[object Null]",vj="[object Undefined]",aE=oE?oE.toStringTag:void 0;function Ej(t){return t==null?t===void 0?vj:yj:aE&&aE in Object(t)?_j(t):gj(t)}var Ij=Ej;function Tj(t){return t!=null&&typeof t=="object"}var bj=Tj,wj=Ij,Aj=bj,Sj="[object Symbol]";function Rj(t){return typeof t=="symbol"||Aj(t)&&wj(t)==Sj}var Pj=Rj,lE=s_,Cj=ij,Oj=aj,kj=Pj,Nj=1/0,uE=lE?lE.prototype:void 0,cE=uE?uE.toString:void 0;function XA(t){if(typeof t=="string")return t;if(Oj(t))return Cj(t,XA)+"";if(kj(t))return cE?cE.call(t):"";var e=t+"";return e=="0"&&1/t==-Nj?"-0":e}var xj=XA,Dj=xj;function Vj(t){return t==null?"":Dj(t)}var Eh=Vj,Lj=v4,Mj=qA,Fj=Q4,Uj=Eh;function $j(t){return function(e){e=Uj(e);var n=Mj(e)?Fj(e):void 0,r=n?n[0]:e.charAt(0),s=n?Lj(n,1).join(""):e.slice(1);return r[t]()+s}}var Bj=$j,jj=Bj,qj=jj("toUpperCase"),JA=qj;const Gj=qp(JA);var Hj=Eh,Wj=JA;function Kj(t){return Wj(Hj(t).toLowerCase())}var zj=Kj;function Qj(t,e,n,r){var s=-1,i=t==null?0:t.length;for(r&&i&&(n=t[++s]);++s<i;)n=e(n,t[s],s,t);return n}var Yj=Qj;function Xj(t){return function(e){return t==null?void 0:t[e]}}var Jj=Xj,Zj=Jj,eq={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},tq=Zj(eq),nq=tq,rq=nq,sq=Eh,iq=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,oq="\\u0300-\\u036f",aq="\\ufe20-\\ufe2f",lq="\\u20d0-\\u20ff",uq=oq+aq+lq,cq="["+uq+"]",hq=RegExp(cq,"g");function dq(t){return t=sq(t),t&&t.replace(iq,rq).replace(hq,"")}var fq=dq,mq=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;function pq(t){return t.match(mq)||[]}var _q=pq,gq=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;function yq(t){return gq.test(t)}var vq=yq,ZA="\\ud800-\\udfff",Eq="\\u0300-\\u036f",Iq="\\ufe20-\\ufe2f",Tq="\\u20d0-\\u20ff",bq=Eq+Iq+Tq,eS="\\u2700-\\u27bf",tS="a-z\\xdf-\\xf6\\xf8-\\xff",wq="\\xac\\xb1\\xd7\\xf7",Aq="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Sq="\\u2000-\\u206f",Rq=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",nS="A-Z\\xc0-\\xd6\\xd8-\\xde",Pq="\\ufe0e\\ufe0f",rS=wq+Aq+Sq+Rq,sS="[']",hE="["+rS+"]",Cq="["+bq+"]",iS="\\d+",Oq="["+eS+"]",oS="["+tS+"]",aS="[^"+ZA+rS+iS+eS+tS+nS+"]",kq="\\ud83c[\\udffb-\\udfff]",Nq="(?:"+Cq+"|"+kq+")",xq="[^"+ZA+"]",lS="(?:\\ud83c[\\udde6-\\uddff]){2}",uS="[\\ud800-\\udbff][\\udc00-\\udfff]",Bi="["+nS+"]",Dq="\\u200d",dE="(?:"+oS+"|"+aS+")",Vq="(?:"+Bi+"|"+aS+")",fE="(?:"+sS+"(?:d|ll|m|re|s|t|ve))?",mE="(?:"+sS+"(?:D|LL|M|RE|S|T|VE))?",cS=Nq+"?",hS="["+Pq+"]?",Lq="(?:"+Dq+"(?:"+[xq,lS,uS].join("|")+")"+hS+cS+")*",Mq="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Fq="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Uq=hS+cS+Lq,$q="(?:"+[Oq,lS,uS].join("|")+")"+Uq,Bq=RegExp([Bi+"?"+oS+"+"+fE+"(?="+[hE,Bi,"$"].join("|")+")",Vq+"+"+mE+"(?="+[hE,Bi+dE,"$"].join("|")+")",Bi+"?"+dE+"+"+fE,Bi+"+"+mE,Fq,Mq,iS,$q].join("|"),"g");function jq(t){return t.match(Bq)||[]}var qq=jq,Gq=_q,Hq=vq,Wq=Eh,Kq=qq;function zq(t,e,n){return t=Wq(t),e=n?void 0:e,e===void 0?Hq(t)?Kq(t):Gq(t):t.match(e)||[]}var Qq=zq,Yq=Yj,Xq=fq,Jq=Qq,Zq="[']",e9=RegExp(Zq,"g");function t9(t){return function(e){return Yq(Jq(Xq(e).replace(e9,"")),t,"")}}var n9=t9,r9=zj,s9=n9,i9=s9(function(t,e,n){return e=e.toLowerCase(),t+(n?r9(e):e)}),o9=i9;const a9=qp(o9),l9={install(t){Object.entries(Object.assign({"../components/base/TestButton.vue":m4})).forEach(([n,r])=>{const s=Gj(a9(n.split("/").pop().replace(/\.\w+$/,"")));t.component(`Base${s}`,r.default)})}};var dS={exports:{}};/* NProgress, (c) 2013, 2014 Rico Sta. Cruz - http://ricostacruz.com/nprogress
 * @license MIT */(function(t,e){(function(n,r){t.exports=r()})(Kn,function(){var n={};n.version="0.2.0";var r=n.settings={minimum:.08,easing:"ease",positionUsing:"",speed:200,trickle:!0,trickleRate:.02,trickleSpeed:800,showSpinner:!0,barSelector:'[role="bar"]',spinnerSelector:'[role="spinner"]',parent:"body",template:'<div class="bar" role="bar"><div class="peg"></div></div><div class="spinner" role="spinner"><div class="spinner-icon"></div></div>'};n.configure=function(m){var y,g;for(y in m)g=m[y],g!==void 0&&m.hasOwnProperty(y)&&(r[y]=g);return this},n.status=null,n.set=function(m){var y=n.isStarted();m=s(m,r.minimum,1),n.status=m===1?null:m;var g=n.render(!y),v=g.querySelector(r.barSelector),b=r.speed,E=r.easing;return g.offsetWidth,a(function(T){r.positionUsing===""&&(r.positionUsing=n.getPositioningCSS()),l(v,o(m,b,E)),m===1?(l(g,{transition:"none",opacity:1}),g.offsetWidth,setTimeout(function(){l(g,{transition:"all "+b+"ms linear",opacity:0}),setTimeout(function(){n.remove(),T()},b)},b)):setTimeout(T,b)}),this},n.isStarted=function(){return typeof n.status=="number"},n.start=function(){n.status||n.set(0);var m=function(){setTimeout(function(){n.status&&(n.trickle(),m())},r.trickleSpeed)};return r.trickle&&m(),this},n.done=function(m){return!m&&!n.status?this:n.inc(.3+.5*Math.random()).set(1)},n.inc=function(m){var y=n.status;return y?(typeof m!="number"&&(m=(1-y)*s(Math.random()*y,.1,.95)),y=s(y+m,0,.994),n.set(y)):n.start()},n.trickle=function(){return n.inc(Math.random()*r.trickleRate)},function(){var m=0,y=0;n.promise=function(g){return!g||g.state()==="resolved"?this:(y===0&&n.start(),m++,y++,g.always(function(){y--,y===0?(m=0,n.done()):n.set((m-y)/m)}),this)}}(),n.render=function(m){if(n.isRendered())return document.getElementById("nprogress");d(document.documentElement,"nprogress-busy");var y=document.createElement("div");y.id="nprogress",y.innerHTML=r.template;var g=y.querySelector(r.barSelector),v=m?"-100":i(n.status||0),b=document.querySelector(r.parent),E;return l(g,{transition:"all 0 linear",transform:"translate3d("+v+"%,0,0)"}),r.showSpinner||(E=y.querySelector(r.spinnerSelector),E&&f(E)),b!=document.body&&d(b,"nprogress-custom-parent"),b.appendChild(y),y},n.remove=function(){u(document.documentElement,"nprogress-busy"),u(document.querySelector(r.parent),"nprogress-custom-parent");var m=document.getElementById("nprogress");m&&f(m)},n.isRendered=function(){return!!document.getElementById("nprogress")},n.getPositioningCSS=function(){var m=document.body.style,y="WebkitTransform"in m?"Webkit":"MozTransform"in m?"Moz":"msTransform"in m?"ms":"OTransform"in m?"O":"";return y+"Perspective"in m?"translate3d":y+"Transform"in m?"translate":"margin"};function s(m,y,g){return m<y?y:m>g?g:m}function i(m){return(-1+m)*100}function o(m,y,g){var v;return r.positionUsing==="translate3d"?v={transform:"translate3d("+i(m)+"%,0,0)"}:r.positionUsing==="translate"?v={transform:"translate("+i(m)+"%,0)"}:v={"margin-left":i(m)+"%"},v.transition="all "+y+"ms "+g,v}var a=function(){var m=[];function y(){var g=m.shift();g&&g(y)}return function(g){m.push(g),m.length==1&&y()}}(),l=function(){var m=["Webkit","O","Moz","ms"],y={};function g(T){return T.replace(/^-ms-/,"ms-").replace(/-([\da-z])/gi,function(S,w){return w.toUpperCase()})}function v(T){var S=document.body.style;if(T in S)return T;for(var w=m.length,D=T.charAt(0).toUpperCase()+T.slice(1),O;w--;)if(O=m[w]+D,O in S)return O;return T}function b(T){return T=g(T),y[T]||(y[T]=v(T))}function E(T,S,w){S=b(S),T.style[S]=w}return function(T,S){var w=arguments,D,O;if(w.length==2)for(D in S)O=S[D],O!==void 0&&S.hasOwnProperty(D)&&E(T,D,O);else E(T,w[1],w[2])}}();function c(m,y){var g=typeof m=="string"?m:h(m);return g.indexOf(" "+y+" ")>=0}function d(m,y){var g=h(m),v=g+y;c(g,y)||(m.className=v.substring(1))}function u(m,y){var g=h(m),v;c(m,y)&&(v=g.replace(" "+y+" "," "),m.className=v.substring(1,v.length-1))}function h(m){return(" "+(m.className||"")+" ").replace(/\s+/gi," ")}function f(m){m&&m.parentNode&&m.parentNode.removeChild(m)}return n})})(dS);var u9=dS.exports;const pE=qp(u9),c9=t=>{t.beforeEach((e,n,r)=>{pE.start(),r()}),t.afterEach(()=>{pE.done()})};oB({immediate:!0});c9(Wp);let mr;Xu.onAuthStateChanged(()=>{mr||(mr=MP(qF),mr.use(BP()),mr.use(Wp),mr.use(l9),mr.use(iB),mr.use(u4),mr.directive("icon",PM),mr.mount("#app"))});export{Tr as A,Js as B,ya as C,f9 as D,lm as E,Mt as F,v9 as G,dh as H,A9 as I,S9 as J,O9 as K,TI as L,Tl as M,dm as N,zy as O,D9 as P,m9 as Q,Si as _,oe as a,Ce as b,pn as c,oa as d,uw as e,E9 as f,b9 as g,x9 as h,w9 as i,h9 as j,d9 as k,I9 as l,OR as m,vu as n,Ct as o,k9 as p,y9 as q,mn as r,T9 as s,_r as t,N9 as u,P9 as v,Vn as w,C9 as x,Xu as y,R9 as z};
